const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eruda-indexeddb-BKNTatP3.js","assets/eruda-YMI1zNGq.js"])))=>i.map(i=>d[i]);
var _A=Object.defineProperty;var mg=t=>{throw TypeError(t)};var xA=(t,e,n)=>e in t?_A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var At=(t,e,n)=>xA(t,typeof e!="symbol"?e+"":e,n),EA=(t,e,n)=>e.has(t)||mg("Cannot "+n);var Jo=(t,e,n)=>(EA(t,e,"read from private field"),n?n.call(t):e.get(t)),gg=(t,e,n)=>e.has(t)?mg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const AA="modulepreload",SA=function(t){return"/manga-reader/"+t},yg={},Mi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(n.map(u=>{if(u=SA(u),u in yg)return;yg[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":AA,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const vt={},mo=[],ns=()=>{},$w=()=>!1,Wu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),hp=t=>t.startsWith("onUpdate:"),Cn=Object.assign,pp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},IA=Object.prototype.hasOwnProperty,ft=(t,e)=>IA.call(t,e),qe=Array.isArray,go=t=>Qa(t)==="[object Map]",jo=t=>Qa(t)==="[object Set]",vg=t=>Qa(t)==="[object Date]",He=t=>typeof t=="function",Ut=t=>typeof t=="string",Fr=t=>typeof t=="symbol",xt=t=>t!==null&&typeof t=="object",Lw=t=>(xt(t)||He(t))&&He(t.then)&&He(t.catch),Mw=Object.prototype.toString,Qa=t=>Mw.call(t),CA=t=>Qa(t).slice(8,-1),Nw=t=>Qa(t)==="[object Object]",Gu=t=>Ut(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,va=fp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ju=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},RA=/-\w/g,Kn=Ju(t=>t.replace(RA,e=>e.slice(1).toUpperCase())),TA=/\B([A-Z])/g,vi=Ju(t=>t.replace(TA,"-$1").toLowerCase()),Xu=Ju(t=>t.charAt(0).toUpperCase()+t.slice(1)),Jl=Ju(t=>t?`on${Xu(t)}`:""),si=(t,e)=>!Object.is(t,e),Xl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Fw=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Yu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let bg;const Qu=()=>bg||(bg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jr(t){if(qe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ut(r)?PA(r):jr(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ut(t)||xt(t))return t}const OA=/;(?![^(]*\))/g,DA=/:([^]+)/,kA=/\/\*[^]*?\*\//g;function PA(t){const e={};return t.replace(kA,"").split(OA).forEach(n=>{if(n){const r=n.split(DA);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ve(t){let e="";if(Ut(t))e=t;else if(qe(t))for(let n=0;n<t.length;n++){const r=Ve(t[n]);r&&(e+=r+" ")}else if(xt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Wn(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Ut(e)&&(t.class=Ve(e)),n&&(t.style=jr(n)),t}const $A="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",LA=fp($A);function jw(t){return!!t||t===""}function MA(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Za(t[r],e[r]);return n}function Za(t,e){if(t===e)return!0;let n=vg(t),r=vg(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Fr(t),r=Fr(e),n||r)return t===e;if(n=qe(t),r=qe(e),n||r)return n&&r?MA(t,e):!1;if(n=xt(t),r=xt(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Za(t[o],e[o]))return!1}}return String(t)===String(e)}function mp(t,e){return t.findIndex(n=>Za(n,e))}const Uw=t=>!!(t&&t.__v_isRef===!0),Te=t=>Ut(t)?t:t==null?"":qe(t)||xt(t)&&(t.toString===Mw||!He(t.toString))?Uw(t)?Te(t.value):JSON.stringify(t,qw,2):String(t),qw=(t,e)=>Uw(e)?qw(t,e.value):go(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Xc(r,i)+" =>"]=s,n),{})}:jo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Xc(n))}:Fr(e)?Xc(e):xt(e)&&!qe(e)&&!Nw(e)?String(e):e,Xc=(t,e="")=>{var n;return Fr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xn;class Bw{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xn,!e&&xn&&(this.index=(xn.scopes||(xn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=xn;try{return xn=this,e()}finally{xn=n}}}on(){++this._on===1&&(this.prevScope=xn,xn=this)}off(){this._on>0&&--this._on===0&&(xn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function el(t){return new Bw(t)}function tl(){return xn}function Zu(t,e=!1){xn&&xn.cleanups.push(t)}let Rt;const Yc=new WeakSet;class Vw{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xn&&xn.active&&xn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yc.has(this)&&(Yc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Hw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wg(this),Kw(this);const e=Rt,n=Mr;Rt=this,Mr=!0;try{return this.fn()}finally{Ww(this),Rt=e,Mr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)vp(e);this.deps=this.depsTail=void 0,wg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zf(this)&&this.run()}get dirty(){return zf(this)}}let zw=0,ba,wa;function Hw(t,e=!1){if(t.flags|=8,e){t.next=wa,wa=t;return}t.next=ba,ba=t}function gp(){zw++}function yp(){if(--zw>0)return;if(wa){let e=wa;for(wa=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ba;){let e=ba;for(ba=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Kw(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ww(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),vp(r),NA(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function zf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Gw(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Gw(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ma)||(t.globalVersion=Ma,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!zf(t))))return;t.flags|=2;const e=t.dep,n=Rt,r=Mr;Rt=t,Mr=!0;try{Kw(t);const s=t.fn(t._value);(e.version===0||si(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Rt=n,Mr=r,Ww(t),t.flags&=-3}}function vp(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)vp(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function NA(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Mr=!0;const Jw=[];function Ds(){Jw.push(Mr),Mr=!1}function ks(){const t=Jw.pop();Mr=t===void 0?!0:t}function wg(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Rt;Rt=void 0;try{e()}finally{Rt=n}}}let Ma=0;class FA{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ec{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Rt||!Mr||Rt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Rt)n=this.activeLink=new FA(Rt,this),Rt.deps?(n.prevDep=Rt.depsTail,Rt.depsTail.nextDep=n,Rt.depsTail=n):Rt.deps=Rt.depsTail=n,Xw(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Rt.depsTail,n.nextDep=void 0,Rt.depsTail.nextDep=n,Rt.depsTail=n,Rt.deps===n&&(Rt.deps=r)}return n}trigger(e){this.version++,Ma++,this.notify(e)}notify(e){gp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{yp()}}}function Xw(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Xw(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const mu=new WeakMap,Ni=Symbol(""),Hf=Symbol(""),Na=Symbol("");function En(t,e,n){if(Mr&&Rt){let r=mu.get(t);r||mu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new ec),s.map=r,s.key=n),s.track()}}function ws(t,e,n,r,s,i){const o=mu.get(t);if(!o){Ma++;return}const a=l=>{l&&l.trigger()};if(gp(),e==="clear")o.forEach(a);else{const l=qe(t),u=l&&Gu(n);if(l&&n==="length"){const c=Number(r);o.forEach((d,f)=>{(f==="length"||f===Na||!Fr(f)&&f>=c)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Na)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Ni)),go(t)&&a(o.get(Hf)));break;case"delete":l||(a(o.get(Ni)),go(t)&&a(o.get(Hf)));break;case"set":go(t)&&a(o.get(Ni));break}}yp()}function jA(t,e){const n=mu.get(t);return n&&n.get(e)}function Yi(t){const e=Ye(t);return e===t?e:(En(e,"iterate",Na),tr(t)?e:e.map(Ur))}function tc(t){return En(t=Ye(t),"iterate",Na),t}function Ws(t,e){return Ps(t)?Rs(t)?Io(Ur(e)):Io(e):Ur(e)}const UA={__proto__:null,[Symbol.iterator](){return Qc(this,Symbol.iterator,t=>Ws(this,t))},concat(...t){return Yi(this).concat(...t.map(e=>qe(e)?Yi(e):e))},entries(){return Qc(this,"entries",t=>(t[1]=Ws(this,t[1]),t))},every(t,e){return ms(this,"every",t,e,void 0,arguments)},filter(t,e){return ms(this,"filter",t,e,n=>n.map(r=>Ws(this,r)),arguments)},find(t,e){return ms(this,"find",t,e,n=>Ws(this,n),arguments)},findIndex(t,e){return ms(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ms(this,"findLast",t,e,n=>Ws(this,n),arguments)},findLastIndex(t,e){return ms(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ms(this,"forEach",t,e,void 0,arguments)},includes(...t){return Zc(this,"includes",t)},indexOf(...t){return Zc(this,"indexOf",t)},join(t){return Yi(this).join(t)},lastIndexOf(...t){return Zc(this,"lastIndexOf",t)},map(t,e){return ms(this,"map",t,e,void 0,arguments)},pop(){return Xo(this,"pop")},push(...t){return Xo(this,"push",t)},reduce(t,...e){return _g(this,"reduce",t,e)},reduceRight(t,...e){return _g(this,"reduceRight",t,e)},shift(){return Xo(this,"shift")},some(t,e){return ms(this,"some",t,e,void 0,arguments)},splice(...t){return Xo(this,"splice",t)},toReversed(){return Yi(this).toReversed()},toSorted(t){return Yi(this).toSorted(t)},toSpliced(...t){return Yi(this).toSpliced(...t)},unshift(...t){return Xo(this,"unshift",t)},values(){return Qc(this,"values",t=>Ws(this,t))}};function Qc(t,e,n){const r=tc(t),s=r[e]();return r!==t&&!tr(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const qA=Array.prototype;function ms(t,e,n,r,s,i){const o=tc(t),a=o!==t&&!tr(t),l=o[e];if(l!==qA[e]){const d=l.apply(t,i);return a?Ur(d):d}let u=n;o!==t&&(a?u=function(d,f){return n.call(this,Ws(t,d),f,t)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,t)}));const c=l.call(o,u,r);return a&&s?s(c):c}function _g(t,e,n,r){const s=tc(t);let i=n;return s!==t&&(tr(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Ws(t,a),l,t)}),s[e](i,...r)}function Zc(t,e,n){const r=Ye(t);En(r,"iterate",Na);const s=r[e](...n);return(s===-1||s===!1)&&sc(n[0])?(n[0]=Ye(n[0]),r[e](...n)):s}function Xo(t,e,n=[]){Ds(),gp();const r=Ye(t)[e].apply(t,n);return yp(),ks(),r}const BA=fp("__proto__,__v_isRef,__isVue"),Yw=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Fr));function VA(t){Fr(t)||(t=String(t));const e=Ye(this);return En(e,"has",t),e.hasOwnProperty(t)}class Qw{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?s_:r_:i?n_:t_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=qe(e);if(!s){let l;if(o&&(l=UA[n]))return l;if(n==="hasOwnProperty")return VA}const a=Reflect.get(e,n,Ot(e)?e:r);if((Fr(n)?Yw.has(n):BA(n))||(s||En(e,"get",n),i))return a;if(Ot(a)){const l=o&&Gu(n)?a:a.value;return s&&xt(l)?is(l):l}return xt(a)?s?is(a):Gn(a):a}}class Zw extends Qw{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=qe(e)&&Gu(n);if(!this._isShallow){const u=Ps(i);if(!tr(r)&&!Ps(r)&&(i=Ye(i),r=Ye(r)),!o&&Ot(i)&&!Ot(r))return u||(i.value=r),!0}const a=o?Number(n)<e.length:ft(e,n),l=Reflect.set(e,n,r,Ot(e)?e:s);return e===Ye(s)&&(a?si(r,i)&&ws(e,"set",n,r):ws(e,"add",n,r)),l}deleteProperty(e,n){const r=ft(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&ws(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Fr(n)||!Yw.has(n))&&En(e,"has",n),r}ownKeys(e){return En(e,"iterate",qe(e)?"length":Ni),Reflect.ownKeys(e)}}class e_ extends Qw{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const zA=new Zw,HA=new e_,KA=new Zw(!0),WA=new e_(!0),Kf=t=>t,wl=t=>Reflect.getPrototypeOf(t);function GA(t,e,n){return function(...r){const s=this.__v_raw,i=Ye(s),o=go(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),c=n?Kf:e?Io:Ur;return!e&&En(i,"iterate",l?Hf:Ni),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function _l(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function JA(t,e){const n={get(s){const i=this.__v_raw,o=Ye(i),a=Ye(s);t||(si(s,a)&&En(o,"get",s),En(o,"get",a));const{has:l}=wl(o),u=e?Kf:t?Io:Ur;if(l.call(o,s))return u(i.get(s));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&En(Ye(s),"iterate",Ni),s.size},has(s){const i=this.__v_raw,o=Ye(i),a=Ye(s);return t||(si(s,a)&&En(o,"has",s),En(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=Ye(a),u=e?Kf:t?Io:Ur;return!t&&En(l,"iterate",Ni),a.forEach((c,d)=>s.call(i,u(c),u(d),o))}};return Cn(n,t?{add:_l("add"),set:_l("set"),delete:_l("delete"),clear:_l("clear")}:{add(s){!e&&!tr(s)&&!Ps(s)&&(s=Ye(s));const i=Ye(this);return wl(i).has.call(i,s)||(i.add(s),ws(i,"add",s,s)),this},set(s,i){!e&&!tr(i)&&!Ps(i)&&(i=Ye(i));const o=Ye(this),{has:a,get:l}=wl(o);let u=a.call(o,s);u||(s=Ye(s),u=a.call(o,s));const c=l.call(o,s);return o.set(s,i),u?si(i,c)&&ws(o,"set",s,i):ws(o,"add",s,i),this},delete(s){const i=Ye(this),{has:o,get:a}=wl(i);let l=o.call(i,s);l||(s=Ye(s),l=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return l&&ws(i,"delete",s,void 0),u},clear(){const s=Ye(this),i=s.size!==0,o=s.clear();return i&&ws(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=GA(s,t,e)}),n}function nc(t,e){const n=JA(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ft(n,s)&&s in r?n:r,s,i)}const XA={get:nc(!1,!1)},YA={get:nc(!1,!0)},QA={get:nc(!0,!1)},ZA={get:nc(!0,!0)},t_=new WeakMap,n_=new WeakMap,r_=new WeakMap,s_=new WeakMap;function eS(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function tS(t){return t.__v_skip||!Object.isExtensible(t)?0:eS(CA(t))}function Gn(t){return Ps(t)?t:rc(t,!1,zA,XA,t_)}function i_(t){return rc(t,!1,KA,YA,n_)}function is(t){return rc(t,!0,HA,QA,r_)}function Qi(t){return rc(t,!0,WA,ZA,s_)}function rc(t,e,n,r,s){if(!xt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=tS(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Rs(t){return Ps(t)?Rs(t.__v_raw):!!(t&&t.__v_isReactive)}function Ps(t){return!!(t&&t.__v_isReadonly)}function tr(t){return!!(t&&t.__v_isShallow)}function sc(t){return t?!!t.__v_raw:!1}function Ye(t){const e=t&&t.__v_raw;return e?Ye(e):t}function st(t){return!ft(t,"__v_skip")&&Object.isExtensible(t)&&Fw(t,"__v_skip",!0),t}const Ur=t=>xt(t)?Gn(t):t,Io=t=>xt(t)?is(t):t;function Ot(t){return t?t.__v_isRef===!0:!1}function _e(t){return o_(t,!1)}function sr(t){return o_(t,!0)}function o_(t,e){return Ot(t)?t:new nS(t,e)}class nS{constructor(e,n){this.dep=new ec,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ye(e),this._value=n?e:Ur(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||tr(e)||Ps(e);e=r?e:Ye(e),si(e,n)&&(this._rawValue=e,this._value=r?e:Ur(e),this.dep.trigger())}}function A(t){return Ot(t)?t.value:t}function pn(t){return He(t)?t():A(t)}const rS={get:(t,e,n)=>e==="__v_raw"?t:A(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ot(s)&&!Ot(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function a_(t){return Rs(t)?t:new Proxy(t,rS)}class sS{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new ec,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function ic(t){return new sS(t)}function or(t){const e=qe(t)?new Array(t.length):{};for(const n in t)e[n]=l_(t,n);return e}class iS{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=Ye(e);let s=!0,i=e;if(!qe(e)||!Gu(String(n)))do s=!sc(i)||tr(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=A(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&Ot(this._raw[this._key])){const n=this._object[this._key];if(Ot(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return jA(this._raw,this._key)}}class oS{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function aS(t,e,n){return Ot(t)?t:He(t)?new oS(t):xt(t)&&arguments.length>1?l_(t,e,n):_e(t)}function l_(t,e,n){return new iS(t,e,n)}class lS{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ec(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ma-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Rt!==this)return Hw(this,!0),!0}get value(){const e=this.dep.track();return Gw(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function uS(t,e,n=!1){let r,s;return He(t)?r=t:(r=t.get,s=t.set),new lS(r,s,n)}const xl={},gu=new WeakMap;let Di;function cS(t,e=!1,n=Di){if(n){let r=gu.get(n);r||gu.set(n,r=[]),r.push(t)}}function dS(t,e,n=vt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,u=p=>s?p:tr(p)||s===!1||s===0?_s(p,1):_s(p);let c,d,f,h,m=!1,g=!1;if(Ot(t)?(d=()=>t.value,m=tr(t)):Rs(t)?(d=()=>u(t),m=!0):qe(t)?(g=!0,m=t.some(p=>Rs(p)||tr(p)),d=()=>t.map(p=>{if(Ot(p))return p.value;if(Rs(p))return u(p);if(He(p))return l?l(p,2):p()})):He(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Ds();try{f()}finally{ks()}}const p=Di;Di=c;try{return l?l(t,3,[h]):t(h)}finally{Di=p}}:d=ns,e&&s){const p=d,v=s===!0?1/0:s;d=()=>_s(p(),v)}const x=tl(),b=()=>{c.stop(),x&&x.active&&pp(x.effects,c)};if(i&&e){const p=e;e=(...v)=>{p(...v),b()}}let E=g?new Array(t.length).fill(xl):xl;const _=p=>{if(!(!(c.flags&1)||!c.dirty&&!p))if(e){const v=c.run();if(s||m||(g?v.some((S,C)=>si(S,E[C])):si(v,E))){f&&f();const S=Di;Di=c;try{const C=[v,E===xl?void 0:g&&E[0]===xl?[]:E,h];E=v,l?l(e,3,C):e(...C)}finally{Di=S}}}else c.run()};return a&&a(_),c=new Vw(d),c.scheduler=o?()=>o(_,!1):_,h=p=>cS(p,!1,c),f=c.onStop=()=>{const p=gu.get(c);if(p){if(l)l(p,4);else for(const v of p)v();gu.delete(c)}},e?r?_(!0):E=c.run():o?o(_.bind(null,!0),!0):c.run(),b.pause=c.pause.bind(c),b.resume=c.resume.bind(c),b.stop=b,b}function _s(t,e=1/0,n){if(e<=0||!xt(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Ot(t))_s(t.value,e,n);else if(qe(t))for(let r=0;r<t.length;r++)_s(t[r],e,n);else if(jo(t)||go(t))t.forEach(r=>{_s(r,e,n)});else if(Nw(t)){for(const r in t)_s(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&_s(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nl(t,e,n,r){try{return r?t(...r):t()}catch(s){oc(s,e,n)}}function os(t,e,n,r){if(He(t)){const s=nl(t,e,n,r);return s&&Lw(s)&&s.catch(i=>{oc(i,e,n)}),s}if(qe(t)){const s=[];for(let i=0;i<t.length;i++)s.push(os(t[i],e,n,r));return s}}function oc(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||vt;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,l,u)===!1)return}a=a.parent}if(i){Ds(),nl(i,null,10,[t,l,u]),ks();return}}fS(t,n,s,r,o)}function fS(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const $n=[];let Zr=-1;const yo=[];let Gs=null,io=0;const u_=Promise.resolve();let yu=null;function Ft(t){const e=yu||u_;return t?e.then(this?t.bind(this):t):e}function hS(t){let e=Zr+1,n=$n.length;for(;e<n;){const r=e+n>>>1,s=$n[r],i=Fa(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function bp(t){if(!(t.flags&1)){const e=Fa(t),n=$n[$n.length-1];!n||!(t.flags&2)&&e>=Fa(n)?$n.push(t):$n.splice(hS(e),0,t),t.flags|=1,c_()}}function c_(){yu||(yu=u_.then(f_))}function pS(t){qe(t)?yo.push(...t):Gs&&t.id===-1?Gs.splice(io+1,0,t):t.flags&1||(yo.push(t),t.flags|=1),c_()}function xg(t,e,n=Zr+1){for(;n<$n.length;n++){const r=$n[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;$n.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function d_(t){if(yo.length){const e=[...new Set(yo)].sort((n,r)=>Fa(n)-Fa(r));if(yo.length=0,Gs){Gs.push(...e);return}for(Gs=e,io=0;io<Gs.length;io++){const n=Gs[io];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Gs=null,io=0}}const Fa=t=>t.id==null?t.flags&2?-1:1/0:t.id;function f_(t){try{for(Zr=0;Zr<$n.length;Zr++){const e=$n[Zr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),nl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Zr<$n.length;Zr++){const e=$n[Zr];e&&(e.flags&=-2)}Zr=-1,$n.length=0,d_(),yu=null,($n.length||yo.length)&&f_()}}let fn=null,h_=null;function vu(t){const e=fn;return fn=t,h_=t&&t.type.__scopeId||null,e}function se(t,e=fn,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&_u(-1);const i=vu(e);let o;try{o=t(...s)}finally{vu(i),r._d&&_u(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ts(t,e){if(fn===null)return t;const n=cc(fn),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=vt]=e[s];i&&(He(i)&&(i={mounted:i,updated:i}),i.deep&&_s(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Ci(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Ds(),os(l,n,8,[t.el,a,t,e]),ks())}}function _r(t,e){if(An){let n=An.provides;const r=An.parent&&An.parent.provides;r===n&&(n=An.provides=Object.create(r)),n[t]=e}}function jt(t,e,n=!1){const r=ur();if(r||Fi){let s=Fi?Fi._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&He(e)?e.call(r&&r.proxy):e}}function mS(){return!!(ur()||Fi)}const gS=Symbol.for("v-scx"),yS=()=>jt(gS);function qt(t,e){return ac(t,null,e)}function p_(t,e){return ac(t,null,{flush:"post"})}function et(t,e,n){return ac(t,e,n)}function ac(t,e,n=vt){const{immediate:r,deep:s,flush:i,once:o}=n,a=Cn({},n),l=e&&r||!e&&i!=="post";let u;if(qa){if(i==="sync"){const h=yS();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=ns,h.resume=ns,h.pause=ns,h}}const c=An;a.call=(h,m,g)=>os(h,c,m,g);let d=!1;i==="post"?a.scheduler=h=>{Dn(h,c&&c.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,m)=>{m?h():bp(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=dS(t,e,a);return qa&&(u?u.push(f):l&&f()),f}function vS(t,e,n){const r=this.proxy,s=Ut(t)?t.includes(".")?m_(r,t):()=>r[t]:t.bind(r,r);let i;He(e)?i=e:(i=e.handler,n=e);const o=il(this),a=ac(s,i.bind(r),n);return o(),a}function m_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const g_=Symbol("_vte"),bS=t=>t.__isTeleport,_a=t=>t&&(t.disabled||t.disabled===""),Eg=t=>t&&(t.defer||t.defer===""),Ag=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Sg=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Wf=(t,e)=>{const n=t&&t.to;return Ut(n)?e?e(n):null:n},y_={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:m,createText:g,createComment:x}}=u,b=_a(e.props);let{shapeFlag:E,children:_,dynamicChildren:p}=e;if(t==null){const v=e.el=g(""),S=e.anchor=g("");h(v,n,r),h(S,n,r);const C=(T,D)=>{E&16&&c(_,T,D,s,i,o,a,l)},R=()=>{const T=e.target=Wf(e.props,m),D=v_(T,e,g,h);T&&(o!=="svg"&&Ag(T)?o="svg":o!=="mathml"&&Sg(T)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(T),b||(C(T,D),Yl(e,!1)))};b&&(C(n,S),Yl(e,!0)),Eg(e.props)?(e.el.__isMounted=!1,Dn(()=>{R(),delete e.el.__isMounted},i)):R()}else{if(Eg(e.props)&&t.el.__isMounted===!1){Dn(()=>{y_.process(t,e,n,r,s,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const v=e.anchor=t.anchor,S=e.target=t.target,C=e.targetAnchor=t.targetAnchor,R=_a(t.props),T=R?n:S,D=R?v:C;if(o==="svg"||Ag(S)?o="svg":(o==="mathml"||Sg(S))&&(o="mathml"),p?(f(t.dynamicChildren,p,T,s,i,o,a),Cp(t,e,!0)):l||d(t,e,T,D,s,i,o,a,!1),b)R?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):El(e,n,v,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const U=e.target=Wf(e.props,m);U&&El(e,U,null,u,0)}else R&&El(e,S,C,u,1);Yl(e,b)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:c,target:d,props:f}=t;if(d&&(s(u),s(c)),i&&s(l),o&16){const h=i||!_a(f);for(let m=0;m<a.length;m++){const g=a[m];r(g,e,n,h,!!g.dynamicChildren)}}},move:El,hydrate:wS};function El(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,d=i===2;if(d&&r(o,e,n),(!d||_a(c))&&l&16)for(let f=0;f<u.length;f++)s(u[f],e,n,2);d&&r(a,e,n)}function wS(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:c}},d){function f(g,x,b,E){x.anchor=d(o(g),x,a(g),n,r,s,i),x.targetStart=b,x.targetAnchor=E}const h=e.target=Wf(e.props,l),m=_a(e.props);if(h){const g=h._lpa||h.firstChild;if(e.shapeFlag&16)if(m)f(t,e,g,g&&o(g));else{e.anchor=o(t);let x=g;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")e.targetStart=x;else if(x.data==="teleport anchor"){e.targetAnchor=x,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}x=o(x)}e.targetAnchor||v_(h,e,c,u),d(g&&o(g),e,h,n,r,s,i)}Yl(e,m)}else m&&e.shapeFlag&16&&f(t,e,t,o(t));return e.anchor&&o(e.anchor)}const wp=y_;function Yl(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function v_(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[g_]=i,t&&(r(s,t),r(i,t)),i}const _S=Symbol("_leaveCb");function _p(t,e){t.shapeFlag&6&&t.component?(t.transition=e,_p(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function me(t,e){return He(t)?Cn({name:t.name},e,{setup:t}):t}function ed(){const t=ur();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function b_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function rl(t){const e=ur(),n=sr(null);if(e){const s=e.refs===vt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}const bu=new WeakMap;function xa(t,e,n,r,s=!1){if(qe(t)){t.forEach((m,g)=>xa(m,e&&(qe(e)?e[g]:e),n,r,s));return}if(vo(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&xa(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?cc(r.component):r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,c=a.refs===vt?a.refs={}:a.refs,d=a.setupState,f=Ye(d),h=d===vt?$w:m=>ft(f,m);if(u!=null&&u!==l){if(Ig(e),Ut(u))c[u]=null,h(u)&&(d[u]=null);else if(Ot(u)){u.value=null;const m=e;m.k&&(c[m.k]=null)}}if(He(l))nl(l,a,12,[o,c]);else{const m=Ut(l),g=Ot(l);if(m||g){const x=()=>{if(t.f){const b=m?h(l)?d[l]:c[l]:l.value;if(s)qe(b)&&pp(b,i);else if(qe(b))b.includes(i)||b.push(i);else if(m)c[l]=[i],h(l)&&(d[l]=c[l]);else{const E=[i];l.value=E,t.k&&(c[t.k]=E)}}else m?(c[l]=o,h(l)&&(d[l]=o)):g&&(l.value=o,t.k&&(c[t.k]=o))};if(o){const b=()=>{x(),bu.delete(t)};b.id=-1,bu.set(t,b),Dn(b,n)}else Ig(t),x()}}}function Ig(t){const e=bu.get(t);e&&(e.flags|=8,bu.delete(t))}Qu().requestIdleCallback;Qu().cancelIdleCallback;const vo=t=>!!t.type.__asyncLoader,w_=t=>t.type.__isKeepAlive;function xS(t,e){__(t,"a",e)}function ES(t,e){__(t,"da",e)}function __(t,e,n=An){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(lc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)w_(s.parent.vnode)&&AS(r,e,n,s),s=s.parent}}function AS(t,e,n,r){const s=lc(e,t,r,!0);ar(()=>{pp(r[e],s)},n)}function lc(t,e,n=An,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ds();const a=il(n),l=os(e,n,t,o);return a(),ks(),l});return r?s.unshift(i):s.push(i),i}}const Fs=t=>(e,n=An)=>{(!qa||t==="sp")&&lc(t,(...r)=>e(...r),n)},SS=Fs("bm"),Wt=Fs("m"),IS=Fs("bu"),CS=Fs("u"),x_=Fs("bum"),ar=Fs("um"),RS=Fs("sp"),TS=Fs("rtg"),OS=Fs("rtc");function DS(t,e=An){lc("ec",t,e)}const xp="components",kS="directives";function sl(t,e){return Ep(xp,t,!0,e)||t}const E_=Symbol.for("v-ndc");function js(t){return Ut(t)?Ep(xp,t,!1)||t:t||E_}function PS(t){return Ep(kS,t)}function Ep(t,e,n=!0,r=!1){const s=fn||An;if(s){const i=s.type;if(t===xp){const a=mI(i,!1);if(a&&(a===e||a===Kn(e)||a===Xu(Kn(e))))return i}const o=Cg(s[t]||i[t],e)||Cg(s.appContext[t],e);return!o&&r?i:o}}function Cg(t,e){return t&&(t[e]||t[Kn(e)]||t[Xu(Kn(e))])}function ln(t,e,n,r){let s;const i=n,o=qe(t);if(o||Ut(t)){const a=o&&Rs(t);let l=!1,u=!1;a&&(l=!tr(t),u=Ps(t),t=tc(t)),s=new Array(t.length);for(let c=0,d=t.length;c<d;c++)s[c]=e(l?u?Io(Ur(t[c])):Ur(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(xt(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];s[l]=e(t[c],c,l,i)}}else s=[];return s}function Ae(t,e,n={},r,s){if(fn.ce||fn.parent&&vo(fn.parent)&&fn.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),F(),ce(Ze,null,[oe("slot",n,r&&r())],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),F();const o=i&&A_(i(n)),a=n.key||o&&o.key,l=ce(Ze,{key:(a&&!Fr(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function A_(t){return t.some(e=>Ua(e)?!(e.type===qr||e.type===Ze&&!A_(e.children)):!0)?t:null}const Gf=t=>t?H_(t)?cc(t):Gf(t.parent):null,Ea=Cn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gf(t.parent),$root:t=>Gf(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>T_(t),$forceUpdate:t=>t.f||(t.f=()=>{bp(t.update)}),$nextTick:t=>t.n||(t.n=Ft.bind(t.proxy)),$watch:t=>vS.bind(t)}),td=(t,e)=>t!==vt&&!t.__isScriptSetup&&ft(t,e),$S={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(td(r,e))return o[e]=1,r[e];if(s!==vt&&ft(s,e))return o[e]=2,s[e];if(ft(i,e))return o[e]=3,i[e];if(n!==vt&&ft(n,e))return o[e]=4,n[e];Xf&&(o[e]=0)}}const u=Ea[e];let c,d;if(u)return e==="$attrs"&&En(t.attrs,"get",""),u(t);if((c=a.__cssModules)&&(c=c[e]))return c;if(n!==vt&&ft(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,ft(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return td(s,e)?(s[e]=n,!0):r!==vt&&ft(r,e)?(r[e]=n,!0):ft(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},a){let l;return!!(n[a]||t!==vt&&a[0]!=="$"&&ft(t,a)||td(e,a)||ft(i,a)||ft(r,a)||ft(Ea,a)||ft(s.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ft(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ap(){return I_().slots}function S_(){return I_().attrs}function I_(t){const e=ur();return e.setupContext||(e.setupContext=W_(e))}function Jf(t){return qe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function C_(t,e){const n=Jf(t);for(const r in e){if(r.startsWith("__skip"))continue;let s=n[r];s?qe(s)||He(s)?s=n[r]={type:s,default:e[r]}:s.default=e[r]:s===null&&(s=n[r]={default:e[r]}),s&&e[`__skip_${r}`]&&(s.skipFactory=!0)}return n}function bi(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}let Xf=!0;function LS(t){const e=T_(t),n=t.proxy,r=t.ctx;Xf=!1,e.beforeCreate&&Rg(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:m,activated:g,deactivated:x,beforeDestroy:b,beforeUnmount:E,destroyed:_,unmounted:p,render:v,renderTracked:S,renderTriggered:C,errorCaptured:R,serverPrefetch:T,expose:D,inheritAttrs:U,components:z,directives:V,filters:P}=e;if(u&&MS(u,r,null),o)for(const H in o){const q=o[H];He(q)&&(r[H]=q.bind(n))}if(s){const H=s.call(n,n);xt(H)&&(t.data=Gn(H))}if(Xf=!0,i)for(const H in i){const q=i[H],ie=He(q)?q.bind(n,n):He(q.get)?q.get.bind(n,n):ns,B=!He(q)&&He(q.set)?q.set.bind(n):ns,ue=J({get:ie,set:B});Object.defineProperty(r,H,{enumerable:!0,configurable:!0,get:()=>ue.value,set:de=>ue.value=de})}if(a)for(const H in a)R_(a[H],r,n,H);if(l){const H=He(l)?l.call(n):l;Reflect.ownKeys(H).forEach(q=>{_r(q,H[q])})}c&&Rg(c,t,"c");function O(H,q){qe(q)?q.forEach(ie=>H(ie.bind(n))):q&&H(q.bind(n))}if(O(SS,d),O(Wt,f),O(IS,h),O(CS,m),O(xS,g),O(ES,x),O(DS,R),O(OS,S),O(TS,C),O(x_,E),O(ar,p),O(RS,T),qe(D))if(D.length){const H=t.exposed||(t.exposed={});D.forEach(q=>{Object.defineProperty(H,q,{get:()=>n[q],set:ie=>n[q]=ie,enumerable:!0})})}else t.exposed||(t.exposed={});v&&t.render===ns&&(t.render=v),U!=null&&(t.inheritAttrs=U),z&&(t.components=z),V&&(t.directives=V),T&&b_(t)}function MS(t,e,n=ns){qe(t)&&(t=Yf(t));for(const r in t){const s=t[r];let i;xt(s)?"default"in s?i=jt(s.from||r,s.default,!0):i=jt(s.from||r):i=jt(s),Ot(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Rg(t,e,n){os(qe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function R_(t,e,n,r){let s=r.includes(".")?m_(n,r):()=>n[r];if(Ut(t)){const i=e[t];He(i)&&et(s,i)}else if(He(t))et(s,t.bind(n));else if(xt(t))if(qe(t))t.forEach(i=>R_(i,e,n,r));else{const i=He(t.handler)?t.handler.bind(n):e[t.handler];He(i)&&et(s,i,t)}}function T_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>wu(l,u,o,!0)),wu(l,e,o)),xt(e)&&i.set(e,l),l}function wu(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&wu(t,i,n,!0),s&&s.forEach(o=>wu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=NS[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const NS={data:Tg,props:Og,emits:Og,methods:ma,computed:ma,beforeCreate:On,created:On,beforeMount:On,mounted:On,beforeUpdate:On,updated:On,beforeDestroy:On,beforeUnmount:On,destroyed:On,unmounted:On,activated:On,deactivated:On,errorCaptured:On,serverPrefetch:On,components:ma,directives:ma,watch:jS,provide:Tg,inject:FS};function Tg(t,e){return e?t?function(){return Cn(He(t)?t.call(this,this):t,He(e)?e.call(this,this):e)}:e:t}function FS(t,e){return ma(Yf(t),Yf(e))}function Yf(t){if(qe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function On(t,e){return t?[...new Set([].concat(t,e))]:e}function ma(t,e){return t?Cn(Object.create(null),t,e):e}function Og(t,e){return t?qe(t)&&qe(e)?[...new Set([...t,...e])]:Cn(Object.create(null),Jf(t),Jf(e??{})):e}function jS(t,e){if(!t)return e;if(!e)return t;const n=Cn(Object.create(null),t);for(const r in e)n[r]=On(t[r],e[r]);return n}function O_(){return{app:null,config:{isNativeTag:$w,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let US=0;function qS(t,e){return function(r,s=null){He(r)||(r=Cn({},r)),s!=null&&!xt(s)&&(s=null);const i=O_(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:US++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:yI,get config(){return i.config},set config(c){},use(c,...d){return o.has(c)||(c&&He(c.install)?(o.add(c),c.install(u,...d)):He(c)&&(o.add(c),c(u,...d))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,d){return d?(i.components[c]=d,u):i.components[c]},directive(c,d){return d?(i.directives[c]=d,u):i.directives[c]},mount(c,d,f){if(!l){const h=u._ceVNode||oe(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(h,c,f),l=!0,u._container=c,c.__vue_app__=u,cc(h.component)}},onUnmount(c){a.push(c)},unmount(){l&&(os(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return i.provides[c]=d,u},runWithContext(c){const d=Fi;Fi=u;try{return c()}finally{Fi=d}}};return u}}let Fi=null;const BS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Kn(e)}Modifiers`]||t[`${vi(e)}Modifiers`];function VS(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||vt;let s=n;const i=e.startsWith("update:"),o=i&&BS(r,e.slice(7));o&&(o.trim&&(s=n.map(c=>Ut(c)?c.trim():c)),o.number&&(s=n.map(Yu)));let a,l=r[a=Jl(e)]||r[a=Jl(Kn(e))];!l&&i&&(l=r[a=Jl(vi(e))]),l&&os(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,os(u,t,6,s)}}const zS=new WeakMap;function D_(t,e,n=!1){const r=n?zS:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!He(t)){const l=u=>{const c=D_(u,e,!0);c&&(a=!0,Cn(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(xt(t)&&r.set(t,null),null):(qe(i)?i.forEach(l=>o[l]=null):Cn(o,i),xt(t)&&r.set(t,o),o)}function uc(t,e){return!t||!Wu(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(t,e[0].toLowerCase()+e.slice(1))||ft(t,vi(e))||ft(t,e))}function Dg(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:d,data:f,setupState:h,ctx:m,inheritAttrs:g}=t,x=vu(t);let b,E;try{if(n.shapeFlag&4){const p=s||r,v=p;b=es(u.call(v,p,c,d,h,f,m)),E=a}else{const p=e;b=es(p.length>1?p(d,{attrs:a,slots:o,emit:l}):p(d,null)),E=e.props?a:HS(a)}}catch(p){Sa.length=0,oc(p,t,1),b=oe(qr)}let _=b;if(E&&g!==!1){const p=Object.keys(E),{shapeFlag:v}=_;p.length&&v&7&&(i&&p.some(hp)&&(E=KS(E,i)),_=qi(_,E,!1,!0))}return n.dirs&&(_=qi(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&_p(_,n.transition),b=_,vu(x),b}const HS=t=>{let e;for(const n in t)(n==="class"||n==="style"||Wu(n))&&((e||(e={}))[n]=t[n]);return e},KS=(t,e)=>{const n={};for(const r in t)(!hp(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function WS(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?kg(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==r[f]&&!uc(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?kg(r,o,u):!0:!!o;return!1}function kg(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!uc(n,i))return!0}return!1}function GS({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const k_={},P_=()=>Object.create(k_),$_=t=>Object.getPrototypeOf(t)===k_;function JS(t,e,n,r=!1){const s={},i=P_();t.propsDefaults=Object.create(null),L_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:i_(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function XS(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ye(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(uc(t.emitsOptions,f))continue;const h=e[f];if(l)if(ft(i,f))h!==i[f]&&(i[f]=h,u=!0);else{const m=Kn(f);s[m]=Qf(l,a,m,h,t,!1)}else h!==i[f]&&(i[f]=h,u=!0)}}}else{L_(t,e,s,i)&&(u=!0);let c;for(const d in a)(!e||!ft(e,d)&&((c=vi(d))===d||!ft(e,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(s[d]=Qf(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!ft(e,d))&&(delete i[d],u=!0)}u&&ws(t.attrs,"set","")}function L_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(va(l))continue;const u=e[l];let c;s&&ft(s,c=Kn(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:uc(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Ye(n),u=a||vt;for(let c=0;c<i.length;c++){const d=i[c];n[d]=Qf(s,l,d,u[d],t,!ft(u,d))}}return o}function Qf(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ft(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&He(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const c=il(s);r=u[n]=l.call(null,e),c()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===vi(n))&&(r=!0))}return r}const YS=new WeakMap;function M_(t,e,n=!1){const r=n?YS:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!He(t)){const c=d=>{l=!0;const[f,h]=M_(d,e,!0);Cn(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return xt(t)&&r.set(t,mo),mo;if(qe(i))for(let c=0;c<i.length;c++){const d=Kn(i[c]);Pg(d)&&(o[d]=vt)}else if(i)for(const c in i){const d=Kn(c);if(Pg(d)){const f=i[c],h=o[d]=qe(f)||He(f)?{type:f}:Cn({},f),m=h.type;let g=!1,x=!0;if(qe(m))for(let b=0;b<m.length;++b){const E=m[b],_=He(E)&&E.name;if(_==="Boolean"){g=!0;break}else _==="String"&&(x=!1)}else g=He(m)&&m.name==="Boolean";h[0]=g,h[1]=x,(g||ft(h,"default"))&&a.push(d)}}const u=[o,a];return xt(t)&&r.set(t,u),u}function Pg(t){return t[0]!=="$"&&!va(t)}const Sp=t=>t==="_"||t==="_ctx"||t==="$stable",Ip=t=>qe(t)?t.map(es):[es(t)],QS=(t,e,n)=>{if(e._n)return e;const r=se((...s)=>Ip(e(...s)),n);return r._c=!1,r},N_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Sp(s))continue;const i=t[s];if(He(i))e[s]=QS(s,i,r);else if(i!=null){const o=Ip(i);e[s]=()=>o}}},F_=(t,e)=>{const n=Ip(e);t.slots.default=()=>n},j_=(t,e,n)=>{for(const r in e)(n||!Sp(r))&&(t[r]=e[r])},ZS=(t,e,n)=>{const r=t.slots=P_();if(t.vnode.shapeFlag&32){const s=e._;s?(j_(r,e,n),n&&Fw(r,"_",s,!0)):N_(e,r)}else e&&F_(t,e)},eI=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=vt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:j_(s,e,n):(i=!e.$stable,N_(e,s)),o=e}else e&&(F_(t,e),o={default:1});if(i)for(const a in s)!Sp(a)&&o[a]==null&&delete s[a]},Dn=iI;function tI(t){return nI(t)}function nI(t,e){const n=Qu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=ns,insertStaticContent:m}=t,g=(L,k,K,he=null,ve=null,ge=null,N=void 0,j=null,ee=!!k.dynamicChildren)=>{if(L===k)return;L&&!Yo(L,k)&&(he=$(L),de(L,ve,ge,!0),L=null),k.patchFlag===-2&&(ee=!1,k.dynamicChildren=null);const{type:le,ref:Ie,shapeFlag:xe}=k;switch(le){case Uo:x(L,k,K,he);break;case qr:b(L,k,K,he);break;case Aa:L==null&&E(k,K,he,N);break;case Ze:z(L,k,K,he,ve,ge,N,j,ee);break;default:xe&1?v(L,k,K,he,ve,ge,N,j,ee):xe&6?V(L,k,K,he,ve,ge,N,j,ee):(xe&64||xe&128)&&le.process(L,k,K,he,ve,ge,N,j,ee,re)}Ie!=null&&ve?xa(Ie,L&&L.ref,ge,k||L,!k):Ie==null&&L&&L.ref!=null&&xa(L.ref,null,ge,L,!0)},x=(L,k,K,he)=>{if(L==null)r(k.el=a(k.children),K,he);else{const ve=k.el=L.el;k.children!==L.children&&u(ve,k.children)}},b=(L,k,K,he)=>{L==null?r(k.el=l(k.children||""),K,he):k.el=L.el},E=(L,k,K,he)=>{[L.el,L.anchor]=m(L.children,k,K,he,L.el,L.anchor)},_=({el:L,anchor:k},K,he)=>{let ve;for(;L&&L!==k;)ve=f(L),r(L,K,he),L=ve;r(k,K,he)},p=({el:L,anchor:k})=>{let K;for(;L&&L!==k;)K=f(L),s(L),L=K;s(k)},v=(L,k,K,he,ve,ge,N,j,ee)=>{if(k.type==="svg"?N="svg":k.type==="math"&&(N="mathml"),L==null)S(k,K,he,ve,ge,N,j,ee);else{const le=L.el&&L.el._isVueCE?L.el:null;try{le&&le._beginPatch(),T(L,k,ve,ge,N,j,ee)}finally{le&&le._endPatch()}}},S=(L,k,K,he,ve,ge,N,j)=>{let ee,le;const{props:Ie,shapeFlag:xe,transition:ne,dirs:pe}=L;if(ee=L.el=o(L.type,ge,Ie&&Ie.is,Ie),xe&8?c(ee,L.children):xe&16&&R(L.children,ee,null,he,ve,nd(L,ge),N,j),pe&&Ci(L,null,he,"created"),C(ee,L,L.scopeId,N,he),Ie){for(const I in Ie)I!=="value"&&!va(I)&&i(ee,I,null,Ie[I],ge,he);"value"in Ie&&i(ee,"value",null,Ie.value,ge),(le=Ie.onVnodeBeforeMount)&&Gr(le,he,L)}pe&&Ci(L,null,he,"beforeMount");const Oe=rI(ve,ne);Oe&&ne.beforeEnter(ee),r(ee,k,K),((le=Ie&&Ie.onVnodeMounted)||Oe||pe)&&Dn(()=>{le&&Gr(le,he,L),Oe&&ne.enter(ee),pe&&Ci(L,null,he,"mounted")},ve)},C=(L,k,K,he,ve)=>{if(K&&h(L,K),he)for(let ge=0;ge<he.length;ge++)h(L,he[ge]);if(ve){let ge=ve.subTree;if(k===ge||B_(ge.type)&&(ge.ssContent===k||ge.ssFallback===k)){const N=ve.vnode;C(L,N,N.scopeId,N.slotScopeIds,ve.parent)}}},R=(L,k,K,he,ve,ge,N,j,ee=0)=>{for(let le=ee;le<L.length;le++){const Ie=L[le]=j?Js(L[le]):es(L[le]);g(null,Ie,k,K,he,ve,ge,N,j)}},T=(L,k,K,he,ve,ge,N)=>{const j=k.el=L.el;let{patchFlag:ee,dynamicChildren:le,dirs:Ie}=k;ee|=L.patchFlag&16;const xe=L.props||vt,ne=k.props||vt;let pe;if(K&&Ri(K,!1),(pe=ne.onVnodeBeforeUpdate)&&Gr(pe,K,k,L),Ie&&Ci(k,L,K,"beforeUpdate"),K&&Ri(K,!0),(xe.innerHTML&&ne.innerHTML==null||xe.textContent&&ne.textContent==null)&&c(j,""),le?D(L.dynamicChildren,le,j,K,he,nd(k,ve),ge):N||q(L,k,j,null,K,he,nd(k,ve),ge,!1),ee>0){if(ee&16)U(j,xe,ne,K,ve);else if(ee&2&&xe.class!==ne.class&&i(j,"class",null,ne.class,ve),ee&4&&i(j,"style",xe.style,ne.style,ve),ee&8){const Oe=k.dynamicProps;for(let I=0;I<Oe.length;I++){const y=Oe[I],w=xe[y],M=ne[y];(M!==w||y==="value")&&i(j,y,w,M,ve,K)}}ee&1&&L.children!==k.children&&c(j,k.children)}else!N&&le==null&&U(j,xe,ne,K,ve);((pe=ne.onVnodeUpdated)||Ie)&&Dn(()=>{pe&&Gr(pe,K,k,L),Ie&&Ci(k,L,K,"updated")},he)},D=(L,k,K,he,ve,ge,N)=>{for(let j=0;j<k.length;j++){const ee=L[j],le=k[j],Ie=ee.el&&(ee.type===Ze||!Yo(ee,le)||ee.shapeFlag&198)?d(ee.el):K;g(ee,le,Ie,null,he,ve,ge,N,!0)}},U=(L,k,K,he,ve)=>{if(k!==K){if(k!==vt)for(const ge in k)!va(ge)&&!(ge in K)&&i(L,ge,k[ge],null,ve,he);for(const ge in K){if(va(ge))continue;const N=K[ge],j=k[ge];N!==j&&ge!=="value"&&i(L,ge,j,N,ve,he)}"value"in K&&i(L,"value",k.value,K.value,ve)}},z=(L,k,K,he,ve,ge,N,j,ee)=>{const le=k.el=L?L.el:a(""),Ie=k.anchor=L?L.anchor:a("");let{patchFlag:xe,dynamicChildren:ne,slotScopeIds:pe}=k;pe&&(j=j?j.concat(pe):pe),L==null?(r(le,K,he),r(Ie,K,he),R(k.children||[],K,Ie,ve,ge,N,j,ee)):xe>0&&xe&64&&ne&&L.dynamicChildren&&L.dynamicChildren.length===ne.length?(D(L.dynamicChildren,ne,K,ve,ge,N,j),(k.key!=null||ve&&k===ve.subTree)&&Cp(L,k,!0)):q(L,k,K,Ie,ve,ge,N,j,ee)},V=(L,k,K,he,ve,ge,N,j,ee)=>{k.slotScopeIds=j,L==null?k.shapeFlag&512?ve.ctx.activate(k,K,he,N,ee):P(k,K,he,ve,ge,N,ee):X(L,k,ee)},P=(L,k,K,he,ve,ge,N)=>{const j=L.component=dI(L,he,ve);if(w_(L)&&(j.ctx.renderer=re),fI(j,!1,N),j.asyncDep){if(ve&&ve.registerDep(j,O,N),!L.el){const ee=j.subTree=oe(qr);b(null,ee,k,K),L.placeholder=ee.el}}else O(j,L,k,K,ve,ge,N)},X=(L,k,K)=>{const he=k.component=L.component;if(WS(L,k,K))if(he.asyncDep&&!he.asyncResolved){H(he,k,K);return}else he.next=k,he.update();else k.el=L.el,he.vnode=k},O=(L,k,K,he,ve,ge,N)=>{const j=()=>{if(L.isMounted){let{next:xe,bu:ne,u:pe,parent:Oe,vnode:I}=L;{const fe=U_(L);if(fe){xe&&(xe.el=I.el,H(L,xe,N)),fe.asyncDep.then(()=>{L.isUnmounted||j()});return}}let y=xe,w;Ri(L,!1),xe?(xe.el=I.el,H(L,xe,N)):xe=I,ne&&Xl(ne),(w=xe.props&&xe.props.onVnodeBeforeUpdate)&&Gr(w,Oe,xe,I),Ri(L,!0);const M=Dg(L),Y=L.subTree;L.subTree=M,g(Y,M,d(Y.el),$(Y),L,ve,ge),xe.el=M.el,y===null&&GS(L,M.el),pe&&Dn(pe,ve),(w=xe.props&&xe.props.onVnodeUpdated)&&Dn(()=>Gr(w,Oe,xe,I),ve)}else{let xe;const{el:ne,props:pe}=k,{bm:Oe,m:I,parent:y,root:w,type:M}=L,Y=vo(k);Ri(L,!1),Oe&&Xl(Oe),!Y&&(xe=pe&&pe.onVnodeBeforeMount)&&Gr(xe,y,k),Ri(L,!0);{w.ce&&w.ce._def.shadowRoot!==!1&&w.ce._injectChildStyle(M);const fe=L.subTree=Dg(L);g(null,fe,K,he,L,ve,ge),k.el=fe.el}if(I&&Dn(I,ve),!Y&&(xe=pe&&pe.onVnodeMounted)){const fe=k;Dn(()=>Gr(xe,y,fe),ve)}(k.shapeFlag&256||y&&vo(y.vnode)&&y.vnode.shapeFlag&256)&&L.a&&Dn(L.a,ve),L.isMounted=!0,k=K=he=null}};L.scope.on();const ee=L.effect=new Vw(j);L.scope.off();const le=L.update=ee.run.bind(ee),Ie=L.job=ee.runIfDirty.bind(ee);Ie.i=L,Ie.id=L.uid,ee.scheduler=()=>bp(Ie),Ri(L,!0),le()},H=(L,k,K)=>{k.component=L;const he=L.vnode.props;L.vnode=k,L.next=null,XS(L,k.props,he,K),eI(L,k.children,K),Ds(),xg(L),ks()},q=(L,k,K,he,ve,ge,N,j,ee=!1)=>{const le=L&&L.children,Ie=L?L.shapeFlag:0,xe=k.children,{patchFlag:ne,shapeFlag:pe}=k;if(ne>0){if(ne&128){B(le,xe,K,he,ve,ge,N,j,ee);return}else if(ne&256){ie(le,xe,K,he,ve,ge,N,j,ee);return}}pe&8?(Ie&16&&W(le,ve,ge),xe!==le&&c(K,xe)):Ie&16?pe&16?B(le,xe,K,he,ve,ge,N,j,ee):W(le,ve,ge,!0):(Ie&8&&c(K,""),pe&16&&R(xe,K,he,ve,ge,N,j,ee))},ie=(L,k,K,he,ve,ge,N,j,ee)=>{L=L||mo,k=k||mo;const le=L.length,Ie=k.length,xe=Math.min(le,Ie);let ne;for(ne=0;ne<xe;ne++){const pe=k[ne]=ee?Js(k[ne]):es(k[ne]);g(L[ne],pe,K,null,ve,ge,N,j,ee)}le>Ie?W(L,ve,ge,!0,!1,xe):R(k,K,he,ve,ge,N,j,ee,xe)},B=(L,k,K,he,ve,ge,N,j,ee)=>{let le=0;const Ie=k.length;let xe=L.length-1,ne=Ie-1;for(;le<=xe&&le<=ne;){const pe=L[le],Oe=k[le]=ee?Js(k[le]):es(k[le]);if(Yo(pe,Oe))g(pe,Oe,K,null,ve,ge,N,j,ee);else break;le++}for(;le<=xe&&le<=ne;){const pe=L[xe],Oe=k[ne]=ee?Js(k[ne]):es(k[ne]);if(Yo(pe,Oe))g(pe,Oe,K,null,ve,ge,N,j,ee);else break;xe--,ne--}if(le>xe){if(le<=ne){const pe=ne+1,Oe=pe<Ie?k[pe].el:he;for(;le<=ne;)g(null,k[le]=ee?Js(k[le]):es(k[le]),K,Oe,ve,ge,N,j,ee),le++}}else if(le>ne)for(;le<=xe;)de(L[le],ve,ge,!0),le++;else{const pe=le,Oe=le,I=new Map;for(le=Oe;le<=ne;le++){const ze=k[le]=ee?Js(k[le]):es(k[le]);ze.key!=null&&I.set(ze.key,le)}let y,w=0;const M=ne-Oe+1;let Y=!1,fe=0;const we=new Array(M);for(le=0;le<M;le++)we[le]=0;for(le=pe;le<=xe;le++){const ze=L[le];if(w>=M){de(ze,ve,ge,!0);continue}let Je;if(ze.key!=null)Je=I.get(ze.key);else for(y=Oe;y<=ne;y++)if(we[y-Oe]===0&&Yo(ze,k[y])){Je=y;break}Je===void 0?de(ze,ve,ge,!0):(we[Je-Oe]=le+1,Je>=fe?fe=Je:Y=!0,g(ze,k[Je],K,null,ve,ge,N,j,ee),w++)}const Ke=Y?sI(we):mo;for(y=Ke.length-1,le=M-1;le>=0;le--){const ze=Oe+le,Je=k[ze],gt=k[ze+1],it=ze+1<Ie?gt.el||q_(gt):he;we[le]===0?g(null,Je,K,it,ve,ge,N,j,ee):Y&&(y<0||le!==Ke[y]?ue(Je,K,it,2):y--)}}},ue=(L,k,K,he,ve=null)=>{const{el:ge,type:N,transition:j,children:ee,shapeFlag:le}=L;if(le&6){ue(L.component.subTree,k,K,he);return}if(le&128){L.suspense.move(k,K,he);return}if(le&64){N.move(L,k,K,re);return}if(N===Ze){r(ge,k,K);for(let xe=0;xe<ee.length;xe++)ue(ee[xe],k,K,he);r(L.anchor,k,K);return}if(N===Aa){_(L,k,K);return}if(he!==2&&le&1&&j)if(he===0)j.beforeEnter(ge),r(ge,k,K),Dn(()=>j.enter(ge),ve);else{const{leave:xe,delayLeave:ne,afterLeave:pe}=j,Oe=()=>{L.ctx.isUnmounted?s(ge):r(ge,k,K)},I=()=>{ge._isLeaving&&ge[_S](!0),xe(ge,()=>{Oe(),pe&&pe()})};ne?ne(ge,Oe,I):I()}else r(ge,k,K)},de=(L,k,K,he=!1,ve=!1)=>{const{type:ge,props:N,ref:j,children:ee,dynamicChildren:le,shapeFlag:Ie,patchFlag:xe,dirs:ne,cacheIndex:pe}=L;if(xe===-2&&(ve=!1),j!=null&&(Ds(),xa(j,null,K,L,!0),ks()),pe!=null&&(k.renderCache[pe]=void 0),Ie&256){k.ctx.deactivate(L);return}const Oe=Ie&1&&ne,I=!vo(L);let y;if(I&&(y=N&&N.onVnodeBeforeUnmount)&&Gr(y,k,L),Ie&6)G(L.component,K,he);else{if(Ie&128){L.suspense.unmount(K,he);return}Oe&&Ci(L,null,k,"beforeUnmount"),Ie&64?L.type.remove(L,k,K,re,he):le&&!le.hasOnce&&(ge!==Ze||xe>0&&xe&64)?W(le,k,K,!1,!0):(ge===Ze&&xe&384||!ve&&Ie&16)&&W(ee,k,K),he&&ye(L)}(I&&(y=N&&N.onVnodeUnmounted)||Oe)&&Dn(()=>{y&&Gr(y,k,L),Oe&&Ci(L,null,k,"unmounted")},K)},ye=L=>{const{type:k,el:K,anchor:he,transition:ve}=L;if(k===Ze){Se(K,he);return}if(k===Aa){p(L);return}const ge=()=>{s(K),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(L.shapeFlag&1&&ve&&!ve.persisted){const{leave:N,delayLeave:j}=ve,ee=()=>N(K,ge);j?j(L.el,ge,ee):ee()}else ge()},Se=(L,k)=>{let K;for(;L!==k;)K=f(L),s(L),L=K;s(k)},G=(L,k,K)=>{const{bum:he,scope:ve,job:ge,subTree:N,um:j,m:ee,a:le}=L;$g(ee),$g(le),he&&Xl(he),ve.stop(),ge&&(ge.flags|=8,de(N,L,k,K)),j&&Dn(j,k),Dn(()=>{L.isUnmounted=!0},k)},W=(L,k,K,he=!1,ve=!1,ge=0)=>{for(let N=ge;N<L.length;N++)de(L[N],k,K,he,ve)},$=L=>{if(L.shapeFlag&6)return $(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const k=f(L.anchor||L.el),K=k&&k[g_];return K?f(K):k};let Z=!1;const ae=(L,k,K)=>{let he;L==null?k._vnode&&(de(k._vnode,null,null,!0),he=k._vnode.component):g(k._vnode||null,L,k,null,null,null,K),k._vnode=L,Z||(Z=!0,xg(he),d_(),Z=!1)},re={p:g,um:de,m:ue,r:ye,mt:P,mc:R,pc:q,pbc:D,n:$,o:t};return{render:ae,hydrate:void 0,createApp:qS(ae)}}function nd({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ri({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function rI(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Cp(t,e,n=!1){const r=t.children,s=e.children;if(qe(r)&&qe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Js(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Cp(o,a)),a.type===Uo&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===Ze?1:0)),a.type===qr&&!a.el&&(a.el=o.el)}}function sI(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function U_(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:U_(e)}function $g(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function q_(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?q_(e.subTree):null}const B_=t=>t.__isSuspense;function iI(t,e){e&&e.pendingBranch?qe(t)?e.effects.push(...t):e.effects.push(t):pS(t)}const Ze=Symbol.for("v-fgt"),Uo=Symbol.for("v-txt"),qr=Symbol.for("v-cmt"),Aa=Symbol.for("v-stc"),Sa=[];let Zn=null;function F(t=!1){Sa.push(Zn=t?null:[])}function oI(){Sa.pop(),Zn=Sa[Sa.length-1]||null}let ja=1;function _u(t,e=!1){ja+=t,t<0&&Zn&&e&&(Zn.hasOnce=!0)}function V_(t){return t.dynamicChildren=ja>0?Zn||mo:null,oI(),ja>0&&Zn&&Zn.push(t),t}function be(t,e,n,r,s,i){return V_(te(t,e,n,r,s,i,!0))}function ce(t,e,n,r,s){return V_(oe(t,e,n,r,s,!0))}function Ua(t){return t?t.__v_isVNode===!0:!1}function Yo(t,e){return t.type===e.type&&t.key===e.key}const z_=({key:t})=>t??null,Ql=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ut(t)||Ot(t)||He(t)?{i:fn,r:t,k:e,f:!!n}:t:null);function te(t,e=null,n=null,r=0,s=null,i=t===Ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&z_(e),ref:e&&Ql(e),scopeId:h_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:fn};return a?(Rp(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Ut(n)?8:16),ja>0&&!o&&Zn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Zn.push(l),l}const oe=aI;function aI(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===E_)&&(t=qr),Ua(t)){const a=qi(t,e,!0);return n&&Rp(a,n),ja>0&&!i&&Zn&&(a.shapeFlag&6?Zn[Zn.indexOf(t)]=a:Zn.push(a)),a.patchFlag=-2,a}if(gI(t)&&(t=t.__vccOpts),e){e=lr(e);let{class:a,style:l}=e;a&&!Ut(a)&&(e.class=Ve(a)),xt(l)&&(sc(l)&&!qe(l)&&(l=Cn({},l)),e.style=jr(l))}const o=Ut(t)?1:B_(t)?128:bS(t)?64:xt(t)?4:He(t)?2:0;return te(t,e,n,r,s,o,i,!0)}function lr(t){return t?sc(t)||$_(t)?Cn({},t):t:null}function qi(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?Ue(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&z_(u),ref:e&&e.ref?n&&i?qe(i)?i.concat(Ql(e)):[i,Ql(e)]:Ql(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&qi(t.ssContent),ssFallback:t.ssFallback&&qi(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&_p(c,l.clone(c)),c}function rt(t=" ",e=0){return oe(Uo,null,t,e)}function lI(t,e){const n=oe(Aa,null,t);return n.staticCount=e,n}function je(t="",e=!1){return e?(F(),ce(qr,null,t)):oe(qr,null,t)}function es(t){return t==null||typeof t=="boolean"?oe(qr):qe(t)?oe(Ze,null,t.slice()):Ua(t)?Js(t):oe(Uo,null,String(t))}function Js(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:qi(t)}function Rp(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(qe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Rp(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!$_(e)?e._ctx=fn:s===3&&fn&&(fn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else He(e)?(e={default:e,_ctx:fn},n=32):(e=String(e),r&64?(n=16,e=[rt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ue(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ve([e.class,r.class]));else if(s==="style")e.style=jr([e.style,r.style]);else if(Wu(s)){const i=e[s],o=r[s];o&&i!==o&&!(qe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Gr(t,e,n,r=null){os(t,e,7,[n,r])}const uI=O_();let cI=0;function dI(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||uI,i={uid:cI++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Bw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:M_(r,s),emitsOptions:D_(r,s),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:r.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=VS.bind(null,i),t.ce&&t.ce(i),i}let An=null;const ur=()=>An||fn;let xu,Zf;{const t=Qu(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};xu=e("__VUE_INSTANCE_SETTERS__",n=>An=n),Zf=e("__VUE_SSR_SETTERS__",n=>qa=n)}const il=t=>{const e=An;return xu(t),t.scope.on(),()=>{t.scope.off(),xu(e)}},Lg=()=>{An&&An.scope.off(),xu(null)};function H_(t){return t.vnode.shapeFlag&4}let qa=!1;function fI(t,e=!1,n=!1){e&&Zf(e);const{props:r,children:s}=t.vnode,i=H_(t);JS(t,r,i,e),ZS(t,s,n||e);const o=i?hI(t,e):void 0;return e&&Zf(!1),o}function hI(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,$S);const{setup:r}=n;if(r){Ds();const s=t.setupContext=r.length>1?W_(t):null,i=il(t),o=nl(r,t,0,[t.props,s]),a=Lw(o);if(ks(),i(),(a||t.sp)&&!vo(t)&&b_(t),a){if(o.then(Lg,Lg),e)return o.then(l=>{Mg(t,l)}).catch(l=>{oc(l,t,0)});t.asyncDep=o}else Mg(t,o)}else K_(t)}function Mg(t,e,n){He(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xt(e)&&(t.setupState=a_(e)),K_(t)}function K_(t,e,n){const r=t.type;t.render||(t.render=r.render||ns);{const s=il(t);Ds();try{LS(t)}finally{ks(),s()}}}const pI={get(t,e){return En(t,"get",""),t[e]}};function W_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,pI),slots:t.slots,emit:t.emit,expose:e}}function cc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(a_(st(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ea)return Ea[n](t)},has(e,n){return n in e||n in Ea}})):t.proxy}function mI(t,e=!0){return He(t)?t.displayName||t.name:t.name||e&&t.__name}function gI(t){return He(t)&&"__vccOpts"in t}const J=(t,e)=>uS(t,e,qa);function nr(t,e,n){try{_u(-1);const r=arguments.length;return r===2?xt(e)&&!qe(e)?Ua(e)?oe(t,null,[e]):oe(t,e):oe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ua(n)&&(n=[n]),oe(t,e,n))}finally{_u(1)}}const yI="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let eh;const Ng=typeof window<"u"&&window.trustedTypes;if(Ng)try{eh=Ng.createPolicy("vue",{createHTML:t=>t})}catch{}const G_=eh?t=>eh.createHTML(t):t=>t,vI="http://www.w3.org/2000/svg",bI="http://www.w3.org/1998/Math/MathML",bs=typeof document<"u"?document:null,Fg=bs&&bs.createElement("template"),wI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?bs.createElementNS(vI,t):e==="mathml"?bs.createElementNS(bI,t):n?bs.createElement(t,{is:n}):bs.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>bs.createTextNode(t),createComment:t=>bs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>bs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Fg.innerHTML=G_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Fg.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_I=Symbol("_vtc");function xI(t,e,n){const r=t[_I];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const jg=Symbol("_vod"),EI=Symbol("_vsh"),AI=Symbol(""),SI=/(?:^|;)\s*display\s*:/;function II(t,e,n){const r=t.style,s=Ut(n);let i=!1;if(n&&!s){if(e)if(Ut(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Zl(r,a,"")}else for(const o in e)n[o]==null&&Zl(r,o,"");for(const o in n)o==="display"&&(i=!0),Zl(r,o,n[o])}else if(s){if(e!==n){const o=r[AI];o&&(n+=";"+o),r.cssText=n,i=SI.test(n)}}else e&&t.removeAttribute("style");jg in t&&(t[jg]=i?r.display:"",t[EI]&&(r.display="none"))}const Ug=/\s*!important$/;function Zl(t,e,n){if(qe(n))n.forEach(r=>Zl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=CI(t,e);Ug.test(n)?t.setProperty(vi(r),n.replace(Ug,""),"important"):t[r]=n}}const qg=["Webkit","Moz","ms"],rd={};function CI(t,e){const n=rd[e];if(n)return n;let r=Kn(e);if(r!=="filter"&&r in t)return rd[e]=r;r=Xu(r);for(let s=0;s<qg.length;s++){const i=qg[s]+r;if(i in t)return rd[e]=i}return e}const Bg="http://www.w3.org/1999/xlink";function Vg(t,e,n,r,s,i=LA(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Bg,e.slice(6,e.length)):t.setAttributeNS(Bg,e,n):n==null||i&&!jw(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Fr(n)?String(n):n)}function zg(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?G_(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=jw(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Ys(t,e,n,r){t.addEventListener(e,n,r)}function RI(t,e,n,r){t.removeEventListener(e,n,r)}const Hg=Symbol("_vei");function TI(t,e,n,r,s=null){const i=t[Hg]||(t[Hg]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=OI(e);if(r){const u=i[e]=PI(r,s);Ys(t,a,u,l)}else o&&(RI(t,a,o,l),i[e]=void 0)}}const Kg=/(?:Once|Passive|Capture)$/;function OI(t){let e;if(Kg.test(t)){e={};let r;for(;r=t.match(Kg);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):vi(t.slice(2)),e]}let sd=0;const DI=Promise.resolve(),kI=()=>sd||(DI.then(()=>sd=0),sd=Date.now());function PI(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;os($I(r,n.value),e,5,[r])};return n.value=t,n.attached=kI(),n}function $I(t,e){if(qe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Wg=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,LI=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?xI(t,r,o):e==="style"?II(t,n,r):Wu(e)?hp(e)||TI(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):MI(t,e,r,o))?(zg(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Vg(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ut(r))?zg(t,Kn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Vg(t,e,r,o))};function MI(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Wg(e)&&He(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Wg(e)&&Ut(n)?!1:e in t}const Co=t=>{const e=t.props["onUpdate:modelValue"]||!1;return qe(e)?n=>Xl(e,n):e};function NI(t){t.target.composing=!0}function Gg(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Os=Symbol("_assign");function Jg(t,e,n){return e&&(t=t.trim()),n&&(t=Yu(t)),t}const Ia={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Os]=Co(s);const i=r||s.props&&s.props.type==="number";Ys(t,e?"change":"input",o=>{o.target.composing||t[Os](Jg(t.value,n,i))}),(n||i)&&Ys(t,"change",()=>{t.value=Jg(t.value,n,i)}),e||(Ys(t,"compositionstart",NI),Ys(t,"compositionend",Gg),Ys(t,"change",Gg))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Os]=Co(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Yu(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},J_={deep:!0,created(t,e,n){t[Os]=Co(n),Ys(t,"change",()=>{const r=t._modelValue,s=Ba(t),i=t.checked,o=t[Os];if(qe(r)){const a=mp(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(a,1),o(u)}}else if(jo(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(X_(t,i))})},mounted:Xg,beforeUpdate(t,e,n){t[Os]=Co(n),Xg(t,e,n)}};function Xg(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(qe(e))s=mp(e,r.props.value)>-1;else if(jo(e))s=e.has(r.props.value);else{if(e===n)return;s=Za(e,X_(t,!0))}t.checked!==s&&(t.checked=s)}const FI={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=jo(e);Ys(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Yu(Ba(o)):Ba(o));t[Os](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Ft(()=>{t._assigning=!1})}),t[Os]=Co(r)},mounted(t,{value:e}){Yg(t,e)},beforeUpdate(t,e,n){t[Os]=Co(n)},updated(t,{value:e}){t._assigning||Yg(t,e)}};function Yg(t,e){const n=t.multiple,r=qe(e);if(!(n&&!r&&!jo(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Ba(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=mp(e,a)>-1}else o.selected=e.has(a);else if(Za(Ba(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ba(t){return"_value"in t?t._value:t.value}function X_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const jI=["ctrl","shift","alt","meta"],UI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>jI.some(n=>t[`${n}Key`]&&!e.includes(n))},Mn=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=UI[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},qI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Y_=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=vi(s.key);if(e.some(o=>o===i||qI[o]===i))return t(s)}))},BI=Cn({patchProp:LI},wI);let Qg;function VI(){return Qg||(Qg=tI(BI))}const zI=((...t)=>{const e=VI().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=KI(r);if(!s)return;const i=e._component;!He(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,HI(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function HI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function KI(t){return Ut(t)?document.querySelector(t):t}const th=(t,e)=>e.some(n=>t instanceof n);let Zg,ey;function WI(){return Zg||(Zg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GI(){return ey||(ey=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nh=new WeakMap,id=new WeakMap,dc=new WeakMap;function JI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ii(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return dc.set(e,t),e}function XI(t){if(nh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});nh.set(t,e)}let rh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nh.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ii(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Q_(t){rh=t(rh)}function YI(t){return GI().includes(t)?function(...e){return t.apply(sh(this),e),ii(this.request)}:function(...e){return ii(t.apply(sh(this),e))}}function QI(t){return typeof t=="function"?YI(t):(t instanceof IDBTransaction&&XI(t),th(t,WI())?new Proxy(t,rh):t)}function ii(t){if(t instanceof IDBRequest)return JI(t);if(id.has(t))return id.get(t);const e=QI(t);return e!==t&&(id.set(t,e),dc.set(e,t)),e}const sh=t=>dc.get(t);function Eu(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ii(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ii(o.result),l.oldVersion,l.newVersion,ii(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function ty(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),ii(n).then(()=>{})}const ZI=["get","getKey","getAll","getAllKeys","count"],eC=["put","add","delete","clear"],od=new Map;function ny(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(od.get(e))return od.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=eC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ZI.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return od.set(e,i),i}Q_(t=>({...t,get:(e,n,r)=>ny(e,n)||t.get(e,n,r),has:(e,n)=>!!ny(e,n)||t.has(e,n)}));const tC=["continue","continuePrimaryKey","advance"],ry={},ih=new WeakMap,Z_=new WeakMap,nC={get(t,e){if(!tC.includes(e))return t[e];let n=ry[e];return n||(n=ry[e]=function(...r){ih.set(this,Z_.get(this)[e](...r))}),n}};async function*rC(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,nC);for(Z_.set(n,e),dc.set(n,sh(e));e;)yield n,e=await(ih.get(n)||e.continue()),ih.delete(n)}function sy(t,e){return e===Symbol.asyncIterator&&th(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&th(t,[IDBIndex,IDBObjectStore])}Q_(t=>({...t,get(e,n,r){return sy(e,n)?rC:t.get(e,n,r)},has(e,n){return sy(e,n)||t.has(e,n)}}));var e0={},sC=Object.defineProperty,iC=(t,e,n)=>e in t?sC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nn=(t,e,n)=>iC(t,typeof e!="symbol"?e+"":e,n);function t0(t){return typeof t=="function"?t():t}function oC(t,e,...n){t0(t)||Ge(e,...n)}function Ge(t="Something went wrong",...e){const n=typeof t=="string"?Error:t;throw new n(...typeof t=="string"?[t]:e)}const Ti="items";let aC=class{constructor(e){Nn(this,"db",null),Nn(this,"namespace"),this.namespace=e}async has(e){return await(await this.getConnection()).get(Ti,e)!==void 0}async get(e){return(await this.getConnection()).get(Ti,e)}async require(e){return await this.get(e)??Ge(`Missing required '${e}' IndexedDBMap value`)}async set(e,n){await(await this.getConnection()).put(Ti,n,e)}async delete(e){await(await this.getConnection()).delete(Ti,e)}async clear(){await(await this.getConnection()).clear(Ti)}close(){this.db&&(this.db.close(),this.db=null)}async getConnection(){return this.db=this.db??await this.connect(),this.db}async connect(){const e=`${this.namespace}-map`;return await Eu(e,1,{upgrade(n){n.objectStoreNames.contains(Ti)||n.createObjectStore(Ti)},blocked:()=>Ge(`Could not open '${e}' IndexedDB`)})}};function lC(){return typeof global<"u"?global:typeof globalThis<"u"?globalThis:window}const uC=lC().Error;let cr=class extends uC{constructor(e,n){super(e,n),this.name=new.target.name==="JSError"?"Error":new.target.name,Object.setPrototypeOf(this,new.target.prototype)}};function cC(t,e){return t==null&&e==null?[t===null?1:0,e===null?1:0]:[t??null,e??null]}function ad(t,e){const[n,r]=cC(t,e);return n>r?1:r>n?-1:0}function Tp(t,e){return t===e?!0:!ht(t)||!ht(e)?!1:t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():Object.keys(t).length!==Object.keys(e).length?!1:!Object.keys(t).some(n=>!Tp(t[n],e[n]))}function Al(t,e){let n=t;const r=e.split(".");for(const s of r){if(Array.isArray(n)){n=n[Number(s)];continue}if(!ht(n))return;n=n[s]}return n}function dC(t){return Object.entries(t).reduce((e,[n,r])=>(e[r]=n,e),{})}const n0=Array.isArray.bind(Array);function Ca(t){return t==null?!0:Array.isArray(t)||typeof t=="string"?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}function Yt(t,e){return t instanceof e}function fC(t){return typeof(t==null?void 0:t[Symbol.iterator])=="function"}function ht(t){return typeof t=="object"&&t!==null}function hC(t){return ht(t)&&Object.getPrototypeOf(t)===Object.prototype}function pC(t){return typeof t=="string"||t instanceof String}function oh(t){return typeof t>"u"||t===null}function kr(t){t={...t};for(const e in t)mC(t,e)&&(t[e]=kr(t[e]));return t}Object.entries.bind(Object);Object.fromEntries.bind(Object);Object.values.bind(Object);Object.keys.bind(Object);function Au(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r0(t,e){return t.reduce((n,r)=>(n[r[e]]=r,n),{})}function Zs(t,e){const n={},r=Array.isArray(e)?e:[e];for(const s of r)s in t&&(n[s]=t[s]);return n}function mC(t,e){let n;return Au(t,e)&&ht(n=t[e])&&n.constructor===Object}function di(t,e){if(typeof e=="function"){const s=e,i={};for(const[o,a]of Object.entries(t))s(a)||(i[o]=a);return i}const n={...t},r=Array.isArray(e)?e:[e];for(const s of r)delete n[s];return n}function Fn(t){return di(t,e=>e==null)}function s0(t,e,n){t.prototype[e]=n}function $t(t){return String(t)}function gC(t){return t instanceof Error?t:new Error($t(t))}function yC(t){t.splice(0,t.length)}function qo(t,e,n){const r=t.slice(0),s=[],i=n?(o,a)=>a.findIndex(l=>n(o,l)):(o,a)=>a.indexOf(o);for(const o of e){const a=i(o,r);a!==-1?r.splice(a,1):s.push(o)}return{added:s,removed:r}}function iy(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function vC(t,e){return t.length!==e.length?!1:!t.some((n,r)=>e[r]!==n)}function rn(t,e){return e?t.filter(e):t.filter(n=>!!n)}function bC(t,e){for(const n of t)if(e(n))return n;return null}function wC(t,e){return[...t.entries()].flatMap(([n,r])=>e(r,n))}function _C(t,e){const n=typeof e=="string"?r=>$t(r[e]):e;return t.reduce((r,s)=>{var i;return(r[i=n(s)]??(r[i]=[])).push(s),r},{})}function xC(t){return t.length===0}function EC(t,e){return t.map(n=>n[e])}function AC(t){return t.length===0?null:t[Math.floor(Math.random()*t.length)]}function SC(t,e){const n=t.slice(0),r=[];for(;n.length>0&&r.length<e;){const s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}return r}function zn(t,e){const n=t.indexOf(e);return n===-1?!1:(t.splice(n,1),!0)}function IC(t,e){return t.splice(Number(e),1).length>0}function i0(t,e,n){const r=t.indexOf(e);return r===-1?!1:(t[r]=n,!0)}function Ra(t,e,n){n=e==="asc"||e==="desc"?e:n;const r={},s=a=>{switch(typeof a){case"string":return"";case"number":return Number.MIN_SAFE_INTEGER;case"boolean":return!1;default:return null}},i=(a,l)=>{if(!(l in r)){const u=Al(t.find(c=>Al(c,l)!==void 0&&Al(c,l)!==null),l);r[l]=s(u)}return Al(a,l)??r[l]},o=()=>{const a=n==="desc"?l=>(u,c)=>ad(i(c,l),i(u,l)):l=>(u,c)=>ad(i(u,l),i(c,l));switch(typeof e){case"function":return e;case"string":return e==="asc"?void 0:e==="desc"?(l,u)=>ad(u,l):a(e);case"object":{const l=e.map(u=>a(u));return(u,c)=>{for(const d of l){const f=d(u,c);if(f!==0)return f}return 0}}}};return t.slice(0).sort(o())}function Qn(t,e){return e?Object.values(t.reduce((n,r)=>{const s=e(r);return n[s]=n[s]??r,n},{})):[...new Set(t)]}function CC(t,e,n){return t.filter(r=>{const s=r[e],i=typeof s=="function"?s.call(r):s;return n?i===n:!!i})}function ir(t,e){return Array.isArray(e)?rn(t,n=>e.indexOf(n)===-1):RC(t,t.indexOf(e))}function RC(t,e){return Op(t,[e])}function Op(t,e){return t.map((n,r)=>[n,r]).filter(([n,r])=>!e.includes(r)).map(([n])=>n)}function mn(t,e=!1){return Array.isArray(t)||fC(t)&&!pC(t)?Array.from(t):e&&t==null?[]:[t]}let o0=class{constructor(){Nn(this,"listeners",[])}add(e){return this.listeners.push(e),()=>this.remove(e)}remove(e){zn(this.listeners,e)}async emit(e,...n){for(const r of this.listeners){const s=r[e];typeof s=="function"&&await(s==null?void 0:s.call(r,...n))}}},Su=class{static isConjuring(){return this.__conjuring}static isMagicReady(){return this.__reservedProperties.has(this)}static prepareMagic(){this.__conjuring=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__conjuring=!1}static isReservedProperty(e){var n;return!!((n=this.__reservedProperties.get(this))!=null&&n.has(e))}constructor(...e){if(!this.static().isConjuring())return this.static().isMagicReady()||this.static().prepareMagic(),this._proxy=this.createProxy(),this.initialize(...e),this._proxy.instance}static(e){const n=this.constructor;return e?n[e]:n}reserveProperty(e){Object.assign(this,{[e]:null})}initialize(...e){}__get(e){return Reflect.get(this._proxy.target,e)}__set(e,n){Reflect.set(this._proxy.target,e,n)}__delete(e){Reflect.deleteProperty(this._proxy.target,e)}createProxy(){const e=this.static();return{target:this,instance:new Proxy(this,{get(n,r,s){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.get(n,r,s):n.__get(r)},set(n,r,s,i){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.set(n,r,s,i):(n.__set(r,s),!0)},deleteProperty(n,r){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.deleteProperty(n,r):(n.__delete(r),!0)}})}}};Nn(Su,"__conjuring"),Nn(Su,"__reservedProperties",new WeakMap);let TC=class a0{constructor(e){Nn(this,"keysToItems"),Nn(this,"itemsToKeys"),Nn(this,"getKey"),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=e??(n=>$t(n))}static createFromArray(e,n){const r=typeof n=="string"?i=>i[n]:n,s=new a0(r);for(const i of e)s.add(i);return s}*[Symbol.iterator](){yield*this.keysToItems}get size(){return this.keysToItems.size}items(){return this.keysToItems.values()}keys(){return this.keysToItems.keys()}entries(){return this.keysToItems.entries()}add(e){const n=this.getKey(e);this.keysToItems.set(n,e),this.itemsToKeys.set(e,n)}require(e){return this.keysToItems.get(e)??Ge(`Couldn't find item with '${e}' key`)}get(e){return this.keysToItems.get(e)}getKeys(){return[...this.keysToItems.keys()]}getItems(){return[...this.keysToItems.values()]}hasKey(e){return this.keysToItems.has(e)}hasItem(e){return this.itemsToKeys.has(e)}delete(e){const n=this.itemsToKeys.get(e);n&&(this.itemsToKeys.delete(e),this.keysToItems.delete(n))}filter(e){const n=this.constructor.createFromArray([],this.getKey);for(const[r,s]of this.entries())e(s,r)&&n.add(s);return n}clear(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}clone(){const e=this.constructor,n=new e(this.getKey);n.keysToItems=new Map(this.keysToItems),n.itemsToKeys=new WeakMap;for(const[r,s]of n.keysToItems.entries())n.itemsToKeys.set(s,r);return n}},Nr=class l0{constructor(){Nn(this,"resolveListeners",[]),Nn(this,"rejectListeners",[]),Nn(this,"resetListeners",[]),this.setPromiseValues()}static from(e){const n=new l0;return e.then(n.resolve.bind(n)).catch(n.reject.bind(n)),n}get value(){return this._value||null}isResolved(){return"_value"in this}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}resolve(e){this.isResolved()&&this.reset(),this._value=e,this._resolve(e),this.resolveListeners.forEach(n=>n(e))}reject(e){this.isResolved()&&this.reset(),delete this._value,this._reject(e),this.rejectListeners.forEach(n=>n(e))}onResolve(e){return this.resolveListeners.push(e),()=>zn(this.resolveListeners,e)}onReject(e){return this.rejectListeners.push(e),()=>zn(this.rejectListeners,e)}onReset(e){return this.resetListeners.push(e),()=>zn(this.resetListeners,e)}reset(){this.setPromiseValues(),this.rejectListeners.forEach(e=>e())}setPromiseValues(){this.promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}},fc=class{constructor(e=1){Nn(this,"count"),Nn(this,"listeners"),this.count=e,this.listeners=new Set}acquire(){return this.count===0?this.waitAvailable().then(()=>this.acquire()):(this.count=Math.max(this.count-1,0),Promise.resolve())}release(){this.count++,this.notifyAvailable()}isAvailable(){return this.count!==0}async run(e){await this.acquire();try{return await e()}finally{this.release()}}async waitAvailable(){for(;!this.isAvailable();)await new Promise(e=>{const n=()=>{this.listeners.delete(n),e(null)};this.listeners.add(n)})}notifyAvailable(){this.listeners.forEach(e=>e())}};const oy={},u0=class c0{static get instance(){return this._instance=this._instance??new c0}constructor(){}set(e,n){typeof n>"u"&&(n="__undefined__"),localStorage.setItem(e,JSON.stringify(n))}get(e,n=null){const r=localStorage.getItem(e);if(r===null)return n;if(r!=="__undefined__")return JSON.parse(r)}require(e){const n=this.get(e,oy);if(n===oy)throw new Error(`Failed getting required key from local storage: '${e}'`);return n}has(e){return localStorage.getItem(e)!==null}remove(e){localStorage.removeItem(e)}pull(e,n=null){if(!this.has(e))return n;const r=this.get(e);return this.remove(e),r}};Nn(u0,"_instance");let OC=u0;const mr=OC.instance;function Iu(t){return!(!t||["0","false"].includes(t))}const ld={},oi={},Ro={};function ay(t,e){return oi[t]=oi[t]??Nr.from(e()),oi[t]}function eu(t,e){return ld[t]=ld[t]??e(),ld[t]}function DC(t){const e={};return(...n)=>"result"in e?e.result:e.result=t(...n)}function ly(t,e,n){var r,s;return(r=Ro[t])!=null&&r.has(e)||Dp(t,e,n()),((s=Ro[t])==null?void 0:s.get(e))??Ge()}function tu(t,e){var n;return((n=Ro[t])==null?void 0:n.get(e))??null}function uy(t){mn(t??Object.keys(oi)).forEach(e=>delete oi[e])}function ud(t,e){var n;(n=Ro[t])==null||n.delete(e)}function cy(t,e){var n;oi[t]=oi[t]??new Nr,(n=oi[t])==null||n.resolve(e)}function Dp(t,e,n){(Ro[t]??(Ro[t]=new WeakMap)).set(e,n)}function cd(t){if(!t)return null;try{const e=new Date(t),n=e.getTime();return isNaN(n)||n===0?null:e}catch{return null}}function d0(){return typeof globalThis=="object"&&("Cypress"in globalThis||typeof globalThis.top=="object"&&globalThis.top&&"Cypress"in globalThis.top)?"e2e":typeof process=="object"&&e0.VITEST?"unit":null}function hc(){var t;if(d0())return"testing";if(typeof process=="object"&&(t=e0)!=null&&t.NODE_ENV)return"production";try{return"production"}catch{return null}}function fi(){return hc()==="development"}function Va(t){return hc()!=="testing"?!1:!t||t===d0()}function kC(){const t=hc();return t==="development"||t==="testing"}function PC(t){return FC(t)}function dd(t,e){let n=t[0],r=t[1],s=t[2],i=t[3];n=yn(n,r,s,i,e[0],7,-680876936),i=yn(i,n,r,s,e[1],12,-389564586),s=yn(s,i,n,r,e[2],17,606105819),r=yn(r,s,i,n,e[3],22,-1044525330),n=yn(n,r,s,i,e[4],7,-176418897),i=yn(i,n,r,s,e[5],12,1200080426),s=yn(s,i,n,r,e[6],17,-1473231341),r=yn(r,s,i,n,e[7],22,-45705983),n=yn(n,r,s,i,e[8],7,1770035416),i=yn(i,n,r,s,e[9],12,-1958414417),s=yn(s,i,n,r,e[10],17,-42063),r=yn(r,s,i,n,e[11],22,-1990404162),n=yn(n,r,s,i,e[12],7,1804603682),i=yn(i,n,r,s,e[13],12,-40341101),s=yn(s,i,n,r,e[14],17,-1502002290),r=yn(r,s,i,n,e[15],22,1236535329),n=vn(n,r,s,i,e[1],5,-165796510),i=vn(i,n,r,s,e[6],9,-1069501632),s=vn(s,i,n,r,e[11],14,643717713),r=vn(r,s,i,n,e[0],20,-373897302),n=vn(n,r,s,i,e[5],5,-701558691),i=vn(i,n,r,s,e[10],9,38016083),s=vn(s,i,n,r,e[15],14,-660478335),r=vn(r,s,i,n,e[4],20,-405537848),n=vn(n,r,s,i,e[9],5,568446438),i=vn(i,n,r,s,e[14],9,-1019803690),s=vn(s,i,n,r,e[3],14,-187363961),r=vn(r,s,i,n,e[8],20,1163531501),n=vn(n,r,s,i,e[13],5,-1444681467),i=vn(i,n,r,s,e[2],9,-51403784),s=vn(s,i,n,r,e[7],14,1735328473),r=vn(r,s,i,n,e[12],20,-1926607734),n=bn(n,r,s,i,e[5],4,-378558),i=bn(i,n,r,s,e[8],11,-2022574463),s=bn(s,i,n,r,e[11],16,1839030562),r=bn(r,s,i,n,e[14],23,-35309556),n=bn(n,r,s,i,e[1],4,-1530992060),i=bn(i,n,r,s,e[4],11,1272893353),s=bn(s,i,n,r,e[7],16,-155497632),r=bn(r,s,i,n,e[10],23,-1094730640),n=bn(n,r,s,i,e[13],4,681279174),i=bn(i,n,r,s,e[0],11,-358537222),s=bn(s,i,n,r,e[3],16,-722521979),r=bn(r,s,i,n,e[6],23,76029189),n=bn(n,r,s,i,e[9],4,-640364487),i=bn(i,n,r,s,e[12],11,-421815835),s=bn(s,i,n,r,e[15],16,530742520),r=bn(r,s,i,n,e[2],23,-995338651),n=wn(n,r,s,i,e[0],6,-198630844),i=wn(i,n,r,s,e[7],10,1126891415),s=wn(s,i,n,r,e[14],15,-1416354905),r=wn(r,s,i,n,e[5],21,-57434055),n=wn(n,r,s,i,e[12],6,1700485571),i=wn(i,n,r,s,e[3],10,-1894986606),s=wn(s,i,n,r,e[10],15,-1051523),r=wn(r,s,i,n,e[1],21,-2054922799),n=wn(n,r,s,i,e[8],6,1873313359),i=wn(i,n,r,s,e[15],10,-30611744),s=wn(s,i,n,r,e[6],15,-1560198380),r=wn(r,s,i,n,e[13],21,1309151649),n=wn(n,r,s,i,e[4],6,-145523070),i=wn(i,n,r,s,e[11],10,-1120210379),s=wn(s,i,n,r,e[2],15,718787259),r=wn(r,s,i,n,e[9],21,-343485551),t[0]=ei(n,t[0]),t[1]=ei(r,t[1]),t[2]=ei(s,t[2]),t[3]=ei(i,t[3])}function pc(t,e,n,r,s,i){return e=ei(ei(e,t),ei(r,i)),ei(e<<s|e>>>32-s,n)}function yn(t,e,n,r,s,i,o){return pc(e&n|~e&r,t,e,s,i,o)}function vn(t,e,n,r,s,i,o){return pc(e&r|n&~r,t,e,s,i,o)}function bn(t,e,n,r,s,i,o){return pc(e^n^r,t,e,s,i,o)}function wn(t,e,n,r,s,i,o){return pc(n^(e|~r),t,e,s,i,o)}function $C(t){const e=t.length,n=[1732584193,-271733879,-1732584194,271733878];let r;for(r=64;r<=t.length;r+=64)dd(n,LC(t.substring(r-64,r)));t=t.substring(r-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)s[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(s[r>>2]|=128<<(r%4<<3),r>55)for(dd(n,s),r=0;r<16;r++)s[r]=0;return s[14]=e*8,dd(n,s),n}function LC(t){let e;const n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}const dy="0123456789abcdef".split("");function MC(t){let e="",n=0;for(;n<4;n++)e+=dy[t>>n*8+4&15]+dy[t>>n*8&15];return e}function NC(t){for(let e=0;e<t.length;e++)t[e]=MC(t[e]);return t.join("")}function ei(t,e){return t+e&4294967295}function FC(t){return NC($C(t))}function f0(t){const e=t;return(e^Math.random()*16>>e/4).toString(16)}function h0(t=9){return(10**(t-1)).toString().replace(/[01]/g,f0)}function jn(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,f0)}function Hn(t={}){const e=typeof t=="number"?t:(t.milliseconds||t.ms||0)+(t.seconds||0)*1e3;return new Promise(n=>setTimeout(n,e))}async function jC(){await new Promise(()=>{})}async function UC(t){for(;location.href!==t;)await Hn({ms:1})}function Ta(t){return qC()[t]}function qC(){const t=new URL(location.href),e={};return t.searchParams.forEach((n,r)=>e[r]=n),e}function fo(t){return new URL(location.href).searchParams.has(t)}async function BC(t){const e=Object.entries(t).reduce((n,[r,s])=>(s?n.searchParams.set(r,s):n.searchParams.delete(r),n),new URL(location.href));history.pushState(null,document.title,e.href),await UC(e.href)}function p0(t,e=0){const n=10**e;return Math.round(t*n)/n}const VC=Object.getPrototypeOf(Object);function zC(t,e){class n extends t{constructor(...s){super(...s);for(const i of e){const o=new i(...s);Object.assign(this,o)}return this}}return Nn(n,"__mixins",e),KC(n,e),n}function HC(t,e){if(e===Object)return;let n=e;do{const r=di(Object.getOwnPropertyDescriptors(n.prototype),["constructor"]);for(const[s,i]of Object.entries(r))Object.defineProperty(t.prototype,s,i);n=Object.getPrototypeOf(n)}while(n!==VC)}function KC(t,e=[]){for(const n of e)HC(t,n)}function mc(t,e=[]){const n=Array.isArray(t)?Object:t,r=Array.isArray(t)?t:e;return zC(n,r)}function gc(...t){return mc(...t)}function yc(t,e){var n,r;return((t==null?void 0:t.__mixins)??((r=(n=t==null?void 0:t.__proto__)==null?void 0:n.constructor)==null?void 0:r.__mixins)??[]).includes(e)}async function WC(t,e){for(const n of t){const r=await e(n);if(r)return r}return null}function GC(t){return"then"in t}function m0(t,e=null){return typeof t!="function"?t.catch(()=>e):async(...n)=>{try{return await t(...n)}catch{return e??null}}}function JC(t,e=300,n="..."){return t.length<e?t:t.substring(0,e-n.length)+n}function g0(t,e){return t.match(e)}function y0(t,e){return t.matchAll(e)}function XC(t){return t.split("").reverse().join("")}function kp(t){return t.split(/_|-|\s|(?=[A-Z])/)}function ki(t){const[e,...n]=kp(t);return(e??"").toLowerCase()+n.map(r=>r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()).join("")}function Pp(t,e="-"){return t=t.normalize("NFD").replace(/[~(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,e),e.length>0&&(t=t.replace(new RegExp(`${e}+`,"g"),e)),t}function YC(t){return kp(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join("")}function QC(t){return kp(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function Tt(t){return br(t)??Ge(`Failed getting parent directory from '${t}'`)}function ZC(t){return v0(t)??Ge(`Failed getting directory name from '${t}'`)}function eR(t){return ol(t)??Ge(`Failed parsing url from '${t}'`)}function To(...t){let e=t.shift();for(;t.length>0;){const n=t.shift();n.startsWith("/")?e=ls(e)+n:n.match(/^[\w-]+:\/\//)?e=n:e.endsWith("/")?e+=n:e+="/"+n}return e}function ah(...t){const e=To(...t);return e.endsWith("/")?e:e+"/"}function ls(t){const e=t.indexOf("://")+3,n=t.substr(e).indexOf("/");return n!==-1?t.substring(0,e+n):t}function br(t){if(t.endsWith("/")&&(t=t.substring(0,t.length-1)),ls(t)===t)return null;const e=t.lastIndexOf("/");return e!==-1?t.substr(0,e+1):null}function v0(t){t.endsWith("/")||(t=br(t)??t+"/");const e=t.slice(0,-1);return ls(t)===e?null:b0(e)}function b0(t){const e=t.lastIndexOf("/");return(e!==-1?t.slice(e+1):"").replace(/#.*$/,"").replace(/\?.*$/,"")}function ol(t){const e=t.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!e)return null;const n=e[4]||"",[r,s]=n.indexOf(":")===-1?[n]:n.split(":");return{protocol:e[2]||void 0,domain:r||void 0,port:s||void 0,path:e[5]||void 0,query:e[7]||void 0,fragment:e[9]||void 0}}function w0(t,e){const n=ol(t);if(!n)return t;for(const[r,s]of Object.entries(n))n[r]=e[r]!==!1&&s||"";return[n.protocol?`${n.protocol}://`:"",n.domain??"",n.port?`:${n.port}`:"",n.path??"",n.query?`?${n.query}`:"",n.fragment?`#${n.fragment}`:""].join("")}function wr(t){return w0(t,{protocol:!0,domain:!0,port:!0,path:!0,query:!1,fragment:!1})}function _0(t,e){const n=t.prototype;for(const[r,s]of Object.entries(e))n[r]=function(...i){var o;const a=s(this.value,...i);return(o=this.chain)==null?void 0:o.call(this,a)}}function x0(t,e){const n=t.prototype,r=Object.getOwnPropertyDescriptors(e.prototype);for(const[s,i]of Object.entries(r))if(!(s in n)){if(typeof i.value!="function"){Object.defineProperty(n,s,{get(){return this.chain(this.value[s])}});continue}n[s]=function(...o){var a;const l=i.value.call(this.value,...o);return(a=this.chain)==null?void 0:a.call(this,l)}}}let E0=class{constructor(e){this.value=e}static isPrimitive(e){return this.prototype.isPrimitive(e)}create(e){const n=this.constructor;return new n(e)}chain(e){return this.isPrimitive(e)?this.create(e):e}};const tR={clear:yC,diff:qo,filter:rn,first:bC,flatMap:wC,groupBy:_C,isEmpty:xC,project:EC,randomItem:AC,randomItems:SC,remove:zn,removeIndex:IC,replace:i0,sorted:Ra,unique:Qn,where:CC,without:ir,withoutIndexes:Op};let $p=class extends E0{static create(e=[]){const{prototype:n}=this;return n.create(e)}*[Symbol.iterator](){yield*this.value}get(e){return this.value[e]}toArray(){return this.value.slice(0)}isPrimitive(e){return Array.isArray(e)}};_0($p,tR);x0($p,Array);const nR={reverse:XC,toCamelCase:ki,toSlug:Pp,toStudlyCase:YC,toTitleCase:QC};let A0=class extends E0{static create(e=""){const{prototype:n}=this;return n.create(e)}toString(){return this.value}isPrimitive(e){return typeof e=="string"}};_0(A0,nR);x0(A0,String);const rR=[];function Kr(t){let e=null;function n(){try{return t()}catch{return new t}}function r(i){return e=i,i}const s={setInstance:r,newInstance:n,requireInstance:()=>e??r(n()),reset:()=>r(n())};return rR.forEach(i=>i(s)),new Proxy(s,{get:(i,o,a)=>{const l=o!=="constructor"&&o in s?s:s.requireInstance();return Reflect.get(l,o,a)},set:(i,o,a)=>Reflect.set(s.requireInstance(),o,a)})}function sR(t){const e=new Proxy(t,{get(n,r,s){const i=Reflect.get(n,r,s);return typeof i!="function"?i:(...o)=>(i.call(n,...o),e)}});return e}function Ne(t,e){if(!e)return sR(t);const n=e(t);return n instanceof Promise?n.then(()=>t):t}let iR=class{constructor(e,n){this.errorMessage=e,this.getValue=n}get(e,n,r){const s=this.getValue()??Ge(this.errorMessage),i=Reflect.get(s,n,r);return typeof i=="function"?i.bind(s):i}set(e,n,r,s){const i=this.getValue()??Ge(this.errorMessage);return Reflect.set(i,n,r,s)}getPrototypeOf(){const e=this.getValue()??Ge(this.errorMessage);return Object.getPrototypeOf(e)}};function hn(t,e){return e??(e="Required value is missing"),typeof t=="function"?new Proxy({},new iR(e,t)):t??Ge(e)}function lh(t,e){const n=typeof e=="function"?e(t):!!e;return new Proxy(t,{get(r,s,i){return n?Reflect.get(r,s,i):()=>{}}})}function S0(t=[]){return $p.create(mn(t))}function dn(t=[],e){if(!Array.isArray(t)||typeof t[0]!="string")return TC.createFromArray(t,e);const n=e;return t.reduce((r,s)=>(r[s]=n(s),r),{})}const Pr={name:"Manga Reader",version:"?",sourceHash:`8b5e72b2a545701989cddfedaedae4e427da2287
`,basePath:"/manga-reader/",locales:{en:"English"}};/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let I0;const al=t=>I0=t,C0=Symbol();function uh(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Oa;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Oa||(Oa={}));function oR(){const t=el(!0),e=t.run(()=>_e({}));let n=[],r=[];const s=st({install(i){al(s),s._a=i,i.provide(C0,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const R0=()=>{};function fy(t,e,n,r=R0){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&tl()&&Zu(s),s}function Zi(t,...e){t.slice().forEach(n=>{n(...e)})}const aR=t=>t(),hy=Symbol(),fd=Symbol();function ch(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];uh(s)&&uh(r)&&t.hasOwnProperty(n)&&!Ot(r)&&!Rs(r)?t[n]=ch(s,r):t[n]=r}return t}const lR=Symbol();function uR(t){return!uh(t)||!t.hasOwnProperty(lR)}const{assign:Hs}=Object;function cR(t){return!!(Ot(t)&&t.effect)}function dR(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=s?s():{});const c=or(n.state.value[t]);return Hs(c,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=st(J(()=>{al(n);const h=n._s.get(t);return o[f].call(h,h)})),d),{}))}return l=T0(t,u,e,n,r,!0),l}function T0(t,e,n={},r,s,i){let o;const a=Hs({actions:{}},n),l={deep:!0};let u,c,d=[],f=[],h;const m=r.state.value[t];!i&&!m&&(r.state.value[t]={}),_e({});let g;function x(R){let T;u=c=!1,typeof R=="function"?(R(r.state.value[t]),T={type:Oa.patchFunction,storeId:t,events:h}):(ch(r.state.value[t],R),T={type:Oa.patchObject,payload:R,storeId:t,events:h});const D=g=Symbol();Ft().then(()=>{g===D&&(u=!0)}),c=!0,Zi(d,T,r.state.value[t])}const b=i?function(){const{state:T}=n,D=T?T():{};this.$patch(U=>{Hs(U,D)})}:R0;function E(){o.stop(),d=[],f=[],r._s.delete(t)}const _=(R,T="")=>{if(hy in R)return R[fd]=T,R;const D=function(){al(r);const U=Array.from(arguments),z=[],V=[];function P(H){z.push(H)}function X(H){V.push(H)}Zi(f,{args:U,name:D[fd],store:v,after:P,onError:X});let O;try{O=R.apply(this&&this.$id===t?this:v,U)}catch(H){throw Zi(V,H),H}return O instanceof Promise?O.then(H=>(Zi(z,H),H)).catch(H=>(Zi(V,H),Promise.reject(H))):(Zi(z,O),O)};return D[hy]=!0,D[fd]=T,D},p={_p:r,$id:t,$onAction:fy.bind(null,f),$patch:x,$reset:b,$subscribe(R,T={}){const D=fy(d,R,T.detached,()=>U()),U=o.run(()=>et(()=>r.state.value[t],z=>{(T.flush==="sync"?c:u)&&R({storeId:t,type:Oa.direct,events:h},z)},Hs({},l,T)));return D},$dispose:E},v=Gn(p);r._s.set(t,v);const C=(r._a&&r._a.runWithContext||aR)(()=>r._e.run(()=>(o=el()).run(()=>e({action:_}))));for(const R in C){const T=C[R];if(Ot(T)&&!cR(T)||Rs(T))i||(m&&uR(T)&&(Ot(T)?T.value=m[R]:ch(T,m[R])),r.state.value[t][R]=T);else if(typeof T=="function"){const D=_(T,R);C[R]=D,a.actions[R]=T}}return Hs(v,C),Hs(Ye(v),C),Object.defineProperty(v,"$state",{get:()=>r.state.value[t],set:R=>{x(T=>{Hs(T,R)})}}),r._p.forEach(R=>{Hs(v,o.run(()=>R({store:v,app:r._a,pinia:r,options:a})))}),m&&i&&n.hydrate&&n.hydrate(v.$state,m),u=!0,c=!0,v}/*! #__NO_SIDE_EFFECTS__ */function fR(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const u=mS();return a=a||(u?jt(C0,null):null),a&&al(a),a=I0,a._s.has(r)||(i?T0(r,e,s,a):dR(r,s,a)),a._s.get(r)}return o.$id=r,o}/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:O0,setPrototypeOf:py,isFrozen:hR,getPrototypeOf:pR,getOwnPropertyDescriptor:mR}=Object;let{freeze:Un,seal:Sr,create:dh}=Object,{apply:fh,construct:hh}=typeof Reflect<"u"&&Reflect;Un||(Un=function(e){return e});Sr||(Sr=function(e){return e});fh||(fh=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];return e.apply(n,s)});hh||(hh=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return new e(...r)});const Sl=qn(Array.prototype.forEach),gR=qn(Array.prototype.lastIndexOf),my=qn(Array.prototype.pop),Qo=qn(Array.prototype.push),yR=qn(Array.prototype.splice),nu=qn(String.prototype.toLowerCase),hd=qn(String.prototype.toString),pd=qn(String.prototype.match),Zo=qn(String.prototype.replace),vR=qn(String.prototype.indexOf),bR=qn(String.prototype.trim),Or=qn(Object.prototype.hasOwnProperty),Tn=qn(RegExp.prototype.test),ea=wR(TypeError);function qn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return fh(t,e,r)}}function wR(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return hh(t,n)}}function Qe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nu;py&&py(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(hR(e)||(e[r]=i),s=i)}t[s]=!0}return t}function _R(t){for(let e=0;e<t.length;e++)Or(t,e)||(t[e]=null);return t}function Yr(t){const e=dh(null);for(const[n,r]of O0(t))Or(t,n)&&(Array.isArray(r)?e[n]=_R(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Yr(r):e[n]=r);return e}function ta(t,e){for(;t!==null;){const r=mR(t,e);if(r){if(r.get)return qn(r.get);if(typeof r.value=="function")return qn(r.value)}t=pR(t)}function n(){return null}return n}const gy=Un(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),md=Un(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gd=Un(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xR=Un(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),yd=Un(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ER=Un(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),yy=Un(["#text"]),vy=Un(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),vd=Un(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),by=Un(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Il=Un(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),AR=Sr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),SR=Sr(/<%[\w\W]*|[\w\W]*%>/gm),IR=Sr(/\$\{[\w\W]*/gm),CR=Sr(/^data-[\-\w.\u00B7-\uFFFF]+$/),RR=Sr(/^aria-[\-\w]+$/),D0=Sr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),TR=Sr(/^(?:\w+script|data):/i),OR=Sr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),k0=Sr(/^html$/i),DR=Sr(/^[a-z][.\w]*(-[.\w]+)+$/i);var wy=Object.freeze({__proto__:null,ARIA_ATTR:RR,ATTR_WHITESPACE:OR,CUSTOM_ELEMENT:DR,DATA_ATTR:CR,DOCTYPE_NAME:k0,ERB_EXPR:SR,IS_ALLOWED_URI:D0,IS_SCRIPT_OR_DATA:TR,MUSTACHE_EXPR:AR,TMPLIT_EXPR:IR});const na={element:1,text:3,progressingInstruction:7,comment:8,document:9},kR=function(){return typeof window>"u"?null:window},PR=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},_y=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function P0(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kR();const e=Fe=>P0(Fe);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==na.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:u,NamedNodeMap:c=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:h}=t,m=l.prototype,g=ta(m,"cloneNode"),x=ta(m,"remove"),b=ta(m,"nextSibling"),E=ta(m,"childNodes"),_=ta(m,"parentNode");if(typeof o=="function"){const Fe=n.createElement("template");Fe.content&&Fe.content.ownerDocument&&(n=Fe.content.ownerDocument)}let p,v="";const{implementation:S,createNodeIterator:C,createDocumentFragment:R,getElementsByTagName:T}=n,{importNode:D}=r;let U=_y();e.isSupported=typeof O0=="function"&&typeof _=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:V,TMPLIT_EXPR:P,DATA_ATTR:X,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:ie}=wy;let{IS_ALLOWED_URI:B}=wy,ue=null;const de=Qe({},[...gy,...md,...gd,...yd,...yy]);let ye=null;const Se=Qe({},[...vy,...vd,...by,...Il]);let G=Object.seal(dh(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,$=null;const Z=Object.seal(dh(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ae=!0,re=!0,Ee=!1,L=!0,k=!1,K=!0,he=!1,ve=!1,ge=!1,N=!1,j=!1,ee=!1,le=!0,Ie=!1;const xe="user-content-";let ne=!0,pe=!1,Oe={},I=null;const y=Qe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let w=null;const M=Qe({},["audio","video","img","source","image","track"]);let Y=null;const fe=Qe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),we="http://www.w3.org/1998/Math/MathML",Ke="http://www.w3.org/2000/svg",ze="http://www.w3.org/1999/xhtml";let Je=ze,gt=!1,it=null;const pA=Qe({},[we,Ke,ze],hd);let vl=Qe({},["mi","mo","mn","ms","mtext"]),bl=Qe({},["annotation-xml"]);const mA=Qe({},["title","style","font","a","script"]);let Go=null;const gA=["application/xhtml+xml","text/html"],yA="text/html";let Zt=null,Ji=null;const vA=n.createElement("form"),rg=function(Q){return Q instanceof RegExp||Q instanceof Function},Wc=function(){let Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ji&&Ji===Q)){if((!Q||typeof Q!="object")&&(Q={}),Q=Yr(Q),Go=gA.indexOf(Q.PARSER_MEDIA_TYPE)===-1?yA:Q.PARSER_MEDIA_TYPE,Zt=Go==="application/xhtml+xml"?hd:nu,ue=Or(Q,"ALLOWED_TAGS")?Qe({},Q.ALLOWED_TAGS,Zt):de,ye=Or(Q,"ALLOWED_ATTR")?Qe({},Q.ALLOWED_ATTR,Zt):Se,it=Or(Q,"ALLOWED_NAMESPACES")?Qe({},Q.ALLOWED_NAMESPACES,hd):pA,Y=Or(Q,"ADD_URI_SAFE_ATTR")?Qe(Yr(fe),Q.ADD_URI_SAFE_ATTR,Zt):fe,w=Or(Q,"ADD_DATA_URI_TAGS")?Qe(Yr(M),Q.ADD_DATA_URI_TAGS,Zt):M,I=Or(Q,"FORBID_CONTENTS")?Qe({},Q.FORBID_CONTENTS,Zt):y,W=Or(Q,"FORBID_TAGS")?Qe({},Q.FORBID_TAGS,Zt):Yr({}),$=Or(Q,"FORBID_ATTR")?Qe({},Q.FORBID_ATTR,Zt):Yr({}),Oe=Or(Q,"USE_PROFILES")?Q.USE_PROFILES:!1,ae=Q.ALLOW_ARIA_ATTR!==!1,re=Q.ALLOW_DATA_ATTR!==!1,Ee=Q.ALLOW_UNKNOWN_PROTOCOLS||!1,L=Q.ALLOW_SELF_CLOSE_IN_ATTR!==!1,k=Q.SAFE_FOR_TEMPLATES||!1,K=Q.SAFE_FOR_XML!==!1,he=Q.WHOLE_DOCUMENT||!1,N=Q.RETURN_DOM||!1,j=Q.RETURN_DOM_FRAGMENT||!1,ee=Q.RETURN_TRUSTED_TYPE||!1,ge=Q.FORCE_BODY||!1,le=Q.SANITIZE_DOM!==!1,Ie=Q.SANITIZE_NAMED_PROPS||!1,ne=Q.KEEP_CONTENT!==!1,pe=Q.IN_PLACE||!1,B=Q.ALLOWED_URI_REGEXP||D0,Je=Q.NAMESPACE||ze,vl=Q.MATHML_TEXT_INTEGRATION_POINTS||vl,bl=Q.HTML_INTEGRATION_POINTS||bl,G=Q.CUSTOM_ELEMENT_HANDLING||{},Q.CUSTOM_ELEMENT_HANDLING&&rg(Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(G.tagNameCheck=Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&rg(Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(G.attributeNameCheck=Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&typeof Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(G.allowCustomizedBuiltInElements=Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),k&&(re=!1),j&&(N=!0),Oe&&(ue=Qe({},yy),ye=[],Oe.html===!0&&(Qe(ue,gy),Qe(ye,vy)),Oe.svg===!0&&(Qe(ue,md),Qe(ye,vd),Qe(ye,Il)),Oe.svgFilters===!0&&(Qe(ue,gd),Qe(ye,vd),Qe(ye,Il)),Oe.mathMl===!0&&(Qe(ue,yd),Qe(ye,by),Qe(ye,Il))),Q.ADD_TAGS&&(typeof Q.ADD_TAGS=="function"?Z.tagCheck=Q.ADD_TAGS:(ue===de&&(ue=Yr(ue)),Qe(ue,Q.ADD_TAGS,Zt))),Q.ADD_ATTR&&(typeof Q.ADD_ATTR=="function"?Z.attributeCheck=Q.ADD_ATTR:(ye===Se&&(ye=Yr(ye)),Qe(ye,Q.ADD_ATTR,Zt))),Q.ADD_URI_SAFE_ATTR&&Qe(Y,Q.ADD_URI_SAFE_ATTR,Zt),Q.FORBID_CONTENTS&&(I===y&&(I=Yr(I)),Qe(I,Q.FORBID_CONTENTS,Zt)),Q.ADD_FORBID_CONTENTS&&(I===y&&(I=Yr(I)),Qe(I,Q.ADD_FORBID_CONTENTS,Zt)),ne&&(ue["#text"]=!0),he&&Qe(ue,["html","head","body"]),ue.table&&(Qe(ue,["tbody"]),delete W.tbody),Q.TRUSTED_TYPES_POLICY){if(typeof Q.TRUSTED_TYPES_POLICY.createHTML!="function")throw ea('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Q.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ea('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');p=Q.TRUSTED_TYPES_POLICY,v=p.createHTML("")}else p===void 0&&(p=PR(h,s)),p!==null&&typeof v=="string"&&(v=p.createHTML(""));Un&&Un(Q),Ji=Q}},sg=Qe({},[...md,...gd,...xR]),ig=Qe({},[...yd,...ER]),bA=function(Q){let Ce=_(Q);(!Ce||!Ce.tagName)&&(Ce={namespaceURI:Je,tagName:"template"});const Me=nu(Q.tagName),Dt=nu(Ce.tagName);return it[Q.namespaceURI]?Q.namespaceURI===Ke?Ce.namespaceURI===ze?Me==="svg":Ce.namespaceURI===we?Me==="svg"&&(Dt==="annotation-xml"||vl[Dt]):!!sg[Me]:Q.namespaceURI===we?Ce.namespaceURI===ze?Me==="math":Ce.namespaceURI===Ke?Me==="math"&&bl[Dt]:!!ig[Me]:Q.namespaceURI===ze?Ce.namespaceURI===Ke&&!bl[Dt]||Ce.namespaceURI===we&&!vl[Dt]?!1:!ig[Me]&&(mA[Me]||!sg[Me]):!!(Go==="application/xhtml+xml"&&it[Q.namespaceURI]):!1},Wr=function(Q){Qo(e.removed,{element:Q});try{_(Q).removeChild(Q)}catch{x(Q)}},Ii=function(Q,Ce){try{Qo(e.removed,{attribute:Ce.getAttributeNode(Q),from:Ce})}catch{Qo(e.removed,{attribute:null,from:Ce})}if(Ce.removeAttribute(Q),Q==="is")if(N||j)try{Wr(Ce)}catch{}else try{Ce.setAttribute(Q,"")}catch{}},og=function(Q){let Ce=null,Me=null;if(ge)Q="<remove></remove>"+Q;else{const Gt=pd(Q,/^[\r\n\t ]+/);Me=Gt&&Gt[0]}Go==="application/xhtml+xml"&&Je===ze&&(Q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Q+"</body></html>");const Dt=p?p.createHTML(Q):Q;if(Je===ze)try{Ce=new f().parseFromString(Dt,Go)}catch{}if(!Ce||!Ce.documentElement){Ce=S.createDocument(Je,"template",null);try{Ce.documentElement.innerHTML=gt?v:Dt}catch{}}const gn=Ce.body||Ce.documentElement;return Q&&Me&&gn.insertBefore(n.createTextNode(Me),gn.childNodes[0]||null),Je===ze?T.call(Ce,he?"html":"body")[0]:he?Ce.documentElement:gn},ag=function(Q){return C.call(Q.ownerDocument||Q,Q,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Gc=function(Q){return Q instanceof d&&(typeof Q.nodeName!="string"||typeof Q.textContent!="string"||typeof Q.removeChild!="function"||!(Q.attributes instanceof c)||typeof Q.removeAttribute!="function"||typeof Q.setAttribute!="function"||typeof Q.namespaceURI!="string"||typeof Q.insertBefore!="function"||typeof Q.hasChildNodes!="function")},lg=function(Q){return typeof a=="function"&&Q instanceof a};function hs(Fe,Q,Ce){Sl(Fe,Me=>{Me.call(e,Q,Ce,Ji)})}const ug=function(Q){let Ce=null;if(hs(U.beforeSanitizeElements,Q,null),Gc(Q))return Wr(Q),!0;const Me=Zt(Q.nodeName);if(hs(U.uponSanitizeElement,Q,{tagName:Me,allowedTags:ue}),K&&Q.hasChildNodes()&&!lg(Q.firstElementChild)&&Tn(/<[/\w!]/g,Q.innerHTML)&&Tn(/<[/\w!]/g,Q.textContent)||Q.nodeType===na.progressingInstruction||K&&Q.nodeType===na.comment&&Tn(/<[/\w]/g,Q.data))return Wr(Q),!0;if(!(Z.tagCheck instanceof Function&&Z.tagCheck(Me))&&(!ue[Me]||W[Me])){if(!W[Me]&&dg(Me)&&(G.tagNameCheck instanceof RegExp&&Tn(G.tagNameCheck,Me)||G.tagNameCheck instanceof Function&&G.tagNameCheck(Me)))return!1;if(ne&&!I[Me]){const Dt=_(Q)||Q.parentNode,gn=E(Q)||Q.childNodes;if(gn&&Dt){const Gt=gn.length;for(let Bn=Gt-1;Bn>=0;--Bn){const ps=g(gn[Bn],!0);ps.__removalCount=(Q.__removalCount||0)+1,Dt.insertBefore(ps,b(Q))}}}return Wr(Q),!0}return Q instanceof l&&!bA(Q)||(Me==="noscript"||Me==="noembed"||Me==="noframes")&&Tn(/<\/no(script|embed|frames)/i,Q.innerHTML)?(Wr(Q),!0):(k&&Q.nodeType===na.text&&(Ce=Q.textContent,Sl([z,V,P],Dt=>{Ce=Zo(Ce,Dt," ")}),Q.textContent!==Ce&&(Qo(e.removed,{element:Q.cloneNode()}),Q.textContent=Ce)),hs(U.afterSanitizeElements,Q,null),!1)},cg=function(Q,Ce,Me){if(le&&(Ce==="id"||Ce==="name")&&(Me in n||Me in vA))return!1;if(!(re&&!$[Ce]&&Tn(X,Ce))){if(!(ae&&Tn(O,Ce))){if(!(Z.attributeCheck instanceof Function&&Z.attributeCheck(Ce,Q))){if(!ye[Ce]||$[Ce]){if(!(dg(Q)&&(G.tagNameCheck instanceof RegExp&&Tn(G.tagNameCheck,Q)||G.tagNameCheck instanceof Function&&G.tagNameCheck(Q))&&(G.attributeNameCheck instanceof RegExp&&Tn(G.attributeNameCheck,Ce)||G.attributeNameCheck instanceof Function&&G.attributeNameCheck(Ce,Q))||Ce==="is"&&G.allowCustomizedBuiltInElements&&(G.tagNameCheck instanceof RegExp&&Tn(G.tagNameCheck,Me)||G.tagNameCheck instanceof Function&&G.tagNameCheck(Me))))return!1}else if(!Y[Ce]){if(!Tn(B,Zo(Me,q,""))){if(!((Ce==="src"||Ce==="xlink:href"||Ce==="href")&&Q!=="script"&&vR(Me,"data:")===0&&w[Q])){if(!(Ee&&!Tn(H,Zo(Me,q,"")))){if(Me)return!1}}}}}}}return!0},dg=function(Q){return Q!=="annotation-xml"&&pd(Q,ie)},fg=function(Q){hs(U.beforeSanitizeAttributes,Q,null);const{attributes:Ce}=Q;if(!Ce||Gc(Q))return;const Me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye,forceKeepAttr:void 0};let Dt=Ce.length;for(;Dt--;){const gn=Ce[Dt],{name:Gt,namespaceURI:Bn,value:ps}=gn,Xi=Zt(Gt),Jc=ps;let un=Gt==="value"?Jc:bR(Jc);if(Me.attrName=Xi,Me.attrValue=un,Me.keepAttr=!0,Me.forceKeepAttr=void 0,hs(U.uponSanitizeAttribute,Q,Me),un=Me.attrValue,Ie&&(Xi==="id"||Xi==="name")&&(Ii(Gt,Q),un=xe+un),K&&Tn(/((--!?|])>)|<\/(style|title|textarea)/i,un)){Ii(Gt,Q);continue}if(Xi==="attributename"&&pd(un,"href")){Ii(Gt,Q);continue}if(Me.forceKeepAttr)continue;if(!Me.keepAttr){Ii(Gt,Q);continue}if(!L&&Tn(/\/>/i,un)){Ii(Gt,Q);continue}k&&Sl([z,V,P],pg=>{un=Zo(un,pg," ")});const hg=Zt(Q.nodeName);if(!cg(hg,Xi,un)){Ii(Gt,Q);continue}if(p&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Bn)switch(h.getAttributeType(hg,Xi)){case"TrustedHTML":{un=p.createHTML(un);break}case"TrustedScriptURL":{un=p.createScriptURL(un);break}}if(un!==Jc)try{Bn?Q.setAttributeNS(Bn,Gt,un):Q.setAttribute(Gt,un),Gc(Q)?Wr(Q):my(e.removed)}catch{Ii(Gt,Q)}}hs(U.afterSanitizeAttributes,Q,null)},wA=function Fe(Q){let Ce=null;const Me=ag(Q);for(hs(U.beforeSanitizeShadowDOM,Q,null);Ce=Me.nextNode();)hs(U.uponSanitizeShadowNode,Ce,null),ug(Ce),fg(Ce),Ce.content instanceof i&&Fe(Ce.content);hs(U.afterSanitizeShadowDOM,Q,null)};return e.sanitize=function(Fe){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce=null,Me=null,Dt=null,gn=null;if(gt=!Fe,gt&&(Fe="<!-->"),typeof Fe!="string"&&!lg(Fe))if(typeof Fe.toString=="function"){if(Fe=Fe.toString(),typeof Fe!="string")throw ea("dirty is not a string, aborting")}else throw ea("toString is not a function");if(!e.isSupported)return Fe;if(ve||Wc(Q),e.removed=[],typeof Fe=="string"&&(pe=!1),pe){if(Fe.nodeName){const ps=Zt(Fe.nodeName);if(!ue[ps]||W[ps])throw ea("root node is forbidden and cannot be sanitized in-place")}}else if(Fe instanceof a)Ce=og("<!---->"),Me=Ce.ownerDocument.importNode(Fe,!0),Me.nodeType===na.element&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?Ce=Me:Ce.appendChild(Me);else{if(!N&&!k&&!he&&Fe.indexOf("<")===-1)return p&&ee?p.createHTML(Fe):Fe;if(Ce=og(Fe),!Ce)return N?null:ee?v:""}Ce&&ge&&Wr(Ce.firstChild);const Gt=ag(pe?Fe:Ce);for(;Dt=Gt.nextNode();)ug(Dt),fg(Dt),Dt.content instanceof i&&wA(Dt.content);if(pe)return Fe;if(N){if(j)for(gn=R.call(Ce.ownerDocument);Ce.firstChild;)gn.appendChild(Ce.firstChild);else gn=Ce;return(ye.shadowroot||ye.shadowrootmode)&&(gn=D.call(r,gn,!0)),gn}let Bn=he?Ce.outerHTML:Ce.innerHTML;return he&&ue["!doctype"]&&Ce.ownerDocument&&Ce.ownerDocument.doctype&&Ce.ownerDocument.doctype.name&&Tn(k0,Ce.ownerDocument.doctype.name)&&(Bn="<!DOCTYPE "+Ce.ownerDocument.doctype.name+`>
`+Bn),k&&Sl([z,V,P],ps=>{Bn=Zo(Bn,ps," ")}),p&&ee?p.createHTML(Bn):Bn},e.setConfig=function(){let Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wc(Fe),ve=!0},e.clearConfig=function(){Ji=null,ve=!1},e.isValidAttribute=function(Fe,Q,Ce){Ji||Wc({});const Me=Zt(Fe),Dt=Zt(Q);return cg(Me,Dt,Ce)},e.addHook=function(Fe,Q){typeof Q=="function"&&Qo(U[Fe],Q)},e.removeHook=function(Fe,Q){if(Q!==void 0){const Ce=gR(U[Fe],Q);return Ce===-1?void 0:yR(U[Fe],Ce,1)[0]}return my(U[Fe])},e.removeHooks=function(Fe){U[Fe]=[]},e.removeAllHooks=function(){U=_y()},e}var $R=P0();function Lp(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Hi=Lp();function $0(t){Hi=t}var Da={exec:()=>null};function mt(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Ln.caret,"$1"),n=n.replace(s,o),r},getRegex:()=>new RegExp(n,e)};return r}var Ln={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},LR=/^(?:[ \t]*(?:\n|$))+/,MR=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,NR=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ll=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,FR=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Mp=/(?:[*+-]|\d{1,9}[.)])/,L0=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,M0=mt(L0).replace(/bull/g,Mp).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),jR=mt(L0).replace(/bull/g,Mp).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Np=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,UR=/^[^\n]+/,Fp=/(?!\s*\])(?:\\.|[^\[\]\\])+/,qR=mt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Fp).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),BR=mt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Mp).getRegex(),vc="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jp=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,VR=mt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",jp).replace("tag",vc).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),N0=mt(Np).replace("hr",ll).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",vc).getRegex(),zR=mt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",N0).getRegex(),Up={blockquote:zR,code:MR,def:qR,fences:NR,heading:FR,hr:ll,html:VR,lheading:M0,list:BR,newline:LR,paragraph:N0,table:Da,text:UR},xy=mt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ll).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",vc).getRegex(),HR={...Up,lheading:jR,table:xy,paragraph:mt(Np).replace("hr",ll).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",xy).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",vc).getRegex()},KR={...Up,html:mt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",jp).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Da,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:mt(Np).replace("hr",ll).replace("heading",` *#{1,6} *[^
]`).replace("lheading",M0).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},WR=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,GR=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,F0=/^( {2,}|\\)\n(?!\s*$)/,JR=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,bc=/[\p{P}\p{S}]/u,qp=/[\s\p{P}\p{S}]/u,j0=/[^\s\p{P}\p{S}]/u,XR=mt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,qp).getRegex(),U0=/(?!~)[\p{P}\p{S}]/u,YR=/(?!~)[\s\p{P}\p{S}]/u,QR=/(?:[^\s\p{P}\p{S}]|~)/u,ZR=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,q0=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,eT=mt(q0,"u").replace(/punct/g,bc).getRegex(),tT=mt(q0,"u").replace(/punct/g,U0).getRegex(),B0="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",nT=mt(B0,"gu").replace(/notPunctSpace/g,j0).replace(/punctSpace/g,qp).replace(/punct/g,bc).getRegex(),rT=mt(B0,"gu").replace(/notPunctSpace/g,QR).replace(/punctSpace/g,YR).replace(/punct/g,U0).getRegex(),sT=mt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,j0).replace(/punctSpace/g,qp).replace(/punct/g,bc).getRegex(),iT=mt(/\\(punct)/,"gu").replace(/punct/g,bc).getRegex(),oT=mt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),aT=mt(jp).replace("(?:-->|$)","-->").getRegex(),lT=mt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",aT).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Cu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,uT=mt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Cu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),V0=mt(/^!?\[(label)\]\[(ref)\]/).replace("label",Cu).replace("ref",Fp).getRegex(),z0=mt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Fp).getRegex(),cT=mt("reflink|nolink(?!\\()","g").replace("reflink",V0).replace("nolink",z0).getRegex(),Bp={_backpedal:Da,anyPunctuation:iT,autolink:oT,blockSkip:ZR,br:F0,code:GR,del:Da,emStrongLDelim:eT,emStrongRDelimAst:nT,emStrongRDelimUnd:sT,escape:WR,link:uT,nolink:z0,punctuation:XR,reflink:V0,reflinkSearch:cT,tag:lT,text:JR,url:Da},dT={...Bp,link:mt(/^!?\[(label)\]\((.*?)\)/).replace("label",Cu).getRegex(),reflink:mt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Cu).getRegex()},ph={...Bp,emStrongRDelimAst:rT,emStrongLDelim:tT,url:mt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},fT={...ph,br:mt(F0).replace("{2,}","*").getRegex(),text:mt(ph.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Cl={normal:Up,gfm:HR,pedantic:KR},ra={normal:Bp,gfm:ph,breaks:fT,pedantic:dT},hT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ey=t=>hT[t];function Qr(t,e){if(e){if(Ln.escapeTest.test(t))return t.replace(Ln.escapeReplace,Ey)}else if(Ln.escapeTestNoEncode.test(t))return t.replace(Ln.escapeReplaceNoEncode,Ey);return t}function Ay(t){try{t=encodeURI(t).replace(Ln.percentDecode,"%")}catch{return null}return t}function Sy(t,e){var i;const n=t.replace(Ln.findPipe,(o,a,l)=>{let u=!1,c=a;for(;--c>=0&&l[c]==="\\";)u=!u;return u?"|":" |"}),r=n.split(Ln.splitPipe);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Ln.slashPipe,"|");return r}function sa(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function pT(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function Iy(t,e,n,r,s){const i=e.href,o=e.title||null,a=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function mT(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const s=r[1];return e.split(`
`).map(i=>{const o=i.match(n.other.beginningSpace);if(o===null)return i;const[a]=o;return a.length>=s.length?i.slice(s.length):i}).join(`
`)}var Ru=class{constructor(t){At(this,"options");At(this,"rules");At(this,"lexer");this.options=t||Hi}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:sa(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=mT(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const r=sa(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:sa(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=sa(e[0],`
`).split(`
`),r="",s="";const i=[];for(;n.length>0;){let o=!1;const a=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);const u=a.join(`
`),c=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,s=s?`${s}
${c}`:c;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,i,!0),this.lexer.state.top=d,n.length===0)break;const f=i.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){const h=f,m=h.raw+`
`+n.join(`
`),g=this.blockquote(m);i[i.length-1]=g,r=r.substring(0,r.length-h.raw.length)+g.raw,s=s.substring(0,s.length-h.text.length)+g.text;break}else if((f==null?void 0:f.type)==="list"){const h=f,m=h.raw+`
`+n.join(`
`),g=this.list(m);i[i.length-1]=g,r=r.substring(0,r.length-f.raw.length)+g.raw,s=s.substring(0,s.length-h.raw.length)+g.raw,n=m.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const i=this.rules.other.listItemRegex(n);let o=!1;for(;t;){let l=!1,u="",c="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;u=e[0],t=t.substring(u.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),f=t.split(`
`,1)[0],h=!d.trim(),m=0;if(this.options.pedantic?(m=2,c=d.trimStart()):h?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,c=d.slice(m),m+=e[1].length),h&&this.rules.other.blankLine.test(f)&&(u+=f+`
`,t=t.substring(f.length+1),l=!0),!l){const b=this.rules.other.nextBulletRegex(m),E=this.rules.other.hrRegex(m),_=this.rules.other.fencesBeginRegex(m),p=this.rules.other.headingBeginRegex(m),v=this.rules.other.htmlBeginRegex(m);for(;t;){const S=t.split(`
`,1)[0];let C;if(f=S,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),C=f):C=f.replace(this.rules.other.tabCharGlobal,"    "),_.test(f)||p.test(f)||v.test(f)||b.test(f)||E.test(f))break;if(C.search(this.rules.other.nonSpaceChar)>=m||!f.trim())c+=`
`+C.slice(m);else{if(h||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||_.test(d)||p.test(d)||E.test(d))break;c+=`
`+f}!h&&!f.trim()&&(h=!0),u+=S+`
`,t=t.substring(S.length+1),d=C.slice(m)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let g=null,x;this.options.gfm&&(g=this.rules.other.listIsTask.exec(c),g&&(x=g[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!g,checked:x,loose:!1,text:c,tokens:[]}),s.raw+=u}const a=s.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const u=s.items[l].tokens.filter(d=>d.type==="space"),c=u.length>0&&u.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=c}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:s}}}table(t){var o;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=Sy(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(o=e[3])!=null&&o.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const a of r)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<n.length;a++)i.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:i.align[a]});for(const a of s)i.rows.push(Sy(a,i.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[u]})));return i}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const i=sa(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{const i=pT(e[2],"()");if(i===-2)return;if(i>-1){const a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],s=i[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),Iy(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){const i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return Iy(n,s,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const i=[...r[0]].length-1;let o,a,l=i,u=0;const c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+i);(r=c.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&i%3&&!((i+a)%3)){u+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+u);const d=[...r[0]][0].length,f=t.slice(0,i+r.index+d+a);if(Math.min(i,a)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,s;if(e[2]==="@")r=e[0],s="mailto:"+r;else{let i;do i=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(i!==e[0]);r=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},Es=class mh{constructor(e){At(this,"tokens");At(this,"options");At(this,"state");At(this,"tokenizer");At(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Hi,this.options.tokenizer=this.options.tokenizer||new Ru,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Ln,block:Cl.normal,inline:ra.normal};this.options.pedantic?(n.block=Cl.pedantic,n.inline=ra.pedantic):this.options.gfm&&(n.block=Cl.gfm,this.options.breaks?n.inline=ra.breaks:n.inline=ra.gfm),this.tokenizer.rules=n}static get rules(){return{block:Cl,inline:ra}}static lex(e,n){return new mh(n).lex(e)}static lexInline(e,n){return new mh(n).inlineTokens(e)}lex(e){e=e.replace(Ln.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var s,i,o;for(this.options.pedantic&&(e=e.replace(Ln.tabCharGlobal,"    ").replace(Ln.spaceLine,""));e;){let a;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(u=>(a=u.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const u=n.at(-1);a.raw.length===1&&u!==void 0?u.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let u=1/0;const c=e.slice(1);let d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},c),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(l=e.substring(0,u+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const u=n.at(-1);r&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,l,u;let r=e,s=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)c.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let c;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(f=>(c=f.call({lexer:this},e,n))?(e=e.substring(c.raw.length),n.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const f=n.at(-1);c.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):n.push(c);continue}if(c=this.tokenizer.emStrong(e,r,o)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),n.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),n.push(c);continue}let d=e;if((u=this.options.extensions)!=null&&u.startInline){let f=1/0;const h=e.slice(1);let m;this.options.extensions.startInline.forEach(g=>{m=g.call({lexer:this},h),typeof m=="number"&&m>=0&&(f=Math.min(f,m))}),f<1/0&&f>=0&&(d=e.substring(0,f+1))}if(c=this.tokenizer.inlineText(d)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(o=c.raw.slice(-1)),i=!0;const f=n.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):n.push(c);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}},Oo=class{constructor(t){At(this,"options");At(this,"parser");this.options=t||Hi}space(t){return""}code({text:t,lang:e,escaped:n}){var i;const r=(i=(e||"").match(Ln.notSpaceStart))==null?void 0:i[0],s=t.replace(Ln.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Qr(r)+'">'+(n?s:Qr(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:Qr(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let r="";for(let o=0;o<t.items.length;o++){const a=t.items[o];r+=this.listitem(a)}const s=e?"ol":"ul",i=e&&n!==1?' start="'+n+'"':"";return"<"+s+i+`>
`+r+"</"+s+`>
`}listitem(t){var n;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+Qr(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let s=0;s<t.header.length;s++)n+=this.tablecell(t.header[s]);e+=this.tablerow({text:n});let r="";for(let s=0;s<t.rows.length;s++){const i=t.rows[s];n="";for(let o=0;o<i.length;o++)n+=this.tablecell(i[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Qr(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),s=Ay(t);if(s===null)return r;t=s;let i='<a href="'+t+'"';return e&&(i+=' title="'+Qr(e)+'"'),i+=">"+r+"</a>",i}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const s=Ay(t);if(s===null)return Qr(n);t=s;let i=`<img src="${t}" alt="${n}"`;return e&&(i+=` title="${Qr(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Qr(t.text)}},Vp=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},As=class gh{constructor(e){At(this,"options");At(this,"renderer");At(this,"textRenderer");this.options=e||Hi,this.options.renderer=this.options.renderer||new Oo,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Vp}static parse(e,n){return new gh(n).parse(e)}static parseInline(e,n){return new gh(n).parseInline(e)}parse(e,n=!0){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const u=a,c=this.options.extensions.renderers[u.type].call({parser:this},u);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){r+=c||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let u=l,c=this.renderer.text(u);for(;o+1<e.length&&e[o+1].type==="text";)u=e[++o],c+=`
`+this.renderer.text(u);n?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):r+=c;continue}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}parseInline(e,n=this.renderer){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=u||"";continue}}const l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}},Vf,ru=(Vf=class{constructor(t){At(this,"options");At(this,"block");this.options=t||Hi}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Es.lex:Es.lexInline}provideParser(){return this.block?As.parse:As.parseInline}},At(Vf,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Vf),gT=class{constructor(...t){At(this,"defaults",Lp());At(this,"options",this.setOptions);At(this,"parse",this.parseMarkdown(!0));At(this,"parseInline",this.parseMarkdown(!1));At(this,"Parser",As);At(this,"Renderer",Oo);At(this,"TextRenderer",Vp);At(this,"Lexer",Es);At(this,"Tokenizer",Ru);At(this,"Hooks",ru);this.use(...t)}walkTokens(t,e){var r,s;let n=[];for(const i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{const o=i;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,e));for(const a of o.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,e));break}case"list":{const o=i;n=n.concat(this.walkTokens(o.items,e));break}default:{const o=i;(s=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const l=o[a].flat(1/0);n=n.concat(this.walkTokens(l,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const i=e.renderers[s.name];i?e.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=i.apply(this,o)),a}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=e[s.level];i?i.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),n.renderer){const s=this.defaults.renderer||new Oo(this.defaults);for(const i in n.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const o=i,a=n.renderer[o],l=s[o];s[o]=(...u)=>{let c=a.apply(s,u);return c===!1&&(c=l.apply(s,u)),c||""}}r.renderer=s}if(n.tokenizer){const s=this.defaults.tokenizer||new Ru(this.defaults);for(const i in n.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const o=i,a=n.tokenizer[o],l=s[o];s[o]=(...u)=>{let c=a.apply(s,u);return c===!1&&(c=l.apply(s,u)),c}}r.tokenizer=s}if(n.hooks){const s=this.defaults.hooks||new ru;for(const i in n.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const o=i,a=n.hooks[o],l=s[o];ru.passThroughHooks.has(i)?s[o]=u=>{if(this.defaults.async)return Promise.resolve(a.call(s,u)).then(d=>l.call(s,d));const c=a.call(s,u);return l.call(s,c)}:s[o]=(...u)=>{let c=a.apply(s,u);return c===!1&&(c=l.apply(s,u)),c}}r.hooks=s}if(n.walkTokens){const s=this.defaults.walkTokens,i=n.walkTokens;r.walkTokens=function(o){let a=[];return a.push(i.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Es.lex(t,e??this.defaults)}parser(t,e){return As.parse(t,e??this.defaults)}parseMarkdown(t){return(n,r)=>{const s={...r},i={...this.defaults,...s},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&s.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const a=i.hooks?i.hooks.provideLexer():t?Es.lex:Es.lexInline,l=i.hooks?i.hooks.provideParser():t?As.parse:As.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(u=>a(u,i)).then(u=>i.hooks?i.hooks.processAllTokens(u):u).then(u=>i.walkTokens?Promise.all(this.walkTokens(u,i.walkTokens)).then(()=>u):u).then(u=>l(u,i)).then(u=>i.hooks?i.hooks.postprocess(u):u).catch(o);try{i.hooks&&(n=i.hooks.preprocess(n));let u=a(n,i);i.hooks&&(u=i.hooks.processAllTokens(u)),i.walkTokens&&this.walkTokens(u,i.walkTokens);let c=l(u,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(u){return o(u)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+Qr(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},Bi=new gT;function yt(t,e){return Bi.parse(t,e)}yt.options=yt.setOptions=function(t){return Bi.setOptions(t),yt.defaults=Bi.defaults,$0(yt.defaults),yt};yt.getDefaults=Lp;yt.defaults=Hi;yt.use=function(...t){return Bi.use(...t),yt.defaults=Bi.defaults,$0(yt.defaults),yt};yt.walkTokens=function(t,e){return Bi.walkTokens(t,e)};yt.parseInline=Bi.parseInline;yt.Parser=As;yt.parser=As.parse;yt.Renderer=Oo;yt.TextRenderer=Vp;yt.Lexer=Es;yt.lexer=Es.lex;yt.Tokenizer=Ru;yt.Hooks=ru;yt.parse=yt;yt.options;yt.setOptions;yt.use;yt.walkTokens;yt.parseInline;As.parse;Es.lex;const H0=Symbol();function zp(){return jt(H0)??Ge("Could not inject modal controller, are you calling injectModal() or useModal() outside of a modal component?")}function yT(t){_r(H0,t)}function vT(t){let e=!1;const n=zp();return(t==null?void 0:t.removeOnClose)!==void 0&&et(n,(r,s)=>{r.removeOnClose.value=!!(t!=null&&t.removeOnClose),r.visible.value=e,!(!s||!e)&&(s.visible.value=!1)},{immediate:!0}),Wt(()=>(e=!0,n.value.visible.value=!0)),{id:J(()=>n.value.id),visible:J(()=>n.value.visible.value),child:J(()=>n.value.child.value),close:r=>n.value.close(r),remove:()=>n.value.remove()}}const yh=me({__name:"ModalComponent",props:{is:{}},setup(t){const e=sr(t.is),n=J(()=>{const r={};for(const s in t.is.props)r[s]=A(t.is.props[s]);return r});return yT(e),et(()=>t.is,()=>void(e.value=t.is)),(r,s)=>(F(),ce(js(t.is.component),Ue(n.value,{onClose:s[0]||(s[0]=i=>t.is.close(i))}),null,16))}}),Vt=sr([]),bT=["data-open"],wT=me({__name:"ModalsPortal",props:{nested:{type:Boolean,default:!1}},setup(t){return(e,n)=>(F(),be("div",{"data-open":A(Vt).length?"true":void 0},[Ae(e.$slots,"overlay",{show:A(Vt).length>0}),t.nested?A(Vt)[0]?(F(),ce(yh,{key:1,is:A(Vt)[0]},null,8,["is"])):je("",!0):(F(!0),be(Ze,{key:0},ln(A(Vt),r=>(F(),ce(yh,{key:r.id,is:r},null,8,["is"]))),128))],8,bT))}});function K0(t,e){const n=jn(),r=e??{},s=_e(!1),i=_e(!0),o=sr(null),a=new Nr,l=et(s,d=>d||u()),u=async d=>{l.stop(),s.value=!1,hC(d)?a.resolve({dismissed:!1,...d}):d!==void 0?a.resolve({dismissed:!1,response:d}):a.resolve({dismissed:!0}),i.value&&c()},c=()=>{var h,m,g;const d=Vt.value.findIndex(x=>x.id===n);if(d===-1)return;(h=Vt.value[d])!=null&&h.visible.value&&((m=Vt.value[d])==null||m.close());const f=Vt.value[d-1];f&&(f.child.value=((g=Vt.value[d])==null?void 0:g.child.value)??null),Vt.value=Vt.value.filter(x=>x.id!==n)};return{id:n,component:t,props:r,removeOnClose:i,visible:s,child:o,close:u,remove:c,promisedResult:a}}function Cy(t,e){const n="removeOnClose"in t?t:K0(t,e??{}),r=Vt.value[Vt.value.length-1];return r&&(r.child.value=n),Vt.value=Vt.value.concat([n]),n.promisedResult}async function Ry(t,e={}){const n=Vt.value.find(r=>r.id===t);n&&(n.close(),e.remove&&n.remove(),e.removeAfter&&(await Hn(e.removeAfter),n.remove()))}function W0(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=W0(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function G0(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=W0(t))&&(r&&(r+=" "),r+=e);return r}const Ty=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Oy=G0,_T=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Oy(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const c=n==null?void 0:n[u],d=i==null?void 0:i[u];if(c===null)return null;const f=Ty(c)||Ty(d);return s[u][f]}),a=n&&Object.entries(n).reduce((u,c)=>{let[d,f]=c;return f===void 0||(u[d]=f),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,c)=>{let{class:d,className:f,...h}=c;return Object.entries(h).every(m=>{let[g,x]=m;return Array.isArray(x)?x.includes({...i,...a}[g]):{...i,...a}[g]===x})?[...u,d,f]:u},[]);return Oy(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},xT=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},ET=(t,e)=>({classGroupId:t,validator:e}),J0=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Tu="-",Dy=[],AT="arbitrary..",ST=t=>{const e=CT(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return IT(o);const a=o.split(Tu),l=a[0]===""&&a.length>1?1:0;return X0(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],u=n[o];return l?u?xT(u,l):l:u||Dy}return n[o]||Dy}}},X0=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],i=n.nextPart.get(s);if(i){const u=X0(t,e+1,i);if(u)return u}const o=n.validators;if(o===null)return;const a=e===0?t.join(Tu):t.slice(e).join(Tu),l=o.length;for(let u=0;u<l;u++){const c=o[u];if(c.validator(a))return c.classGroupId}},IT=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?AT+r:void 0})(),CT=t=>{const{theme:e,classGroups:n}=t;return RT(n,e)},RT=(t,e)=>{const n=J0();for(const r in t){const s=t[r];Hp(s,n,r,e)}return n},Hp=(t,e,n,r)=>{const s=t.length;for(let i=0;i<s;i++){const o=t[i];TT(o,e,n,r)}},TT=(t,e,n,r)=>{if(typeof t=="string"){OT(t,e,n);return}if(typeof t=="function"){DT(t,e,n,r);return}kT(t,e,n,r)},OT=(t,e,n)=>{const r=t===""?e:Y0(e,t);r.classGroupId=n},DT=(t,e,n,r)=>{if(PT(t)){Hp(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(ET(n,t))},kT=(t,e,n,r)=>{const s=Object.entries(t),i=s.length;for(let o=0;o<i;o++){const[a,l]=s[o];Hp(l,Y0(e,a),n,r)}},Y0=(t,e)=>{let n=t;const r=e.split(Tu),s=r.length;for(let i=0;i<s;i++){const o=r[i];let a=n.nextPart.get(o);a||(a=J0(),n.nextPart.set(o,a)),n=a}return n},PT=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,$T=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(i,o)=>{n[i]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(i){let o=n[i];if(o!==void 0)return o;if((o=r[i])!==void 0)return s(i,o),o},set(i,o){i in n?n[i]=o:s(i,o)}}},vh="!",ky=":",LT=[],Py=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),MT=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let o=0,a=0,l=0,u;const c=s.length;for(let g=0;g<c;g++){const x=s[g];if(o===0&&a===0){if(x===ky){i.push(s.slice(l,g)),l=g+1;continue}if(x==="/"){u=g;continue}}x==="["?o++:x==="]"?o--:x==="("?a++:x===")"&&a--}const d=i.length===0?s:s.slice(l);let f=d,h=!1;d.endsWith(vh)?(f=d.slice(0,-1),h=!0):d.startsWith(vh)&&(f=d.slice(1),h=!0);const m=u&&u>l?u-l:void 0;return Py(i,h,f,m)};if(e){const s=e+ky,i=r;r=o=>o.startsWith(s)?i(o.slice(s.length)):Py(LT,!1,o,void 0,!0)}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},NT=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let i=0;i<n.length;i++){const o=n[i],a=o[0]==="[",l=e.has(o);a||l?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(o)):s.push(o)}return s.length>0&&(s.sort(),r.push(...s)),r}},FT=t=>({cache:$T(t.cacheSize),parseClassName:MT(t),sortModifiers:NT(t),...ST(t)}),jT=/\s+/,UT=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,o=[],a=t.trim().split(jT);let l="";for(let u=a.length-1;u>=0;u-=1){const c=a[u],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}=n(c);if(d){l=c+(l.length>0?" "+l:l);continue}let x=!!g,b=r(x?m.substring(0,g):m);if(!b){if(!x){l=c+(l.length>0?" "+l:l);continue}if(b=r(m),!b){l=c+(l.length>0?" "+l:l);continue}x=!1}const E=f.length===0?"":f.length===1?f[0]:i(f).join(":"),_=h?E+vh:E,p=_+b;if(o.indexOf(p)>-1)continue;o.push(p);const v=s(b,x);for(let S=0;S<v.length;++S){const C=v[S];o.push(_+C)}l=c+(l.length>0?" "+l:l)}return l},qT=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=Q0(n))&&(s&&(s+=" "),s+=r);return s},Q0=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Q0(t[r]))&&(n&&(n+=" "),n+=e);return n},BT=(t,...e)=>{let n,r,s,i;const o=l=>{const u=e.reduce((c,d)=>d(c),t());return n=FT(u),r=n.cache.get,s=n.cache.set,i=a,a(l)},a=l=>{const u=r(l);if(u)return u;const c=UT(l,n);return s(l,c),c};return i=o,(...l)=>i(qT(...l))},VT=[],en=t=>{const e=n=>n[t]||VT;return e.isThemeGetter=!0,e},Z0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,zT=/^\d+\/\d+$/,HT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,WT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,GT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,JT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,eo=t=>zT.test(t),Xe=t=>!!t&&!Number.isNaN(Number(t)),Bs=t=>!!t&&Number.isInteger(Number(t)),bd=t=>t.endsWith("%")&&Xe(t.slice(0,-1)),gs=t=>HT.test(t),XT=()=>!0,YT=t=>KT.test(t)&&!WT.test(t),tx=()=>!1,QT=t=>GT.test(t),ZT=t=>JT.test(t),eO=t=>!Pe(t)&&!$e(t),tO=t=>Bo(t,sx,tx),Pe=t=>Z0.test(t),Oi=t=>Bo(t,ix,YT),wd=t=>Bo(t,oO,Xe),$y=t=>Bo(t,nx,tx),nO=t=>Bo(t,rx,ZT),Rl=t=>Bo(t,ox,QT),$e=t=>ex.test(t),ia=t=>Vo(t,ix),rO=t=>Vo(t,aO),Ly=t=>Vo(t,nx),sO=t=>Vo(t,sx),iO=t=>Vo(t,rx),Tl=t=>Vo(t,ox,!0),Bo=(t,e,n)=>{const r=Z0.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Vo=(t,e,n=!1)=>{const r=ex.exec(t);return r?r[1]?e(r[1]):n:!1},nx=t=>t==="position"||t==="percentage",rx=t=>t==="image"||t==="url",sx=t=>t==="length"||t==="size"||t==="bg-size",ix=t=>t==="length",oO=t=>t==="number",aO=t=>t==="family-name",ox=t=>t==="shadow",lO=()=>{const t=en("color"),e=en("font"),n=en("text"),r=en("font-weight"),s=en("tracking"),i=en("leading"),o=en("breakpoint"),a=en("container"),l=en("spacing"),u=en("radius"),c=en("shadow"),d=en("inset-shadow"),f=en("text-shadow"),h=en("drop-shadow"),m=en("blur"),g=en("perspective"),x=en("aspect"),b=en("ease"),E=en("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],p=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...p(),$e,Pe],S=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],R=()=>[$e,Pe,l],T=()=>[eo,"full","auto",...R()],D=()=>[Bs,"none","subgrid",$e,Pe],U=()=>["auto",{span:["full",Bs,$e,Pe]},Bs,$e,Pe],z=()=>[Bs,"auto",$e,Pe],V=()=>["auto","min","max","fr",$e,Pe],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...R()],H=()=>[eo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],q=()=>[t,$e,Pe],ie=()=>[...p(),Ly,$y,{position:[$e,Pe]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ue=()=>["auto","cover","contain",sO,tO,{size:[$e,Pe]}],de=()=>[bd,ia,Oi],ye=()=>["","none","full",u,$e,Pe],Se=()=>["",Xe,ia,Oi],G=()=>["solid","dashed","dotted","double"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>[Xe,bd,Ly,$y],Z=()=>["","none",m,$e,Pe],ae=()=>["none",Xe,$e,Pe],re=()=>["none",Xe,$e,Pe],Ee=()=>[Xe,$e,Pe],L=()=>[eo,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[gs],breakpoint:[gs],color:[XT],container:[gs],"drop-shadow":[gs],ease:["in","out","in-out"],font:[eO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[gs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[gs],shadow:[gs],spacing:["px",Xe],text:[gs],"text-shadow":[gs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",eo,Pe,$e,x]}],container:["container"],columns:[{columns:[Xe,Pe,$e,a]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[Bs,"auto",$e,Pe]}],basis:[{basis:[eo,"full","auto",a,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Xe,eo,"auto","initial","none",Pe]}],grow:[{grow:["",Xe,$e,Pe]}],shrink:[{shrink:["",Xe,$e,Pe]}],order:[{order:[Bs,"first","last","none",$e,Pe]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[a,"screen",...H()]}],"min-w":[{"min-w":[a,"screen","none",...H()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",n,ia,Oi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,$e,wd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",bd,Pe]}],"font-family":[{font:[rO,Pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,$e,Pe]}],"line-clamp":[{"line-clamp":[Xe,"none",$e,wd]}],leading:[{leading:[i,...R()]}],"list-image":[{"list-image":["none",$e,Pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",$e,Pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:[Xe,"from-font","auto",$e,Oi]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[Xe,"auto",$e,Pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$e,Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$e,Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:ue()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bs,$e,Pe],radial:["",$e,Pe],conic:[Bs,$e,Pe]},iO,nO]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:de()}],"gradient-via-pos":[{via:de()}],"gradient-to-pos":[{to:de()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:ye()}],"rounded-s":[{"rounded-s":ye()}],"rounded-e":[{"rounded-e":ye()}],"rounded-t":[{"rounded-t":ye()}],"rounded-r":[{"rounded-r":ye()}],"rounded-b":[{"rounded-b":ye()}],"rounded-l":[{"rounded-l":ye()}],"rounded-ss":[{"rounded-ss":ye()}],"rounded-se":[{"rounded-se":ye()}],"rounded-ee":[{"rounded-ee":ye()}],"rounded-es":[{"rounded-es":ye()}],"rounded-tl":[{"rounded-tl":ye()}],"rounded-tr":[{"rounded-tr":ye()}],"rounded-br":[{"rounded-br":ye()}],"rounded-bl":[{"rounded-bl":ye()}],"border-w":[{border:Se()}],"border-w-x":[{"border-x":Se()}],"border-w-y":[{"border-y":Se()}],"border-w-s":[{"border-s":Se()}],"border-w-e":[{"border-e":Se()}],"border-w-t":[{"border-t":Se()}],"border-w-r":[{"border-r":Se()}],"border-w-b":[{"border-b":Se()}],"border-w-l":[{"border-l":Se()}],"divide-x":[{"divide-x":Se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...G(),"hidden","none"]}],"divide-style":[{divide:[...G(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...G(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Xe,$e,Pe]}],"outline-w":[{outline:["",Xe,ia,Oi]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",c,Tl,Rl]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",d,Tl,Rl]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:Se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[Xe,Oi]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":Se()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",f,Tl,Rl]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[Xe,$e,Pe]}],"mix-blend":[{"mix-blend":[...W(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":W()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Xe]}],"mask-image-linear-from-pos":[{"mask-linear-from":$()}],"mask-image-linear-to-pos":[{"mask-linear-to":$()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":$()}],"mask-image-t-to-pos":[{"mask-t-to":$()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":$()}],"mask-image-r-to-pos":[{"mask-r-to":$()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":$()}],"mask-image-b-to-pos":[{"mask-b-to":$()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":$()}],"mask-image-l-to-pos":[{"mask-l-to":$()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":$()}],"mask-image-x-to-pos":[{"mask-x-to":$()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":$()}],"mask-image-y-to-pos":[{"mask-y-to":$()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[$e,Pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":$()}],"mask-image-radial-to-pos":[{"mask-radial-to":$()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":p()}],"mask-image-conic-pos":[{"mask-conic":[Xe]}],"mask-image-conic-from-pos":[{"mask-conic-from":$()}],"mask-image-conic-to-pos":[{"mask-conic-to":$()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:ue()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",$e,Pe]}],filter:[{filter:["","none",$e,Pe]}],blur:[{blur:Z()}],brightness:[{brightness:[Xe,$e,Pe]}],contrast:[{contrast:[Xe,$e,Pe]}],"drop-shadow":[{"drop-shadow":["","none",h,Tl,Rl]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",Xe,$e,Pe]}],"hue-rotate":[{"hue-rotate":[Xe,$e,Pe]}],invert:[{invert:["",Xe,$e,Pe]}],saturate:[{saturate:[Xe,$e,Pe]}],sepia:[{sepia:["",Xe,$e,Pe]}],"backdrop-filter":[{"backdrop-filter":["","none",$e,Pe]}],"backdrop-blur":[{"backdrop-blur":Z()}],"backdrop-brightness":[{"backdrop-brightness":[Xe,$e,Pe]}],"backdrop-contrast":[{"backdrop-contrast":[Xe,$e,Pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Xe,$e,Pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Xe,$e,Pe]}],"backdrop-invert":[{"backdrop-invert":["",Xe,$e,Pe]}],"backdrop-opacity":[{"backdrop-opacity":[Xe,$e,Pe]}],"backdrop-saturate":[{"backdrop-saturate":[Xe,$e,Pe]}],"backdrop-sepia":[{"backdrop-sepia":["",Xe,$e,Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",$e,Pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Xe,"initial",$e,Pe]}],ease:[{ease:["linear","initial",b,$e,Pe]}],delay:[{delay:[Xe,$e,Pe]}],animate:[{animate:["none",E,$e,Pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,$e,Pe]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:ae()}],"rotate-x":[{"rotate-x":ae()}],"rotate-y":[{"rotate-y":ae()}],"rotate-z":[{"rotate-z":ae()}],scale:[{scale:re()}],"scale-x":[{"scale-x":re()}],"scale-y":[{"scale-y":re()}],"scale-z":[{"scale-z":re()}],"scale-3d":["scale-3d"],skew:[{skew:Ee()}],"skew-x":[{"skew-x":Ee()}],"skew-y":[{"skew-y":Ee()}],transform:[{transform:[$e,Pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:L()}],"translate-x":[{"translate-x":L()}],"translate-y":[{"translate-y":L()}],"translate-z":[{"translate-z":L()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$e,Pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$e,Pe]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[Xe,ia,Oi,wd]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},uO=BT(lO);function My(t){return typeof t=="string"?`'${t}'`:new cO().serialize(t)}const cO=(function(){var e;class t{constructor(){gg(this,e,new Map)}compare(r,s){const i=typeof r,o=typeof s;return i==="string"&&o==="string"?r.localeCompare(s):i==="number"&&o==="number"?r-s:String.prototype.localeCompare.call(this.serialize(r,!0),this.serialize(s,!0))}serialize(r,s){if(r===null)return"null";switch(typeof r){case"string":return s?r:`'${r}'`;case"bigint":return`${r}n`;case"object":return this.$object(r);case"function":return this.$function(r)}return String(r)}serializeObject(r){const s=Object.prototype.toString.call(r);if(s!=="[object Object]")return this.serializeBuiltInType(s.length<10?`unknown:${s}`:s.slice(8,-1),r);const i=r.constructor,o=i===Object||i===void 0?"":i.name;if(o!==""&&globalThis[o]===i)return this.serializeBuiltInType(o,r);if(typeof r.toJSON=="function"){const a=r.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(r))}serializeBuiltInType(r,s){const i=this["$"+r];if(i)return i.call(this,s);if(typeof(s==null?void 0:s.entries)=="function")return this.serializeObjectEntries(r,s.entries());throw new Error(`Cannot serialize ${r}`)}serializeObjectEntries(r,s){const i=Array.from(s).sort((a,l)=>this.compare(a[0],l[0]));let o=`${r}{`;for(let a=0;a<i.length;a++){const[l,u]=i[a];o+=`${this.serialize(l,!0)}:${this.serialize(u)}`,a<i.length-1&&(o+=",")}return o+"}"}$object(r){let s=Jo(this,e).get(r);return s===void 0&&(Jo(this,e).set(r,`#${Jo(this,e).size}`),s=this.serializeObject(r),Jo(this,e).set(r,s)),s}$function(r){const s=Function.prototype.toString.call(r);return s.slice(-15)==="[native code] }"?`${r.name||""}()[native]`:`${r.name}(${r.length})${s.replace(/\s*\n\s*/g,"")}`}$Array(r){let s="[";for(let i=0;i<r.length;i++)s+=this.serialize(r[i]),i<r.length-1&&(s+=",");return s+"]"}$Date(r){try{return`Date(${r.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(r){return`ArrayBuffer[${new Uint8Array(r).join(",")}]`}$Set(r){return`Set${this.$Array(Array.from(r).sort((s,i)=>this.compare(s,i)))}`}$Map(r){return this.serializeObjectEntries("Map",r.entries())}}e=new WeakMap;for(const n of["Error","RegExp","URL"])t.prototype["$"+n]=function(r){return`${n}(${r})`};for(const n of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join(",")}]`};for(const n of["BigInt64Array","BigUint64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join("n,")}${r.length>0?"n":""}]`};return t})();function dO(t,e){return t===e||My(t)===My(e)}function Ny(t,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){return Math.min(n,Math.max(e,t))}function Rn(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[o=>{const a=jt(r,o);if(a||a===null)return a;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},o=>(_r(r,o),o)]}function sn(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Kp(t,e,n){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function bh(t){return t==null}function Wp(t){return t?t.flatMap(e=>e.type===Ze?Wp(e.children):[e]):[]}const fO=["INPUT","TEXTAREA"];function hO(t,e,n,r={}){if(!e||r.enableIgnoredElement&&fO.includes(e.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:i="[data-reka-collection-item]",itemsArray:o=[],loop:a=!0,dir:l="ltr",preventScroll:u=!0,focus:c=!1}=r,[d,f,h,m,g,x]=[t.key==="ArrowRight",t.key==="ArrowLeft",t.key==="ArrowUp",t.key==="ArrowDown",t.key==="Home",t.key==="End"],b=h||m,E=d||f;if(!g&&!x&&(!b&&!E||s==="vertical"&&E||s==="horizontal"&&b))return null;const _=n?Array.from(n.querySelectorAll(i)):o;if(!_.length)return null;u&&t.preventDefault();let p=null;return E||b?p=ax(_,e,{goForward:b?m:l==="ltr"?d:f,loop:a}):g?p=_.at(0)||null:x&&(p=_.at(-1)||null),c&&(p==null||p.focus()),p}function ax(t,e,n,r=t.length){if(--r===0)return null;const s=t.indexOf(e),i=n.goForward?s+1:s-1;if(!n.loop&&(i<0||i>=t.length))return null;const o=(i+t.length)%t.length,a=t[o];return a?a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false"?ax(t,a,n,r):a:null}const[Gp]=Rn("ConfigProvider");function pO(t,e){var n;const r=sr();return qt(()=>{r.value=t()},{...e,flush:(n=void 0)!=null?n:"sync"}),is(r)}function zo(t){return tl()?(Zu(t),!0):!1}function mO(t){let e=!1,n;const r=el(!0);return(...s)=>(e||(n=r.run(()=>t(...s)),e=!0),n)}function lx(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=el(!0),n=r.run(()=>t(...i))),zo(s),n)}const us=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const gO=t=>typeof t<"u",yO=Object.prototype.toString,vO=t=>yO.call(t)==="[object Object]",bO=()=>{},Fy=wO();function wO(){var t,e;return us&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function _O(t){return ur()}function _d(t){return Array.isArray(t)?t:[t]}function xO(t,e=1e4){return ic((n,r)=>{let s=pn(t),i;const o=()=>setTimeout(()=>{s=pn(t),r()},pn(e));return zo(()=>{clearTimeout(i)}),{get(){return n(),s},set(a){s=a,r(),clearTimeout(i),i=o()}}})}function EO(t,e){_O()&&x_(t,e)}function AO(t,e,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n,i=sr(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function l(){i.value=!1,a()}function u(...c){s&&t(),a(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,t(...c)},pn(e))}return r&&(i.value=!0,us&&u()),zo(l),{isPending:is(i),start:u,stop:l}}function SO(t=1e3,e={}){const{controls:n=!1,callback:r}=e,s=AO(r??bO,t,e),i=J(()=>!s.isPending.value);return n?{ready:i,...s}:i}function IO(t,e,n){return et(t,e,{...n,immediate:!0})}const ul=us?window:void 0;function Ir(t){var e;const n=pn(t);return(e=n==null?void 0:n.$el)!=null?e:n}function Ou(...t){const e=[],n=()=>{e.forEach(a=>a()),e.length=0},r=(a,l,u,c)=>(a.addEventListener(l,u,c),()=>a.removeEventListener(l,u,c)),s=J(()=>{const a=_d(pn(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),i=IO(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(u=>Ir(u)))!=null?l:[ul].filter(u=>u!=null),_d(pn(s.value?t[1]:t[0])),_d(A(s.value?t[2]:t[1])),pn(s.value?t[3]:t[2])]},([a,l,u,c])=>{if(n(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(u!=null&&u.length))return;const d=vO(c)?{...c}:c;e.push(...a.flatMap(f=>l.flatMap(h=>u.map(m=>r(f,h,m,d)))))},{flush:"post"}),o=()=>{i(),n()};return zo(n),o}function ux(){const t=sr(!1),e=ur();return e&&Wt(()=>{t.value=!0},e),t}function CO(t){const e=ux();return J(()=>(e.value,!!t()))}function RO(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function Jp(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=ul,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=r,l=RO(e);return Ou(s,i,c=>{c.repeat&&pn(a)||l(c)&&n(c)},o)}function cx(t,e={}){const{immediate:n=!0,fpsLimit:r=void 0,window:s=ul,once:i=!1}=e,o=sr(!1),a=J(()=>r?1e3/pn(r):null);let l=0,u=null;function c(h){if(!o.value||!s)return;l||(l=h);const m=h-l;if(a.value&&m<a.value){u=s.requestAnimationFrame(c);return}if(l=h,t({delta:m,timestamp:h}),i){o.value=!1,u=null;return}u=s.requestAnimationFrame(c)}function d(){!o.value&&s&&(o.value=!0,l=0,u=s.requestAnimationFrame(c))}function f(){o.value=!1,u!=null&&s&&(s.cancelAnimationFrame(u),u=null)}return n&&d(),zo(f),{isActive:is(o),pause:f,resume:d}}function TO(t){return JSON.parse(JSON.stringify(t))}function OO(t,e,n={}){const{window:r=ul,...s}=n;let i;const o=CO(()=>r&&"ResizeObserver"in r),a=()=>{i&&(i.disconnect(),i=void 0)},l=J(()=>{const d=pn(t);return Array.isArray(d)?d.map(f=>Ir(f)):[Ir(d)]}),u=et(l,d=>{if(a(),o.value&&r){i=new ResizeObserver(e);for(const f of d)f&&i.observe(f,s)}},{immediate:!0,flush:"post"}),c=()=>{a(),u()};return zo(c),{isSupported:o,stop:c}}function hi(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=r,h=ur(),m=n||(h==null?void 0:h.emit)||((s=h==null?void 0:h.$emit)==null?void 0:s.bind(h))||((o=(i=h==null?void 0:h.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(h==null?void 0:h.proxy));let g=u;e||(e="modelValue"),g=g||`update:${e.toString()}`;const x=_=>a?typeof a=="function"?a(_):TO(_):_,b=()=>gO(t[e])?x(t[e]):d,E=_=>{f?f(_)&&m(g,_):m(g,_)};if(l){const _=b(),p=_e(_);let v=!1;return et(()=>t[e],S=>{v||(v=!0,p.value=x(S),Ft(()=>v=!1))}),et(p,S=>{!v&&(S!==t[e]||c)&&E(S)},{deep:c}),p}else return J({get(){return b()},set(_){E(_)}})}function xd(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function wh(t,e,n=".",r){if(!xd(e))return wh(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:xd(o)&&xd(s[i])?s[i]=wh(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function DO(t){return(...e)=>e.reduce((n,r)=>wh(n,r,"",t),{})}const kO=DO(),PO=lx(()=>{const t=_e(new Map),e=_e(),n=J(()=>{for(const o of t.value.values())if(o)return!0;return!1}),r=Gp({scrollBody:_e(!0)});let s=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",Fy&&(s==null||s()),e.value=void 0};return et(n,(o,a)=>{var d;if(!us)return;if(!o){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,u={padding:l,margin:0},c=(d=r.scrollBody)!=null&&d.value?typeof r.scrollBody.value=="object"?kO({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},u):u:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof c.padding=="number"?`${c.padding}px`:String(c.padding),document.body.style.marginRight=typeof c.margin=="number"?`${c.margin}px`:String(c.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),Fy&&(s=Ou(document,"touchmove",f=>$O(f),{passive:!1})),Ft(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function Xp(t){const e=Math.random().toString(36).substring(2,7),n=PO();n.value.set(e,t??!1);const r=J({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return EO(()=>{n.value.delete(e)}),r}function dx(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:dx(n)}}function $O(t){const e=t||window.event,n=e.target;return n instanceof Element&&dx(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function wc(t){const e=Gp({dir:_e("ltr")});return J(()=>{var n;return(t==null?void 0:t.value)||((n=e.dir)==null?void 0:n.value)||"ltr"})}function cl(t){const e=ur(),n=e==null?void 0:e.type.emits,r={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),n==null||n.forEach(s=>{r[Jl(Kn(s))]=(...i)=>t(s,...i)}),r}let Ed=0;function fx(){qt(t=>{if(!us)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??jy()),document.body.insertAdjacentElement("beforeend",e[1]??jy()),Ed++,t(()=>{Ed===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(n=>n.remove()),Ed--})})}function jy(){const t=document.createElement("span");return t.setAttribute("data-reka-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}function hx(t){return J(()=>{var e;return pn(t)?!!((e=Ir(t))!=null&&e.closest("form")):!0})}function tt(){const t=ur(),e=_e(),n=J(()=>{var o,a;return["#text","#comment"].includes((o=e.value)==null?void 0:o.$el.nodeName)?(a=e.value)==null?void 0:a.$el.nextElementSibling:Ir(e)}),r=Object.assign({},t.exposed),s={};for(const o in t.props)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>t.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=s;function i(o){if(e.value=o,!!o&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),!(o instanceof Element)&&!Object.hasOwn(o,"$el"))){const a=o.$.exposed,l=Object.assign({},s);for(const u in a)Object.defineProperty(l,u,{enumerable:!0,configurable:!0,get:()=>a[u]});t.exposed=l}}return{forwardRef:i,currentRef:e,currentElement:n}}function Yp(t){const e=ur(),n=Object.keys((e==null?void 0:e.type.props)??{}).reduce((s,i)=>{const o=(e==null?void 0:e.type.props[i]).default;return o!==void 0&&(s[i]=o),s},{}),r=aS(t);return J(()=>{const s={},i=(e==null?void 0:e.vnode.props)??{};return Object.keys(i).forEach(o=>{s[Kn(o)]=i[o]}),Object.keys({...n,...s}).reduce((o,a)=>(r.value[a]!==void 0&&(o[a]=r.value[a]),o),{})})}function dl(t,e){const n=Yp(t),r=e?cl(e):{};return J(()=>({...n.value,...r}))}var LO=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},to=new WeakMap,Ol=new WeakMap,Dl={},Ad=0,px=function(t){return t&&(t.host||px(t.parentNode))},MO=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=px(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},NO=function(t,e,n,r){var s=MO(e,Array.isArray(t)?t:[t]);Dl[n]||(Dl[n]=new WeakMap);var i=Dl[n],o=[],a=new Set,l=new Set(s),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};s.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))c(f);else try{var h=f.getAttribute(r),m=h!==null&&h!=="false",g=(to.get(f)||0)+1,x=(i.get(f)||0)+1;to.set(f,g),i.set(f,x),o.push(f),g===1&&m&&Ol.set(f,!0),x===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return c(e),a.clear(),Ad++,function(){o.forEach(function(d){var f=to.get(d)-1,h=i.get(d)-1;to.set(d,f),i.set(d,h),f||(Ol.has(d)||d.removeAttribute(r),Ol.delete(d)),h||d.removeAttribute(n)}),Ad--,Ad||(to=new WeakMap,to=new WeakMap,Ol=new WeakMap,Dl={})}},FO=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=LO(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),NO(r,s,n,"aria-hidden")):function(){return null}};function Qp(t){let e;et(()=>Ir(t),n=>{n?e=FO(n):e&&e()}),ar(()=>{e&&e()})}function Do(t,e="reka"){return`${e}-${ed==null?void 0:ed()}`}function jO(t){const e=_e(),n=J(()=>{var s;return((s=e.value)==null?void 0:s.width)??0}),r=J(()=>{var s;return((s=e.value)==null?void 0:s.height)??0});return Wt(()=>{const s=Ir(t);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let l,u;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,u=d.blockSize}else l=s.offsetWidth,u=s.offsetHeight;e.value={width:l,height:u}});return i.observe(s,{box:"border-box"}),()=>i.unobserve(s)}else e.value=void 0}),{width:n,height:r}}function UO(t,e){const n=_e(t);function r(i){return e[n.value][i]??n.value}return{state:n,dispatch:i=>{n.value=r(i)}}}function Zp(t){const e=xO("",1e3);return{search:e,handleTypeaheadSearch:(s,i)=>{e.value=e.value+s;{const o=sn(),a=i.map(f=>{var h,m;return{...f,textValue:((h=f.value)==null?void 0:h.textValue)??((m=f.ref.textContent)==null?void 0:m.trim())??""}}),l=a.find(f=>f.ref===o),u=a.map(f=>f.textValue),c=BO(u,e.value,l==null?void 0:l.textValue),d=a.find(f=>f.textValue===c);return d&&d.ref.focus(),d==null?void 0:d.ref}},resetTypeahead:()=>{e.value=""}}}function qO(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function BO(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=qO(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function VO(t,e){var x;const n=_e({}),r=_e("none"),s=_e(t),i=t.value?"mounted":"unmounted";let o;const a=((x=e.value)==null?void 0:x.ownerDocument.defaultView)??ul,{state:l,dispatch:u}=UO(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=b=>{var E;if(us){const _=new CustomEvent(b,{bubbles:!1,cancelable:!1});(E=e.value)==null||E.dispatchEvent(_)}};et(t,async(b,E)=>{var p;const _=E!==b;if(await Ft(),_){const v=r.value,S=kl(e.value);b?(u("MOUNT"),c("enter"),S==="none"&&c("after-enter")):S==="none"||S==="undefined"||((p=n.value)==null?void 0:p.display)==="none"?(u("UNMOUNT"),c("leave"),c("after-leave")):E&&v!==S?(u("ANIMATION_OUT"),c("leave")):(u("UNMOUNT"),c("after-leave"))}},{immediate:!0});const d=b=>{const E=kl(e.value),_=E.includes(CSS.escape(b.animationName)),p=l.value==="mounted"?"enter":"leave";if(b.target===e.value&&_&&(c(`after-${p}`),u("ANIMATION_END"),!s.value)){const v=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a==null?void 0:a.setTimeout(()=>{var S;((S=e.value)==null?void 0:S.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=v)})}b.target===e.value&&E==="none"&&u("ANIMATION_END")},f=b=>{b.target===e.value&&(r.value=kl(e.value))},h=et(e,(b,E)=>{b?(n.value=getComputedStyle(b),b.addEventListener("animationstart",f),b.addEventListener("animationcancel",d),b.addEventListener("animationend",d)):(u("ANIMATION_END"),o!==void 0&&(a==null||a.clearTimeout(o)),E==null||E.removeEventListener("animationstart",f),E==null||E.removeEventListener("animationcancel",d),E==null||E.removeEventListener("animationend",d))},{immediate:!0}),m=et(l,()=>{const b=kl(e.value);r.value=l.value==="mounted"?b:"none"});return ar(()=>{h(),m()}),{isPresent:J(()=>["mounted","unmountSuspended"].includes(l.value))}}function kl(t){return t&&getComputedStyle(t).animationName||"none"}var fl=me({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){var u;const{present:r,forceMount:s}=or(t),i=_e(),{isPresent:o}=VO(r,i);n({present:o});let a=e.default({present:o.value});a=Wp(a||[]);const l=ur();if(a&&(a==null?void 0:a.length)>1){const c=(u=l==null?void 0:l.parent)!=null&&u.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(d=>`  - ${d}`).join(`
`)].join(`
`))}return()=>s.value||r.value||o.value?nr(e.default({present:o.value})[0],{ref:c=>{const d=Ir(c);return typeof(d==null?void 0:d.hasAttribute)>"u"||(d!=null&&d.hasAttribute("data-reka-popper-content-wrapper")?i.value=d.firstElementChild:i.value=d),d}}):null}});const _h=me({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{var l;if(!n.default)return null;const r=Wp(n.default()),s=r.findIndex(u=>u.type!==qr);if(s===-1)return r;const i=r[s];(l=i.props)==null||delete l.ref;const o=i.props?Ue(e,i.props):e,a=qi({...i,props:{}},o);return r.length===1?a:(r[s]=a,r)}}}),zO=["area","img","input"],Et=me({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&zO.includes(r)?()=>nr(r,e):r!=="template"?()=>nr(t.as,e,{default:n.default}):()=>nr(_h,e,{default:n.default})}});function xh(){const t=_e(),e=J(()=>{var n,r;return["#text","#comment"].includes((n=t.value)==null?void 0:n.$el.nodeName)?(r=t.value)==null?void 0:r.$el.nextElementSibling:Ir(t)});return{primitiveElement:t,currentElement:e}}const[wi,HO]=Rn("DialogRoot");var KO=me({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=hi(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=_e(),o=_e(),{modal:a}=or(n);return HO({open:s,modal:a,openModal:()=>{s.value=!0},onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:o}),(l,u)=>Ae(l.$slots,"default",{open:A(s),close:()=>s.value=!1})}}),WO=KO;const GO="dismissableLayer.pointerDownOutside",JO="dismissableLayer.focusOutside";function mx(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),s=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||s.indexOf(r)<s.indexOf(n)))}function XO(t,e,n=!0){var o;const r=((o=e==null?void 0:e.value)==null?void 0:o.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=_e(!1),i=_e(()=>{});return qt(a=>{if(!us||!pn(n))return;const l=async c=>{const d=c.target;if(!(!(e!=null&&e.value)||!d)){if(mx(e.value,d)){s.value=!1;return}if(c.target&&!s.value){let h=function(){Kp(GO,t,f)};const f={originalEvent:c};c.pointerType==="touch"?(r.removeEventListener("click",i.value),i.value=h,r.addEventListener("click",i.value,{once:!0})):h()}else r.removeEventListener("click",i.value);s.value=!1}},u=window.setTimeout(()=>{r.addEventListener("pointerdown",l)},0);a(()=>{window.clearTimeout(u),r.removeEventListener("pointerdown",l),r.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{pn(n)&&(s.value=!0)}}}function YO(t,e,n=!0){var i;const r=((i=e==null?void 0:e.value)==null?void 0:i.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=_e(!1);return qt(o=>{if(!us||!pn(n))return;const a=async l=>{if(!(e!=null&&e.value))return;await Ft(),await Ft();const u=l.target;!e.value||!u||mx(e.value,u)||l.target&&!s.value&&Kp(JO,t,{originalEvent:l})};r.addEventListener("focusin",a),o(()=>r.removeEventListener("focusin",a))}),{onFocusCapture:()=>{pn(n)&&(s.value=!0)},onBlurCapture:()=>{pn(n)&&(s.value=!1)}}}const Vn=Gn({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,originalBodyPointerEvents:void 0,branches:new Set});var QO=me({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=tt(),o=J(()=>{var h;return((h=i.value)==null?void 0:h.ownerDocument)??globalThis.document}),a=J(()=>Vn.layersRoot),l=J(()=>i.value?Array.from(a.value).indexOf(i.value):-1),u=J(()=>Vn.layersWithOutsidePointerEventsDisabled.size>0),c=J(()=>{const h=Array.from(a.value),[m]=[...Vn.layersWithOutsidePointerEventsDisabled].slice(-1),g=h.indexOf(m);return l.value>=g}),d=XO(async h=>{const m=[...Vn.branches].some(g=>g==null?void 0:g.contains(h.target));!c.value||m||(r("pointerDownOutside",h),r("interactOutside",h),await Ft(),h.defaultPrevented||r("dismiss"))},i),f=YO(h=>{[...Vn.branches].some(g=>g==null?void 0:g.contains(h.target))||(r("focusOutside",h),r("interactOutside",h),h.defaultPrevented||r("dismiss"))},i);return Jp("Escape",h=>{l.value===a.value.size-1&&(r("escapeKeyDown",h),h.defaultPrevented||r("dismiss"))}),qt(h=>{i.value&&(n.disableOutsidePointerEvents&&(Vn.layersWithOutsidePointerEventsDisabled.size===0&&(Vn.originalBodyPointerEvents=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),Vn.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),h(()=>{n.disableOutsidePointerEvents&&Vn.layersWithOutsidePointerEventsDisabled.size===1&&!bh(Vn.originalBodyPointerEvents)&&(o.value.body.style.pointerEvents=Vn.originalBodyPointerEvents)}))}),qt(h=>{h(()=>{i.value&&(a.value.delete(i.value),Vn.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(h,m)=>(F(),ce(A(Et),{ref:A(s),"as-child":h.asChild,as:h.as,"data-dismissable-layer":"",style:jr({pointerEvents:u.value?c.value?"auto":"none":void 0}),onFocusCapture:A(f).onFocusCapture,onBlurCapture:A(f).onBlurCapture,onPointerdownCapture:A(d).onPointerDownCapture},{default:se(()=>[Ae(h.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),em=QO,ZO=me({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{forwardRef:n,currentElement:r}=tt();return Wt(()=>{Vn.branches.add(r.value)}),ar(()=>{Vn.branches.delete(r.value)}),(s,i)=>(F(),ce(A(Et),Ue({ref:A(n)},e),{default:se(()=>[Ae(s.$slots,"default")]),_:3},16))}}),eD=ZO;const tD=mO(()=>_e([]));function nD(){const t=tD();return{add(e){const n=t.value[0];e!==n&&(n==null||n.pause()),t.value=Uy(t.value,e),t.value.unshift(e)},remove(e){var n;t.value=Uy(t.value,e),(n=t.value[0])==null||n.resume()}}}function Uy(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function rD(t){return t.filter(e=>e.tagName!=="A")}const Sd="focusScope.autoFocusOnMount",Id="focusScope.autoFocusOnUnmount",qy={bubbles:!1,cancelable:!0};function su(t,{select:e=!1}={}){const n=sn();for(const r of t)if(Ks(r,{select:e}),sn()!==n)return!0}function sD(t){const e=tm(t),n=By(e,t),r=By(e.reverse(),t);return[n,r]}function tm(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function By(t,e){for(const n of t)if(!iD(n,{upTo:e}))return n}function iD(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function oD(t){return t instanceof HTMLInputElement&&"select"in t}function Ks(t,{select:e=!1}={}){if(t&&t.focus){const n=sn();t.focus({preventScroll:!0}),t!==n&&oD(t)&&e&&t.select()}}var aD=me({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:s,currentElement:i}=tt(),o=_e(null),a=nD(),l=Gn({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});qt(c=>{if(!us)return;const d=i.value;if(!n.trapped)return;function f(x){if(l.paused||!d)return;const b=x.target;d.contains(b)?o.value=b:Ks(o.value,{select:!0})}function h(x){if(l.paused||!d)return;const b=x.relatedTarget;b!==null&&(d.contains(b)||Ks(o.value,{select:!0}))}function m(x){d.contains(o.value)||Ks(d)}document.addEventListener("focusin",f),document.addEventListener("focusout",h);const g=new MutationObserver(m);d&&g.observe(d,{childList:!0,subtree:!0}),c(()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",h),g.disconnect()})}),qt(async c=>{const d=i.value;if(await Ft(),!d)return;a.add(l);const f=sn();if(!d.contains(f)){const m=new CustomEvent(Sd,qy);d.addEventListener(Sd,g=>r("mountAutoFocus",g)),d.dispatchEvent(m),m.defaultPrevented||(su(rD(tm(d)),{select:!0}),sn()===f&&Ks(d))}c(()=>{d.removeEventListener(Sd,x=>r("mountAutoFocus",x));const m=new CustomEvent(Id,qy),g=x=>{r("unmountAutoFocus",x)};d.addEventListener(Id,g),d.dispatchEvent(m),setTimeout(()=>{m.defaultPrevented||Ks(f??document.body,{select:!0}),d.removeEventListener(Id,g),a.remove(l)},0)})});function u(c){if(!n.loop&&!n.trapped||l.paused)return;const d=c.key==="Tab"&&!c.altKey&&!c.ctrlKey&&!c.metaKey,f=sn();if(d&&f){const h=c.currentTarget,[m,g]=sD(h);m&&g?!c.shiftKey&&f===g?(c.preventDefault(),n.loop&&Ks(m,{select:!0})):c.shiftKey&&f===m&&(c.preventDefault(),n.loop&&Ks(g,{select:!0})):f===h&&c.preventDefault()}}return(c,d)=>(F(),ce(A(Et),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":c.asChild,as:c.as,onKeydown:u},{default:se(()=>[Ae(c.$slots,"default")]),_:3},8,["as-child","as"]))}}),nm=aD;const lD="menu.itemSelect",Eh=["Enter"," "],uD=["ArrowDown","PageUp","Home"],gx=["ArrowUp","PageDown","End"],cD=[...uD,...gx];[...Eh],[...Eh];function yx(t){return t?"open":"closed"}function Ah(t){const e=sn();for(const n of t)if(n===e||(n.focus(),sn()!==e))return}function dD(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,u=e[o].x,c=e[o].y;l>r!=c>r&&n<(u-a)*(r-l)/(c-l)+a&&(s=!s)}return s}function fD(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return dD(n,e)}function Sh(t){return t.pointerType==="mouse"}var hD=me({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=wi(),{forwardRef:i,currentElement:o}=tt();return s.titleId||(s.titleId=Do(void 0,"reka-dialog-title")),s.descriptionId||(s.descriptionId=Do(void 0,"reka-dialog-description")),Wt(()=>{s.contentElement=o,sn()!==document.body&&(s.triggerElement.value=sn())}),(a,l)=>(F(),ce(A(nm),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=u=>r("openAutoFocus",u)),onUnmountAutoFocus:l[6]||(l[6]=u=>r("closeAutoFocus",u))},{default:se(()=>[oe(A(em),Ue({id:A(s).contentId,ref:A(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":A(s).descriptionId,"aria-labelledby":A(s).titleId,"data-state":A(yx)(A(s).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=u=>A(s).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=u=>r("escapeKeyDown",u)),onFocusOutside:l[2]||(l[2]=u=>r("focusOutside",u)),onInteractOutside:l[3]||(l[3]=u=>r("interactOutside",u)),onPointerDownOutside:l[4]||(l[4]=u=>r("pointerDownOutside",u))}),{default:se(()=>[Ae(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),vx=hD,pD=me({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=wi(),i=cl(r),{forwardRef:o,currentElement:a}=tt();return Qp(a),(l,u)=>(F(),ce(vx,Ue({...n,...A(i)},{ref:A(o),"trap-focus":A(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:u[0]||(u[0]=c=>{var d;c.defaultPrevented||(c.preventDefault(),(d=A(s).triggerElement.value)==null||d.focus())}),onPointerDownOutside:u[1]||(u[1]=c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&c.preventDefault()}),onFocusOutside:u[2]||(u[2]=c=>{c.preventDefault()})}),{default:se(()=>[Ae(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),mD=pD,gD=me({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=cl(e);tt();const i=wi(),o=_e(!1),a=_e(!1);return(l,u)=>(F(),ce(vx,Ue({...n,...A(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=c=>{var d;c.defaultPrevented||(o.value||(d=A(i).triggerElement.value)==null||d.focus(),c.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:u[1]||(u[1]=c=>{var h;c.defaultPrevented||(o.value=!0,c.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const d=c.target;((h=A(i).triggerElement.value)==null?void 0:h.contains(d))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&a.value&&c.preventDefault()})}),{default:se(()=>[Ae(l.$slots,"default")]),_:3},16))}}),yD=gD,vD=me({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=wi(),i=cl(r),{forwardRef:o}=tt();return(a,l)=>(F(),ce(A(fl),{present:a.forceMount||A(s).open.value},{default:se(()=>[A(s).modal.value?(F(),ce(mD,Ue({key:0,ref:A(o)},{...n,...A(i),...a.$attrs}),{default:se(()=>[Ae(a.$slots,"default")]),_:3},16)):(F(),ce(yD,Ue({key:1,ref:A(o)},{...n,...A(i),...a.$attrs}),{default:se(()=>[Ae(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),bD=vD,wD=me({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const e=t;tt();const n=wi();return(r,s)=>(F(),ce(A(Et),Ue(e,{id:A(n).descriptionId}),{default:se(()=>[Ae(r.$slots,"default")]),_:3},16,["id"]))}}),_D=wD,xD=me({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=wi();return Xp(!0),tt(),(n,r)=>(F(),ce(A(Et),{as:n.as,"as-child":n.asChild,"data-state":A(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:se(()=>[Ae(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),ED=xD,AD=me({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=wi(),{forwardRef:n}=tt();return(r,s)=>{var i;return(i=A(e))!=null&&i.modal.value?(F(),ce(A(fl),{key:0,present:r.forceMount||A(e).open.value},{default:se(()=>[oe(ED,Ue(r.$attrs,{ref:A(n),as:r.as,"as-child":r.asChild}),{default:se(()=>[Ae(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):je("v-if",!0)}}}),SD=AD,ID=me({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=ux();return(n,r)=>A(e)||n.forceMount?(F(),ce(wp,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[Ae(n.$slots,"default")],8,["to","disabled","defer"])):je("v-if",!0)}}),rm=ID,CD=me({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(F(),ce(A(rm),Wn(lr(e)),{default:se(()=>[Ae(n.$slots,"default")]),_:3},16))}}),RD=CD,TD=me({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const e=t,n=wi();return tt(),(r,s)=>(F(),ce(A(Et),Ue(e,{id:A(n).titleId}),{default:se(()=>[Ae(r.$slots,"default")]),_:3},16,["id"]))}}),OD=TD;const Vy="data-reka-collection-item";function cs(t={}){const{key:e="",isProvider:n=!1}=t,r=`${e}CollectionProvider`;let s;if(n){const c=_e(new Map);s={collectionRef:_e(),itemMap:c},_r(r,s)}else s=jt(r);const i=(c=!1)=>{const d=s.collectionRef.value;if(!d)return[];const f=Array.from(d.querySelectorAll(`[${Vy}]`)),m=Array.from(s.itemMap.value.values()).sort((g,x)=>f.indexOf(g.ref)-f.indexOf(x.ref));return c?m:m.filter(g=>g.ref.dataset.disabled!=="")},o=me({name:"CollectionSlot",setup(c,{slots:d}){const{primitiveElement:f,currentElement:h}=xh();return et(h,()=>{s.collectionRef.value=h.value}),()=>nr(_h,{ref:f},d)}}),a=me({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(c,{slots:d,attrs:f}){const{primitiveElement:h,currentElement:m}=xh();return qt(g=>{if(m.value){const x=st(m.value);s.itemMap.value.set(x,{ref:m.value,value:c.value}),g(()=>s.itemMap.value.delete(x))}}),()=>nr(_h,{...f,[Vy]:"",ref:h},d)}}),l=J(()=>Array.from(s.itemMap.value.values())),u=J(()=>s.itemMap.value.size);return{getItems:i,reactiveItems:l,itemMapSize:u,CollectionSlot:o,CollectionItem:a}}const DD="rovingFocusGroup.onEntryFocus",kD={bubbles:!1,cancelable:!0};function PD(t,e=!1){const n=sn();for(const r of t)if(r===n||(r.focus({preventScroll:e}),sn()!==n))return}const[dV,$D]=Rn("RovingFocusGroup");var LD=me({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:n}){const r=t,s=n,{loop:i,orientation:o,dir:a}=or(r),l=wc(a),u=hi(r,"currentTabStopId",s,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),c=_e(!1),d=_e(!1),f=_e(0),{getItems:h,CollectionSlot:m}=cs({isProvider:!0});function g(b){const E=!d.value;if(b.currentTarget&&b.target===b.currentTarget&&E&&!c.value){const _=new CustomEvent(DD,kD);if(b.currentTarget.dispatchEvent(_),s("entryFocus",_),!_.defaultPrevented){const p=h().map(T=>T.ref).filter(T=>T.dataset.disabled!==""),v=p.find(T=>T.getAttribute("data-active")===""),S=p.find(T=>T.getAttribute("data-highlighted")===""),C=p.find(T=>T.id===u.value),R=[v,S,C,...p].filter(Boolean);PD(R,r.preventScrollOnEntryFocus)}}d.value=!1}function x(){setTimeout(()=>{d.value=!1},1)}return e({getItems:h}),$D({loop:i,dir:l,orientation:o,currentTabStopId:u,onItemFocus:b=>{u.value=b},onItemShiftTab:()=>{c.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(b,E)=>(F(),ce(A(m),null,{default:se(()=>[oe(A(Et),{tabindex:c.value||f.value===0?-1:0,"data-orientation":A(o),as:b.as,"as-child":b.asChild,dir:A(l),style:{outline:"none"},onMousedown:E[0]||(E[0]=_=>d.value=!0),onMouseup:x,onFocus:g,onBlur:E[1]||(E[1]=_=>c.value=!1)},{default:se(()=>[Ae(b.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),MD=LD,ND=me({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){return(e,n)=>(F(),ce(A(Et),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:se(()=>[Ae(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),_c=ND,FD=me({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(t){const e=t,{primitiveElement:n,currentElement:r}=xh(),s=J(()=>e.checked??e.value);return et(s,(i,o)=>{if(!r.value)return;const a=r.value,l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(c&&i!==o){const d=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});c.call(a,i),a.dispatchEvent(d),a.dispatchEvent(f)}}),(i,o)=>(F(),ce(_c,Ue({ref_key:"primitiveElement",ref:n},{...e,...i.$attrs},{as:"input"}),null,16))}}),zy=FD,jD=me({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(t){const e=t,n=J(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=J(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((s,i)=>typeof s=="object"?Object.entries(s).map(([o,a])=>({name:`${e.name}[${i}][${o}]`,value:a})):{name:`${e.name}[${i}]`,value:s}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([s,i])=>({name:`${e.name}[${s}]`,value:i})):[]);return(s,i)=>(F(),be(Ze,null,[je(" We render single input if it's required "),n.value?(F(),ce(zy,Ue({key:s.name},{...e,...s.$attrs},{name:s.name,value:s.value}),null,16,["name","value"])):(F(!0),be(Ze,{key:1},ln(r.value,o=>(F(),ce(zy,Ue({key:o.name},{ref_for:!0},{...e,...s.$attrs},{name:o.name,value:o.value}),null,16,["name","value"]))),128))],2112))}}),UD=jD;const[bx,qD]=Rn("PopperRoot");var BD=me({inheritAttrs:!1,__name:"PopperRoot",setup(t){const e=_e();return qD({anchor:e,onAnchorChange:n=>e.value=n}),(n,r)=>Ae(n.$slots,"default")}}),wx=BD,VD=me({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{forwardRef:n,currentElement:r}=tt(),s=bx();return p_(()=>{s.onAnchorChange(e.reference??r.value)}),(i,o)=>(F(),ce(A(Et),{ref:A(n),as:i.as,"as-child":i.asChild},{default:se(()=>[Ae(i.$slots,"default")]),_:3},8,["as","as-child"]))}}),_x=VD;function zD(t){return t!==null}function HD(t){return{name:"transformOrigin",options:t,fn(e){var x,b,E;const{placement:n,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,c]=Ih(n),d={start:"0%",center:"50%",end:"100%"}[c],f=(((b=s.arrow)==null?void 0:b.x)??0)+a/2,h=(((E=s.arrow)==null?void 0:E.y)??0)+l/2;let m="",g="";return u==="bottom"?(m=o?d:`${f}px`,g=`${-l}px`):u==="top"?(m=o?d:`${f}px`,g=`${r.floating.height+l}px`):u==="right"?(m=`${-l}px`,g=o?d:`${h}px`):u==="left"&&(m=`${r.floating.width+l}px`,g=o?d:`${h}px`),{data:{x:m,y:g}}}}}function Ih(t){const[e,n="center"]=t.split("-");return[e,n]}const KD=["top","right","bottom","left"],pi=Math.min,Yn=Math.max,Du=Math.round,Pl=Math.floor,rs=t=>({x:t,y:t}),WD={left:"right",right:"left",bottom:"top",top:"bottom"},GD={start:"end",end:"start"};function Ch(t,e,n){return Yn(t,pi(e,n))}function $s(t,e){return typeof t=="function"?t(e):t}function Ls(t){return t.split("-")[0]}function Ho(t){return t.split("-")[1]}function sm(t){return t==="x"?"y":"x"}function im(t){return t==="y"?"height":"width"}const JD=new Set(["top","bottom"]);function ts(t){return JD.has(Ls(t))?"y":"x"}function om(t){return sm(ts(t))}function XD(t,e,n){n===void 0&&(n=!1);const r=Ho(t),s=om(t),i=im(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=ku(o)),[o,ku(o)]}function YD(t){const e=ku(t);return[Rh(t),e,Rh(e)]}function Rh(t){return t.replace(/start|end/g,e=>GD[e])}const Hy=["left","right"],Ky=["right","left"],QD=["top","bottom"],ZD=["bottom","top"];function ek(t,e,n){switch(t){case"top":case"bottom":return n?e?Ky:Hy:e?Hy:Ky;case"left":case"right":return e?QD:ZD;default:return[]}}function tk(t,e,n,r){const s=Ho(t);let i=ek(Ls(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Rh)))),i}function ku(t){return t.replace(/left|right|bottom|top/g,e=>WD[e])}function nk(t){return{top:0,right:0,bottom:0,left:0,...t}}function xx(t){return typeof t!="number"?nk(t):{top:t,right:t,bottom:t,left:t}}function Pu(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Wy(t,e,n){let{reference:r,floating:s}=t;const i=ts(e),o=om(e),a=im(o),l=Ls(e),u=i==="y",c=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-s.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-s.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Ho(e)){case"start":h[o]-=f*(n&&u?-1:1);break;case"end":h[o]+=f*(n&&u?-1:1);break}return h}const rk=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:c,y:d}=Wy(u,r,l),f=r,h={},m=0;for(let g=0;g<a.length;g++){const{name:x,fn:b}=a[g],{x:E,y:_,data:p,reset:v}=await b({x:c,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:h,rects:u,platform:o,elements:{reference:t,floating:e}});c=E??c,d=_??d,h={...h,[x]:{...h[x],...p}},v&&m<=50&&(m++,typeof v=="object"&&(v.placement&&(f=v.placement),v.rects&&(u=v.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):v.rects),{x:c,y:d}=Wy(u,f,l)),g=-1)}return{x:c,y:d,placement:f,strategy:s,middlewareData:h}};async function za(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=$s(e,t),m=xx(h),x=a[f?d==="floating"?"reference":"floating":d],b=Pu(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),E=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),p=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},v=Pu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:_,strategy:l}):E);return{top:(b.top-v.top+m.top)/p.y,bottom:(v.bottom-b.bottom+m.bottom)/p.y,left:(b.left-v.left+m.left)/p.x,right:(v.right-b.right+m.right)/p.x}}const sk=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=$s(t,e)||{};if(u==null)return{};const d=xx(c),f={x:n,y:r},h=om(s),m=im(h),g=await o.getDimensions(u),x=h==="y",b=x?"top":"left",E=x?"bottom":"right",_=x?"clientHeight":"clientWidth",p=i.reference[m]+i.reference[h]-f[h]-i.floating[m],v=f[h]-i.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=S?S[_]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=a.floating[_]||i.floating[m]);const R=p/2-v/2,T=C/2-g[m]/2-1,D=pi(d[b],T),U=pi(d[E],T),z=D,V=C-g[m]-U,P=C/2-g[m]/2+R,X=Ch(z,P,V),O=!l.arrow&&Ho(s)!=null&&P!==X&&i.reference[m]/2-(P<z?D:U)-g[m]/2<0,H=O?P<z?P-z:P-V:0;return{[h]:f[h]+H,data:{[h]:X,centerOffset:P-X-H,...O&&{alignmentOffset:H}},reset:O}}}),ik=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...x}=$s(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=Ls(s),E=ts(a),_=Ls(a)===a,p=await(l.isRTL==null?void 0:l.isRTL(u.floating)),v=f||(_||!g?[ku(a)]:YD(a)),S=m!=="none";!f&&S&&v.push(...tk(a,g,m,p));const C=[a,...v],R=await za(e,x),T=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(c&&T.push(R[b]),d){const P=XD(s,o,p);T.push(R[P[0]],R[P[1]])}if(D=[...D,{placement:s,overflows:T}],!T.every(P=>P<=0)){var U,z;const P=(((U=i.flip)==null?void 0:U.index)||0)+1,X=C[P];if(X&&(!(d==="alignment"?E!==ts(X):!1)||D.every(q=>ts(q.placement)===E?q.overflows[0]>0:!0)))return{data:{index:P,overflows:D},reset:{placement:X}};let O=(z=D.filter(H=>H.overflows[0]<=0).sort((H,q)=>H.overflows[1]-q.overflows[1])[0])==null?void 0:z.placement;if(!O)switch(h){case"bestFit":{var V;const H=(V=D.filter(q=>{if(S){const ie=ts(q.placement);return ie===E||ie==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(ie=>ie>0).reduce((ie,B)=>ie+B,0)]).sort((q,ie)=>q[1]-ie[1])[0])==null?void 0:V[0];H&&(O=H);break}case"initialPlacement":O=a;break}if(s!==O)return{reset:{placement:O}}}return{}}}};function Gy(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Jy(t){return KD.some(e=>t[e]>=0)}const ok=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=$s(t,e);switch(r){case"referenceHidden":{const i=await za(e,{...s,elementContext:"reference"}),o=Gy(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Jy(o)}}}case"escaped":{const i=await za(e,{...s,altBoundary:!0}),o=Gy(i,n.floating);return{data:{escapedOffsets:o,escaped:Jy(o)}}}default:return{}}}}},Ex=new Set(["left","top"]);async function ak(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ls(n),a=Ho(n),l=ts(n)==="y",u=Ex.has(o)?-1:1,c=i&&l?-1:1,d=$s(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const lk=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await ak(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},uk=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:b,y:E}=x;return{x:b,y:E}}},...l}=$s(t,e),u={x:n,y:r},c=await za(e,l),d=ts(Ls(s)),f=sm(d);let h=u[f],m=u[d];if(i){const x=f==="y"?"top":"left",b=f==="y"?"bottom":"right",E=h+c[x],_=h-c[b];h=Ch(E,h,_)}if(o){const x=d==="y"?"top":"left",b=d==="y"?"bottom":"right",E=m+c[x],_=m-c[b];m=Ch(E,m,_)}const g=a.fn({...e,[f]:h,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[d]:o}}}}}},ck=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=$s(t,e),c={x:n,y:r},d=ts(s),f=sm(d);let h=c[f],m=c[d];const g=$s(a,e),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=f==="y"?"height":"width",p=i.reference[f]-i.floating[_]+x.mainAxis,v=i.reference[f]+i.reference[_]-x.mainAxis;h<p?h=p:h>v&&(h=v)}if(u){var b,E;const _=f==="y"?"width":"height",p=Ex.has(Ls(s)),v=i.reference[d]-i.floating[_]+(p&&((b=o.offset)==null?void 0:b[d])||0)+(p?0:x.crossAxis),S=i.reference[d]+i.reference[_]+(p?0:((E=o.offset)==null?void 0:E[d])||0)-(p?x.crossAxis:0);m<v?m=v:m>S&&(m=S)}return{[f]:h,[d]:m}}}},dk=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=$s(t,e),c=await za(e,u),d=Ls(s),f=Ho(s),h=ts(s)==="y",{width:m,height:g}=i.floating;let x,b;d==="top"||d==="bottom"?(x=d,b=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=d,x=f==="end"?"top":"bottom");const E=g-c.top-c.bottom,_=m-c.left-c.right,p=pi(g-c[x],E),v=pi(m-c[b],_),S=!e.middlewareData.shift;let C=p,R=v;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(R=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=E),S&&!f){const D=Yn(c.left,0),U=Yn(c.right,0),z=Yn(c.top,0),V=Yn(c.bottom,0);h?R=m-2*(D!==0||U!==0?D+U:Yn(c.left,c.right)):C=g-2*(z!==0||V!==0?z+V:Yn(c.top,c.bottom))}await l({...e,availableWidth:R,availableHeight:C});const T=await o.getDimensions(a.floating);return m!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function xc(){return typeof window<"u"}function Ki(t){return am(t)?(t.nodeName||"").toLowerCase():"#document"}function rr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ds(t){var e;return(e=(am(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function am(t){return xc()?t instanceof Node||t instanceof rr(t).Node:!1}function Br(t){return xc()?t instanceof Element||t instanceof rr(t).Element:!1}function as(t){return xc()?t instanceof HTMLElement||t instanceof rr(t).HTMLElement:!1}function Xy(t){return!xc()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof rr(t).ShadowRoot}const fk=new Set(["inline","contents"]);function hl(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Vr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!fk.has(s)}const hk=new Set(["table","td","th"]);function pk(t){return hk.has(Ki(t))}const mk=[":popover-open",":modal"];function Ec(t){return mk.some(e=>{try{return t.matches(e)}catch{return!1}})}const gk=["transform","translate","scale","rotate","perspective"],yk=["transform","translate","scale","rotate","perspective","filter"],vk=["paint","layout","strict","content"];function lm(t){const e=um(),n=Br(t)?Vr(t):t;return gk.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||yk.some(r=>(n.willChange||"").includes(r))||vk.some(r=>(n.contain||"").includes(r))}function bk(t){let e=mi(t);for(;as(e)&&!ko(e);){if(lm(e))return e;if(Ec(e))return null;e=mi(e)}return null}function um(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wk=new Set(["html","body","#document"]);function ko(t){return wk.has(Ki(t))}function Vr(t){return rr(t).getComputedStyle(t)}function Ac(t){return Br(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function mi(t){if(Ki(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Xy(t)&&t.host||ds(t);return Xy(e)?e.host:e}function Ax(t){const e=mi(t);return ko(e)?t.ownerDocument?t.ownerDocument.body:t.body:as(e)&&hl(e)?e:Ax(e)}function Ha(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Ax(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=rr(s);if(i){const a=Th(o);return e.concat(o,o.visualViewport||[],hl(s)?s:[],a&&n?Ha(a):[])}return e.concat(s,Ha(s,[],n))}function Th(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Sx(t){const e=Vr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=as(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Du(n)!==i||Du(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function cm(t){return Br(t)?t:t.contextElement}function bo(t){const e=cm(t);if(!as(e))return rs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Sx(e);let o=(i?Du(n.width):n.width)/r,a=(i?Du(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const _k=rs(0);function Ix(t){const e=rr(t);return!um()||!e.visualViewport?_k:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function xk(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==rr(t)?!1:e}function Vi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=cm(t);let o=rs(1);e&&(r?Br(r)&&(o=bo(r)):o=bo(t));const a=xk(i,n,r)?Ix(i):rs(0);let l=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,c=s.width/o.x,d=s.height/o.y;if(i){const f=rr(i),h=r&&Br(r)?rr(r):r;let m=f,g=Th(m);for(;g&&r&&h!==m;){const x=bo(g),b=g.getBoundingClientRect(),E=Vr(g),_=b.left+(g.clientLeft+parseFloat(E.paddingLeft))*x.x,p=b.top+(g.clientTop+parseFloat(E.paddingTop))*x.y;l*=x.x,u*=x.y,c*=x.x,d*=x.y,l+=_,u+=p,m=rr(g),g=Th(m)}}return Pu({width:c,height:d,x:l,y:u})}function Sc(t,e){const n=Ac(t).scrollLeft;return e?e.left+n:Vi(ds(t)).left+n}function Cx(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Sc(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function Ek(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ds(r),a=e?Ec(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=rs(1);const c=rs(0),d=as(r);if((d||!d&&!i)&&((Ki(r)!=="body"||hl(o))&&(l=Ac(r)),as(r))){const h=Vi(r);u=bo(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const f=o&&!d&&!i?Cx(o,l):rs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}}function Ak(t){return Array.from(t.getClientRects())}function Sk(t){const e=ds(t),n=Ac(t),r=t.ownerDocument.body,s=Yn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Yn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Sc(t);const a=-n.scrollTop;return Vr(r).direction==="rtl"&&(o+=Yn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const Yy=25;function Ik(t,e){const n=rr(t),r=ds(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=um();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const u=Sc(r);if(u<=0){const c=r.ownerDocument,d=c.body,f=getComputedStyle(d),h=c.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,m=Math.abs(r.clientWidth-d.clientWidth-h);m<=Yy&&(i-=m)}else u<=Yy&&(i+=u);return{width:i,height:o,x:a,y:l}}const Ck=new Set(["absolute","fixed"]);function Rk(t,e){const n=Vi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=as(t)?bo(t):rs(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,u=r*i.y;return{width:o,height:a,x:l,y:u}}function Qy(t,e,n){let r;if(e==="viewport")r=Ik(t,n);else if(e==="document")r=Sk(ds(t));else if(Br(e))r=Rk(e,n);else{const s=Ix(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Pu(r)}function Rx(t,e){const n=mi(t);return n===e||!Br(n)||ko(n)?!1:Vr(n).position==="fixed"||Rx(n,e)}function Tk(t,e){const n=e.get(t);if(n)return n;let r=Ha(t,[],!1).filter(a=>Br(a)&&Ki(a)!=="body"),s=null;const i=Vr(t).position==="fixed";let o=i?mi(t):t;for(;Br(o)&&!ko(o);){const a=Vr(o),l=lm(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&Ck.has(s.position)||hl(o)&&!l&&Rx(t,o))?r=r.filter(c=>c!==o):s=a,o=mi(o)}return e.set(t,r),r}function Ok(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Ec(e)?[]:Tk(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const d=Qy(e,c,s);return u.top=Yn(d.top,u.top),u.right=pi(d.right,u.right),u.bottom=pi(d.bottom,u.bottom),u.left=Yn(d.left,u.left),u},Qy(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Dk(t){const{width:e,height:n}=Sx(t);return{width:e,height:n}}function kk(t,e,n){const r=as(e),s=ds(e),i=n==="fixed",o=Vi(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=rs(0);function u(){l.x=Sc(s)}if(r||!r&&!i)if((Ki(e)!=="body"||hl(s))&&(a=Ac(e)),r){const h=Vi(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&u();i&&!r&&s&&u();const c=s&&!r&&!i?Cx(s,a):rs(0),d=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:o.width,height:o.height}}function Cd(t){return Vr(t).position==="static"}function Zy(t,e){if(!as(t)||Vr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ds(t)===n&&(n=n.ownerDocument.body),n}function Tx(t,e){const n=rr(t);if(Ec(t))return n;if(!as(t)){let s=mi(t);for(;s&&!ko(s);){if(Br(s)&&!Cd(s))return s;s=mi(s)}return n}let r=Zy(t,e);for(;r&&pk(r)&&Cd(r);)r=Zy(r,e);return r&&ko(r)&&Cd(r)&&!lm(r)?n:r||bk(t)||n}const Pk=async function(t){const e=this.getOffsetParent||Tx,n=this.getDimensions,r=await n(t.floating);return{reference:kk(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $k(t){return Vr(t).direction==="rtl"}const Lk={convertOffsetParentRelativeRectToViewportRelativeRect:Ek,getDocumentElement:ds,getClippingRect:Ok,getOffsetParent:Tx,getElementRects:Pk,getClientRects:Ak,getDimensions:Dk,getScale:bo,isElement:Br,isRTL:$k};function Ox(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Mk(t,e){let n=null,r;const s=ds(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=u;if(a||e(),!f||!h)return;const m=Pl(d),g=Pl(s.clientWidth-(c+f)),x=Pl(s.clientHeight-(d+h)),b=Pl(c),_={rootMargin:-m+"px "+-g+"px "+-x+"px "+-b+"px",threshold:Yn(0,pi(1,l))||1};let p=!0;function v(S){const C=S[0].intersectionRatio;if(C!==l){if(!p)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!Ox(u,t.getBoundingClientRect())&&o(),p=!1}try{n=new IntersectionObserver(v,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(v,_)}n.observe(t)}return o(!0),i}function Nk(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=cm(t),c=s||i?[...u?Ha(u):[],...Ha(e)]:[];c.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const d=u&&a?Mk(u,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(b=>{let[E]=b;E&&E.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(e)})),n()}),u&&!l&&h.observe(u),h.observe(e));let m,g=l?Vi(t):null;l&&x();function x(){const b=Vi(t);g&&!Ox(g,b)&&n(),g=b,m=requestAnimationFrame(x)}return n(),()=>{var b;c.forEach(E=>{s&&E.removeEventListener("scroll",n),i&&E.removeEventListener("resize",n)}),d==null||d(),(b=h)==null||b.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const Fk=lk,jk=uk,ev=ik,Uk=dk,qk=ok,Bk=sk,Vk=ck,zk=(t,e,n)=>{const r=new Map,s={platform:Lk,...n},i={...s.platform,_c:r};return rk(t,e,{...s,platform:i})};function Hk(t){return t!=null&&typeof t=="object"&&"$el"in t}function Oh(t){if(Hk(t)){const e=t.$el;return am(e)&&Ki(e)==="#comment"?null:e}return t}function oo(t){return typeof t=="function"?t():A(t)}function Kk(t){return{name:"arrow",options:t,fn(e){const n=Oh(oo(t.element));return n==null?{}:Bk({element:n,padding:t.padding}).fn(e)}}}function Dx(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function tv(t,e){const n=Dx(t);return Math.round(e*n)/n}function Wk(t,e,n){n===void 0&&(n={});const r=n.whileElementsMounted,s=J(()=>{var C;return(C=oo(n.open))!=null?C:!0}),i=J(()=>oo(n.middleware)),o=J(()=>{var C;return(C=oo(n.placement))!=null?C:"bottom"}),a=J(()=>{var C;return(C=oo(n.strategy))!=null?C:"absolute"}),l=J(()=>{var C;return(C=oo(n.transform))!=null?C:!0}),u=J(()=>Oh(t.value)),c=J(()=>Oh(e.value)),d=_e(0),f=_e(0),h=_e(a.value),m=_e(o.value),g=sr({}),x=_e(!1),b=J(()=>{const C={position:h.value,left:"0",top:"0"};if(!c.value)return C;const R=tv(c.value,d.value),T=tv(c.value,f.value);return l.value?{...C,transform:"translate("+R+"px, "+T+"px)",...Dx(c.value)>=1.5&&{willChange:"transform"}}:{position:h.value,left:R+"px",top:T+"px"}});let E;function _(){if(u.value==null||c.value==null)return;const C=s.value;zk(u.value,c.value,{middleware:i.value,placement:o.value,strategy:a.value}).then(R=>{d.value=R.x,f.value=R.y,h.value=R.strategy,m.value=R.placement,g.value=R.middlewareData,x.value=C!==!1})}function p(){typeof E=="function"&&(E(),E=void 0)}function v(){if(p(),r===void 0){_();return}if(u.value!=null&&c.value!=null){E=r(u.value,c.value,_);return}}function S(){s.value||(x.value=!1)}return et([i,o,a,s],_,{flush:"sync"}),et([u,c],v,{flush:"sync"}),et(s,S,{flush:"sync"}),tl()&&Zu(p),{x:Qi(d),y:Qi(f),strategy:Qi(h),placement:Qi(m),middlewareData:Qi(g),isPositioned:Qi(x),floatingStyles:b,update:_}}const kx={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[fV,Gk]=Rn("PopperContent");var Jk=me({inheritAttrs:!1,__name:"PopperContent",props:C_({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...kx}),emits:["placed"],setup(t,{emit:e}){const n=t,r=e,s=bx(),{forwardRef:i,currentElement:o}=tt(),a=_e(),l=_e(),{width:u,height:c}=jO(l),d=J(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),f=J(()=>typeof n.collisionPadding=="number"?n.collisionPadding:{top:0,right:0,bottom:0,left:0,...n.collisionPadding}),h=J(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),m=J(()=>({padding:f.value,boundary:h.value.filter(zD),altBoundary:h.value.length>0})),g=J(()=>({mainAxis:n.sideFlip,crossAxis:n.alignFlip})),x=pO(()=>[Fk({mainAxis:n.sideOffset+c.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&ev({...m.value,...g.value}),n.avoidCollisions&&jk({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?Vk():void 0,...m.value}),!n.prioritizePosition&&n.avoidCollisions&&ev({...m.value,...g.value}),Uk({...m.value,apply:({elements:z,rects:V,availableWidth:P,availableHeight:X})=>{const{width:O,height:H}=V.reference,q=z.floating.style;q.setProperty("--reka-popper-available-width",`${P}px`),q.setProperty("--reka-popper-available-height",`${X}px`),q.setProperty("--reka-popper-anchor-width",`${O}px`),q.setProperty("--reka-popper-anchor-height",`${H}px`)}}),l.value&&Kk({element:l.value,padding:n.arrowPadding}),HD({arrowWidth:u.value,arrowHeight:c.value}),n.hideWhenDetached&&qk({strategy:"referenceHidden",...m.value})]),b=J(()=>n.reference??s.anchor.value),{floatingStyles:E,placement:_,isPositioned:p,middlewareData:v}=Wk(b,a,{strategy:n.positionStrategy,placement:d,whileElementsMounted:(...z)=>Nk(...z,{layoutShift:!n.disableUpdateOnLayoutShift,animationFrame:n.updatePositionStrategy==="always"}),middleware:x}),S=J(()=>Ih(_.value)[0]),C=J(()=>Ih(_.value)[1]);p_(()=>{p.value&&r("placed")});const R=J(()=>{var z;return((z=v.value.arrow)==null?void 0:z.centerOffset)!==0}),T=_e("");qt(()=>{o.value&&(T.value=window.getComputedStyle(o.value).zIndex)});const D=J(()=>{var z;return((z=v.value.arrow)==null?void 0:z.x)??0}),U=J(()=>{var z;return((z=v.value.arrow)==null?void 0:z.y)??0});return Gk({placedSide:S,onArrowChange:z=>l.value=z,arrowX:D,arrowY:U,shouldHideArrow:R}),(z,V)=>{var P,X,O;return F(),be("div",{ref_key:"floatingRef",ref:a,"data-reka-popper-content-wrapper":"",style:jr({...A(E),transform:A(p)?A(E).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:T.value,"--reka-popper-transform-origin":[(P=A(v).transformOrigin)==null?void 0:P.x,(X=A(v).transformOrigin)==null?void 0:X.y].join(" "),...((O=A(v).hide)==null?void 0:O.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}})},[oe(A(Et),Ue({ref:A(i)},z.$attrs,{"as-child":n.asChild,as:z.as,"data-side":S.value,"data-align":C.value,style:{animation:A(p)?void 0:"none"}}),{default:se(()=>[Ae(z.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}}),Px=Jk;function Xk(t){const e=Gp({nonce:_e()});return J(()=>{var n;return(t==null?void 0:t.value)||((n=e.nonce)==null?void 0:n.value)})}var Yk=me({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return(n,r)=>(F(),ce(A(_x),Wn(lr(e)),{default:se(()=>[Ae(n.$slots,"default")]),_:3},16))}}),Qk=Yk;function Zk(){const t=_e(!1);return Wt(()=>{Ou("keydown",()=>{t.value=!0},{capture:!0,passive:!0}),Ou(["pointerdown","pointermove"],()=>{t.value=!1},{capture:!0,passive:!0})}),t}const eP=lx(Zk),[Ic,tP]=Rn(["MenuRoot","MenuSub"],"MenuContext"),[dm,nP]=Rn("MenuRoot");var rP=me({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e,{modal:s,dir:i}=or(n),o=wc(i),a=hi(n,"open",r),l=_e(),u=eP();return tP({open:a,onOpenChange:c=>{a.value=c},content:l,onContentChange:c=>{l.value=c}}),nP({onClose:()=>{a.value=!1},isUsingKeyboardRef:u,dir:o,modal:s}),(c,d)=>(F(),ce(A(wx),null,{default:se(()=>[Ae(c.$slots,"default")]),_:3}))}}),sP=rP;const[$x,iP]=Rn("MenuContent");var oP=me({__name:"MenuContentImpl",props:C_({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...kx}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(t,{emit:e}){const n=t,r=e,s=Ic(),i=dm(),{trapFocus:o,disableOutsidePointerEvents:a,loop:l}=or(n);fx(),Xp(a.value);const u=_e(""),c=_e(0),d=_e(0),f=_e(null),h=_e("right"),m=_e(0),g=_e(null),x=_e(),{forwardRef:b,currentElement:E}=tt(),{handleTypeaheadSearch:_}=Zp();et(E,T=>{s.onContentChange(T)}),ar(()=>{window.clearTimeout(c.value)});function p(T){var U,z;return h.value===((U=f.value)==null?void 0:U.side)&&fD(T,(z=f.value)==null?void 0:z.area)}async function v(T){var D;r("openAutoFocus",T),!T.defaultPrevented&&(T.preventDefault(),(D=E.value)==null||D.focus({preventScroll:!0}))}function S(T){var H;if(T.defaultPrevented)return;const U=T.target.closest("[data-reka-menu-content]")===T.currentTarget,z=T.ctrlKey||T.altKey||T.metaKey,V=T.key.length===1,P=hO(T,sn(),E.value,{loop:l.value,arrowKeyOptions:"vertical",dir:i==null?void 0:i.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(P)return P==null?void 0:P.focus();if(T.code==="Space")return;const X=((H=x.value)==null?void 0:H.getItems())??[];if(U&&(T.key==="Tab"&&T.preventDefault(),!z&&V&&_(T.key,X)),T.target!==E.value||!cD.includes(T.key))return;T.preventDefault();const O=[...X.map(q=>q.ref)];gx.includes(T.key)&&O.reverse(),Ah(O)}function C(T){var D,U;(U=(D=T==null?void 0:T.currentTarget)==null?void 0:D.contains)!=null&&U.call(D,T.target)||(window.clearTimeout(c.value),u.value="")}function R(T){var z;if(!Sh(T))return;const D=T.target,U=m.value!==T.clientX;if((z=T==null?void 0:T.currentTarget)!=null&&z.contains(D)&&U){const V=T.clientX>m.value?"right":"left";h.value=V,m.value=T.clientX}}return iP({onItemEnter:T=>!!p(T),onItemLeave:T=>{var D;p(T)||((D=E.value)==null||D.focus(),g.value=null)},onTriggerLeave:T=>!!p(T),searchRef:u,pointerGraceTimerRef:d,onPointerGraceIntentChange:T=>{f.value=T}}),(T,D)=>(F(),ce(A(nm),{"as-child":"",trapped:A(o),onMountAutoFocus:v,onUnmountAutoFocus:D[7]||(D[7]=U=>r("closeAutoFocus",U))},{default:se(()=>[oe(A(em),{"as-child":"","disable-outside-pointer-events":A(a),onEscapeKeyDown:D[2]||(D[2]=U=>r("escapeKeyDown",U)),onPointerDownOutside:D[3]||(D[3]=U=>r("pointerDownOutside",U)),onFocusOutside:D[4]||(D[4]=U=>r("focusOutside",U)),onInteractOutside:D[5]||(D[5]=U=>r("interactOutside",U)),onDismiss:D[6]||(D[6]=U=>r("dismiss"))},{default:se(()=>[oe(A(MD),{ref_key:"rovingFocusGroupRef",ref:x,"current-tab-stop-id":g.value,"onUpdate:currentTabStopId":D[0]||(D[0]=U=>g.value=U),"as-child":"",orientation:"vertical",dir:A(i).dir.value,loop:A(l),onEntryFocus:D[1]||(D[1]=U=>{r("entryFocus",U),A(i).isUsingKeyboardRef.value||U.preventDefault()})},{default:se(()=>[oe(A(Px),{ref:A(b),role:"menu",as:T.as,"as-child":T.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":A(yx)(A(s).open.value),dir:A(i).dir.value,side:T.side,"side-offset":T.sideOffset,align:T.align,"align-offset":T.alignOffset,"avoid-collisions":T.avoidCollisions,"collision-boundary":T.collisionBoundary,"collision-padding":T.collisionPadding,"arrow-padding":T.arrowPadding,"prioritize-position":T.prioritizePosition,"position-strategy":T.positionStrategy,"update-position-strategy":T.updatePositionStrategy,sticky:T.sticky,"hide-when-detached":T.hideWhenDetached,reference:T.reference,onKeydown:S,onBlur:C,onPointermove:R},{default:se(()=>[Ae(T.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),Lx=oP,aP=me({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,n=$x(),{forwardRef:r}=tt(),{CollectionItem:s}=cs(),i=_e(!1);async function o(l){if(!l.defaultPrevented&&Sh(l)){if(e.disabled)n.onItemLeave(l);else if(!n.onItemEnter(l)){const c=l.currentTarget;c==null||c.focus({preventScroll:!0})}}}async function a(l){await Ft(),!l.defaultPrevented&&Sh(l)&&n.onItemLeave(l)}return(l,u)=>(F(),ce(A(s),{value:{textValue:l.textValue}},{default:se(()=>[oe(A(Et),Ue({ref:A(r),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":i.value?"":void 0,onPointermove:o,onPointerleave:a,onFocus:u[0]||(u[0]=async c=>{await Ft(),!(c.defaultPrevented||l.disabled)&&(i.value=!0)}),onBlur:u[1]||(u[1]=async c=>{await Ft(),!c.defaultPrevented&&(i.value=!1)})}),{default:se(()=>[Ae(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),lP=aP,uP=me({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=tt(),o=dm(),a=$x(),l=_e(!1);async function u(){const c=i.value;if(!n.disabled&&c){const d=new CustomEvent(lD,{bubbles:!0,cancelable:!0});r("select",d),await Ft(),d.defaultPrevented?l.value=!1:o.onClose()}}return(c,d)=>(F(),ce(lP,Ue(n,{ref:A(s),onClick:u,onPointerdown:d[0]||(d[0]=()=>{l.value=!0}),onPointerup:d[1]||(d[1]=async f=>{var h;await Ft(),!f.defaultPrevented&&(l.value||(h=f.currentTarget)==null||h.click())}),onKeydown:d[2]||(d[2]=async f=>{const h=A(a).searchRef.value!=="";c.disabled||h&&f.key===" "||A(Eh).includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})}),{default:se(()=>[Ae(c.$slots,"default")]),_:3},16))}}),cP=uP,dP=me({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=dl(n,r),i=Ic(),{forwardRef:o,currentElement:a}=tt();return Qp(a),(l,u)=>(F(),ce(Lx,Ue(A(s),{ref:A(o),"trap-focus":A(i).open.value,"disable-outside-pointer-events":A(i).open.value,"disable-outside-scroll":!0,onDismiss:u[0]||(u[0]=c=>A(i).onOpenChange(!1)),onFocusOutside:u[1]||(u[1]=Mn(c=>r("focusOutside",c),["prevent"]))}),{default:se(()=>[Ae(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),fP=dP,hP=me({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=dl(t,e),i=Ic();return(o,a)=>(F(),ce(Lx,Ue(A(s),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:a[0]||(a[0]=l=>A(i).onOpenChange(!1))}),{default:se(()=>[Ae(o.$slots,"default")]),_:3},16))}}),pP=hP,mP=me({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=dl(t,e),i=Ic(),o=dm();return(a,l)=>(F(),ce(A(fl),{present:a.forceMount||A(i).open.value},{default:se(()=>[A(o).modal.value?(F(),ce(fP,Wn(Ue({key:0},{...a.$attrs,...A(s)})),{default:se(()=>[Ae(a.$slots,"default")]),_:3},16)):(F(),ce(pP,Wn(Ue({key:1},{...a.$attrs,...A(s)})),{default:se(()=>[Ae(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),gP=mP,yP=me({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(F(),ce(A(rm),Wn(lr(e)),{default:se(()=>[Ae(n.$slots,"default")]),_:3},16))}}),vP=yP;const[Mx,bP]=Rn("DropdownMenuRoot");var wP=me({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e;tt();const s=hi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=_e(),{modal:o,dir:a}=or(n),l=wc(a);return bP({open:s,onOpenChange:u=>{s.value=u},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:i,contentId:"",modal:o,dir:l}),(u,c)=>(F(),ce(A(sP),{open:A(s),"onUpdate:open":c[0]||(c[0]=d=>Ot(s)?s.value=d:null),dir:A(l),modal:A(o)},{default:se(()=>[Ae(u.$slots,"default",{open:A(s)})]),_:3},8,["open","dir","modal"]))}}),_P=wP,xP=me({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:e}){const s=dl(t,e);tt();const i=Mx(),o=_e(!1);function a(l){l.defaultPrevented||(o.value||setTimeout(()=>{var u;(u=i.triggerElement.value)==null||u.focus()},0),o.value=!1,l.preventDefault())}return i.contentId||(i.contentId=Do(void 0,"reka-dropdown-menu-content")),(l,u)=>{var c;return F(),ce(A(gP),Ue(A(s),{id:A(i).contentId,"aria-labelledby":(c=A(i))==null?void 0:c.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:a,onInteractOutside:u[0]||(u[0]=d=>{var g;if(d.defaultPrevented)return;const f=d.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,m=f.button===2||h;(!A(i).modal.value||m)&&(o.value=!0),(g=A(i).triggerElement.value)!=null&&g.contains(d.target)&&d.preventDefault()})}),{default:se(()=>[Ae(l.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),EP=xP,AP=me({__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,s=cl(e);return tt(),(i,o)=>(F(),ce(A(cP),Wn(lr({...n,...A(s)})),{default:se(()=>[Ae(i.$slots,"default")]),_:3},16))}}),SP=AP,IP=me({__name:"DropdownMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(F(),ce(A(vP),Wn(lr(e)),{default:se(()=>[Ae(n.$slots,"default")]),_:3},16))}}),CP=IP,RP=me({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=Mx(),{forwardRef:r,currentElement:s}=tt();return Wt(()=>{n.triggerElement=s}),n.triggerId||(n.triggerId=Do(void 0,"reka-dropdown-menu-trigger")),(i,o)=>(F(),ce(A(Qk),{"as-child":""},{default:se(()=>[oe(A(Et),{id:A(n).triggerId,ref:A(r),type:i.as==="button"?"button":void 0,"as-child":e.asChild,as:i.as,"aria-haspopup":"menu","aria-expanded":A(n).open.value,"aria-controls":A(n).open.value?A(n).contentId:void 0,"data-disabled":i.disabled?"":void 0,disabled:i.disabled,"data-state":A(n).open.value?"open":"closed",onClick:o[0]||(o[0]=async a=>{var l;!i.disabled&&a.button===0&&a.ctrlKey===!1&&((l=A(n))==null||l.onOpenToggle(),await Ft(),A(n).open.value&&a.preventDefault())}),onKeydown:o[1]||(o[1]=Y_(a=>{i.disabled||(["Enter"," "].includes(a.key)&&A(n).onOpenToggle(),a.key==="ArrowDown"&&A(n).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())},["enter","space","arrow-down"]))},{default:se(()=>[Ae(i.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),TP=RP,OP=me({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(t){const e=t;return tt(),(n,r)=>(F(),ce(A(Et),Ue(e,{onMousedown:r[0]||(r[0]=s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})}),{default:se(()=>[Ae(n.$slots,"default")]),_:3},16))}}),DP=OP;const kP=[" ","Enter","ArrowUp","ArrowDown"],PP=[" ","Enter"],Dr=10;function Ka(t,e,n){return t===void 0?!1:Array.isArray(t)?t.some(r=>Dh(r,e,n)):Dh(t,e,n)}function Dh(t,e,n){return t===void 0||e===void 0?!1:typeof t=="string"?t===e:typeof n=="function"?n(t,e):typeof n=="string"?(t==null?void 0:t[n])===(e==null?void 0:e[n]):dO(t,e)}function $P(t){return t==null||t===""||Array.isArray(t)&&t.length===0}const LP={key:0,value:""},[_i,Nx]=Rn("SelectRoot");var MP=me({inheritAttrs:!1,__name:"SelectRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1,default:void 0},by:{type:[String,Function],required:!1},dir:{type:String,required:!1},multiple:{type:Boolean,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:open"],setup(t,{emit:e}){const n=t,r=e,{required:s,disabled:i,multiple:o,dir:a}=or(n),l=hi(n,"modelValue",r,{defaultValue:n.defaultValue??(o.value?[]:void 0),passive:n.modelValue===void 0,deep:!0}),u=hi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),c=_e(),d=_e(),f=_e({x:0,y:0}),h=J(()=>{var p;return o.value&&Array.isArray(l.value)?((p=l.value)==null?void 0:p.length)===0:bh(l.value)});cs({isProvider:!0});const m=wc(a),g=hx(c),x=_e(new Set),b=J(()=>Array.from(x.value).map(p=>p.value).join(";"));function E(p){if(o.value){const v=Array.isArray(l.value)?[...l.value]:[],S=v.findIndex(C=>Dh(C,p,n.by));S===-1?v.push(p):v.splice(S,1),l.value=[...v]}else l.value=p}function _(p){return Array.from(x.value).find(v=>Ka(p,v.value,n.by))}return Nx({triggerElement:c,onTriggerChange:p=>{c.value=p},valueElement:d,onValueElementChange:p=>{d.value=p},contentId:"",modelValue:l,onValueChange:E,by:n.by,open:u,multiple:o,required:s,onOpenChange:p=>{u.value=p},dir:m,triggerPointerDownPosRef:f,disabled:i,isEmptyModelValue:h,optionsSet:x,onOptionAdd:p=>{const v=_(p.value);v&&x.value.delete(v),x.value.add(p)},onOptionRemove:p=>{const v=_(p.value);v&&x.value.delete(v)}}),(p,v)=>(F(),ce(A(wx),null,{default:se(()=>[Ae(p.$slots,"default",{modelValue:A(l),open:A(u)}),A(g)?(F(),ce(jP,{key:b.value,"aria-hidden":"true",tabindex:"-1",multiple:A(o),required:A(s),name:p.name,autocomplete:p.autocomplete,disabled:A(i),value:A(l)},{default:se(()=>[A(bh)(A(l))?(F(),be("option",LP)):je("v-if",!0),(F(!0),be(Ze,null,ln(Array.from(x.value),S=>(F(),be("option",Ue({key:S.value??""},{ref_for:!0},S),null,16))),128))]),_:1},8,["multiple","required","name","autocomplete","disabled","value"])):je("v-if",!0)]),_:3}))}}),NP=MP,FP=me({__name:"BubbleSelect",props:{autocomplete:{type:String,required:!1},autofocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},form:{type:String,required:!1},multiple:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},size:{type:Number,required:!1},value:{type:null,required:!1}},setup(t){const e=t,n=_e(),r=_i();et(()=>e.value,(i,o)=>{const a=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(a,"value").set;if(i!==o&&u&&n.value){const c=new Event("change",{bubbles:!0});u.call(n.value,i),n.value.dispatchEvent(c)}});function s(i){r.onValueChange(i.target.value)}return(i,o)=>(F(),ce(A(_c),{"as-child":""},{default:se(()=>[te("select",Ue({ref_key:"selectElement",ref:n},e,{onInput:s}),[Ae(i.$slots,"default")],16)]),_:3}))}}),jP=FP,UP=me({__name:"SelectPopperPosition",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1,default:"start"},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1,default:Dr},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const n=Yp(t);return(r,s)=>(F(),ce(A(Px),Ue(A(n),{style:{boxSizing:"border-box","--reka-select-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-select-content-available-width":"var(--reka-popper-available-width)","--reka-select-content-available-height":"var(--reka-popper-available-height)","--reka-select-trigger-width":"var(--reka-popper-anchor-width)","--reka-select-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:se(()=>[Ae(r.$slots,"default")]),_:3},16))}}),qP=UP;const BP={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[Cc,Fx]=Rn("SelectContent");var VP=me({__name:"SelectContentImpl",props:{position:{type:String,required:!1,default:"item-aligned"},bodyLock:{type:Boolean,required:!1,default:!0},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1,default:"start"},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1,default:!0}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,r=e,s=_i();fx(),Xp(n.bodyLock);const{CollectionSlot:i,getItems:o}=cs(),a=_e();Qp(a);const{search:l,handleTypeaheadSearch:u}=Zp(),c=_e(),d=_e(),f=_e(),h=_e(!1),m=_e(!1),g=_e(!1);function x(){d.value&&a.value&&Ah([d.value,a.value])}et(h,()=>{x()});const{onOpenChange:b,triggerPointerDownPosRef:E}=s;qt(S=>{if(!a.value)return;let C={x:0,y:0};const R=D=>{var U,z;C={x:Math.abs(Math.round(D.pageX)-(((U=E.value)==null?void 0:U.x)??0)),y:Math.abs(Math.round(D.pageY)-(((z=E.value)==null?void 0:z.y)??0))}},T=D=>{var U;D.pointerType!=="touch"&&(C.x<=10&&C.y<=10?D.preventDefault():(U=a.value)!=null&&U.contains(D.target)||b(!1),document.removeEventListener("pointermove",R),E.value=null)};E.value!==null&&(document.addEventListener("pointermove",R),document.addEventListener("pointerup",T,{capture:!0,once:!0})),S(()=>{document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",T,{capture:!0})})});function _(S){const C=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!C&&S.key.length===1&&u(S.key,o()),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let T=[...o().map(D=>D.ref)];if(["ArrowUp","End"].includes(S.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const D=S.target,U=T.indexOf(D);T=T.slice(U+1)}setTimeout(()=>Ah(T)),S.preventDefault()}}const p=J(()=>n.position==="popper"?n:{}),v=Yp(p.value);return Fx({content:a,viewport:c,onViewportChange:S=>{c.value=S},itemRefCallback:(S,C,R)=>{const T=!m.value&&!R,D=Ka(s.modelValue.value,C,s.by);if(s.multiple.value){if(g.value)return;(D||T)&&(d.value=S,D&&(g.value=!0))}else(D||T)&&(d.value=S);T&&(m.value=!0)},selectedItem:d,selectedItemText:f,onItemLeave:()=>{var S;(S=a.value)==null||S.focus()},itemTextRefCallback:(S,C,R)=>{const T=!m.value&&!R;(Ka(s.modelValue.value,C,s.by)||T)&&(f.value=S)},focusSelectedItem:x,position:n.position,isPositioned:h,searchRef:l}),(S,C)=>(F(),ce(A(i),null,{default:se(()=>[oe(A(nm),{"as-child":"",onMountAutoFocus:C[6]||(C[6]=Mn(()=>{},["prevent"])),onUnmountAutoFocus:C[7]||(C[7]=R=>{var T;r("closeAutoFocus",R),!R.defaultPrevented&&((T=A(s).triggerElement.value)==null||T.focus({preventScroll:!0}),R.preventDefault())})},{default:se(()=>[oe(A(em),{"as-child":"","disable-outside-pointer-events":S.disableOutsidePointerEvents,onFocusOutside:C[2]||(C[2]=Mn(()=>{},["prevent"])),onDismiss:C[3]||(C[3]=R=>A(s).onOpenChange(!1)),onEscapeKeyDown:C[4]||(C[4]=R=>r("escapeKeyDown",R)),onPointerDownOutside:C[5]||(C[5]=R=>r("pointerDownOutside",R))},{default:se(()=>[(F(),ce(js(S.position==="popper"?qP:GP),Ue({...S.$attrs,...A(v)},{id:A(s).contentId,ref:R=>{const T=A(Ir)(R);T!=null&&T.hasAttribute("data-reka-popper-content-wrapper")?a.value=T.firstElementChild:a.value=T},role:"listbox","data-state":A(s).open.value?"open":"closed",dir:A(s).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:C[0]||(C[0]=Mn(()=>{},["prevent"])),onPlaced:C[1]||(C[1]=R=>h.value=!0),onKeydown:_}),{default:se(()=>[Ae(S.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3},8,["disable-outside-pointer-events"])]),_:3})]),_:3}))}}),zP=VP;const[HP,KP]=Rn("SelectItemAlignedPosition");var WP=me({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["placed"],setup(t,{emit:e}){const n=t,r=e,{getItems:s}=cs(),i=_i(),o=Cc(),a=_e(!1),l=_e(!0),u=_e(),{forwardRef:c,currentElement:d}=tt(),{viewport:f,selectedItem:h,selectedItemText:m,focusSelectedItem:g}=o;function x(){if(i.triggerElement.value&&i.valueElement.value&&u.value&&d.value&&(f!=null&&f.value)&&(h!=null&&h.value)&&(m!=null&&m.value)){const _=i.triggerElement.value.getBoundingClientRect(),p=d.value.getBoundingClientRect(),v=i.valueElement.value.getBoundingClientRect(),S=m.value.getBoundingClientRect();if(i.dir.value!=="rtl"){const $=S.left-p.left,Z=v.left-$,ae=_.left-Z,re=_.width+ae,Ee=Math.max(re,p.width),L=window.innerWidth-Dr,k=Ny(Z,Dr,Math.max(Dr,L-Ee));u.value.style.minWidth=`${re}px`,u.value.style.left=`${k}px`}else{const $=p.right-S.right,Z=window.innerWidth-v.right-$,ae=window.innerWidth-_.right-Z,re=_.width+ae,Ee=Math.max(re,p.width),L=window.innerWidth-Dr,k=Ny(Z,Dr,Math.max(Dr,L-Ee));u.value.style.minWidth=`${re}px`,u.value.style.right=`${k}px`}const C=s().map($=>$.ref),R=window.innerHeight-Dr*2,T=f.value.scrollHeight,D=window.getComputedStyle(d.value),U=Number.parseInt(D.borderTopWidth,10),z=Number.parseInt(D.paddingTop,10),V=Number.parseInt(D.borderBottomWidth,10),P=Number.parseInt(D.paddingBottom,10),X=U+z+T+P+V,O=Math.min(h.value.offsetHeight*5,X),H=window.getComputedStyle(f.value),q=Number.parseInt(H.paddingTop,10),ie=Number.parseInt(H.paddingBottom,10),B=_.top+_.height/2-Dr,ue=R-B,de=h.value.offsetHeight/2,ye=h.value.offsetTop+de,Se=U+z+ye,G=X-Se;if(Se<=B){const $=h.value===C[C.length-1];u.value.style.bottom="0px";const Z=d.value.clientHeight-f.value.offsetTop-f.value.offsetHeight,ae=Math.max(ue,de+($?ie:0)+Z+V),re=Se+ae;u.value.style.height=`${re}px`}else{const $=h.value===C[0];u.value.style.top="0px";const ae=Math.max(B,U+f.value.offsetTop+($?q:0)+de)+G;u.value.style.height=`${ae}px`,f.value.scrollTop=Se-B+f.value.offsetTop}u.value.style.margin=`${Dr}px 0`,u.value.style.minHeight=`${O}px`,u.value.style.maxHeight=`${R}px`,r("placed"),requestAnimationFrame(()=>a.value=!0)}}const b=_e("");Wt(async()=>{await Ft(),x(),d.value&&(b.value=window.getComputedStyle(d.value).zIndex)});function E(_){_&&l.value===!0&&(x(),g==null||g(),l.value=!1)}return OO(i.triggerElement,()=>{x()}),KP({contentWrapper:u,shouldExpandOnScrollRef:a,onScrollButtonChange:E}),(_,p)=>(F(),be("div",{ref_key:"contentWrapperElement",ref:u,style:jr({display:"flex",flexDirection:"column",position:"fixed",zIndex:b.value})},[oe(A(Et),Ue({ref:A(c),style:{boxSizing:"border-box",maxHeight:"100%"}},{..._.$attrs,...n}),{default:se(()=>[Ae(_.$slots,"default")]),_:3},16)],4))}}),GP=WP,JP=me({inheritAttrs:!1,__name:"SelectProvider",props:{context:{type:Object,required:!0}},setup(t){return Nx(t.context),Fx(BP),(n,r)=>Ae(n.$slots,"default")}}),XP=JP;const YP={key:1};var QP=me({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,s=dl(n,e),i=_i(),o=_e();Wt(()=>{o.value=new DocumentFragment});const a=_e(),l=J(()=>n.forceMount||i.open.value),u=_e(l.value);return et(l,()=>{setTimeout(()=>u.value=l.value)}),(c,d)=>{var f;return l.value||u.value||(f=a.value)!=null&&f.present?(F(),ce(A(fl),{key:0,ref_key:"presenceRef",ref:a,present:l.value},{default:se(()=>[oe(zP,Wn(lr({...A(s),...c.$attrs})),{default:se(()=>[Ae(c.$slots,"default")]),_:3},16)]),_:3},8,["present"])):o.value?(F(),be("div",YP,[(F(),ce(wp,{to:o.value},[oe(XP,{context:A(i)},{default:se(()=>[Ae(c.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):je("v-if",!0)}}}),ZP=QP,e$=me({__name:"SelectIcon",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){return(e,n)=>(F(),ce(A(Et),{"aria-hidden":"true",as:e.as,"as-child":e.asChild},{default:se(()=>[Ae(e.$slots,"default",{},()=>[n[0]||(n[0]=rt(""))])]),_:3},8,["as","as-child"]))}}),t$=e$;const[n$,r$]=Rn("SelectItem");var s$=me({__name:"SelectItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=or(n),i=_i(),o=Cc(),{forwardRef:a,currentElement:l}=tt(),{CollectionItem:u}=cs(),c=J(()=>{var p;return Ka((p=i.modelValue)==null?void 0:p.value,n.value,i.by)}),d=_e(!1),f=_e(n.textValue??""),h=Do(void 0,"reka-select-item-text"),m="select.select";async function g(p){if(p.defaultPrevented)return;const v={originalEvent:p,value:n.value};Kp(m,x,v)}async function x(p){await Ft(),r("select",p),!p.defaultPrevented&&(s.value||(i.onValueChange(n.value),i.multiple.value||i.onOpenChange(!1)))}async function b(p){var v,S;await Ft(),!p.defaultPrevented&&(s.value?(v=o.onItemLeave)==null||v.call(o):(S=p.currentTarget)==null||S.focus({preventScroll:!0}))}async function E(p){var v;await Ft(),!p.defaultPrevented&&p.currentTarget===sn()&&((v=o.onItemLeave)==null||v.call(o))}async function _(p){var S;await Ft(),!(p.defaultPrevented||((S=o.searchRef)==null?void 0:S.value)!==""&&p.key===" ")&&(PP.includes(p.key)&&g(p),p.key===" "&&p.preventDefault())}if(n.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Wt(()=>{l.value&&o.itemRefCallback(l.value,n.value,n.disabled)}),r$({value:n.value,disabled:s,textId:h,isSelected:c,onItemTextChange:p=>{f.value=((f.value||(p==null?void 0:p.textContent))??"").trim()}}),(p,v)=>(F(),ce(A(u),{value:{textValue:f.value}},{default:se(()=>[oe(A(Et),{ref:A(a),role:"option","aria-labelledby":A(h),"data-highlighted":d.value?"":void 0,"aria-selected":c.value,"data-state":c.value?"checked":"unchecked","aria-disabled":A(s)||void 0,"data-disabled":A(s)?"":void 0,tabindex:A(s)?void 0:-1,as:p.as,"as-child":p.asChild,onFocus:v[0]||(v[0]=S=>d.value=!0),onBlur:v[1]||(v[1]=S=>d.value=!1),onPointerup:g,onPointerdown:v[2]||(v[2]=S=>{S.currentTarget.focus({preventScroll:!0})}),onTouchend:v[3]||(v[3]=Mn(()=>{},["prevent","stop"])),onPointermove:b,onPointerleave:E,onKeydown:_},{default:se(()=>[Ae(p.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"])]),_:3},8,["value"]))}}),i$=s$,o$=me({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=t,n=_i(),r=Cc(),s=n$(),{forwardRef:i,currentElement:o}=tt(),a=J(()=>{var l,u;return{value:s.value,disabled:s.disabled.value,textContent:((l=o.value)==null?void 0:l.textContent)??((u=s.value)==null?void 0:u.toString())??""}});return Wt(()=>{o.value&&(s.onItemTextChange(o.value),r.itemTextRefCallback(o.value,s.value,s.disabled.value),n.onOptionAdd(a.value))}),ar(()=>{n.onOptionRemove(a.value)}),(l,u)=>(F(),ce(A(Et),Ue({id:A(s).textId,ref:A(i)},{...e,...l.$attrs}),{default:se(()=>[Ae(l.$slots,"default")]),_:3},16,["id"]))}}),a$=o$,l$=me({__name:"SelectPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(F(),ce(A(rm),Wn(lr(e)),{default:se(()=>[Ae(n.$slots,"default")]),_:3},16))}}),u$=l$,c$=me({__name:"SelectTrigger",props:{disabled:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=_i(),{forwardRef:r,currentElement:s}=tt(),i=J(()=>{var f;return((f=n.disabled)==null?void 0:f.value)||e.disabled});n.contentId||(n.contentId=Do(void 0,"reka-select-content")),Wt(()=>{n.onTriggerChange(s.value)});const{getItems:o}=cs(),{search:a,handleTypeaheadSearch:l,resetTypeahead:u}=Zp();function c(){i.value||(n.onOpenChange(!0),u())}function d(f){c(),n.triggerPointerDownPosRef.value={x:Math.round(f.pageX),y:Math.round(f.pageY)}}return(f,h)=>(F(),ce(A(_x),{"as-child":"",reference:f.reference},{default:se(()=>{var m,g,x,b;return[oe(A(Et),{ref:A(r),role:"combobox",type:f.as==="button"?"button":void 0,"aria-controls":A(n).contentId,"aria-expanded":A(n).open.value||!1,"aria-required":(m=A(n).required)==null?void 0:m.value,"aria-autocomplete":"none",disabled:i.value,dir:(g=A(n))==null?void 0:g.dir.value,"data-state":(x=A(n))!=null&&x.open.value?"open":"closed","data-disabled":i.value?"":void 0,"data-placeholder":A($P)((b=A(n).modelValue)==null?void 0:b.value)?"":void 0,"as-child":f.asChild,as:f.as,onClick:h[0]||(h[0]=E=>{var _;(_=E==null?void 0:E.currentTarget)==null||_.focus()}),onPointerdown:h[1]||(h[1]=E=>{if(E.pointerType==="touch")return E.preventDefault();const _=E.target;_.hasPointerCapture(E.pointerId)&&_.releasePointerCapture(E.pointerId),E.button===0&&E.ctrlKey===!1&&(d(E),E.preventDefault())}),onPointerup:h[2]||(h[2]=Mn(E=>{E.pointerType==="touch"&&d(E)},["prevent"])),onKeydown:h[3]||(h[3]=E=>{const _=A(a)!=="";!(E.ctrlKey||E.altKey||E.metaKey)&&E.key.length===1&&_&&E.key===" "||(A(l)(E.key,A(o)()),A(kP).includes(E.key)&&(c(),E.preventDefault()))})},{default:se(()=>[Ae(f.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]}),_:3},8,["reference"]))}}),d$=c$,f$=me({__name:"SelectValue",props:{placeholder:{type:String,required:!1,default:""},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=t,{forwardRef:n,currentElement:r}=tt(),s=_i();Wt(()=>{s.valueElement=r});const i=J(()=>{var c;let a=[];const l=Array.from(s.optionsSet.value),u=d=>l.find(f=>Ka(d,f.value,s.by));return Array.isArray(s.modelValue.value)?a=s.modelValue.value.map(d=>{var f;return((f=u(d))==null?void 0:f.textContent)??""}):a=[((c=u(s.modelValue.value))==null?void 0:c.textContent)??""],a.filter(Boolean)}),o=J(()=>i.value.length?i.value.join(", "):e.placeholder);return(a,l)=>(F(),ce(A(Et),{ref:A(n),as:a.as,"as-child":a.asChild,style:{pointerEvents:"none"},"data-placeholder":i.value.length?void 0:e.placeholder},{default:se(()=>[Ae(a.$slots,"default",{selectedLabel:i.value,modelValue:A(s).modelValue.value},()=>[rt(Te(o.value),1)])]),_:3},8,["as","as-child","data-placeholder"]))}}),nv=f$,h$=me({__name:"SelectViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{nonce:n}=or(e),r=Xk(n),s=Cc(),i=s.position==="item-aligned"?HP():void 0,{forwardRef:o,currentElement:a}=tt();Wt(()=>{s==null||s.onViewportChange(a.value)});const l=_e(0);function u(c){const d=c.currentTarget,{shouldExpandOnScrollRef:f,contentWrapper:h}=i??{};if(f!=null&&f.value&&(h!=null&&h.value)){const m=Math.abs(l.value-d.scrollTop);if(m>0){const g=window.innerHeight-Dr*2,x=Number.parseFloat(h.value.style.minHeight),b=Number.parseFloat(h.value.style.height),E=Math.max(x,b);if(E<g){const _=E+m,p=Math.min(g,_),v=_-p;h.value.style.height=`${p}px`,h.value.style.bottom==="0px"&&(d.scrollTop=v>0?v:0,h.value.style.justifyContent="flex-end")}}}l.value=d.scrollTop}return(c,d)=>(F(),be(Ze,null,[oe(A(Et),Ue({ref:A(o),"data-reka-select-viewport":"",role:"presentation"},{...c.$attrs,...e},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:u}),{default:se(()=>[Ae(c.$slots,"default")]),_:3},16),oe(A(Et),{as:"style",nonce:A(r)},{default:se(()=>d[0]||(d[0]=[rt(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-reka-select-viewport]::-webkit-scrollbar { display: none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),p$=h$;const[m$,g$]=Rn("SwitchRoot");var y$=me({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=or(n),i=hi(n,"modelValue",r,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function o(){s.value||(i.value=!i.value)}const{forwardRef:a,currentElement:l}=tt(),u=hx(l),c=J(()=>{var d;return n.id&&l.value?(d=document.querySelector(`[for="${n.id}"]`))==null?void 0:d.innerText:void 0});return g$({modelValue:i,toggleCheck:o,disabled:s}),(d,f)=>(F(),ce(A(Et),Ue(d.$attrs,{id:d.id,ref:A(a),role:"switch",type:d.as==="button"?"button":void 0,value:d.value,"aria-label":d.$attrs["aria-label"]||c.value,"aria-checked":A(i),"aria-required":d.required,"data-state":A(i)?"checked":"unchecked","data-disabled":A(s)?"":void 0,"as-child":d.asChild,as:d.as,disabled:A(s),onClick:o,onKeydown:Y_(Mn(o,["prevent"]),["enter"])}),{default:se(()=>[Ae(d.$slots,"default",{modelValue:A(i)}),A(u)&&d.name?(F(),ce(A(UD),{key:0,type:"checkbox",name:d.name,disabled:A(s),required:d.required,value:d.value,checked:!!A(i)},null,8,["name","disabled","required","value","checked"])):je("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),v$=y$,b$=me({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=m$();return tt(),(n,r)=>{var s;return F(),ce(A(Et),{"data-state":(s=A(e).modelValue)!=null&&s.value?"checked":"unchecked","data-disabled":A(e).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:se(()=>[Ae(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),w$=b$,_$=me({__name:"ToastAnnounceExclude",props:{altText:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){return(e,n)=>(F(),ce(A(Et),{as:e.as,"as-child":e.asChild,"data-reka-toast-announce-exclude":"","data-reka-toast-announce-alt":e.altText||void 0},{default:se(()=>[Ae(e.$slots,"default")]),_:3},8,["as","as-child","data-reka-toast-announce-alt"]))}}),x$=_$;const[Rc,E$]=Rn("ToastProvider");var A$=me({inheritAttrs:!1,__name:"ToastProvider",props:{label:{type:String,required:!1,default:"Notification"},duration:{type:Number,required:!1,default:5e3},disableSwipe:{type:Boolean,required:!1},swipeDirection:{type:String,required:!1,default:"right"},swipeThreshold:{type:Number,required:!1,default:50}},setup(t){const e=t,{label:n,duration:r,disableSwipe:s,swipeDirection:i,swipeThreshold:o}=or(e);cs({isProvider:!0});const a=_e(),l=_e(0),u=_e(!1),c=_e(!1);if(e.label&&typeof e.label=="string"&&!e.label.trim()){const d="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(d)}return E$({label:n,duration:r,disableSwipe:s,swipeDirection:i,swipeThreshold:o,toastCount:l,viewport:a,onViewportChange(d){a.value=d},onToastAdd(){l.value++},onToastRemove(){l.value--},isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:c}),(d,f)=>Ae(d.$slots,"default")}}),S$=A$,I$=me({__name:"ToastAnnounce",setup(t){const e=Rc(),n=SO(1e3),r=_e(!1);return cx(()=>{r.value=!0}),(s,i)=>A(n)||r.value?(F(),ce(A(_c),{key:0},{default:se(()=>[rt(Te(A(e).label.value)+" ",1),Ae(s.$slots,"default")]),_:3})):je("v-if",!0)}}),C$=I$;const R$="toast.swipeStart",T$="toast.swipeMove",O$="toast.swipeCancel",D$="toast.swipeEnd",kh="toast.viewportPause",Ph="toast.viewportResume";function $l(t,e,n){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function rv(t,e,n=0){const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n}function k$(t){return t.nodeType===t.ELEMENT_NODE}function jx(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),k$(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.rekaToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.rekaToastAnnounceAlt;o&&e.push(o)}else e.push(...jx(r))}}),e}const[P$,$$]=Rn("ToastRoot");var L$=me({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{type:String,required:!1},open:{type:Boolean,required:!1,default:!1},duration:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=tt(),{CollectionItem:o}=cs(),a=Rc(),l=_e(null),u=_e(null),c=J(()=>typeof n.duration=="number"?n.duration:a.duration.value),d=_e(0),f=_e(c.value),h=_e(0),m=_e(c.value),g=cx(()=>{const _=new Date().getTime()-d.value;m.value=Math.max(f.value-_,0)},{fpsLimit:60});function x(_){_<=0||_===Number.POSITIVE_INFINITY||us&&(window.clearTimeout(h.value),d.value=new Date().getTime(),h.value=window.setTimeout(b,_))}function b(_){var S,C;const p=(_==null?void 0:_.pointerType)==="";((S=i.value)==null?void 0:S.contains(sn()))&&p&&((C=a.viewport.value)==null||C.focus()),p&&(a.isClosePausedRef.value=!1),r("close")}const E=J(()=>i.value?jx(i.value):null);if(n.type&&!["foreground","background"].includes(n.type)){const _="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(_)}return qt(_=>{const p=a.viewport.value;if(p){const v=()=>{x(f.value),g.resume(),r("resume")},S=()=>{const C=new Date().getTime()-d.value;f.value=f.value-C,window.clearTimeout(h.value),g.pause(),r("pause")};return p.addEventListener(kh,S),p.addEventListener(Ph,v),()=>{p.removeEventListener(kh,S),p.removeEventListener(Ph,v)}}}),et(()=>[n.open,c.value],()=>{f.value=c.value,n.open&&!a.isClosePausedRef.value&&x(c.value)},{immediate:!0}),Jp("Escape",_=>{r("escapeKeyDown",_),_.defaultPrevented||(a.isFocusedToastEscapeKeyDownRef.value=!0,b())}),Wt(()=>{a.onToastAdd()}),ar(()=>{a.onToastRemove()}),$$({onClose:b}),(_,p)=>(F(),be(Ze,null,[E.value?(F(),ce(C$,{key:0,role:"alert","aria-live":_.type==="foreground"?"assertive":"polite","aria-atomic":"true"},{default:se(()=>[rt(Te(E.value),1)]),_:1},8,["aria-live"])):je("v-if",!0),A(a).viewport.value?(F(),ce(wp,{key:1,to:A(a).viewport.value},[oe(A(o),null,{default:se(()=>[oe(A(Et),Ue({ref:A(s),role:"alert","aria-live":"off","aria-atomic":"true",tabindex:"0"},_.$attrs,{as:_.as,"as-child":_.asChild,"data-state":_.open?"open":"closed","data-swipe-direction":A(a).swipeDirection.value,style:A(a).disableSwipe.value?void 0:{userSelect:"none",touchAction:"none"},onPointerdown:p[0]||(p[0]=Mn(v=>{A(a).disableSwipe.value||(l.value={x:v.clientX,y:v.clientY})},["left"])),onPointermove:p[1]||(p[1]=v=>{if(A(a).disableSwipe.value||!l.value)return;const S=v.clientX-l.value.x,C=v.clientY-l.value.y,R=!!u.value,T=["left","right"].includes(A(a).swipeDirection.value),D=["left","up"].includes(A(a).swipeDirection.value)?Math.min:Math.max,U=T?D(0,S):0,z=T?0:D(0,C),V=v.pointerType==="touch"?10:2,P={x:U,y:z},X={originalEvent:v,delta:P};R?(u.value=P,A($l)(A(T$),O=>r("swipeMove",O),X)):A(rv)(P,A(a).swipeDirection.value,V)?(u.value=P,A($l)(A(R$),O=>r("swipeStart",O),X),v.target.setPointerCapture(v.pointerId)):(Math.abs(S)>V||Math.abs(C)>V)&&(l.value=null)}),onPointerup:p[2]||(p[2]=v=>{if(A(a).disableSwipe.value)return;const S=u.value,C=v.target;if(C.hasPointerCapture(v.pointerId)&&C.releasePointerCapture(v.pointerId),u.value=null,l.value=null,S){const R=v.currentTarget,T={originalEvent:v,delta:S};A(rv)(S,A(a).swipeDirection.value,A(a).swipeThreshold.value)?A($l)(A(D$),D=>r("swipeEnd",D),T):A($l)(A(O$),D=>r("swipeCancel",D),T),R==null||R.addEventListener("click",D=>D.preventDefault(),{once:!0})}})}),{default:se(()=>[Ae(_.$slots,"default",{remaining:m.value,duration:c.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction","style"])]),_:3})],8,["to"])):je("v-if",!0)],64))}}),M$=L$,N$=me({__name:"ToastClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=P$(),{forwardRef:r}=tt();return(s,i)=>(F(),ce(x$,{"as-child":""},{default:se(()=>[oe(A(Et),Ue(e,{ref:A(r),type:s.as==="button"?"button":void 0,onClick:A(n).onClose}),{default:se(()=>[Ae(s.$slots,"default")]),_:3},16,["type","onClick"])]),_:3}))}}),F$=N$,j$=me({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!0},forceMount:{type:Boolean,required:!1},type:{type:String,required:!1,default:"foreground"},open:{type:Boolean,required:!1,default:void 0},duration:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s}=tt(),i=hi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0});return(o,a)=>(F(),ce(A(fl),{present:o.forceMount||A(i)},{default:se(()=>[oe(M$,Ue({ref:A(s),open:A(i),type:o.type,as:o.as,"as-child":o.asChild,duration:o.duration},o.$attrs,{onClose:a[0]||(a[0]=l=>i.value=!1),onPause:a[1]||(a[1]=l=>r("pause")),onResume:a[2]||(a[2]=l=>r("resume")),onEscapeKeyDown:a[3]||(a[3]=l=>r("escapeKeyDown",l)),onSwipeStart:a[4]||(a[4]=l=>{r("swipeStart",l),l.defaultPrevented||l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:a[5]||(a[5]=l=>{if(r("swipeMove",l),!l.defaultPrevented){const{x:u,y:c}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","move"),d.style.setProperty("--reka-toast-swipe-move-x",`${u}px`),d.style.setProperty("--reka-toast-swipe-move-y",`${c}px`)}}),onSwipeCancel:a[6]||(a[6]=l=>{if(r("swipeCancel",l),!l.defaultPrevented){const u=l.currentTarget;u.setAttribute("data-swipe","cancel"),u.style.removeProperty("--reka-toast-swipe-move-x"),u.style.removeProperty("--reka-toast-swipe-move-y"),u.style.removeProperty("--reka-toast-swipe-end-x"),u.style.removeProperty("--reka-toast-swipe-end-y")}}),onSwipeEnd:a[7]||(a[7]=l=>{if(r("swipeEnd",l),!l.defaultPrevented){const{x:u,y:c}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","end"),d.style.removeProperty("--reka-toast-swipe-move-x"),d.style.removeProperty("--reka-toast-swipe-move-y"),d.style.setProperty("--reka-toast-swipe-end-x",`${u}px`),d.style.setProperty("--reka-toast-swipe-end-y",`${c}px`),i.value=!1}})}),{default:se(({remaining:l,duration:u})=>[Ae(o.$slots,"default",{remaining:l,duration:u,open:A(i)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),U$=j$,q$=me({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(t,{emit:e}){const n=e,r=Rc();return(s,i)=>(F(),ce(A(_c),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:i[0]||(i[0]=o=>{var u;const a=o.relatedTarget;!((u=A(r).viewport.value)!=null&&u.contains(a))&&n("focusFromOutsideViewport")})},{default:se(()=>[Ae(s.$slots,"default")]),_:3}))}}),sv=q$,B$=me({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{type:Array,required:!1,default:()=>["F8"]},label:{type:[String,Function],required:!1,default:"Notifications ({hotkey})"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"ol"}},setup(t){const e=t,{hotkey:n,label:r}=or(e),{forwardRef:s,currentElement:i}=tt(),{CollectionSlot:o,getItems:a}=cs(),l=Rc(),u=J(()=>l.toastCount.value>0),c=_e(),d=_e(),f=J(()=>n.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));Jp(n.value,()=>{i.value.focus()}),Wt(()=>{l.onViewportChange(i.value)}),qt(m=>{const g=i.value;if(u.value&&g){const x=()=>{if(!l.isClosePausedRef.value){const v=new CustomEvent(kh);g.dispatchEvent(v),l.isClosePausedRef.value=!0}},b=()=>{if(l.isClosePausedRef.value){const v=new CustomEvent(Ph);g.dispatchEvent(v),l.isClosePausedRef.value=!1}},E=v=>{!g.contains(v.relatedTarget)&&b()},_=()=>{g.contains(sn())||b()},p=v=>{var R,T,D;const S=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!S){const U=sn(),z=v.shiftKey;if(v.target===g&&z){(R=c.value)==null||R.focus();return}const X=h({tabbingDirection:z?"backwards":"forwards"}),O=X.findIndex(H=>H===U);su(X.slice(O+1))?v.preventDefault():z?(T=c.value)==null||T.focus():(D=d.value)==null||D.focus()}};g.addEventListener("focusin",x),g.addEventListener("focusout",E),g.addEventListener("pointermove",x),g.addEventListener("pointerleave",_),g.addEventListener("keydown",p),window.addEventListener("blur",x),window.addEventListener("focus",b),m(()=>{g.removeEventListener("focusin",x),g.removeEventListener("focusout",E),g.removeEventListener("pointermove",x),g.removeEventListener("pointerleave",_),g.removeEventListener("keydown",p),window.removeEventListener("blur",x),window.removeEventListener("focus",b)})}});function h({tabbingDirection:m}){const x=a().map(b=>b.ref).map(b=>{const E=[b,...tm(b)];return m==="forwards"?E:E.reverse()});return(m==="forwards"?x.reverse():x).flat()}return(m,g)=>(F(),ce(A(eD),{role:"region","aria-label":typeof A(r)=="string"?A(r).replace("{hotkey}",f.value):A(r)(f.value),tabindex:"-1",style:jr({pointerEvents:u.value?void 0:"none"})},{default:se(()=>[u.value?(F(),ce(sv,{key:0,ref:x=>{c.value=A(Ir)(x)},onFocusFromOutsideViewport:g[0]||(g[0]=()=>{const x=h({tabbingDirection:"forwards"});A(su)(x)})},null,512)):je("v-if",!0),oe(A(o),null,{default:se(()=>[oe(A(Et),Ue({ref:A(s),tabindex:"-1",as:m.as,"as-child":m.asChild},m.$attrs),{default:se(()=>[Ae(m.$slots,"default")]),_:3},16,["as","as-child"])]),_:3}),u.value?(F(),ce(sv,{key:1,ref:x=>{d.value=A(Ir)(x)},onFocusFromOutsideViewport:g[1]||(g[1]=()=>{const x=h({tabbingDirection:"backwards"});A(su)(x)})},null,512)):je("v-if",!0)]),_:3},8,["aria-label","style"]))}}),V$=B$,z$=Object.defineProperty,H$=(t,e,n)=>e in t?z$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pt=(t,e,n)=>H$(t,typeof e!="symbol"?e+"":e,n);let $h=class extends cr{constructor(e,n){super(`Service '${e}' failed booting`,{cause:n})}};function fm(){return Pr.namespace??Pp(Pr.name)}let hm=null;function Ux(){return hm??K$()}function K$(){return Ne(oR(),t=>{hm=t,al(t)})}function W$(){return hm??Ux()}function G$(t,e){return Ux(),fR(t,e)()}function Wi(t){var e;return e=class extends Tc{usesStore(){return!0}getName(){return t.name??null}getInitialState(){return typeof t.initialState=="function"?t.initialState():Object.entries(t.initialState).reduce((n,[r,s])=>{try{s=structuredClone(s)}catch{console.warn(`Could not clone '${r}' state from ${this.getName()} service, this may cause problems if you're using multiple instances of the service (for example, in unit tests).
To fix this problem, declare your initialState as a function instead.`)}return n[r]=s,n},{})}getComputedStateDefinition(){return t.computed??{}}getStateWatchers(){return t.watch??{}}serializePersistedState(n){var r;return((r=t.serialize)==null?void 0:r.call(t,n))??n}deserializePersistedState(n){var r;return((r=t.restore)==null?void 0:r.call(t,n))??n}},pt(e,"persist",t.persist??[]),e}var Rd;let Tc=(Rd=class extends Su{constructor(){super(),pt(this,"_name"),pt(this,"_booted"),pt(this,"_computedStateKeys"),pt(this,"_watchers"),pt(this,"_store");const t=this.getComputedStateDefinition();this._name=this.getName()??new.target.name,this._booted=new Nr,this._computedStateKeys=new Set(Object.keys(t)),this._watchers=this.getStateWatchers(),this._store=this.usesStore()&&G$(this._name,{state:()=>this.getInitialState(),getters:t})}get booted(){return this._booted}static(t){return super.static(t)}launch(){const t=e=>this._booted.reject(new $h(this._name,e));try{this.frameworkBoot().then(()=>this.boot()).then(()=>this._booted.resolve()).catch(t)}catch(e){t(e)}return this._booted}hasPersistedState(){return mr.has(this.storageKey)}hasState(t){return this._store?t in this._store.$state||this._computedStateKeys.has(t):!1}getState(t){const e=this._store;return t?e?e[t]:void 0:e||{}}setState(t,e){if(!this._store)return;const n=typeof t=="string"?{[t]:e}:t,r=Zs(this._store.$state,Object.keys(n));Object.assign(this._store.$state,n),this.onStateUpdated(n,r)}updatePersistedState(t){if(!this._store)return;const e=mn(t),n=Zs(this._store.$state,e);Ca(n)||this.onPersistentStateUpdated(n)}__get(t){return this.hasState(t)?this.getState(t):super.__get(t)}__set(t,e){this.setState({[t]:e})}get storageKey(){return`${fm()}:${this._name}`}onStateUpdated(t,e){const n=Zs(t,this.static("persist"));Ca(n)||this.onPersistentStateUpdated(n);for(const r in t){const s=this._watchers[r];!s||t[r]===e[r]||s.call(this,t[r],e[r])}}onPersistentStateUpdated(t){const e=mr.get(this.storageKey);e&&mr.set(this.storageKey,{...e,...this.serializePersistedState(kr(t))})}usesStore(){return!1}getName(){return null}getInitialState(){return{}}getComputedStateDefinition(){return{}}getStateWatchers(){return{}}serializePersistedState(t){return t}deserializePersistedState(t){return t}async frameworkBoot(){this.restorePersistedState()}async boot(){}restorePersistedState(){if(!(!this.usesStore()||Ca(this.static("persist")))){if(mr.has(this.storageKey)){const t=mr.require(this.storageKey);this.setState(this.deserializePersistedState(t));return}mr.set(this.storageKey,Zs(this.getState(),this.static("persist")))}}requireStore(){return this._store?this._store:Ge(`Failed getting '${this._name}' store`)}},pt(Rd,"persist",[]),Rd),J$=class extends Tc{constructor(){super(...arguments),pt(this,"listeners",{})}async boot(){Object.entries(globalThis.__aerogelEvents__??{}).forEach(([e,n])=>this.on(e,n))}async emit(e,n){var r;const s=this.listeners[e]??{priorities:[],handlers:{}};for(const i of s.priorities)await Promise.all(((r=s.handlers[i])==null?void 0:r.map(o=>o(n)))??[])}on(e,n,r){const s=typeof n=="function"?{}:typeof n=="number"?{priority:n}:n,i=typeof n=="function"?n:r;return this.registerListener(e,s,i),()=>this.off(e,i)}once(e,n,r){let s=null;const i=typeof n=="function"?{}:n,o=typeof n=="function"?n:r;return Ne(()=>s&&this.off(e,s),a=>{s=(...l)=>(a(),o(...l)),this.registerListener(e,i,o)})}off(e,n){var r;const s=this.listeners[e];if(!s)return;const i=[...s.priorities];for(const o of i)zn(s.handlers[o]??[],n),((r=s.handlers[o])==null?void 0:r.length)===0&&(delete s.handlers[o],zn(s.priorities,o));s.priorities.length===0&&delete this.listeners[e]}registerListener(e,n,r){var s,i,o;const a=n.priority??0;e in this.listeners||(this.listeners[e]={priorities:[],handlers:{}});const l=((s=this.listeners[e])==null?void 0:s.priorities)??Ge(`priorities missing for event '${e}'`),u=((i=this.listeners[e])==null?void 0:i.handlers)??Ge(`handlers missing for event '${e}'`);l.includes(a)||(l.push(a),l.sort((c,d)=>d-c),u[a]=[]),(o=u[a])==null||o.push(r)}};const We=Kr(J$);const X$=Wi({name:"app",initialState:{plugins:{},instance:null,environment:hc()??"development",version:Pr.version,sourceUrl:Pr.sourceUrl,settings:[],settingsFullscreenOnMobile:!1},computed:{development:t=>t.environment==="development",staging:t=>t.environment==="staging",testing:t=>t.environment==="test"||t.environment==="testing",versionName(t){return this.development?"dev."+Pr.sourceHash.toString().substring(0,7):this.staging?"staging."+Pr.sourceHash.toString().substring(0,7):`v${t.version}`},versionUrl(t){return t.sourceUrl+(this.development||this.staging?`/tree/${Pr.sourceHash}`:`/releases/tag/${this.versionName}`)}}});class Y$ extends X${constructor(){super(...arguments),pt(this,"name",Pr.name),pt(this,"ready",new Nr),pt(this,"mounted",new Nr)}isReady(){return this.ready.isResolved()}isMounted(){return this.mounted.isResolved()}addSetting(e){this.settings.push(st(e))}setSettingsFullscreenOnMobile(e){this.settingsFullscreenOnMobile=e}async whenReady(e){return await this.ready.then(e)}async reload(e){e&&BC(e),location.reload(),await jC()}plugin(e){return this.plugins[e]??null}service(e){var n;return((n=this.instance)==null?void 0:n.config.globalProperties[e])??null}async boot(){We.once("application-ready",()=>this.ready.resolve()),We.once("application-mounted",()=>this.mounted.resolve())}}const lt=Kr(Y$);async function Q$(t,...e){lt.setState("plugins",t.reduce((n,r)=>(r.name&&(n[r.name]=r),n),{})),await Promise.all(t.map(n=>n.install(...e))??[])}function Z$(t){return Object.entries(t.props??{}).reduce((e,[n,r])=>e+`${n}="${$t(r)}"`,"")}function eL(t){const e=jt(t);return e?Gn(e):void 0}function Jn(t,e){return eL(t)??Ge(e??`Could not resolve '${$t(t)}' injection key`)}function tL(t,e){return jt(t)??Ge(`Could not resolve '${$t(t)}' injection key`)}function qx(t){return typeof t=="string"?t:t.type===qr?"":t.type===Uo||t.type===Aa?t.children:t.type==="br"?`

`:`<${t.type} ${Z$(t)}>${Array.from(t.children).map(qx).join("")}</${t.type}>`}const Td=new WeakMap,nL={mounted(t,{value:e,modifiers:n}){const r=typeof e=="function"?e:null,s=()=>{const i=t.getBoundingClientRect();n.css&&(t.style.setProperty("--width",`${i.width}px`),t.style.setProperty("--height",`${i.height}px`)),r==null||r({width:i.width,height:i.height})};n.watch&&Td.set(t,Ne(new ResizeObserver(s)).observe(t)),s()},unmounted(t){var e;(e=Td.get(t))==null||e.unobserve(t),Td.delete(t)}};function Bx(t,e){const{baseClasses:n,...r}=t,{baseClasses:s,...i}=e,o=_T(s,i);return wt(o(r),A(n))}function wt(...t){return uO(G0(t))}function rL(t,e){const n=We.on(t,e);ar(()=>n())}const sL={required:t=>t?void 0:"required"};function iL(t,e){var n;if(t==null)return!0;switch(e.type){case"string":return typeof t=="string";case"enum":return!!((n=e.values)!=null&&n.includes(t));case"number":return typeof t=="number";case"boolean":return typeof t=="boolean";case"date":return t instanceof Date;case"object":return typeof t=="object"}}const Lh={...sL};function Vx(t,e){Lh[t]=e}function oL(t,e){return iL(t,e)?[]:["invalid_value"]}function aL(t,e){var n;const r=(n=Lh[e])==null?void 0:n.call(Lh,t);return r?mn(r):[]}const iv=new WeakMap;let lL=class extends Su{constructor(e){super(),pt(this,"errors"),pt(this,"_fields"),pt(this,"_data"),pt(this,"_submitted"),pt(this,"_errors"),pt(this,"_listeners",{}),this._fields=e,this._submitted=_e(!1),this._data=this.getInitialData(e),this._errors=this.getInitialErrors(e),iv.set(this,J(()=>!Object.values(this._errors).some(n=>n!==null))),this.errors=is(this._errors)}get valid(){var e;return!!((e=iv.get(this))!=null&&e.value)}get submitted(){return this._submitted.value}setFieldValue(e,n){this._data[e]=n,this._submitted.value&&this.validate()}getFieldValue(e){return this._data[e]}getFieldRules(e){var n;return((n=this._fields[e])==null?void 0:n.rules)??[]}setFieldErrors(e,n){this._errors[e]=n}getFieldType(e){var n;return((n=this._fields[e])==null?void 0:n.type)??null}data(){return{...this._data}}validate(){const e=Object.entries(this._fields).reduce((n,[r,s])=>(n[r]=this.getFieldErrors(r,s),n),{});return this.resetErrors(e),this.valid}reset(e={}){this._submitted.value=!1,e.keepData||this.resetData(),e.keepErrors||this.resetErrors()}submit(){var e;this._submitted.value=!0;for(const[r,s]of Object.entries(this._data)){const i=this._fields[r]??Ge();typeof s!="string"||!(i.trim??!0)||(this._data[r]=s.trim())}const n=this.validate();return n&&((e=this._listeners.submit)==null||e.forEach(r=>r())),n}on(e,n){var r,s;return(r=this._listeners)[e]??(r[e]=[]),(s=this._listeners[e])==null||s.push(n),()=>this.off(e,n)}off(e,n){zn(this._listeners[e]??[],n)}async focus(e){var n;await Ft(),(n=this._listeners.focus)==null||n.forEach(r=>r(e))}__get(e){return e in this._fields?this.getFieldValue(e):super.__get(e)}__set(e,n){if(!(e in this._fields)){super.__set(e,n);return}this.setFieldValue(e,n)}getFieldErrors(e,n){const r=[],s=this._data[e],i=n.rules??[];r.push(...oL(s,n));for(const o of i)o!=="required"&&s==null||r.push(...aL(s,o));return r.length>0?r:null}getInitialData(e){if(this.static().isConjuring())return{};const n=Object.entries(e).reduce((r,[s,i])=>(r[s]=i.default??null,r),{});return Gn(n)}getInitialErrors(e){if(this.static().isConjuring())return{};const n=Object.keys(e).reduce((r,s)=>(r[s]=null,r),{});return Gn(n)}resetData(){for(const[e,n]of Object.entries(this._fields))this._data[e]=n.default??null}resetErrors(e){Object.keys(this._errors).forEach(n=>delete this._errors[n]),e&&Object.assign(this._errors,e)}};function uL(t,e){const n=jt("form",null),r=n==null?void 0:n.on("focus",s=>t.name===s&&e());ar(()=>r==null?void 0:r())}function pm(t){return new lL(t)}function zx(){const t=S_(),e=J(()=>t.class);return[J(()=>di(t,"class")),e]}function cL(t,e){const n=Gn(mr.get(t)??e);return et(n,()=>mr.set(t,Ye(n))),n}function Hx(t,e={}){let n=new Set(t),r,s;const i=e==null?void 0:e.equals,o=i?l=>a.value.values().some(u=>i(l,u)):()=>!1,a=ic((l,u)=>(s=l,r=u,{get:()=>n,set:()=>Ge("Attempted to write read-only reactive set")}));return{values(){return s(),Array.from(a.value.values())},has(l){return s(),a.value.has(l)||o(l)},add(l){r(),!o(l)&&a.value.add(l)},delete(l){r(),a.value.delete(l)},clear(){r(),a.value.clear()},reset(l){r(),n=new Set(l)}}}function Kx(t){const e=_e(),n=J(t);return et(n,async()=>e.value=await n.value,{immediate:!0}),e}let $u=null;function dL(){return Ne(new Oo,t=>{t.link=function(e){const n=Oo.prototype.link.apply(this,[e]);return e.href.startsWith("#")?n:n.replace("<a",'<a target="_blank"')}})}function fL(t){const e=y0(t,/<a[^>]*href="#action:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e)t=t.replace(n,`<button type="button" data-markdown-action="${r}">${s}</button>`);return t}function hL(t){const e=y0(t,/<a[^>]*href="#route:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e){const i=($u==null?void 0:$u.resolve(r))??r;t=t.replace(n,`<a data-markdown-route="${r}" href="${i}">${s}</a>`)}return t}function pL(){return $u}function mL(t){$u=t}function gL(t){let e=yt(t,{renderer:dL(),async:!1});return e=Wx(e),e=fL(e),e=hL(e),e}function Wx(t){return $R.sanitize(t,{ADD_ATTR:["target"]})}function ov(t){return-(t??new Date).getTimezoneOffset()*-6e4}const yL={mounted(t,{value:e}){t.innerHTML=Wx(e)}},vL={measure:nL,"safe-html":yL},bL={install(t,e){const n={...vL,...e.directives};for(const[r,s]of Object.entries(n))t.directive(r,s)}};let wL=class extends Tc{constructor(){super(...arguments),pt(this,"cache")}async get(e){return await(await this.open()).match(e)??null}async store(e,n){await(await this.open()).put(e,n)}async replace(e,n){const r=await this.open();(await r.keys(e)).length!==0&&await r.put(e,n)}async open(){return this.cache=this.cache??Ne(new Nr,e=>{caches.open("app").then(n=>e.resolve(n))})}};const Od=Kr(wL);class _L extends Tc{async purge(){await We.emit("purge-storage")}}const Oc=Kr(_L);function av(t,e){return{...t,...Zs(e,Object.keys(t))}}const xL={$app:lt,$events:We,$storage:Oc};async function Gi(t,e){await Promise.all(Object.entries(e).map(async([n,r])=>{await r.launch().catch(s=>{var i,o;return(o=(i=t.config).errorHandler)==null?void 0:o.call(i,s,null,`Failed launching ${n}.`)})})),Object.assign(t.config.globalProperties,e),(fi()||Va())&&Object.assign(globalThis,e)}const EL={async install(t,e){var n;const r={...xL,...e.services};t.use(W$()),(n=e.settings)==null||n.forEach(s=>lt.addSetting(s)),e.settingsFullscreenOnMobile!==void 0&&lt.setSettingsFullscreenOnMobile(e.settingsFullscreenOnMobile),await Gi(t,r)}};class AL{constructor(e,n){this.locale=e,this.fallbackLocale=n}getLocale(){return this.locale}async setLocale(e){this.locale=e}getFallbackLocale(){return this.fallbackLocale}async setFallbackLocale(e){this.fallbackLocale=e}getLocales(){return["en"]}translate(e){return fi()&&console.warn("Lang provider is missing"),e}translateWithDefault(e,n){return fi()&&console.warn("Lang provider is missing"),n}}const SL=Wi({name:"lang",persist:["locale","fallbackLocale"],initialState:{locale:null,locales:["en"],fallbackLocale:"en"}});let IL=class extends SL{constructor(){super(),pt(this,"provider"),this.provider=new AL(this.getState("locale")??this.getBrowserLocale(),this.getState("fallbackLocale"))}async setProvider(e){this.provider=e,this.locales=e.getLocales(),await e.setLocale(this.locale??this.getBrowserLocale()),await e.setFallbackLocale(this.fallbackLocale)}translate(e,n){return this.provider.translate(e,n)??e}translateWithDefault(e,n,r={}){return this.provider.translateWithDefault(e,n,r)}getBrowserLocale(){const e=this.getState("locales");return navigator.languages.find(n=>e.includes(n))??"en"}async boot(){globalThis.document&&this.requireStore().$subscribe(async()=>{var e,n;await this.provider.setLocale(this.locale??this.getBrowserLocale()),await this.provider.setFallbackLocale(this.fallbackLocale),this.locale?(e=document.querySelector("html"))==null||e.setAttribute("lang",this.locale):(n=document.querySelector("html"))==null||n.removeAttribute("lang")},{immediate:!0})}};const gi=Kr(IL),Gx=gi.translate.bind(gi),Le=gi.translateWithDefault.bind(gi),Jx=[];function CL(t){Jx.push(t)}function Xx(t){for(const e of Jx){const n=e(t);if(n)return n}return typeof t=="string"?t:t instanceof Error||t instanceof cr?t.message:ht(t)?$t(t.message??t.description??"Unknown error object"):Le("errors.unknown","Unknown Error")}const lv=new WeakSet;function Dc(){const t=zp(),{close:e,remove:n,...r}=vT(lv.has(t)?{}:{removeOnClose:!1});return lv.add(t),{...r,async close(s){e(s),await Hn(1e3),n()}}}const Yx=768,Lu={Mobile:"mobile",Desktop:"desktop"};function Qx(){return globalThis.innerWidth>Yx?Lu.Desktop:Lu.Mobile}const RL=Wi({name:"ui",initialState:{toasts:[],layout:Qx()},computed:{desktop:({layout:t})=>t===Lu.Desktop,mobile:({layout:t})=>t===Lu.Mobile}});let TL=class extends RL{constructor(){super(...arguments),pt(this,"components",{})}registerComponent(e,n){this.components[e]=n}resolveComponent(e){return this.components[e]??null}requireComponent(e){return this.resolveComponent(e)??Ge(`UI Component '${e}' is not defined!`)}alert(e,n){const r=()=>typeof n!="string"?{message:e}:{title:e,message:n};this.modal(this.requireComponent("alert-modal"),r())}async confirm(e,n,r){const s=typeof n!="string"?{...n??{},message:e,required:!!(n!=null&&n.required)}:{...r??{},title:e,message:n,required:!!(r!=null&&r.required)},{response:i}=await this.modal(this.requireComponent("confirm-modal"),s),o=typeof i=="object"?i[0]:i??!1,a=typeof i=="object"?i[1]:Object.entries(s.checkboxes??{}).reduce((l,[u,{default:c}])=>({[u]:c??!1,...l}),{});for(const[l,u]of Object.entries(s.checkboxes??{}))if(!(!u.required||a[l]))return o&&fi()&&console.warn(`Confirmed confirm modal was suppressed because required '${l}' checkbox was missing`),[!1,a];return"checkboxes"in s?[o,a]:o}async prompt(e,n,r){const s=(r==null?void 0:r.trim)??!0,i=()=>typeof n!="string"?{message:e,...n??{}}:{title:e,message:n,...r??{}},{response:o}=await this.modal(this.requireComponent("prompt-modal"),i());return(s&&typeof o=="string"?o==null?void 0:o.trim():o)??null}async loading(e,n){const r=c=>typeof c=="function"?Promise.resolve(c()):c,s=()=>{if(typeof e=="string")return{props:{message:e},operationPromise:r(n)};if(typeof e=="function"||e instanceof Promise)return{operationPromise:r(e)};const{delay:c,...d}=e;return{props:d,delay:A(c),operationPromise:r(n)}};let i=!1;const{operationPromise:o,props:a,delay:l}=s();if(l&&await Promise.race([Hn({ms:l}).then(()=>i=!0),o]),l&&!i)return o;const u=K0(this.requireComponent("loading-modal"),a);Cy(u);try{const c=await o;return await Hn({ms:500}),c}finally{await Ry(u.id,{removeAfter:1e3})}}toast(e,n={}){const{component:r,...s}=n,i={id:jn(),properties:{message:e,...s},component:st(r??this.requireComponent("toast"))};this.setState("toasts",this.toasts.concat(i))}modal(e,n){return Cy(e,n??{})}async closeAllModals(){await Promise.all(Vt.value.map(({id:e})=>Ry(e,{removeAfter:1e3})))}async boot(){this.watchMountedEvent(),this.watchViewportBreakpoints()}watchMountedEvent(){We.once("application-mounted",async()=>{if(!globalThis.document||!globalThis.getComputedStyle)return;const e=globalThis.document.getElementById("splash");e&&(globalThis.getComputedStyle(e).opacity!=="0"&&(e.style.opacity="0",await Hn({ms:600})),e.remove())})}watchViewportBreakpoints(){globalThis.matchMedia&&globalThis.matchMedia(`(min-width: ${Yx}px)`).addEventListener("change",()=>this.setState({layout:Qx()}))}};const Ht=Kr(TL),OL=Wi({name:"errors",initialState:{logs:[],startupErrors:[],debug:!1},computed:{hasErrors:({logs:t})=>t.length>0,hasNewErrors:({logs:t})=>t.some(e=>!e.seen),hasStartupErrors:({startupErrors:t})=>t.length>0}});class DL extends OL{constructor(){super(...arguments),pt(this,"forceReporting",!1),pt(this,"enabled",!0),pt(this,"eruda",null),pt(this,"erudaPlugins",null)}enable(){this.enabled=!0}disable(){this.enabled=!1}async inspect(e,n){if(Array.isArray(e)&&e.length===0){Ht.alert(Le("errors.inspectEmpty","Nothing to inspect!"));return}const r=Array.isArray(e)?e[0]:this.isErrorReport(e)?e:await this.createErrorReport(e),s=Array.isArray(e)?e:n??[r];Ht.modal(Ht.requireComponent("error-report-modal"),{report:r,reports:s})}async report(e,n){if(await We.emit("error",{error:e,message:n}),Va("unit")||(fi()&&this.logError(e),!this.enabled))throw e;if(!lt.isMounted()){const i=await this.createStartupErrorReport(e);i&&this.setState({startupErrors:this.startupErrors.concat(i)});return}const r=await this.createErrorReport(e),s={report:r,seen:!1,date:new Date};Ht.toast(n??Le("errors.notice","Something went wrong, but it's not your fault. Try again!"),{variant:"danger",actions:[{label:Le("errors.viewDetails","View details"),dismiss:!0,click:()=>Ht.modal(Ht.requireComponent("error-report-modal"),{report:r,reports:[r]})}]}),this.setState({logs:[s].concat(this.logs)})}reportDevelopmentError(e,n){fi()&&(n&&console.warn(n),this.logError(e))}see(e){this.setState({logs:this.logs.map(n=>n.report!==e?n:{...n,seen:!0})})}async boot(){qt(async()=>{var e;if(!this.debug){(e=this.eruda)==null||e.destroy();return}this.eruda??(this.eruda=(await Mi(async()=>{const{default:n}=await import("./eruda-YMI1zNGq.js").then(r=>r.e);return{default:n}},[])).default),this.erudaPlugins??(this.erudaPlugins=[(await Mi(async()=>{const{default:n}=await import("./eruda-indexeddb-BKNTatP3.js");return{default:n}},__vite__mapDeps([0,1]))).default]),this.eruda.init(),this.erudaPlugins.forEach(n=>{var r;return(r=this.eruda)==null?void 0:r.add(n)})})}logError(e){console.error(e),ht(e)&&e.cause&&this.logError(e.cause)}isErrorReport(e){return ht(e)&&"title"in e}async createErrorReport(e){return typeof e=="string"?{title:e}:e instanceof Error||e instanceof cr?this.createErrorReportFromError(e):ht(e)?Fn({title:$t(e.name??e.title??Le("errors.unknown","Unknown Error")),description:$t(e.message??e.description??Le("errors.unknownDescription","Unknown error object")),error:e}):{title:Le("errors.unknown","Unknown Error"),error:e}}async createStartupErrorReport(e){return e instanceof $h?e.cause instanceof $h?null:this.createErrorReport(e.cause):this.createErrorReport(e)}createErrorReportFromError(e,n={}){return{title:e.name,description:e.message,details:e.stack,error:e,...n}}}const yi=Kr(DL),Zx=me({__name:"HeadlessButton",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=J(()=>t.as?{as:t.as}:t.route?{as:Ht.resolveComponent("router-link")??"a",to:Fn({name:t.route,params:t.routeParams,query:t.routeQuery})}:t.href?{as:"a",target:"_blank",href:t.href}:{as:"button",type:t.submit?"submit":"button"});return(n,r)=>(F(),ce(A(Et),Ue({class:t.class,"as-child":n.asChild,disabled:n.disabled},e.value),{default:se(()=>[Ae(n.$slots,"default")]),_:3},16,["class","as-child","disabled"]))}}),Ct=me({__name:"Button",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=bi(t,["class","size","variant","disabled"]),n=J(()=>Bx({baseClasses:t.class,variant:t.variant,size:t.size,disabled:t.disabled},{baseClasses:"focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",variants:{variant:{default:"bg-primary-600 text-white focus-visible:outline-primary-600",secondary:"bg-background text-gray-900 ring-gray-300",danger:"bg-red-600 text-white focus-visible:outline-red-600",warning:"bg-yellow-600 text-white focus-visible:outline-yellow-600",ghost:"bg-transparent",outline:"bg-transparent text-primary-600 ring-primary-600",link:"text-links"},size:{small:"text-xs min-h-6",default:"text-sm min-h-8",large:"text-base min-h-10",icon:"rounded-full p-2.5"},disabled:{false:null,true:"opacity-50 cursor-not-allowed"}},compoundVariants:[{variant:["default","secondary","danger","ghost","outline"],class:"flex items-center justify-center gap-1 font-medium"},{variant:["default","danger"],class:"shadow-sm"},{variant:["secondary","outline"],class:"ring-1 ring-inset"},{variant:["default","secondary","danger","ghost","outline"],size:"small",class:"rounded px-2 py-1"},{variant:["default","secondary","danger","ghost","outline"],size:"default",class:"rounded-md px-2.5 py-1.5"},{variant:["default","secondary","danger","ghost","outline"],size:"large",class:"rounded-md px-3 py-2"},{variant:"default",disabled:!1,class:"hover:bg-primary-500"},{variant:["secondary","ghost","outline"],disabled:!1,class:"hover:bg-gray-50"},{variant:"danger",disabled:!1,class:"hover:bg-red-500"},{variant:"link",disabled:!1,class:"hover:underline"},{variant:"link",size:"small",class:"leading-6"},{variant:"link",size:"default",class:"leading-8"},{variant:"link",size:"large",class:"leading-10"}],defaultVariants:{variant:"default",size:"default",disabled:!1}}));return(r,s)=>(F(),ce(Zx,Ue({class:n.value,disabled:r.disabled},e),{default:se(()=>[Ae(r.$slots,"default")]),_:3},16,["class","disabled"]))}});function kL(t){return typeof t=="object"&&t!==null&&"label"in t}function PL(t,e){const n=jt("form",null),r=c=>c===void 0?"":t.value.renderOption?t.value.renderOption(c):kL(c)?t0(c.label):$t(c),s=J(()=>{const{name:c,modelValue:d}=t.value;return n&&c?n.getFieldValue(c):d}),i=J(()=>s.value),o=J(()=>!n||!t.value.name?null:n.errors[t.value.name]??null),a=J(()=>t.value.options?t.value.options.map(c=>({key:jn(),label:r(c),value:c})):null),l={renderOption:r,labelClass:J(()=>t.value.labelClass),optionsClass:J(()=>t.value.optionsClass),align:J(()=>t.value.align),side:J(()=>t.value.side),value:s,id:`select-${jn()}`,name:J(()=>t.value.name),label:J(()=>t.value.label),description:J(()=>t.value.description),placeholder:J(()=>t.value.placeholder??Le("ui.select","Select an option")),options:a,selectedOption:J(()=>{var c;return(c=a.value)==null?void 0:c.find(d=>d.value===t.value.modelValue)}),errors:is(o),required:J(()=>{if(!(!t.value.name||!n))return n.getFieldRules(t.value.name).includes("required")}),update(c){if(n&&t.value.name){n.setFieldValue(t.value.name,c);return}e("update:modelValue",c)}};function u(c){l.update(c)}return _r("select",l),{expose:l,acceptableValue:i,update:u,renderOption:r}}const e1=me({__name:"HeadlessSelectValue",setup(t){const e=Jn("select","<HeadlessSelectValue> must be a child of a <HeadlessSelect>");return(n,r)=>n.$slots.default?(F(),ce(A(nv),{key:0,placeholder:A(e).placeholder},{default:se(()=>[Ae(n.$slots,"default")]),_:3},8,["placeholder"])):(F(),ce(A(nv),{key:1,placeholder:A(e).placeholder},null,8,["placeholder"]))}}),t1=me({__name:"HeadlessSelectTrigger",setup(t){const e=Jn("select","<HeadlessSelectTrigger> must be a child of a <HeadlessSelect>");return(n,r)=>(F(),ce(A(d$),{id:A(e).id},{default:se(()=>[Ae(n.$slots,"default",{},()=>[oe(e1,{placeholder:A(e).placeholder},null,8,["placeholder"]),oe(A(t$))])]),_:3},8,["id"]))}}),n1=me({__name:"HeadlessSelectOption",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(t){const e=Jn("select","<HeadlessSelectOption> must be a child of a <HeadlessSelect>"),n=J(()=>{var r;const s=(r=e.options)==null?void 0:r.find(i=>i.value===t.value);return s?e.renderOption(s.value):$t(t.value)});return(r,s)=>(F(),ce(A(i$),Wn(lr(r.$props)),{default:se(()=>[oe(A(a$),null,{default:se(()=>[Ae(r.$slots,"default",{},()=>[rt(Te(n.value),1)])]),_:3})]),_:3},16))}}),r1=me({__name:"HeadlessSelectOptions",props:{class:{},innerClass:{}},setup(t){const e=Jn("select","<HeadlessSelectOptions> must be a child of a <HeadlessSelect>"),n=J(()=>wt("min-w-(--reka-select-trigger-width) max-h-(--reka-select-content-available-height)",t.class));return(r,s)=>(F(),ce(A(u$),null,{default:se(()=>[oe(A(ZP),{position:"popper",class:Ve(n.value),align:A(e).align,side:A(e).side,"side-offset":4},{default:se(()=>[oe(A(p$),{class:Ve(r.innerClass)},{default:se(()=>[Ae(r.$slots,"default",{},()=>[(F(!0),be(Ze,null,ln(A(e).options??[],i=>(F(),ce(n1,{key:i.key,value:i.value},null,8,["value"]))),128))])]),_:3},8,["class"])]),_:3},8,["class","align","side"])]),_:3}))}}),$L=me({inheritAttrs:!1,__name:"HeadlessSelect",props:{as:{default:"div"},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function,default:(t,e)=>t===e},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=bi(t,["as","compareOptions"]),{expose:i,acceptableValue:o,update:a}=PL(J(()=>({as:t.as,compareOptions:t.compareOptions,...s})),r);return e(i),(l,u)=>(F(),ce(A(NP),{"model-value":A(o),by:l.compareOptions,"onUpdate:modelValue":u[0]||(u[0]=c=>A(a)(c))},{default:se(({open:c})=>[(F(),ce(js(l.as),Wn(lr(l.$attrs)),{default:se(()=>[Ae(l.$slots,"default",{modelValue:l.modelValue,open:c},()=>[oe(t1),oe(r1)])]),_:2},1040))]),_:3},8,["model-value","by"]))}}),uv=me({__name:"HeadlessSelectLabel",props:{asChild:{type:Boolean},as:{}},setup(t){const e=Jn("select","<HeadlessSelectLabel> must be a child of a <HeadlessSelect>"),n=Ap(),r=J(()=>!!(e.label||n.default));return(s,i)=>r.value?(F(),ce(A(DP),Ue({key:0,for:A(e).id},s.$props),{default:se(()=>[Ae(s.$slots,"default",{},()=>[rt(Te(A(e).label),1)])]),_:3},16,["for"])):je("",!0)}}),s1=me({__name:"SelectLabel",props:{class:{}},setup(t){const e=Jn("select","<SelectLabel> must be a child of a <Select>"),n=J(()=>wt("block text-sm leading-6 font-medium text-gray-900",e.labelClass,t.class));return(r,s)=>r.$slots.default?(F(),ce(uv,{key:0,class:Ve(n.value)},{default:se(()=>[Ae(r.$slots,"default")]),_:3},8,["class"])):(F(),ce(uv,{key:1,class:Ve(n.value)},null,8,["class"]))}}),cv=me({__name:"SelectOption",props:{value:{},class:{},innerClass:{}},setup(t){const e=J(()=>wt("group p-1 outline-none",t.class)),n=J(()=>wt("relative flex max-w-[calc(100vw-2rem)] cursor-pointer items-center truncate rounded-md gap-2 px-2 py-1 text-sm select-none *:truncate group-data-[highlighted]:bg-gray-100 group-data-[state=checked]:font-semibold group-data-[state=unchecked]:opacity-50",t.innerClass));return(r,s)=>(F(),ce(n1,{class:Ve(e.value),value:r.value},{default:se(()=>[te("div",{class:Ve(n.value)},[Ae(r.$slots,"default")],2)]),_:3},8,["class","value"]))}}),i1=me({__name:"SelectOptions",props:{class:{}},setup(t){const e=Jn("select","<SelectOptions> must be a child of a <Select>"),n=J(()=>wt("z-50 overflow-auto rounded-lg bg-white text-base shadow-lg ring-1 ring-black/5 focus:outline-hidden",e.optionsClass,t.class));return(r,s)=>(F(),ce(r1,{class:Ve(n.value)},{default:se(()=>{var i;return[(i=A(e).options)!=null&&i.length?Ae(r.$slots,"default",{key:0},()=>{var o;return[(F(!0),be(Ze,null,ln(((o=A(e))==null?void 0:o.options)??[],a=>(F(),ce(cv,{key:a.key,value:a.value},{default:se(()=>[rt(Te(a.label),1)]),_:2},1032,["value"]))),128))]}):Ae(r.$slots,"default",{key:1},()=>[oe(cv,{disabled:"",value:null},{default:se(()=>[rt(Te(r.$td("ui.selectEmpty","No options available")),1)]),_:1})])]}),_:3},8,["class"]))}}),LL={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function ML(t,e){return F(),be("svg",LL,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"m9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828L5.757 6.586L4.343 8z"},null,-1)]))}const NL=st({name:"zondicons-cheveron-down",render:ML}),FL={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function jL(t,e){return F(),be("svg",FL,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07M9 5v6h2V5zm0 8v2h2v-2z"},null,-1)]))}const mm=st({name:"zondicons-exclamation-solid",render:jL}),UL={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},o1=me({__name:"SelectTrigger",props:{class:{}},setup(t){const e=Jn("select","<SelectTrigger> must be a child of a <Select>"),n=J(()=>wt("relative grid w-full cursor-default grid-cols-1 rounded-md bg-white py-1.5 pr-2 pl-3 text-left text-gray-900 outline-1 -outline-offset-1","focus:outline-2 focus:-outline-offset-2 sm:text-sm/6",{"mt-1":e.label,"outline-gray-300 focus:outline-primary-600 data-[state=open]:outline-primary-600":!e.errors,"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!e.errors,"outline-red-900/10 pr-10 text-red-900 placeholder:text-red-300":e.errors,"focus:outline-red-500 data-[state=open]:outline-red-500":e.errors},t.class));return(r,s)=>(F(),ce(t1,{class:Ve(n.value)},{default:se(()=>{var i;return[oe(e1,{class:"col-start-1 row-start-1 truncate pr-6"}),oe(A(NL),{class:"col-start-1 row-start-1 size-5 self-center justify-self-end text-gray-500 sm:size-4"}),(i=A(e))!=null&&i.errors?(F(),be("div",UL,[oe(A(mm),{class:"size-5 text-red-500"})])):je("",!0)]}),_:1},8,["class"]))}}),qL=["id"],BL=me({__name:"HeadlessSelectError",setup(t){const e=Jn("select","<HeadlessSelectError> must be a child of a <HeadlessSelect>"),n=J(()=>e.errors?Le(`errors.${e.errors[0]}`,`Error: ${e.errors[0]}`):null);return(r,s)=>n.value?(F(),be("p",{key:0,id:`${A(e).id}-error`},Te(n.value),9,qL)):je("",!0)}}),a1=me({__name:"Select",props:{as:{},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t){const{forwardRef:e}=tt();return(n,r)=>(F(),ce($L,Ue({ref:A(e)},n.$props,{"onUpdate:modelValue":r[0]||(r[0]=s=>n.$emit("update:modelValue",s))}),{default:se(()=>[oe(s1),Ae(n.$slots,"default",{},()=>[oe(o1),oe(BL,{class:"mt-2 text-sm text-red-600"}),oe(i1)])]),_:3},16))}}),VL={class:"grow"},zL=me({__name:"Language",setup(t){const e=gi.getBrowserLocale(),n=J(()=>[null,...gi.locales]);function r(s){return(s&&Pr.locales[s])??Le("settings.localeDefault","{locale} (default)",{locale:Pr.locales[e]??e})}return(s,i)=>(F(),ce(a1,{modelValue:s.$lang.locale,"onUpdate:modelValue":i[0]||(i[0]=o=>s.$lang.locale=o),class:"flex flex-col items-start md:flex-row",as:"div",options:n.value,"render-option":r},{default:se(()=>[te("div",VL,[oe(s1,{class:"text-base font-semibold"},{default:se(()=>[rt(Te(s.$td("settings.locale","Language")),1)]),_:1}),oe(Lt,{"lang-key":"settings.localeDescription","lang-default":"Choose the application's language.",class:"mt-1 text-sm text-gray-500"})]),oe(Ct,{variant:"ghost",as:o1,class:"grid w-auto outline-none"}),oe(i1)]),_:1},8,["modelValue","options"]))}}),HL=[{priority:100,component:zL}],KL={$lang:gi},WL={async install(t){var e;(e=t.config.globalProperties).$t??(e.$t=Gx),t.config.globalProperties.$td=Le,HL.forEach(n=>lt.addSetting(n)),await Gi(t,KL)}},GL=me({__name:"Markdown",props:{as:{},inline:{type:Boolean},langKey:{},langParams:{},langDefault:{},text:{},actions:{}},setup(t){const e=S_(),n=Ap(),r=J(()=>n.default?n.default().map(qx).join(""):t.text??(t.langKey&&(t.langDefault?Le(t.langKey,t.langDefault,t.langParams??{}):Gx(t.langKey,t.langParams??{})))),s=J(()=>{if(!r.value)return null;let a=gL(r.value);return t.inline&&(a=a.replace("<p>","<span>").replace("</p>","</span>")),a}),i=()=>nr(t.as??(t.inline?"span":"div"),{innerHTML:s.value,onClick:o,...e,class:`${e.class??""} ${t.inline?"":"prose"}`});async function o(a){var l,u;const{target:c}=a;if(Yt(c,HTMLElement)&&c.dataset.markdownAction){(u=(l=t.actions)==null?void 0:l[c.dataset.markdownAction])==null||u.call(l);return}if(Yt(c,HTMLAnchorElement)&&c.dataset.markdownRoute){const d=pL();d&&(a.preventDefault(),d.visit(c.dataset.markdownRoute));return}}return(a,l)=>(F(),ce(i))}}),JL=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},Lt=JL(GL,[["__scopeId","data-v-8b211cfb"]]),XL={class:"flex-grow"},YL=["id"],QL=me({__name:"Setting",props:{title:{},titleId:{},description:{},class:{},layout:{default:"horizontal"}},setup(t){const e=J(()=>wt(t.class,"flex flex-col justify-center gap-1"));return(n,r)=>(F(),be("div",{class:Ve(["mt-4 flex",{"flex-col":n.layout==="vertical"}])},[te("div",XL,[te("h3",{id:n.titleId,class:"text-base font-semibold"},Te(n.title),9,YL),n.description?(F(),ce(Lt,{key:0,text:n.description,class:"mt-1 text-sm text-gray-500"},null,8,["text"])):je("",!0)]),te("div",{class:Ve(e.value)},[Ae(n.$slots,"default")],2)],2))}}),ZL=["for"],e2=me({inheritAttrs:!1,__name:"HeadlessSwitch",props:{name:{},label:{},description:{},modelValue:{},class:{},labelClass:{},inputClass:{},thumbClass:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=jt("form",null),i=J(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`switch-${jn()}`,name:J(()=>t.name),label:J(()=>t.label),description:J(()=>t.description),value:J(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:is(i),required:J(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return e(o),qt(()=>{!t.description&&!i.value||console.warn("Errors and description not implemented in <HeadlessSwitch>")}),(a,l)=>(F(),be("div",{class:Ve(t.class)},[a.label?(F(),be("label",{key:0,for:o.id,class:Ve(a.labelClass)},Te(a.label),11,ZL)):je("",!0),oe(A(v$),Ue({id:o.id,name:a.name,"model-value":o.value.value},a.$attrs,{class:a.inputClass,"onUpdate:modelValue":l[0]||(l[0]=u=>a.$emit("update:modelValue",u))}),{default:se(()=>[oe(A(w$),{class:Ve(a.thumbClass)},null,8,["class"])]),_:1},16,["id","name","model-value","class"])],2))}}),t2=me({__name:"Switch",setup(t){return(e,n)=>(F(),ce(e2,{class:"flex flex-row items-center gap-1","input-class":"disabled:opacity-50 disabled:cursor-not-allowed data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-200 relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focusdisabled:opacity-50 disabled:cursor-not-allowed :ring-2 focus:ring-primary-600 focus:ring-offset-2 focus:outline-hidden","thumb-class":"data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 pointer-events-none inline-block size-5 transform rounded-full bg-white shadow-sm ring-0 transition duration-200 ease-in-out"}))}}),n2=me({__name:"Debug",setup(t){return(e,n)=>(F(),ce(QL,{"title-id":"debug-setting",title:e.$td("settings.debug","Debugging"),description:e.$td("settings.debugDescription","Enable debugging with [Eruda](https://eruda.liriliri.io/).")},{default:se(()=>[oe(t2,{modelValue:e.$errors.debug,"onUpdate:modelValue":n[0]||(n[0]=r=>e.$errors.debug=r),"aria-labelledby":"debug-setting"},null,8,["modelValue"])]),_:1},8,["title","description"]))}}),r2=[{priority:10,component:n2}];let dv=class extends cr{};const s2={$errors:yi},i2=t=>(Xx(t).includes("ResizeObserver loop completed with undelivered notifications.")||yi.report(t),!0);function o2(t,e=()=>!1){const n=r=>e(r)||i2(r);t.config.errorHandler=n,globalThis.onerror=(r,s,i,o,a)=>n(a??r),globalThis.onunhandledrejection=r=>n(r.reason)}const a2={async install(t,e){o2(t,e.handleError),r2.forEach(n=>lt.addSetting(n)),await Gi(t,s2)}},l2={async install(){Va()&&(globalThis.testingRuntime={on:(...t)=>We.on(...t),service:t=>lt.service(t)})}},u2={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function c2(t,e){return F(),be("svg",u2,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M10 8.586L2.929 1.515L1.515 2.929L8.586 10l-7.071 7.071l1.414 1.414L10 11.414l7.071 7.071l1.414-1.414L11.414 10l7.071-7.071l-1.414-1.414z"},null,-1)]))}const d2=st({name:"zondicons-close",render:c2}),f2=me({__name:"HeadlessModal",props:{persistent:{type:Boolean},fullscreen:{type:Boolean},fullscreenOnMobile:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean}},setup(t,{expose:e}){const n=_e(null),{close:r}=Dc();e({$content:n});const{forwardRef:s}=tt();return _r("$modalContentRef",n),(i,o)=>(F(),ce(A(WO),{ref:A(s),open:"","onUpdate:open":o[0]||(o[0]=a=>i.persistent||a||A(r)())},{default:se(()=>[oe(A(RD),null,{default:se(()=>[Ae(i.$slots,"default",{close:A(r)})]),_:3})]),_:3},512))}}),h2=me({__name:"HeadlessModalContent",setup(t){const{child:e}=Dc(),n=tL("$modalContentRef"),r=rl("$contentRef");return qt(()=>n.value=r.value),(s,i)=>(F(),ce(A(bD),{ref:"$contentRef"},{default:se(()=>[Ae(s.$slots,"default"),A(e)?(F(),ce(A(yh),{key:0,is:A(e)},null,8,["is"])):je("",!0)]),_:3},512))}}),p2=me({__name:"HeadlessModalDescription",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(F(),ce(A(_D),Wn(lr(e.$props)),{default:se(()=>[Ae(e.$slots,"default")]),_:3},16))}}),m2=me({__name:"HeadlessModalOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(F(),ce(A(SD),Wn(lr(e.$props)),{default:se(()=>[Ae(e.$slots,"default")]),_:3},16))}}),g2=me({__name:"HeadlessModalTitle",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(F(),ce(A(OD),Wn(lr(e.$props)),{default:se(()=>[Ae(e.$slots,"default")]),_:3},16))}}),y2=["onClick"],v2={class:"sr-only"},Ll=Hx(),Us=me({__name:"Modal",props:{persistent:{type:Boolean},fullscreen:{type:Boolean},fullscreenOnMobile:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean},wrapperClass:{default:""},class:{default:""},closeHidden:{type:Boolean}},setup(t,{expose:e}){const n=bi(t,["class","wrapperClass","title","titleHidden","description","persistent","closeHidden","fullscreen","fullscreenOnMobile"]);e({$content:J(()=>{var x;return(x=a.value)==null?void 0:x.$content})});const{forwardRef:r,currentRef:s}=tt(),{id:i,visible:o}=Dc(),a=s,l=zp(),u=J(()=>{var x;return o.value&&((x=Vt.value.toReversed().find(b=>b.visible.value))==null?void 0:x.id)===i.value}),c=J(()=>Vt.value.find(x=>x.visible.value)),d=J(()=>Vt.value.some(x=>Ll.has(x))),f=J(()=>t.description?{}:{"aria-describedby":void 0}),h=J(()=>wt("overflow-auto px-4 pb-4 flex flex-col flex-1",{"pt-4":!t.title||t.titleHidden,"max-h-[90vh]":!m.value},t.class)),m=J(()=>t.fullscreen||t.fullscreenOnMobile&&Ht.mobile),g=J(()=>wt("isolate fixed z-50 flex flex-col overflow-hidden bg-white text-left duration-300",m.value?["inset-0 transition-[transform,translate] will-change-[transform,translate]",Ll.has(l.value)||"animate-[slide-in_var(--tw-duration)_ease-in-out]",u.value?"translate-y-0":"translate-y-full"]:["top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full","max-w-[calc(100%-2rem)] rounded-lg shadow-xl sm:max-w-lg","transition-[scale,opacity] will-change-[scale,opacity]",Ll.has(l.value)||"animate-[fade-in_var(--tw-duration)_ease-in-out,grow_var(--tw-duration)_ease-in-out]",u.value?"scale-100 opacity-100":"scale-50 opacity-0"],t.wrapperClass));return Wt(()=>Hn(500).then(()=>Ll.add(l.value))),(x,b)=>(F(),ce(f2,Ue(n,{ref:E=>A(r)(E),persistent:x.persistent}),{default:se(({close:E})=>{var _,p;return[oe(m2,{class:Ve(["fixed inset-0 transition-opacity duration-300 will-change-[opacity]",{"animate-[fade-in_var(--tw-duration)_ease-in-out]":!d.value,"bg-black/30":((_=c.value)==null?void 0:_.id)===A(i)||!c.value&&((p=A(Vt)[0])==null?void 0:p.id)===A(i),"opacity-0":!c.value,hidden:m.value}])},null,8,["class"]),oe(h2,Ue(f.value,{class:g.value}),{default:se(()=>[!x.persistent&&!x.closeHidden?(F(),be("div",{key:0,class:Ve(["absolute top-0 right-0 pt-3.5 pr-2.5",{"hidden sm:block":!m.value}])},[te("button",{type:"button",class:"clickable z-10 rounded-full p-2.5 text-gray-400 hover:text-gray-500",onClick:v=>E()},[te("span",v2,Te(x.$td("ui.close","Close")),1),oe(A(d2),{class:"size-4"})],8,y2)],2)):je("",!0),x.title?(F(),ce(g2,{key:1,class:Ve(["px-4 pt-5 text-base font-semibold text-gray-900",{"sr-only":x.titleHidden,"pb-0":x.description&&!x.descriptionHidden,"pb-2":!x.description||x.descriptionHidden}])},{default:se(()=>[oe(Lt,{text:x.title,inline:""},null,8,["text"])]),_:1},8,["class"])):je("",!0),x.description?(F(),ce(p2,{key:2,class:Ve(["px-4 pt-1 pb-2",{"sr-only":x.descriptionHidden}])},{default:se(()=>[oe(Lt,{text:x.description,class:"text-sm leading-6 text-gray-500"},null,8,["text"])]),_:1},8,["class"])):je("",!0),te("div",{class:Ve(h.value)},[Ae(x.$slots,"default",{close:E})],2)]),_:2},1040,["class"])]}),_:3},16,["persistent"]))}});function b2(t){const e=J(()=>t.title??Le("ui.alert","Alert")),n=J(()=>!t.title);return{renderedTitle:e,titleHidden:n}}const w2=me({__name:"AlertModal",props:{title:{},message:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,titleHidden:s}=b2(n);return e(),(i,o)=>(F(),ce(Us,{title:A(r),"title-hidden":A(s)},{default:se(()=>[oe(Lt,{text:i.message},null,8,["text"])]),_:1},8,["title","title-hidden"]))}}),gm=me({__name:"Form",props:{form:{}},emits:["submit"],setup(t,{emit:e}){let n;const r=e;return qt(s=>{var i;n==null||n(),n=(i=t.form)==null?void 0:i.on("submit",()=>r("submit")),s(()=>n==null?void 0:n())}),_r("form",t.form),(s,i)=>(F(),be("form",{onSubmit:i[0]||(i[0]=Mn(o=>s.form?s.form.submit():s.$emit("submit"),["prevent"]))},[Ae(s.$slots,"default")],32))}});function _2(t){const e=pm(Object.entries(t.checkboxes??{}).reduce((o,[a,l])=>({[a]:{type:"boolean",default:l.default,required:l.required?"required":void 0},...o}),{})),n=J(()=>t.title??Le("ui.confirm","Confirm")),r=J(()=>!t.title),s=J(()=>t.acceptText??Le("ui.accept","Ok")),i=J(()=>t.cancelText??Le("ui.cancel","Cancel"));return{form:e,renderedTitle:n,titleHidden:r,renderedAcceptText:s,renderedCancelText:i}}const x2={key:0,class:"mt-4 flex flex-col text-sm text-gray-600"},E2={class:"flex items-center"},A2=["onUpdate:modelValue","required"],S2={class:"ml-1.5"},I2={class:"mt-4 flex flex-row-reverse gap-2"},C2=me({__name:"ConfirmModal",props:{title:{},message:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"},checkboxes:{},actions:{},required:{type:Boolean}},emits:["close"],setup(t,{expose:e}){const n=bi(t,["cancelVariant"]),{form:r,renderedTitle:s,titleHidden:i,renderedAcceptText:o,renderedCancelText:a}=_2(n);return e(),(l,u)=>(F(),ce(Us,{title:A(s),"title-hidden":A(i),persistent:""},{default:se(({close:c})=>[oe(gm,{form:A(r),onSubmit:d=>c([!0,A(r).data()])},{default:se(()=>[oe(Lt,{text:l.message,actions:l.actions},null,8,["text","actions"]),l.checkboxes?(F(),be("ul",x2,[(F(!0),be(Ze,null,ln(l.checkboxes,(d,f)=>(F(),be("li",{key:f},[te("label",E2,[Ts(te("input",{"onUpdate:modelValue":h=>A(r)[f]=h,type:"checkbox",required:d.required,class:"border-primary-600 text-primary-600 hover:bg-primary-50 hover:checked:bg-primary-500 focus:ring-primary-600 focus-visible:ring-primary-600 rounded border-2"},null,8,A2),[[J_,A(r)[f]]]),te("span",S2,Te(d.label),1)])]))),128))])):je("",!0),te("div",I2,[oe(Ct,{variant:l.acceptVariant,submit:""},{default:se(()=>[rt(Te(A(o)),1)]),_:1},8,["variant"]),l.required?je("",!0):(F(),ce(Ct,{key:0,variant:l.cancelVariant,onClick:d=>c(!1)},{default:se(()=>[rt(Te(A(a)),1)]),_:2},1032,["variant","onClick"]))])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title","title-hidden"]))}}),R2={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function T2(t,e){return F(),be("svg",R2,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M7.05 9.293L6.343 10L12 15.657l1.414-1.414L9.172 10l4.242-4.243L12 4.343z"},null,-1)]))}const O2=st({name:"zondicons-cheveron-left",render:T2}),D2={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function k2(t,e){return F(),be("svg",D2,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"m12.95 10.707l.707-.707L8 4.343L6.586 5.757L10.828 10l-4.242 4.243L8 15.657z"},null,-1)]))}const l1=st({name:"zondicons-cheveron-right",render:k2}),P2={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function $2(t,e){return F(),be("svg",P2,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M20 19V7H4v12zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-7 14v-2h5v2zm-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59z"},null,-1)]))}const L2=st({name:"mdi-console",render:$2}),M2={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function N2(t,e){return F(),be("svg",M2,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2zm2 0h4a2 2 0 0 1 2 2v4h4V2H8zM2 8v10h10V8z"},null,-1)]))}const F2=st({name:"zondicons-copy",render:N2}),j2={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function U2(t,e){return F(),be("svg",j2,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"},null,-1)]))}const q2=st({name:"mdi-github",render:U2}),B2={class:"flex"},V2={class:"sr-only"},z2=me({__name:"ErrorReportModalButtons",props:{report:{}},setup(t){const e=t,n=J(()=>e.report.description?`${e.report.title}: ${e.report.description}`:e.report.title),r=J(()=>{if(!lt.sourceUrl)return!1;const i=encodeURIComponent(n.value),o=encodeURIComponent(["[Please, explain here what you were trying to do when this error appeared]","","Error details:","```",JC(e.report.details??"Details missing from report",1800-i.length-lt.sourceUrl.length).trim(),"```"].join(`
`));return`${lt.sourceUrl}/issues/new?title=${i}&body=${o}`}),s=J(()=>Ne([{id:"clipboard",description:"Copy to clipboard",iconComponent:F2,async click(){await navigator.clipboard.writeText(`${n.value}

${e.report.details}`),Ht.toast(Le("errors.copiedToClipboard","Debug information copied to clipboard"))}},{id:"console",description:"Log to console",iconComponent:L2,click(){const i=e.report.error??e.report;window.error=i,console.error(i),Ht.toast(Le("errors.addedToConsole","You can now use the **error** variable in the console"))}}],i=>{r.value&&i.push({id:"github",description:"Report in GitHub",iconComponent:q2,url:r.value})}));return(i,o)=>(F(),be("div",B2,[(F(!0),be(Ze,null,ln(s.value,a=>Ae(i.$slots,"default",Ue({ref_for:!0},a),()=>[oe(Ct,{size:"icon",variant:"ghost",class:"group whitespace-nowrap",href:a.url,title:i.$td(`errors.report_${a.id}`,a.description),onClick:a.click},{default:se(()=>[te("span",V2,Te(i.$td(`errors.report_${a.id}`,a.description)),1),(F(),ce(js(a.iconComponent),{class:"size-4","aria-hidden":"true"}))]),_:2},1032,["href","title","onClick"])])),256))]))}}),H2=me({__name:"ErrorReportModalTitle",props:{report:{},currentReport:{},totalReports:{}},setup(t){const e=J(()=>!t.totalReports||t.totalReports<=1?t.report.title:`${t.report.title} (${t.currentReport}/${t.totalReports})`);return(n,r)=>(F(),ce(Lt,{text:e.value,inline:""},null,8,["text"]))}});function K2(t){const e=_e(t.reports.includes(t.report)?t.reports.indexOf(t.report):0),n=J(()=>t.reports[e.value]),r=J(()=>{var o;return((o=n.value.details)==null?void 0:o.trim())||Le("errors.detailsEmpty","This error is missing a stacktrace.")}),s=Le("errors.previousReport","Show previous report"),i=Le("errors.nextReport","Show next report");return{activeReportIndex:e,details:r,nextReportText:i,previousReportText:s,activeReport:n}}const W2={class:"px-4 pt-5 pb-4"},G2={class:"flex justify-between gap-4"},J2={class:"flex items-center gap-2"},X2={key:0,class:"flex gap-0.5"},Y2={class:"-mt-2 max-h-[75vh] overflow-auto bg-red-800/10"},Q2=["textContent"],Z2=me({__name:"ErrorReportModal",props:{report:{},reports:{}},setup(t,{expose:e}){const n=t,{activeReportIndex:r,details:s,nextReportText:i,previousReportText:o,activeReport:a}=K2(n);return e(),(l,u)=>(F(),ce(Us,{title:l.$td("errors.report","Error report"),"title-hidden":"","close-hidden":"",class:"p-0","wrapper-class":"sm:w-auto sm:min-w-lg sm:max-w-[80vw]"},{default:se(()=>[te("div",W2,[te("h2",G2,[te("div",J2,[oe(A(mm),{class:"size-5 text-red-600"}),oe(H2,{class:"text-lg leading-6 font-semibold text-gray-900",report:A(a),"current-report":A(r)+1,"total-reports":l.reports.length},null,8,["report","current-report","total-reports"]),l.reports.length>1?(F(),be("span",X2,[oe(Ct,{size:"icon",variant:"ghost",disabled:A(r)===0,"aria-label":A(o),title:A(o),onClick:u[0]||(u[0]=c=>r.value--)},{default:se(()=>[oe(A(O2),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"]),oe(Ct,{size:"icon",variant:"ghost",disabled:A(r)===l.reports.length-1,"aria-label":A(i),title:A(i),onClick:u[1]||(u[1]=c=>r.value++)},{default:se(()=>[oe(A(l1),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"])])):je("",!0)]),oe(z2,{report:A(a),class:"gap-0.5"},null,8,["report"])]),A(a).description?(F(),ce(Lt,{key:0,text:A(a).description,class:"text-gray-600"},null,8,["text"])):je("",!0)]),te("div",Y2,[te("pre",{class:"p-4 text-xs text-red-800",textContent:Te(A(s))},null,8,Q2)])]),_:1},8,["title"]))}}),eM={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function tM(t,e){return F(),be("svg",eM,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"},null,-1),te("path",{fill:"currentColor",d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"},[te("animateTransform",{attributeName:"transform",dur:"0.75s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})],-1)]))}const nM=st({name:"svg-spinners-90-ring-with-bg",render:tM}),rM={class:"relative mt-1 h-2 w-full overflow-hidden rounded-full bg-gray-200"},sM={class:"sr-only"},u1=me({__name:"ProgressBar",props:{filledClass:{},overflowClass:{},progress:{},job:{}},setup(t){let e;const n=_e(0),r=J(()=>wt("size-full transition-transform duration-500 rounded-r-full ease-linear bg-primary-600",t.filledClass)),s=J(()=>wt("absolute inset-y-0 right-0 size-full rounded-r-full","bg-primary-900 transition-[width] duration-500 ease-linear",t.overflowClass)),i=J(()=>typeof t.progress=="number"?t.progress:n.value),o=J(()=>i.value>1?100*((i.value-1)/i.value):null);return et(()=>t.job,()=>{e&&e(),n.value=t.job?t.job.progress:0,e=t.job&&t.job.listeners.add({onUpdated:a=>n.value=a})},{immediate:!0}),ar(()=>e&&e()),(a,l)=>(F(),be("div",rM,[te("div",{class:Ve(r.value),style:jr(`transform:translateX(-${(1-i.value)*100}%)`)},null,6),o.value?(F(),be("div",{key:0,class:Ve(s.value),style:jr({width:`${o.value}%`})},null,6)):je("",!0),te("span",sM,Te(a.$td("ui.progress","{progress}% complete",{progress:i.value*100})),1)]))}});function iM(t){const e=J(()=>t.title??Le("ui.loading","Loading")),n=J(()=>t.message??Le("ui.loadingInProgress","Loading in progress...")),r=J(()=>typeof t.progress=="number"||!!t.job),s=J(()=>!t.title);return{renderedTitle:e,renderedMessage:n,titleHidden:s,showProgress:r}}const oM=me({__name:"LoadingModal",props:{title:{},message:{},progress:{},job:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,renderedMessage:s,titleHidden:i,showProgress:o}=iM(n);return e(),(a,l)=>(F(),ce(Us,{persistent:"","wrapper-class":"w-auto",title:A(r),"title-hidden":A(i),class:Ve({"flex-col-reverse":A(o),"flex-row items-center justify-center gap-2":!A(o)})},{default:se(()=>[A(o)?(F(),ce(u1,{key:0,progress:a.progress,job:a.job,class:"min-w-[min(400px,80vw)]"},null,8,["progress","job"])):(F(),ce(A(nM),{key:1,class:"text-primary-600 mr-1 size-6"})),oe(Lt,{text:A(s)},null,8,["text"])]),_:1},8,["title","title-hidden","class"]))}}),c1=me({__name:"HeadlessInput",props:{name:{},label:{},description:{},modelValue:{},as:{default:"div"}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=jt("form",null),i=J(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`input-${jn()}`,name:J(()=>t.name),label:J(()=>t.label),description:J(()=>t.description),value:J(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:is(i),required:J(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return _r("input",o),e(o),(a,l)=>(F(),ce(js(a.as),null,{default:se(()=>[Ae(a.$slots,"default")]),_:3}))}}),aM=["for"],Mh=me({__name:"HeadlessInputLabel",setup(t){const e=Jn("input","<HeadlessInputLabel> must be a child of a <HeadlessInput>"),n=Ap(),r=J(()=>!!(e.label||n.default));return(s,i)=>r.value?(F(),be("label",{key:0,for:A(e).id},[Ae(s.$slots,"default",{},()=>[rt(Te(A(e).label),1)])],8,aM)):je("",!0)}}),lM=["id","name","checked","type","required","aria-invalid","aria-describedby"],d1=me({__name:"HeadlessInputInput",props:{type:{}},setup(t){const e=rl("$inputRef"),n=Jn("input","<HeadlessInputInput> must be a child of a <HeadlessInput>"),r=jt("form",null),s=J(()=>n.name??void 0),i=J(()=>n.value),o=J(()=>{if(t.type)return t.type;const c=(s.value&&(r==null?void 0:r.getFieldType(s.value)))??"";return["text","email","number","tel","url"].includes(c)?c:"text"}),a=J(()=>{if(o.value==="checkbox")return!!i.value});function l(){e.value&&n.update(u())}function u(){if(!e.value)return null;switch(o.value){case"checkbox":return e.value.checked;case"date":case"time":case"datetime-local":{const c=new Date(Math.round(e.value.valueAsNumber/6e4)*6e4+ov(e.value.valueAsDate??new Date(e.value.valueAsNumber)));return isNaN(c.getTime())?null:c}case"number":return e.value.valueAsNumber;default:return e.value.value}}return uL(n,()=>{var c;return(c=e.value)==null?void 0:c.focus()}),qt(()=>{if(e.value){if(["date","time","datetime-local"].includes(o.value)&&i.value instanceof Date){const c=Math.round(i.value.getTime()/6e4)*6e4;e.value.valueAsNumber=c-ov(i.value),i.value.getTime()!==c&&n.update(new Date(c));return}e.value.value=i.value??null}}),(c,d)=>(F(),be("input",{id:A(n).id,ref:"$inputRef",name:s.value,checked:a.value,type:o.value,required:A(n).required??void 0,"aria-invalid":A(n).errors?"true":"false","aria-describedby":A(n).errors?`${A(n).id}-error`:A(n).description?`${A(n).id}-description`:void 0,onInput:l},null,40,lM))}}),uM=me({inheritAttrs:!1,__name:"HeadlessInputDescription",setup(t){const e=Jn("input","<HeadlessInputDescription> must be a child of a <HeadlessInput>"),n=J(()=>typeof e.description=="string"?e.description:""),r=J(()=>!!e.description);return(s,i)=>Ae(s.$slots,"default",{id:`${A(e).id}-description`},()=>[r.value?(F(),ce(Lt,Ue({key:0},s.$attrs,{id:`${A(e).id}-description`,text:n.value}),null,16,["id","text"])):je("",!0)])}}),cM=["id"],Nh=me({__name:"HeadlessInputError",setup(t){const e=Jn("input","<HeadlessInputError> must be a child of a <HeadlessInput>"),n=J(()=>e.errors?Le(`errors.${e.errors[0]}`,`Error: ${e.errors[0]}`):null);return(r,s)=>n.value?(F(),be("p",{key:0,id:`${A(e).id}-error`},Te(n.value),9,cM)):je("",!0)}}),dM={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},f1=me({inheritAttrs:!1,__name:"Input",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},wrapperClass:{},descriptionClass:{},errorClass:{}},emits:["update:modelValue"],setup(t){const e=bi(t,["label","inputClass","wrapperClass","descriptionClass","errorClass"]),n=rl("$inputRef"),[r,s]=zx(),i=J(()=>wt("relative rounded-md shadow-2xs",{"mt-1":t.label},t.wrapperClass)),o=J(()=>wt("mt-2 text-sm text-gray-600",t.descriptionClass)),a=J(()=>wt("mt-2 text-sm text-red-600",t.errorClass)),l=J(()=>{var u,c,d;return wt("block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",{"focus:ring-primary-600":!((u=n.value)!=null&&u.errors),"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!((c=n.value)!=null&&c.errors),"pr-10 text-red-900 ring-red-900/10 placeholder:text-red-300 focus:ring-red-500":(d=n.value)==null?void 0:d.errors},t.inputClass)});return(u,c)=>(F(),ce(c1,Ue({ref:"$inputRef",label:u.label,class:A(s)},e,{"onUpdate:modelValue":c[0]||(c[0]=d=>u.$emit("update:modelValue",d))}),{default:se(()=>{var d;return[oe(Mh,{class:"block text-sm leading-6 font-medium text-gray-900"}),te("div",{class:Ve(i.value)},[oe(d1,Ue(A(r),{class:l.value}),null,16,["class"]),(d=n.value)!=null&&d.errors?(F(),be("div",dM,[oe(A(mm),{class:"size-5 text-red-500"})])):je("",!0)],2),oe(uM,{class:Ve(o.value)},null,8,["class"]),oe(Nh,{class:Ve(a.value)},null,8,["class"])]}),_:1},16,["label","class"]))}});function h1(t,e={}){return{default:t,type:"string",rules:["required",...e.rules??[]]}}function fM(t,e={}){return{default:t,type:"string",rules:e.rules}}function hM(t){const e=pm({draft:h1(t.defaultValue??"")}),n=J(()=>t.title??t.message),r=J(()=>t.title?t.message:null),s=J(()=>t.acceptText??Le("ui.accept","Ok")),i=J(()=>t.cancelText??Le("ui.cancel","Cancel"));return{form:e,renderedTitle:n,renderedMessage:r,renderedAcceptText:s,renderedCancelText:i}}const pM={class:"mt-4 flex flex-row-reverse gap-2"},mM=me({__name:"PromptModal",props:{title:{},message:{},label:{},defaultValue:{},placeholder:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"}},emits:["close"],setup(t,{expose:e}){const n=bi(t,["cancelVariant"]),{form:r,renderedTitle:s,renderedMessage:i,renderedAcceptText:o,renderedCancelText:a}=hM(n);return e(),(l,u)=>(F(),ce(Us,{title:A(s),persistent:""},{default:se(({close:c})=>[oe(gm,{form:A(r),onSubmit:d=>c(A(r).draft)},{default:se(()=>[A(i)?(F(),ce(Lt,{key:0,text:A(i)},null,8,["text"])):je("",!0),oe(f1,{name:"draft",class:"mt-2",placeholder:l.placeholder,label:l.label},null,8,["placeholder","label"]),te("div",pM,[oe(Ct,{variant:l.acceptVariant,submit:""},{default:se(()=>[rt(Te(A(o)),1)]),_:1},8,["variant"]),oe(Ct,{variant:l.cancelVariant,onClick:d=>c()},{default:se(()=>[rt(Te(A(a)),1)]),_:2},1032,["variant","onClick"])])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title"]))}}),gM={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function yM(t,e){return F(),be("svg",gM,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M12 21q-1.625 0-3.012-.8T6.8 18H4v-2h2.1q-.075-.5-.088-1T6 14H4v-2h2q0-.5.012-1t.088-1H4V8h2.8q.35-.575.788-1.075T8.6 6.05L7 4.4L8.4 3l2.15 2.15q.7-.225 1.425-.225t1.425.225L15.6 3L17 4.4l-1.65 1.65q.575.375 1.038.862T17.2 8H20v2h-2.1q.075.5.088 1T18 12h2v2h-2q0 .5-.013 1t-.087 1H20v2h-2.8q-.8 1.4-2.187 2.2T12 21m-2-5h4v-2h-4zm0-4h4v-2h-4z"},null,-1)]))}const vM=st({name:"material-symbols-bug-report",render:yM}),bM={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function wM(t,e){return F(),be("svg",bM,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6q-.425 0-.712-.288T4 5t.288-.712T5 4h4q0-.425.288-.712T10 3h4q.425 0 .713.288T15 4h4q.425 0 .713.288T20 5t-.288.713T19 6v13q0 .825-.587 1.413T17 21zm5-7.1l1.9 1.9q.275.275.7.275t.7-.275t.275-.7t-.275-.7l-1.9-1.9l1.9-1.9q.275-.275.275-.7t-.275-.7t-.7-.275t-.7.275L12 11.1l-1.9-1.9q-.275-.275-.7-.275t-.7.275t-.275.7t.275.7l1.9 1.9l-1.9 1.9q-.275.275-.275.7t.275.7t.7.275t.7-.275z"},null,-1)]))}const _M=st({name:"material-symbols-delete-forever-rounded",render:wM}),xM={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function EM(t,e){return F(),be("svg",xM,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M11.25 13.5q.95 0 1.6-.65t.65-1.6t-.65-1.6t-1.6-.65t-1.6.65t-.65 1.6t.65 1.6t1.6.65m4.825 4l-2.625-2.625q-.5.325-1.062.475t-1.138.15q-1.775 0-3.012-1.237T7 11.25t1.238-3.012T11.25 7t3.013 1.238T15.5 11.25q0 .575-.162 1.138t-.488 1.062l2.65 2.65zM5 21q-.825 0-1.412-.587T3 19v-4h2v4h4v2zm10 0v-2h4v-4h2v4q0 .825-.587 1.413T19 21zM3 9V5q0-.825.588-1.412T5 3h4v2H5v4zm16 0V5h-4V3h4q.825 0 1.413.588T21 5v4z"},null,-1)]))}const AM=st({name:"material-symbols-frame-inspect",render:EM}),SM={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function IM(t,e){return F(),be("svg",SM,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M12 20q-3.35 0-5.675-2.325T4 12t2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V5q0-.425.288-.712T19 4t.713.288T20 5v5q0 .425-.288.713T19 11h-5q-.425 0-.712-.288T13 10t.288-.712T14 9h3.2q-.8-1.4-2.187-2.2T12 6Q9.5 6 7.75 7.75T6 12t1.75 4.25T12 18q1.7 0 3.113-.862t2.187-2.313q.2-.35.563-.487t.737-.013q.4.125.575.525t-.025.75q-1.025 2-2.925 3.2T12 20"},null,-1)]))}const CM=st({name:"material-symbols-refresh-rounded",render:IM}),RM={class:"grid grow place-items-center"},TM={class:"flex flex-col items-center p-8"},OM={class:"mt-0 mb-0 text-center text-4xl font-medium text-red-600"},DM={class:"mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2 [&_button]:justify-start sm:[&_button]:size-32 sm:[&_button]:flex-col sm:[&_button]:justify-center [&_svg]:size-6 sm:[&_svg]:size-8"},kM=me({__name:"StartupCrash",setup(t){async function e(){await Ht.confirm(Le("startupCrash.purgeConfirmTitle","Delete everything?"),Le("startupCrash.purgeConfirmMessage",`If the problem persists, one drastic solution may be to wipe the storage in this device to start from scratch. However, keep in mind that **all the data that you haven't synchronized will be deleted forever**.

Do you still want to proceed?`),{acceptVariant:"danger",acceptText:Le("startupCrash.purgeConfirmAccept","Purge device")})&&(await Oc.purge(),await lt.reload())}return(n,r)=>{const s=sl("i-majesticons-exclamation");return F(),be("div",RM,[te("div",TM,[oe(s,{class:"size-20 text-red-600"}),te("h1",OM,Te(n.$td("startupCrash.title","Oops, something went wrong!")),1),oe(Lt,{text:n.$td("startupCrash.message","There was a problem starting the application, but here's some things you can do:"),class:"mt-4 text-center"},null,8,["text"]),te("div",DM,[oe(Ct,{variant:"danger",onClick:r[0]||(r[0]=i=>n.$app.reload())},{default:se(()=>[oe(A(CM)),rt(" "+Te(n.$td("startupCrash.reload","Try again")),1)]),_:1}),oe(Ct,{variant:"danger",onClick:r[1]||(r[1]=i=>n.$errors.inspect(n.$errors.startupErrors))},{default:se(()=>[oe(A(vM)),rt(" "+Te(n.$td("startupCrash.inspect","View error details")),1)]),_:1}),oe(Ct,{variant:"danger",onClick:r[2]||(r[2]=i=>e())},{default:se(()=>[oe(A(_M)),rt(" "+Te(n.$td("startupCrash.purge","Purge device")),1)]),_:1}),oe(Ct,{variant:"danger",onClick:r[3]||(r[3]=i=>n.$errors.debug=!n.$errors.debug)},{default:se(()=>[oe(A(AM)),rt(" "+Te(n.$td("startupCrash.debug","Toggle debugging")),1)]),_:1})])])])}}}),p1=me({__name:"HeadlessToastAction",props:{action:{}},setup(t){return(e,n)=>(F(),ce(js(e.action.dismiss?A(F$):"button"),{type:"button",onClick:e.action.click},{default:se(()=>[rt(Te(e.action.label),1)]),_:1},8,["onClick"]))}}),PM={key:0},$M=me({__name:"HeadlessToast",props:{message:{},actions:{},variant:{}},setup(t){return(e,n)=>(F(),ce(A(U$),null,{default:se(()=>[Ae(e.$slots,"default",{},()=>[e.message?(F(),be("span",PM,Te(e.message),1)):je("",!0),(F(!0),be(Ze,null,ln(e.actions,(r,s)=>(F(),ce(p1,{key:s,action:r},null,8,["action"]))),128))])]),_:3}))}}),LM=me({__name:"Toast",props:{message:{},actions:{},variant:{default:"secondary"},class:{}},setup(t,{expose:e}){const n=J(()=>Bx({baseClasses:t.class,variant:t.variant},{baseClasses:"flex items-center gap-2 rounded-md p-2 ring-1 shadow-lg border-gray-200",variants:{variant:{secondary:"bg-gray-900 text-white ring-black",danger:"bg-red-50 text-red-900 ring-red-100",warning:"bg-yellow-50 text-yellow-900 ring-yellow-100"}},defaultVariants:{variant:"secondary"}}));return e(),(r,s)=>(F(),ce($M,{class:Ve(n.value)},{default:se(()=>[r.message?(F(),ce(Lt,{key:0,text:r.message,inline:""},null,8,["text"])):je("",!0),(F(!0),be(Ze,null,ln(r.actions,(i,o)=>(F(),ce(Ct,{key:o,action:i,variant:r.variant,as:p1},null,8,["action","variant"]))),128))]),_:1},8,["class"]))}}),MM={$ui:Ht},NM={async install(t,e){const n={"alert-modal":w2,"confirm-modal":C2,"error-report-modal":Z2,"loading-modal":oM,"prompt-modal":mM,"startup-crash":kM,toast:LM,...e.components};for(const[r,s]of Object.entries(n))Ht.registerComponent(r,s);await Gi(t,MM)}},FM={async install(t,{formValidationRules:e}){for(const[n,r]of Object.entries(e??{}))Vx(n,r)}};async function jM(t,e={}){var n;const r=[l2,bL,a2,WL,EL,NM,FM,...e.plugins??[]];lt.instance=t,await Q$(r,t,e),await((n=e.install)==null?void 0:n.call(e,t)),await We.emit("application-ready")}async function UM(t,e={}){var n;const r=zI(t);fi()&&(window.$aerogel=r),await jM(r,e),r.mount("#app"),(n=r._container)==null||n.classList.remove("loading"),await We.emit("application-mounted")}const qM=me({__name:"AppToasts",setup(t){return(e,n)=>(F(),ce(A(S$),null,{default:se(()=>[(F(!0),be(Ze,null,ln(e.$ui.toasts,r=>(F(),ce(js(r.component),Ue({id:r.id,key:r.id},{ref_for:!0},r.properties),null,16,["id"]))),128)),oe(A(V$),{class:"fixed right-0 bottom-0 z-50 flex flex-col items-end space-y-4 px-4 py-6 sm:p-6"})]),_:1}))}}),BM=me({__name:"AppOverlays",setup(t){return(e,n)=>(F(),be(Ze,null,[oe(A(wT),{nested:""}),oe(qM)],64))}}),VM={class:"text-primary-text flex min-h-full flex-col text-base leading-tight font-normal antialiased"},zM=me({__name:"AppLayout",setup(t){return(e,n)=>(F(),be("div",VM,[e.$errors.hasStartupErrors?Ae(e.$slots,"startup-crash",{key:0},()=>[(F(),ce(js(e.$ui.requireComponent("startup-crash"))))]):Ae(e.$slots,"default",{key:1}),oe(BM)]))}}),HM={class:"group"},KM=me({__name:"Details",props:{label:{default:()=>{}},contentClass:{},summaryClass:{}},setup(t){const e=J(()=>wt("pt-2 pl-4",t.contentClass)),n=J(()=>wt("-ml-2 flex w-[max-content] items-center rounded-lg py-2 pr-3 pl-1 max-w-full","hover:bg-gray-100 focus-visible:outline focus-visible:outline-gray-700",t.summaryClass));return(r,s)=>(F(),be("details",HM,[te("summary",{class:Ve(n.value)},[oe(A(l1),{class:"size-6 transition-transform group-open:rotate-90"}),Ae(r.$slots,"label",{},()=>[te("span",null,Te(r.label??r.$td("ui.details","Details")),1)])],2),te("div",{class:Ve(e.value)},[Ae(r.$slots,"default")],2)]))}}),WM=me({__name:"AdvancedOptions",setup(t){return(e,n)=>(F(),ce(KM,{label:e.$td("ui.advancedOptions","Advanced options")},{default:se(()=>[Ae(e.$slots,"default")]),_:3},8,["label"]))}}),GM={class:"flex h-6 items-center"},Dd=me({inheritAttrs:!1,__name:"Checkbox",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},labelClass:{}},emits:["update:modelValue"],setup(t){const e=bi(t,["inputClass","labelClass"]),n=rl("$inputRef"),[r,s]=zx(),i=J(()=>wt("relative flex items-start",s.value)),o=J(()=>{var l,u;return wt("size-4 rounded text-primary-600 not-checked:hover:bg-gray-200 checked:hover:text-primary-500 checked:border-0",{"border-gray-300 focus:ring-primary-600":!((l=n.value)!=null&&l.errors),"border-red-400 border-2 focus:ring-red-600":(u=n.value)==null?void 0:u.errors},t.inputClass)}),a=J(()=>wt("ml-2 text-sm leading-6",t.labelClass));return(l,u)=>(F(),ce(c1,Ue({ref:"$inputRef",class:i.value},e,{"onUpdate:modelValue":u[0]||(u[0]=c=>l.$emit("update:modelValue",c))}),{default:se(()=>[te("div",GM,[oe(d1,Ue(A(r),{type:"checkbox",class:o.value}),null,16,["class"])]),l.$slots.default?(F(),be("div",{key:0,class:Ve(a.value)},[oe(Mh,{class:"text-gray-900"},{default:se(()=>[Ae(l.$slots,"default")]),_:3}),oe(Nh,{class:"text-red-600"})],2)):l.label?(F(),be("div",{key:1,class:Ve(a.value)},[oe(Mh,{class:"text-gray-900"}),oe(Nh,{class:"text-red-600"})],2)):je("",!0)]),_:3},16,["class"]))}}),JM=me({__name:"DropdownMenuOption",props:{class:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t){const e=bi(t,["class"]),n=J(()=>wt("flex w-full items-center gap-2 rounded-lg px-2 py-2 text-sm text-gray-900 data-[highlighted]:bg-gray-100",t.class));return(r,s)=>(F(),ce(A(SP),Ue({class:n.value},e,{onSelect:s[0]||(s[0]=i=>r.$emit("select"))}),{default:se(()=>[Ae(r.$slots,"default")]),_:3},16,["class"]))}}),XM=me({__name:"DropdownMenuOptions",setup(t){const e=Jn("dropdown-menu","<DropdownMenuOptions> must be a child of a <DropdownMenu>");return(n,r)=>(F(),ce(A(EP),{class:"gap-y-0.5 rounded-lg bg-white p-1.5 shadow-lg ring-1 ring-black/5",align:A(e).align,side:A(e).side},{default:se(()=>[Ae(n.$slots,"default",{},()=>[(F(!0),be(Ze,null,ln(A(e).options,(s,i)=>(F(),ce(JM,Ue({key:i,as:s.route||s.href?Zx:void 0,class:s.class},{ref_for:!0},s.route||s.href?{href:s.href,route:s.route,routeParams:s.routeParams,routeQuery:s.routeQuery}:{},{onSelect:o=>{var a;return(a=s.click)==null?void 0:a.call(s)}}),{default:se(()=>[rt(Te(s.label),1)]),_:2},1040,["as","class","onSelect"]))),128))])]),_:3},8,["align","side"]))}}),YM=me({__name:"DropdownMenu",props:{align:{},side:{},options:{}},setup(t,{expose:e}){const n={align:t.align,side:t.side,options:J(()=>{var r;return(r=t.options)==null?void 0:r.filter(Boolean)})};return _r("dropdown-menu",n),e(n),(r,s)=>(F(),ce(A(_P),null,{default:se(()=>[oe(A(TP),null,{default:se(()=>[Ae(r.$slots,"default")]),_:3}),oe(A(CP),null,{default:se(()=>[Ae(r.$slots,"options",{},()=>[oe(XM)])]),_:3})]),_:3}))}}),QM=["aria-hidden"],ZM=["tabindex","aria-label","type"],eN=me({__name:"EditableContent",props:{type:{default:"text"},contentClass:{},ariaLabel:{},formAriaHidden:{type:Boolean},tabindex:{},text:{},disabled:{type:Boolean}},emits:["update","save"],setup(t,{emit:e}){const n=e,r=rl("$inputRef"),s=_e(null),i=_e(t.text),o=J(()=>wt("inline whitespace-pre",t.contentClass)),a=J(()=>wt("invisible whitespace-pre",t.contentClass)),l=J(()=>wt("absolute inset-0 h-full w-full resize-none border-0 bg-transparent p-0 focus:ring-0",t.contentClass));function u(){s.value=t.text}function c(){s.value&&(t.type!=="number"&&i.value.trim().length===0&&(i.value=s.value,n("update",i.value)),s.value=null,n("save"))}return qt(()=>i.value=t.text),(d,f)=>(F(),be("div",{class:Ve(["relative",{"pointer-events-none!":d.disabled&&!s.value}])},[s.value?(F(),be("span",{key:1,class:Ve(a.value)},Te(i.value),3)):(F(),be("div",{key:0,class:Ve(o.value)},[Ae(d.$slots,"default")],2)),d.type==="number"?(F(),be("span",{key:2,class:Ve(["inline-block transition-[width]",s.value?"w-5":"w-0"])},null,2)):je("",!0),te("form",{class:"w-full","aria-hidden":d.formAriaHidden,onSubmit:f[4]||(f[4]=Mn(h=>{var m;return(m=r.value)==null?void 0:m.blur()},["prevent"]))},[Ts(te("input",{ref:"$inputRef","onUpdate:modelValue":f[0]||(f[0]=h=>i.value=h),tabindex:d.tabindex??void 0,"aria-label":d.ariaLabel??void 0,type:d.type,class:Ve([l.value,{"opacity-0":!s.value,"appearance-textfield":!s.value&&d.type==="number"}]),onKeyup:f[1]||(f[1]=h=>d.$emit("update",i.value)),onFocus:f[2]||(f[2]=h=>u()),onBlur:f[3]||(f[3]=h=>c())},null,42,ZM),[[Ia,i.value]])],40,QM)],2))}}),tN={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function nN(t,e){return F(),be("svg",tN,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M449.07 399.08L278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17m-198.6-1.83a20 20 0 1 1 20-20a20 20 0 0 1-20 20m21.72-201.15l-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7Z"},null,-1)]))}const rN=st({name:"ion-warning",render:nN}),sN={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function iN(t,e){return F(),be("svg",sN,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10m9.8 4a4 4 0 1 0 0-8a4 4 0 0 0 0 8m0-2a2 2 0 1 1 0-4a2 2 0 0 1 0 4"},null,-1)]))}const oN=st({name:"zondicons-view-show",render:iN}),aN={class:"font-medium"},lN=["datetime"],uN=me({__name:"ErrorLogsModal",setup(t){return(e,n)=>(F(),ce(Us,{title:e.$td("errors.report","Errors ({count})",{count:e.$errors.logs.length})},{default:se(()=>[te("ol",null,[(F(!0),be(Ze,null,ln(e.$errors.logs,(r,s)=>(F(),be("li",{key:s,class:"mb-2 flex max-w-prose min-w-56 justify-between py-2 last:mb-0"},[te("div",null,[te("h3",aN,Te(r.report.title),1),te("time",{datetime:r.date.toISOString(),class:"text-xs text-gray-700"},Te(r.date.toLocaleTimeString()),9,lN),oe(Lt,{class:"text-sm text-gray-500",text:r.report.description??A(Xx)(r.report)},null,8,["text"])]),oe(Ct,{size:"icon",variant:"ghost","aria-label":e.$td("errors.viewDetails","View details"),title:e.$td("errors.viewDetails","View details"),class:"self-center",onClick:i=>e.$errors.inspect(r.report,e.$errors.logs.map(({report:o})=>o))},{default:se(()=>[oe(A(oN),{class:"size-4","aria-hidden":"true"})]),_:2},1032,["aria-label","title","onClick"])]))),128))])]),_:1},8,["title"]))}}),cN=me({__name:"ErrorLogs",setup(t){return(e,n)=>e.$errors.logs.length>0?(F(),ce(Ct,{key:0,size:"icon",variant:"ghost",title:e.$td("errors.viewLogs","View error logs"),"aria-label":e.$td("errors.viewLogs","View error logs"),onClick:n[0]||(n[0]=r=>e.$ui.modal(uN))},{default:se(()=>[oe(A(rN),{class:"size-6 text-red-500"})]),_:1},8,["title","aria-label"])):je("",!0)}}),Po=me({__name:"Link",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(F(),ce(Ct,Ue({variant:"link"},e.$props),{default:se(()=>[Ae(e.$slots,"default")]),_:3},16))}}),m1=me({__name:"SettingsModal",setup(t){const e=J(()=>Ra(lt.settings,"priority","desc"));return(n,r)=>(F(),ce(Us,{title:n.$td("settings.title","Settings"),"fullscreen-on-mobile":n.$app.settingsFullscreenOnMobile},{default:se(()=>[(F(!0),be(Ze,null,ln(e.value,(s,i)=>(F(),ce(js(s.component),{key:i}))),128))]),_:1},8,["title","fullscreen-on-mobile"]))}});class ym{constructor(){pt(this,"status"),pt(this,"_listeners"),pt(this,"_progress"),pt(this,"_cancelled"),pt(this,"_started"),pt(this,"_completed"),this.status=this.getInitialStatus(),this._listeners=new o0,this._started=new Nr,this._completed=new Nr}async start(){this.beforeStart(),this._started.resolve();try{await this.updateProgress(),await this.run(),await this.updateProgress(),this._completed.resolve()}catch(e){if(e instanceof dv)return;throw Ne(gC(e),n=>{this._completed.reject(n)})}}async cancel(){this._cancelled=new Nr,await this._cancelled}serialize(){return this.serializeStatus(this.status)}get listeners(){return this._listeners}get progress(){return this._progress??0}get cancelled(){var e;return!!((e=this._cancelled)!=null&&e.isResolved())}get started(){return this._started}get completed(){return this._completed}getInitialStatus(){return{completed:!1}}beforeStart(){if(this._started.isResolved()){if(this._cancelled){delete this._progress,delete this._cancelled;return}throw new Error("Job already started!")}}assertNotCancelled(){if(this._cancelled)throw this._cancelled.resolve(),new dv}calculateCurrentProgress(e){return e??(e=this.status),e.completed?1:!e.children||e.children.length===0?0:p0(e.children.reduce((n,r)=>n+this.calculateCurrentProgress(r),0)/e.children.length,2)}async updateProgress(e){await(e==null?void 0:e(this.status));const n=this.calculateCurrentProgress();n!==this._progress&&(this._progress=n,await this._listeners.emit("onUpdated",n))}serializeStatus(e){return{...e}}}async function kd(t){await t.start()}/*!
  * shared v11.2.8
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function dN(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Mu=typeof window<"u",xi=(t,e=!1)=>e?Symbol.for(t):Symbol(t),fN=(t,e,n)=>hN({l:t,k:e,s:n}),hN=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Qt=t=>typeof t=="number"&&isFinite(t),pN=t=>bm(t)==="[object Date]",Nu=t=>bm(t)==="[object RegExp]",kc=t=>ot(t)&&Object.keys(t).length===0,on=Object.assign,mN=Object.create,_t=(t=null)=>mN(t);let fv;const vm=()=>fv||(fv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:_t());function hv(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function pv(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function gN(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(r,s,i)=>`${s}="${pv(i)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(r,s,i)=>`${s}='${pv(i)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(r=>{t=t.replace(r,"$1javascript&#58;")}),t}const yN=Object.prototype.hasOwnProperty;function $r(t,e){return yN.call(t,e)}const Kt=Array.isArray,Mt=t=>typeof t=="function",ke=t=>typeof t=="string",Nt=t=>typeof t=="boolean",ut=t=>t!==null&&typeof t=="object",vN=t=>ut(t)&&Mt(t.then)&&Mt(t.catch),g1=Object.prototype.toString,bm=t=>g1.call(t),ot=t=>bm(t)==="[object Object]",bN=t=>t==null?"":Kt(t)||ot(t)&&t.toString===g1?JSON.stringify(t,null,2):String(t);function wm(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const Ml=t=>!ut(t)||Kt(t);function iu(t,e){if(Ml(t)||Ml(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{i!=="__proto__"&&(ut(r[i])&&!ut(s[i])&&(s[i]=Array.isArray(r[i])?[]:_t()),Ml(s[i])||Ml(r[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]}))})}}/*!
  * message-compiler v11.2.8
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function wN(t,e,n){return{line:t,column:e,offset:n}}function Fh(t,e,n){return{start:t,end:e}}const dt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},_N=17;function Pc(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function xN(t){throw t}const Jr=" ",EN="\r",_n=`
`,AN="\u2028",SN="\u2029";function IN(t){const e=t;let n=0,r=1,s=1,i=0;const o=C=>e[C]===EN&&e[C+1]===_n,a=C=>e[C]===_n,l=C=>e[C]===SN,u=C=>e[C]===AN,c=C=>o(C)||a(C)||l(C)||u(C),d=()=>n,f=()=>r,h=()=>s,m=()=>i,g=C=>o(C)||l(C)||u(C)?_n:e[C],x=()=>g(n),b=()=>g(n+i);function E(){return i=0,c(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function _(){return o(n+i)&&i++,i++,e[n+i]}function p(){n=0,r=1,s=1,i=0}function v(C=0){i=C}function S(){const C=n+i;for(;C!==n;)E();i=0}return{index:d,line:f,column:h,peekOffset:m,charAt:g,currentChar:x,currentPeek:b,next:E,peek:_,reset:p,resetPeek:v,skipToPeek:S}}const ys=void 0,CN=".",mv="'",RN="tokenizer";function TN(t,e={}){const n=e.location!==!1,r=IN(t),s=()=>r.index(),i=()=>wN(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:13,offset:a,startLoc:o,endLoc:o,lastType:13,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=e;function d(N,j,ee,...le){const Ie=u();if(j.column+=ee,j.offset+=ee,c){const xe=n?Fh(Ie.startLoc,j):null,ne=Pc(N,xe,{domain:RN,args:le});c(ne)}}function f(N,j,ee){N.endLoc=i(),N.currentType=j;const le={type:j};return n&&(le.loc=Fh(N.startLoc,N.endLoc)),ee!=null&&(le.value=ee),le}const h=N=>f(N,13);function m(N,j){return N.currentChar()===j?(N.next(),j):(d(dt.EXPECTED_TOKEN,i(),0,j),"")}function g(N){let j="";for(;N.currentPeek()===Jr||N.currentPeek()===_n;)j+=N.currentPeek(),N.peek();return j}function x(N){const j=g(N);return N.skipToPeek(),j}function b(N){if(N===ys)return!1;const j=N.charCodeAt(0);return j>=97&&j<=122||j>=65&&j<=90||j===95}function E(N){if(N===ys)return!1;const j=N.charCodeAt(0);return j>=48&&j<=57}function _(N,j){const{currentType:ee}=j;if(ee!==2)return!1;g(N);const le=b(N.currentPeek());return N.resetPeek(),le}function p(N,j){const{currentType:ee}=j;if(ee!==2)return!1;g(N);const le=N.currentPeek()==="-"?N.peek():N.currentPeek(),Ie=E(le);return N.resetPeek(),Ie}function v(N,j){const{currentType:ee}=j;if(ee!==2)return!1;g(N);const le=N.currentPeek()===mv;return N.resetPeek(),le}function S(N,j){const{currentType:ee}=j;if(ee!==7)return!1;g(N);const le=N.currentPeek()===".";return N.resetPeek(),le}function C(N,j){const{currentType:ee}=j;if(ee!==8)return!1;g(N);const le=b(N.currentPeek());return N.resetPeek(),le}function R(N,j){const{currentType:ee}=j;if(!(ee===7||ee===11))return!1;g(N);const le=N.currentPeek()===":";return N.resetPeek(),le}function T(N,j){const{currentType:ee}=j;if(ee!==9)return!1;const le=()=>{const xe=N.currentPeek();return xe==="{"?b(N.peek()):xe==="@"||xe==="|"||xe===":"||xe==="."||xe===Jr||!xe?!1:xe===_n?(N.peek(),le()):U(N,!1)},Ie=le();return N.resetPeek(),Ie}function D(N){g(N);const j=N.currentPeek()==="|";return N.resetPeek(),j}function U(N,j=!0){const ee=(Ie=!1,xe="")=>{const ne=N.currentPeek();return ne==="{"||ne==="@"||!ne?Ie:ne==="|"?!(xe===Jr||xe===_n):ne===Jr?(N.peek(),ee(!0,Jr)):ne===_n?(N.peek(),ee(!0,_n)):!0},le=ee();return j&&N.resetPeek(),le}function z(N,j){const ee=N.currentChar();return ee===ys?ys:j(ee)?(N.next(),ee):null}function V(N){const j=N.charCodeAt(0);return j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||j===95||j===36}function P(N){return z(N,V)}function X(N){const j=N.charCodeAt(0);return j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||j===95||j===36||j===45}function O(N){return z(N,X)}function H(N){const j=N.charCodeAt(0);return j>=48&&j<=57}function q(N){return z(N,H)}function ie(N){const j=N.charCodeAt(0);return j>=48&&j<=57||j>=65&&j<=70||j>=97&&j<=102}function B(N){return z(N,ie)}function ue(N){let j="",ee="";for(;j=q(N);)ee+=j;return ee}function de(N){let j="";for(;;){const ee=N.currentChar();if(ee==="{"||ee==="}"||ee==="@"||ee==="|"||!ee)break;if(ee===Jr||ee===_n)if(U(N))j+=ee,N.next();else{if(D(N))break;j+=ee,N.next()}else j+=ee,N.next()}return j}function ye(N){x(N);let j="",ee="";for(;j=O(N);)ee+=j;const le=N.currentChar();if(le&&le!=="}"&&le!==ys&&le!==Jr&&le!==_n&&le!==""){const Ie=re(N);return d(dt.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,ee+Ie),ee+Ie}return N.currentChar()===ys&&d(dt.UNTERMINATED_CLOSING_BRACE,i(),0),ee}function Se(N){x(N);let j="";return N.currentChar()==="-"?(N.next(),j+=`-${ue(N)}`):j+=ue(N),N.currentChar()===ys&&d(dt.UNTERMINATED_CLOSING_BRACE,i(),0),j}function G(N){return N!==mv&&N!==_n}function W(N){x(N),m(N,"'");let j="",ee="";for(;j=z(N,G);)j==="\\"?ee+=$(N):ee+=j;const le=N.currentChar();return le===_n||le===ys?(d(dt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),le===_n&&(N.next(),m(N,"'")),ee):(m(N,"'"),ee)}function $(N){const j=N.currentChar();switch(j){case"\\":case"'":return N.next(),`\\${j}`;case"u":return Z(N,j,4);case"U":return Z(N,j,6);default:return d(dt.UNKNOWN_ESCAPE_SEQUENCE,i(),0,j),""}}function Z(N,j,ee){m(N,j);let le="";for(let Ie=0;Ie<ee;Ie++){const xe=B(N);if(!xe){d(dt.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${j}${le}${N.currentChar()}`);break}le+=xe}return`\\${j}${le}`}function ae(N){return N!=="{"&&N!=="}"&&N!==Jr&&N!==_n}function re(N){x(N);let j="",ee="";for(;j=z(N,ae);)ee+=j;return ee}function Ee(N){let j="",ee="";for(;j=P(N);)ee+=j;return ee}function L(N){const j=ee=>{const le=N.currentChar();return le==="{"||le==="@"||le==="|"||le==="("||le===")"||!le||le===Jr?ee:(ee+=le,N.next(),j(ee))};return j("")}function k(N){x(N);const j=m(N,"|");return x(N),j}function K(N,j){let ee=null;switch(N.currentChar()){case"{":return j.braceNest>=1&&d(dt.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),N.next(),ee=f(j,2,"{"),x(N),j.braceNest++,ee;case"}":return j.braceNest>0&&j.currentType===2&&d(dt.EMPTY_PLACEHOLDER,i(),0),N.next(),ee=f(j,3,"}"),j.braceNest--,j.braceNest>0&&x(N),j.inLinked&&j.braceNest===0&&(j.inLinked=!1),ee;case"@":return j.braceNest>0&&d(dt.UNTERMINATED_CLOSING_BRACE,i(),0),ee=he(N,j)||h(j),j.braceNest=0,ee;default:{let Ie=!0,xe=!0,ne=!0;if(D(N))return j.braceNest>0&&d(dt.UNTERMINATED_CLOSING_BRACE,i(),0),ee=f(j,1,k(N)),j.braceNest=0,j.inLinked=!1,ee;if(j.braceNest>0&&(j.currentType===4||j.currentType===5||j.currentType===6))return d(dt.UNTERMINATED_CLOSING_BRACE,i(),0),j.braceNest=0,ve(N,j);if(Ie=_(N,j))return ee=f(j,4,ye(N)),x(N),ee;if(xe=p(N,j))return ee=f(j,5,Se(N)),x(N),ee;if(ne=v(N,j))return ee=f(j,6,W(N)),x(N),ee;if(!Ie&&!xe&&!ne)return ee=f(j,12,re(N)),d(dt.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,ee.value),x(N),ee;break}}return ee}function he(N,j){const{currentType:ee}=j;let le=null;const Ie=N.currentChar();switch((ee===7||ee===8||ee===11||ee===9)&&(Ie===_n||Ie===Jr)&&d(dt.INVALID_LINKED_FORMAT,i(),0),Ie){case"@":return N.next(),le=f(j,7,"@"),j.inLinked=!0,le;case".":return x(N),N.next(),f(j,8,".");case":":return x(N),N.next(),f(j,9,":");default:return D(N)?(le=f(j,1,k(N)),j.braceNest=0,j.inLinked=!1,le):S(N,j)||R(N,j)?(x(N),he(N,j)):C(N,j)?(x(N),f(j,11,Ee(N))):T(N,j)?(x(N),Ie==="{"?K(N,j)||le:f(j,10,L(N))):(ee===7&&d(dt.INVALID_LINKED_FORMAT,i(),0),j.braceNest=0,j.inLinked=!1,ve(N,j))}}function ve(N,j){let ee={type:13};if(j.braceNest>0)return K(N,j)||h(j);if(j.inLinked)return he(N,j)||h(j);switch(N.currentChar()){case"{":return K(N,j)||h(j);case"}":return d(dt.UNBALANCED_CLOSING_BRACE,i(),0),N.next(),f(j,3,"}");case"@":return he(N,j)||h(j);default:{if(D(N))return ee=f(j,1,k(N)),j.braceNest=0,j.inLinked=!1,ee;if(U(N))return f(j,0,de(N));break}}return ee}function ge(){const{currentType:N,offset:j,startLoc:ee,endLoc:le}=l;return l.lastType=N,l.lastOffset=j,l.lastStartLoc=ee,l.lastEndLoc=le,l.offset=s(),l.startLoc=i(),r.currentChar()===ys?f(l,13):ve(r,l)}return{nextToken:ge,currentOffset:s,currentPosition:i,context:u}}const ON="parser",DN=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function kN(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function PN(t={}){const e=t.location!==!1,{onError:n}=t;function r(b,E,_,p,...v){const S=b.currentPosition();if(S.offset+=p,S.column+=p,n){const C=e?Fh(_,S):null,R=Pc(E,C,{domain:ON,args:v});n(R)}}function s(b,E,_){const p={type:b};return e&&(p.start=E,p.end=E,p.loc={start:_,end:_}),p}function i(b,E,_,p){e&&(b.end=E,b.loc&&(b.loc.end=_))}function o(b,E){const _=b.context(),p=s(3,_.offset,_.startLoc);return p.value=E,i(p,b.currentOffset(),b.currentPosition()),p}function a(b,E){const _=b.context(),{lastOffset:p,lastStartLoc:v}=_,S=s(5,p,v);return S.index=parseInt(E,10),b.nextToken(),i(S,b.currentOffset(),b.currentPosition()),S}function l(b,E){const _=b.context(),{lastOffset:p,lastStartLoc:v}=_,S=s(4,p,v);return S.key=E,b.nextToken(),i(S,b.currentOffset(),b.currentPosition()),S}function u(b,E){const _=b.context(),{lastOffset:p,lastStartLoc:v}=_,S=s(9,p,v);return S.value=E.replace(DN,kN),b.nextToken(),i(S,b.currentOffset(),b.currentPosition()),S}function c(b){const E=b.nextToken(),_=b.context(),{lastOffset:p,lastStartLoc:v}=_,S=s(8,p,v);return E.type!==11?(r(b,dt.UNEXPECTED_EMPTY_LINKED_MODIFIER,_.lastStartLoc,0),S.value="",i(S,p,v),{nextConsumeToken:E,node:S}):(E.value==null&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(E)),S.value=E.value||"",i(S,b.currentOffset(),b.currentPosition()),{node:S})}function d(b,E){const _=b.context(),p=s(7,_.offset,_.startLoc);return p.value=E,i(p,b.currentOffset(),b.currentPosition()),p}function f(b){const E=b.context(),_=s(6,E.offset,E.startLoc);let p=b.nextToken();if(p.type===8){const v=c(b);_.modifier=v.node,p=v.nextConsumeToken||b.nextToken()}switch(p.type!==9&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xr(p)),p=b.nextToken(),p.type===2&&(p=b.nextToken()),p.type){case 10:p.value==null&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xr(p)),_.key=d(b,p.value||"");break;case 4:p.value==null&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xr(p)),_.key=l(b,p.value||"");break;case 5:p.value==null&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xr(p)),_.key=a(b,p.value||"");break;case 6:p.value==null&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xr(p)),_.key=u(b,p.value||"");break;default:{r(b,dt.UNEXPECTED_EMPTY_LINKED_KEY,E.lastStartLoc,0);const v=b.context(),S=s(7,v.offset,v.startLoc);return S.value="",i(S,v.offset,v.startLoc),_.key=S,i(_,v.offset,v.startLoc),{nextConsumeToken:p,node:_}}}return i(_,b.currentOffset(),b.currentPosition()),{node:_}}function h(b){const E=b.context(),_=E.currentType===1?b.currentOffset():E.offset,p=E.currentType===1?E.endLoc:E.startLoc,v=s(2,_,p);v.items=[];let S=null;do{const T=S||b.nextToken();switch(S=null,T.type){case 0:T.value==null&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xr(T)),v.items.push(o(b,T.value||""));break;case 5:T.value==null&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xr(T)),v.items.push(a(b,T.value||""));break;case 4:T.value==null&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xr(T)),v.items.push(l(b,T.value||""));break;case 6:T.value==null&&r(b,dt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xr(T)),v.items.push(u(b,T.value||""));break;case 7:{const D=f(b);v.items.push(D.node),S=D.nextConsumeToken||null;break}}}while(E.currentType!==13&&E.currentType!==1);const C=E.currentType===1?E.lastOffset:b.currentOffset(),R=E.currentType===1?E.lastEndLoc:b.currentPosition();return i(v,C,R),v}function m(b,E,_,p){const v=b.context();let S=p.items.length===0;const C=s(1,E,_);C.cases=[],C.cases.push(p);do{const R=h(b);S||(S=R.items.length===0),C.cases.push(R)}while(v.currentType!==13);return S&&r(b,dt.MUST_HAVE_MESSAGES_IN_PLURAL,_,0),i(C,b.currentOffset(),b.currentPosition()),C}function g(b){const E=b.context(),{offset:_,startLoc:p}=E,v=h(b);return E.currentType===13?v:m(b,_,p,v)}function x(b){const E=TN(b,on({},t)),_=E.context(),p=s(0,_.offset,_.startLoc);return e&&p.loc&&(p.loc.source=b),p.body=g(E),t.onCacheKey&&(p.cacheKey=t.onCacheKey(b)),_.currentType!==13&&r(E,dt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,b[_.offset]||""),i(p,E.currentOffset(),E.currentPosition()),p}return{parse:x}}function Xr(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function $N(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function gv(t,e){for(let n=0;n<t.length;n++)_m(t[n],e)}function _m(t,e){switch(t.type){case 1:gv(t.cases,e),e.helper("plural");break;case 2:gv(t.items,e);break;case 6:{_m(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function LN(t,e={}){const n=$N(t);n.helper("normalize"),t.body&&_m(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function MN(t){const e=t.body;return e.type===2?yv(e):e.cases.forEach(n=>yv(n)),t}function yv(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=wm(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}function ao(t){switch(t.t=t.type,t.type){case 0:{const e=t;ao(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)ao(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)ao(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;ao(e.key),e.k=e.key,delete e.key,e.modifier&&(ao(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function NN(t,e){const{filename:n,breakLineCode:r,needIndent:s}=e,i=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};i&&t.loc&&(o.source=t.loc.source);const a=()=>o;function l(g,x){o.code+=g}function u(g,x=!0){const b=x?r:"";l(s?b+"  ".repeat(g):b)}function c(g=!0){const x=++o.indentLevel;g&&u(x)}function d(g=!0){const x=--o.indentLevel;g&&u(x)}function f(){u(o.indentLevel)}return{context:a,push:l,indent:c,deindent:d,newline:f,helper:g=>`_${g}`,needIndent:()=>o.needIndent}}function FN(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),$o(t,e.key),e.modifier?(t.push(", "),$o(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function jN(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&($o(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function UN(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&($o(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function qN(t,e){e.body?$o(t,e.body):t.push("null")}function $o(t,e){const{helper:n}=t;switch(e.type){case 0:qN(t,e);break;case 1:UN(t,e);break;case 2:jN(t,e);break;case 6:FN(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const BN=(t,e={})=>{const n=ke(e.mode)?e.mode:"normal",r=ke(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",o=t.helpers||[],a=NN(t,{filename:r,breakLineCode:s,needIndent:i});a.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(i),o.length>0&&(a.push(`const { ${wm(o.map(c=>`${c}: _${c}`),", ")} } = ctx`),a.newline()),a.push("return "),$o(a,t),a.deindent(i),a.push("}"),delete t.helpers;const{code:l,map:u}=a.context();return{ast:t,code:l,map:u?u.toJSON():void 0}};function VN(t,e={}){const n=on({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=PN(n).parse(t);return r?(i&&MN(a),s&&ao(a),{ast:a,code:""}):(LN(a,n),BN(a,n))}/*!
  * core-base v11.2.8
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function zN(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(vm().__INTLIFY_PROD_DEVTOOLS__=!1)}function ss(t){return ut(t)&&xm(t)===0&&($r(t,"b")||$r(t,"body"))}const y1=["b","body"];function HN(t){return Ei(t,y1)}const v1=["c","cases"];function KN(t){return Ei(t,v1,[])}const b1=["s","static"];function WN(t){return Ei(t,b1)}const w1=["i","items"];function GN(t){return Ei(t,w1,[])}const _1=["t","type"];function xm(t){return Ei(t,_1)}const x1=["v","value"];function Nl(t,e){const n=Ei(t,x1);if(n!=null)return n;throw Wa(e)}const E1=["m","modifier"];function JN(t){return Ei(t,E1)}const A1=["k","key"];function XN(t){const e=Ei(t,A1);if(e)return e;throw Wa(6)}function Ei(t,e,n){for(let r=0;r<e.length;r++){const s=e[r];if($r(t,s)&&t[s]!=null)return t[s]}return n}const S1=[...y1,...v1,...b1,...w1,...A1,...E1,...x1,..._1];function Wa(t){return new Error(`unhandled node type: ${t}`)}function Pd(t){return n=>YN(n,t)}function YN(t,e){const n=HN(e);if(n==null)throw Wa(0);if(xm(n)===1){const i=KN(n);return t.plural(i.reduce((o,a)=>[...o,vv(t,a)],[]))}else return vv(t,n)}function vv(t,e){const n=WN(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=GN(e).reduce((s,i)=>[...s,jh(t,i)],[]);return t.normalize(r)}}function jh(t,e){const n=xm(e);switch(n){case 3:return Nl(e,n);case 9:return Nl(e,n);case 4:{const r=e;if($r(r,"k")&&r.k)return t.interpolate(t.named(r.k));if($r(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw Wa(n)}case 5:{const r=e;if($r(r,"i")&&Qt(r.i))return t.interpolate(t.list(r.i));if($r(r,"index")&&Qt(r.index))return t.interpolate(t.list(r.index));throw Wa(n)}case 6:{const r=e,s=JN(r),i=XN(r);return t.linked(jh(t,i),s?jh(t,s):void 0,t.type)}case 7:return Nl(e,n);case 8:return Nl(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const QN=t=>t;let Fl=_t();function ZN(t,e={}){let n=!1;const r=e.onError||xN;return e.onError=s=>{n=!0,r(s)},{...VN(t,e),detectError:n}}function eF(t,e){if(ke(t)){Nt(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||QN)(t),s=Fl[r];if(s)return s;const{ast:i,detectError:o}=ZN(t,{...e,location:!1,jit:!0}),a=Pd(i);return o?a:Fl[r]=a}else{const n=t.cacheKey;if(n){const r=Fl[n];return r||(Fl[n]=Pd(t))}else return Pd(t)}}let Ga=null;function tF(t){Ga=t}function nF(t,e,n){Ga&&Ga.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const rF=sF("function:translate");function sF(t){return e=>Ga&&Ga.emit(t,e)}const Ss={INVALID_ARGUMENT:_N,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},iF=24;function Is(t){return Pc(t,null,void 0)}function Em(t,e){return e.locale!=null?bv(e.locale):bv(t.locale)}let $d;function bv(t){if(ke(t))return t;if(Mt(t)){if(t.resolvedOnce&&$d!=null)return $d;if(t.constructor.name==="Function"){const e=t();if(vN(e))throw Is(Ss.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return $d=e}else throw Is(Ss.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Is(Ss.NOT_SUPPORT_LOCALE_TYPE)}function oF(t,e,n){return[...new Set([n,...Kt(e)?e:ut(e)?Object.keys(e):ke(e)?[e]:[n]])]}function I1(t,e,n){const r=ke(n)?n:Fu,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;Kt(o);)o=wv(i,o,e);const a=Kt(e)||!ot(e)?e:e.default?e.default:null;o=ke(a)?[a]:a,Kt(o)&&wv(i,o,!1),s.__localeChainCache.set(r,i)}return i}function wv(t,e,n){let r=!0;for(let s=0;s<e.length&&Nt(r);s++){const i=e[s];ke(i)&&(r=aF(t,e[s],n))}return r}function aF(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=lF(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function lF(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(Kt(n)||ot(n))&&n[s]&&(r=n[s])}return r}const Ai=[];Ai[0]={w:[0],i:[3,0],"[":[4],o:[7]};Ai[1]={w:[1],".":[2],"[":[4],o:[7]};Ai[2]={w:[2],i:[3,0],0:[3,0]};Ai[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Ai[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Ai[5]={"'":[4,0],o:8,l:[5,0]};Ai[6]={'"':[4,0],o:8,l:[6,0]};const uF=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function cF(t){return uF.test(t)}function dF(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function fF(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function hF(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:cF(e)?dF(e):"*"+e}function pF(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,u,c,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,o===void 0||(o=hF(o),o===!1))return!1;f[1]()}};function h(){const m=t[n+1];if(r===5&&m==="'"||r===6&&m==='"')return n++,a="\\"+m,f[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&h())){if(l=fF(i),d=Ai[r],u=d[l]||d.l||8,u===8||(r=u[0],u[1]!==void 0&&(c=f[u[1]],c&&(a=i,c()===!1))))return;if(r===7)return e}}const _v=new Map;function mF(t,e){return ut(t)?t[e]:null}function gF(t,e){if(!ut(t))return null;let n=_v.get(e);if(n||(n=pF(e),n&&_v.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=n[i];if(S1.includes(o)&&ss(s))return null;const a=s[o];if(a===void 0||Mt(s))return null;s=a,i++}return s}const yF="11.2.8",$c=-1,Fu="en-US",xv="",Ev=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function vF(){return{upper:(t,e)=>e==="text"&&ke(t)?t.toUpperCase():e==="vnode"&&ut(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&ke(t)?t.toLowerCase():e==="vnode"&&ut(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&ke(t)?Ev(t):e==="vnode"&&ut(t)&&"__v_isVNode"in t?Ev(t.children):t}}let C1;function bF(t){C1=t}let R1;function wF(t){R1=t}let T1;function _F(t){T1=t}let O1=null;const xF=t=>{O1=t},EF=()=>O1;let D1=null;const Av=t=>{D1=t},AF=()=>D1;let Sv=0;function SF(t={}){const e=Mt(t.onWarn)?t.onWarn:dN,n=ke(t.version)?t.version:yF,r=ke(t.locale)||Mt(t.locale)?t.locale:Fu,s=Mt(r)?Fu:r,i=Kt(t.fallbackLocale)||ot(t.fallbackLocale)||ke(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=ot(t.messages)?t.messages:Ld(s),a=ot(t.datetimeFormats)?t.datetimeFormats:Ld(s),l=ot(t.numberFormats)?t.numberFormats:Ld(s),u=on(_t(),t.modifiers,vF()),c=t.pluralRules||_t(),d=Mt(t.missing)?t.missing:null,f=Nt(t.missingWarn)||Nu(t.missingWarn)?t.missingWarn:!0,h=Nt(t.fallbackWarn)||Nu(t.fallbackWarn)?t.fallbackWarn:!0,m=!!t.fallbackFormat,g=!!t.unresolving,x=Mt(t.postTranslation)?t.postTranslation:null,b=ot(t.processor)?t.processor:null,E=Nt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,_=!!t.escapeParameter,p=Mt(t.messageCompiler)?t.messageCompiler:C1,v=Mt(t.messageResolver)?t.messageResolver:R1||mF,S=Mt(t.localeFallbacker)?t.localeFallbacker:T1||oF,C=ut(t.fallbackContext)?t.fallbackContext:void 0,R=t,T=ut(R.__datetimeFormatters)?R.__datetimeFormatters:new Map,D=ut(R.__numberFormatters)?R.__numberFormatters:new Map,U=ut(R.__meta)?R.__meta:{};Sv++;const z={version:n,cid:Sv,locale:r,fallbackLocale:i,messages:o,modifiers:u,pluralRules:c,missing:d,missingWarn:f,fallbackWarn:h,fallbackFormat:m,unresolving:g,postTranslation:x,processor:b,warnHtmlMessage:E,escapeParameter:_,messageCompiler:p,messageResolver:v,localeFallbacker:S,fallbackContext:C,onWarn:e,__meta:U};return z.datetimeFormats=a,z.numberFormats=l,z.__datetimeFormatters=T,z.__numberFormatters=D,__INTLIFY_PROD_DEVTOOLS__&&nF(z,n,U),z}const Ld=t=>({[t]:_t()});function Am(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return ke(a)?a:e}else return e}function oa(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function IF(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function CF(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(IF(t,e[r]))return!0;return!1}function Iv(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,u,c,d]=Uh(...e),f=Nt(c.missingWarn)?c.missingWarn:t.missingWarn;Nt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const h=!!c.part,m=Em(t,c),g=o(t,s,m);if(!ke(l)||l==="")return new Intl.DateTimeFormat(m,d).format(u);let x={},b,E=null;const _="datetime format";for(let S=0;S<g.length&&(b=g[S],x=n[b]||{},E=x[l],!ot(E));S++)Am(t,l,b,f,_);if(!ot(E)||!ke(b))return r?$c:l;let p=`${b}__${l}`;kc(d)||(p=`${p}__${JSON.stringify(d)}`);let v=a.get(p);return v||(v=new Intl.DateTimeFormat(b,on({},E,d)),a.set(p,v)),h?v.formatToParts(u):v.format(u)}const k1=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Uh(...t){const[e,n,r,s]=t,i=_t();let o=_t(),a;if(ke(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Is(Ss.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw Is(Ss.INVALID_ISO_DATE_ARGUMENT)}}else if(pN(e)){if(isNaN(e.getTime()))throw Is(Ss.INVALID_DATE_ARGUMENT);a=e}else if(Qt(e))a=e;else throw Is(Ss.INVALID_ARGUMENT);return ke(n)?i.key=n:ot(n)&&Object.keys(n).forEach(l=>{k1.includes(l)?o[l]=n[l]:i[l]=n[l]}),ke(r)?i.locale=r:ot(r)&&(o=r),ot(s)&&(o=s),[i.key||"",a,i,o]}function Cv(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function Rv(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,u,c,d]=qh(...e),f=Nt(c.missingWarn)?c.missingWarn:t.missingWarn;Nt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const h=!!c.part,m=Em(t,c),g=o(t,s,m);if(!ke(l)||l==="")return new Intl.NumberFormat(m,d).format(u);let x={},b,E=null;const _="number format";for(let S=0;S<g.length&&(b=g[S],x=n[b]||{},E=x[l],!ot(E));S++)Am(t,l,b,f,_);if(!ot(E)||!ke(b))return r?$c:l;let p=`${b}__${l}`;kc(d)||(p=`${p}__${JSON.stringify(d)}`);let v=a.get(p);return v||(v=new Intl.NumberFormat(b,on({},E,d)),a.set(p,v)),h?v.formatToParts(u):v.format(u)}const P1=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function qh(...t){const[e,n,r,s]=t,i=_t();let o=_t();if(!Qt(e))throw Is(Ss.INVALID_ARGUMENT);const a=e;return ke(n)?i.key=n:ot(n)&&Object.keys(n).forEach(l=>{P1.includes(l)?o[l]=n[l]:i[l]=n[l]}),ke(r)?i.locale=r:ot(r)&&(o=r),ot(s)&&(o=s),[i.key||"",a,i,o]}function Tv(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}const RF=t=>t,TF=t=>"",OF="text",DF=t=>t.length===0?"":wm(t),kF=bN;function Ov(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function PF(t){const e=Qt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Qt(t.named.count)||Qt(t.named.n))?Qt(t.named.count)?t.named.count:Qt(t.named.n)?t.named.n:e:e}function $F(t,e){e.count||(e.count=t),e.n||(e.n=t)}function LF(t={}){const e=t.locale,n=PF(t),r=ut(t.pluralRules)&&ke(e)&&Mt(t.pluralRules[e])?t.pluralRules[e]:Ov,s=ut(t.pluralRules)&&ke(e)&&Mt(t.pluralRules[e])?Ov:void 0,i=b=>b[r(n,b.length,s)],o=t.list||[],a=b=>o[b],l=t.named||_t();Qt(t.pluralIndex)&&$F(n,l);const u=b=>l[b];function c(b,E){const _=Mt(t.messages)?t.messages(b,!!E):ut(t.messages)?t.messages[b]:!1;return _||(t.parent?t.parent.message(b):TF)}const d=b=>t.modifiers?t.modifiers[b]:RF,f=ot(t.processor)&&Mt(t.processor.normalize)?t.processor.normalize:DF,h=ot(t.processor)&&Mt(t.processor.interpolate)?t.processor.interpolate:kF,m=ot(t.processor)&&ke(t.processor.type)?t.processor.type:OF,x={list:a,named:u,plural:i,linked:(b,...E)=>{const[_,p]=E;let v="text",S="";E.length===1?ut(_)?(S=_.modifier||S,v=_.type||v):ke(_)&&(S=_||S):E.length===2&&(ke(_)&&(S=_||S),ke(p)&&(v=p||v));const C=c(b,!0)(x),R=v==="vnode"&&Kt(C)&&S?C[0]:C;return S?d(S)(R,v):R},message:c,type:m,interpolate:h,normalize:f,values:on(_t(),o,l)};return x}const Dv=()=>"",gr=t=>Mt(t);function kv(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,u]=Bh(...e),c=Nt(u.missingWarn)?u.missingWarn:t.missingWarn,d=Nt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,f=Nt(u.escapeParameter)?u.escapeParameter:t.escapeParameter,h=!!u.resolvedMessage,m=ke(u.default)||Nt(u.default)?Nt(u.default)?i?l:()=>l:u.default:n?i?l:()=>l:null,g=n||m!=null&&(ke(m)||Mt(m)),x=Em(t,u);f&&MF(u);let[b,E,_]=h?[l,x,a[x]||_t()]:$1(t,l,x,o,d,c),p=b,v=l;if(!h&&!(ke(p)||ss(p)||gr(p))&&g&&(p=m,v=p),!h&&(!(ke(p)||ss(p)||gr(p))||!ke(E)))return s?$c:l;let S=!1;const C=()=>{S=!0},R=gr(p)?p:L1(t,l,E,p,v,C);if(S)return p;const T=jF(t,E,_,u),D=LF(T),U=NF(t,R,D);let z=r?r(U,l):U;if(f&&ke(z)&&(z=gN(z)),__INTLIFY_PROD_DEVTOOLS__){const V={timestamp:Date.now(),key:ke(l)?l:gr(p)?p.key:"",locale:E||(gr(p)?p.locale:""),format:ke(p)?p:gr(p)?p.source:"",message:z};V.meta=on({},t.__meta,EF()||{}),rF(V)}return z}function MF(t){Kt(t.list)?t.list=t.list.map(e=>ke(e)?hv(e):e):ut(t.named)&&Object.keys(t.named).forEach(e=>{ke(t.named[e])&&(t.named[e]=hv(t.named[e]))})}function $1(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=t,c=u(t,r,n);let d=_t(),f,h=null;const m="translate";for(let g=0;g<c.length&&(f=c[g],d=o[f]||_t(),(h=l(d,e))===null&&(h=d[e]),!(ke(h)||ss(h)||gr(h)));g++)if(!CF(f,c)){const x=Am(t,e,f,i,m);x!==e&&(h=x)}return[h,f,d]}function L1(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(gr(r)){const u=r;return u.locale=u.locale||n,u.key=u.key||e,u}if(o==null){const u=(()=>r);return u.locale=n,u.key=e,u}const l=o(r,FF(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function NF(t,e,n){return e(n)}function Bh(...t){const[e,n,r]=t,s=_t();if(!ke(e)&&!Qt(e)&&!gr(e)&&!ss(e))throw Is(Ss.INVALID_ARGUMENT);const i=Qt(e)?String(e):(gr(e),e);return Qt(n)?s.plural=n:ke(n)?s.default=n:ot(n)&&!kc(n)?s.named=n:Kt(n)&&(s.list=n),Qt(r)?s.plural=r:ke(r)?s.default=r:ot(r)&&on(s,r),[i,s]}function FF(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>fN(e,n,o)}}function jF(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:c}=t,f={locale:e,modifiers:s,pluralRules:i,messages:(h,m)=>{let g=o(n,h);if(g==null&&(c||m)){const[,,x]=$1(c||t,h,e,a,l,u);g=o(x,h)}if(ke(g)||ss(g)){let x=!1;const E=L1(t,h,e,g,h,()=>{x=!0});return x?Dv:E}else return gr(g)?g:Dv}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),Qt(r.plural)&&(f.pluralIndex=r.plural),f}zN();/*!
  * vue-i18n v11.2.8
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const UF="11.2.8";function qF(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(vm().__INTLIFY_PROD_DEVTOOLS__=!1)}const Cr={UNEXPECTED_RETURN_TYPE:iF,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function zr(t,...e){return Pc(t,null,void 0)}const Vh=xi("__translateVNode"),zh=xi("__datetimeParts"),Hh=xi("__numberParts"),BF=xi("__setPluralRules"),VF=xi("__injectWithOption"),Kh=xi("__dispose");function Ja(t){if(!ut(t)||ss(t))return t;for(const e in t)if($r(t,e))if(!e.includes("."))ut(t[e])&&Ja(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]==="__proto__")throw new Error(`unsafe key: ${n[o]}`);if(n[o]in s||(s[n[o]]=_t()),!ut(s[n[o]])){i=!0;break}s=s[n[o]]}if(i||(ss(s)?S1.includes(n[r])||delete t[e]:(s[n[r]]=t[e],delete t[e])),!ss(s)){const o=s[n[r]];ut(o)&&Ja(o)}}return t}function M1(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=ot(n)?n:Kt(r)?_t():{[t]:_t()};if(Kt(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||_t(),iu(u,o[l])):iu(u,o)}else ke(a)&&iu(JSON.parse(a),o)}),s==null&&i)for(const a in o)$r(o,a)&&Ja(o[a]);return o}function N1(t){return t.type}function zF(t,e,n){let r=ut(e.messages)?e.messages:_t();"__i18nGlobal"in n&&(r=M1(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(ut(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(ut(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function Pv(t){return oe(Uo,null,t,0)}function Sm(){return ur()}const $v="__INTLIFY_META__",Lv=()=>[],HF=()=>!1;let Mv=0;function Nv(t){return((e,n,r,s)=>t(n,r,Sm()||void 0,s))}const KF=()=>{const t=Sm();let e=null;return t&&(e=N1(t)[$v])?{[$v]:e}:null};function F1(t={}){const{__root:e,__injectWithOption:n}=t,r=e===void 0,s=t.flatJson,i=Mu?_e:sr;let o=Nt(t.inheritLocale)?t.inheritLocale:!0;const a=i(e&&o?e.locale.value:ke(t.locale)?t.locale:Fu),l=i(e&&o?e.fallbackLocale.value:ke(t.fallbackLocale)||Kt(t.fallbackLocale)||ot(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),u=i(M1(a.value,t)),c=i(ot(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=i(ot(t.numberFormats)?t.numberFormats:{[a.value]:{}});let f=e?e.missingWarn:Nt(t.missingWarn)||Nu(t.missingWarn)?t.missingWarn:!0,h=e?e.fallbackWarn:Nt(t.fallbackWarn)||Nu(t.fallbackWarn)?t.fallbackWarn:!0,m=e?e.fallbackRoot:Nt(t.fallbackRoot)?t.fallbackRoot:!0,g=!!t.fallbackFormat,x=Mt(t.missing)?t.missing:null,b=Mt(t.missing)?Nv(t.missing):null,E=Mt(t.postTranslation)?t.postTranslation:null,_=e?e.warnHtmlMessage:Nt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,p=!!t.escapeParameter;const v=e?e.modifiers:ot(t.modifiers)?t.modifiers:{};let S=t.pluralRules||e&&e.pluralRules,C;C=(()=>{r&&Av(null);const ne={version:UF,locale:a.value,fallbackLocale:l.value,messages:u.value,modifiers:v,pluralRules:S,missing:b===null?void 0:b,missingWarn:f,fallbackWarn:h,fallbackFormat:g,unresolving:!0,postTranslation:E===null?void 0:E,warnHtmlMessage:_,escapeParameter:p,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};ne.datetimeFormats=c.value,ne.numberFormats=d.value,ne.__datetimeFormatters=ot(C)?C.__datetimeFormatters:void 0,ne.__numberFormatters=ot(C)?C.__numberFormatters:void 0;const pe=SF(ne);return r&&Av(pe),pe})(),oa(C,a.value,l.value);function T(){return[a.value,l.value,u.value,c.value,d.value]}const D=J({get:()=>a.value,set:ne=>{C.locale=ne,a.value=ne}}),U=J({get:()=>l.value,set:ne=>{C.fallbackLocale=ne,l.value=ne,oa(C,a.value,ne)}}),z=J(()=>u.value),V=J(()=>c.value),P=J(()=>d.value);function X(){return Mt(E)?E:null}function O(ne){E=ne,C.postTranslation=ne}function H(){return x}function q(ne){ne!==null&&(b=Nv(ne)),x=ne,C.missing=b}const ie=(ne,pe,Oe,I,y,w)=>{T();let M;try{__INTLIFY_PROD_DEVTOOLS__,r||(C.fallbackContext=e?AF():void 0),M=ne(C)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(C.fallbackContext=void 0)}if(Oe!=="translate exists"&&Qt(M)&&M===$c||Oe==="translate exists"&&!M){const[Y,fe]=pe();return e&&m?I(e):y(Y)}else{if(w(M))return M;throw zr(Cr.UNEXPECTED_RETURN_TYPE)}};function B(...ne){return ie(pe=>Reflect.apply(kv,null,[pe,...ne]),()=>Bh(...ne),"translate",pe=>Reflect.apply(pe.t,pe,[...ne]),pe=>pe,pe=>ke(pe))}function ue(...ne){const[pe,Oe,I]=ne;if(I&&!ut(I))throw zr(Cr.INVALID_ARGUMENT);return B(pe,Oe,on({resolvedMessage:!0},I||{}))}function de(...ne){return ie(pe=>Reflect.apply(Iv,null,[pe,...ne]),()=>Uh(...ne),"datetime format",pe=>Reflect.apply(pe.d,pe,[...ne]),()=>xv,pe=>ke(pe)||Kt(pe))}function ye(...ne){return ie(pe=>Reflect.apply(Rv,null,[pe,...ne]),()=>qh(...ne),"number format",pe=>Reflect.apply(pe.n,pe,[...ne]),()=>xv,pe=>ke(pe)||Kt(pe))}function Se(ne){return ne.map(pe=>ke(pe)||Qt(pe)||Nt(pe)?Pv(String(pe)):pe)}const W={normalize:Se,interpolate:ne=>ne,type:"vnode"};function $(...ne){return ie(pe=>{let Oe;const I=pe;try{I.processor=W,Oe=Reflect.apply(kv,null,[I,...ne])}finally{I.processor=null}return Oe},()=>Bh(...ne),"translate",pe=>pe[Vh](...ne),pe=>[Pv(pe)],pe=>Kt(pe))}function Z(...ne){return ie(pe=>Reflect.apply(Rv,null,[pe,...ne]),()=>qh(...ne),"number format",pe=>pe[Hh](...ne),Lv,pe=>ke(pe)||Kt(pe))}function ae(...ne){return ie(pe=>Reflect.apply(Iv,null,[pe,...ne]),()=>Uh(...ne),"datetime format",pe=>pe[zh](...ne),Lv,pe=>ke(pe)||Kt(pe))}function re(ne){S=ne,C.pluralRules=S}function Ee(ne,pe){return ie(()=>{if(!ne)return!1;const Oe=ke(pe)?pe:a.value,I=K(Oe),y=C.messageResolver(I,ne);return ss(y)||gr(y)||ke(y)},()=>[ne],"translate exists",Oe=>Reflect.apply(Oe.te,Oe,[ne,pe]),HF,Oe=>Nt(Oe))}function L(ne){let pe=null;const Oe=I1(C,l.value,a.value);for(let I=0;I<Oe.length;I++){const y=u.value[Oe[I]]||{},w=C.messageResolver(y,ne);if(w!=null){pe=w;break}}return pe}function k(ne){const pe=L(ne);return pe??(e?e.tm(ne)||{}:{})}function K(ne){return u.value[ne]||{}}function he(ne,pe){if(s){const Oe={[ne]:pe};for(const I in Oe)$r(Oe,I)&&Ja(Oe[I]);pe=Oe[ne]}u.value[ne]=pe,C.messages=u.value}function ve(ne,pe){u.value[ne]=u.value[ne]||{};const Oe={[ne]:pe};if(s)for(const I in Oe)$r(Oe,I)&&Ja(Oe[I]);pe=Oe[ne],iu(pe,u.value[ne]),C.messages=u.value}function ge(ne){return c.value[ne]||{}}function N(ne,pe){c.value[ne]=pe,C.datetimeFormats=c.value,Cv(C,ne,pe)}function j(ne,pe){c.value[ne]=on(c.value[ne]||{},pe),C.datetimeFormats=c.value,Cv(C,ne,pe)}function ee(ne){return d.value[ne]||{}}function le(ne,pe){d.value[ne]=pe,C.numberFormats=d.value,Tv(C,ne,pe)}function Ie(ne,pe){d.value[ne]=on(d.value[ne]||{},pe),C.numberFormats=d.value,Tv(C,ne,pe)}Mv++,e&&Mu&&(et(e.locale,ne=>{o&&(a.value=ne,C.locale=ne,oa(C,a.value,l.value))}),et(e.fallbackLocale,ne=>{o&&(l.value=ne,C.fallbackLocale=ne,oa(C,a.value,l.value))}));const xe={id:Mv,locale:D,fallbackLocale:U,get inheritLocale(){return o},set inheritLocale(ne){o=ne,ne&&e&&(a.value=e.locale.value,l.value=e.fallbackLocale.value,oa(C,a.value,l.value))},get availableLocales(){return Object.keys(u.value).sort()},messages:z,get modifiers(){return v},get pluralRules(){return S||{}},get isGlobal(){return r},get missingWarn(){return f},set missingWarn(ne){f=ne,C.missingWarn=f},get fallbackWarn(){return h},set fallbackWarn(ne){h=ne,C.fallbackWarn=h},get fallbackRoot(){return m},set fallbackRoot(ne){m=ne},get fallbackFormat(){return g},set fallbackFormat(ne){g=ne,C.fallbackFormat=g},get warnHtmlMessage(){return _},set warnHtmlMessage(ne){_=ne,C.warnHtmlMessage=ne},get escapeParameter(){return p},set escapeParameter(ne){p=ne,C.escapeParameter=ne},t:B,getLocaleMessage:K,setLocaleMessage:he,mergeLocaleMessage:ve,getPostTranslationHandler:X,setPostTranslationHandler:O,getMissingHandler:H,setMissingHandler:q,[BF]:re};return xe.datetimeFormats=V,xe.numberFormats=P,xe.rt=ue,xe.te=Ee,xe.tm=k,xe.d=de,xe.n=ye,xe.getDateTimeFormat=ge,xe.setDateTimeFormat=N,xe.mergeDateTimeFormat=j,xe.getNumberFormat=ee,xe.setNumberFormat=le,xe.mergeNumberFormat=Ie,xe[VF]=n,xe[Vh]=$,xe[zh]=ae,xe[Hh]=Z,xe}const Im={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function WF({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===Ze?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},_t())}function j1(){return Ze}const GF=me({name:"i18n-t",props:on({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Qt(t)||!isNaN(t)}},Im),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Cm({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(d=>d[0]!=="_"),o=_t();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=ke(t.plural)?+t.plural:t.plural);const a=WF(e,i),l=s[Vh](t.keypath,a,o),u=on(_t(),r),c=ke(t.tag)||ut(t.tag)?t.tag:j1();return nr(c,u,l)}}}),Fv=GF;function JF(t){return Kt(t)&&!ke(t[0])}function U1(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a=_t();t.locale&&(o.locale=t.locale),ke(t.format)?o.key=t.format:ut(t.format)&&(ke(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((f,h)=>n.includes(h)?on(_t(),f,{[h]:t.format[h]}):f,_t()));const l=r(t.value,o,a);let u=[o.key];Kt(l)?u=l.map((f,h)=>{const m=s[f.type],g=m?m({[f.type]:f.value,index:h,parts:l}):[f.value];return JF(g)&&(g[0].key=`${f.type}-${h}`),g}):ke(l)&&(u=[l]);const c=on(_t(),i),d=ke(t.tag)||ut(t.tag)?t.tag:j1();return nr(d,c,u)}}const XF=me({name:"i18n-n",props:on({value:{type:Number,required:!0},format:{type:[String,Object]}},Im),setup(t,e){const n=t.i18n||Cm({useScope:t.scope,__useComponent:!0});return U1(t,e,P1,(...r)=>n[Hh](...r))}}),jv=XF;function YF(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function QF(t){const e=o=>{const{instance:a,value:l}=o;if(!a||!a.$)throw zr(Cr.UNEXPECTED_ERROR);const u=YF(t,a.$),c=Uv(l);return[Reflect.apply(u.t,u,[...qv(c)]),u]};return{created:(o,a)=>{const[l,u]=e(a);Mu&&t.global===u&&(o.__i18nWatcher=et(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{Mu&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=Uv(a);o.textContent=Reflect.apply(l.t,l,[...qv(u)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function Uv(t){if(ke(t))return{path:t};if(ot(t)){if(!("path"in t))throw zr(Cr.REQUIRED_VALUE,"path");return t}else throw zr(Cr.INVALID_VALUE)}function qv(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return ke(n)&&(o.locale=n),Qt(s)&&(o.plural=s),Qt(i)&&(o.plural=i),[e,a,o]}function ZF(t,e,...n){const r=ot(n[0])?n[0]:{};(Nt(r.globalInstall)?r.globalInstall:!0)&&([Fv.name,"I18nT"].forEach(i=>t.component(i,Fv)),[jv.name,"I18nN"].forEach(i=>t.component(i,jv)),[Vv.name,"I18nD"].forEach(i=>t.component(i,Vv))),t.directive("t",QF(e))}const ej=xi("global-vue-i18n");function tj(t={}){const e=Nt(t.globalInjection)?t.globalInjection:!0,n=new Map,[r,s]=nj(t),i=xi("");function o(c){return n.get(c)||null}function a(c,d){n.set(c,d)}function l(c){n.delete(c)}const u={get mode(){return"composition"},async install(c,...d){if(c.__VUE_I18N_SYMBOL__=i,c.provide(c.__VUE_I18N_SYMBOL__,u),ot(d[0])){const m=d[0];u.__composerExtend=m.__composerExtend,u.__vueI18nExtend=m.__vueI18nExtend}let f=null;e&&(f=cj(c,u.global)),ZF(c,u,...d);const h=c.unmount;c.unmount=()=>{f&&f(),u.dispose(),h()}},get global(){return s},dispose(){r.stop()},__instances:n,__getInstance:o,__setInstance:a,__deleteInstance:l};return u}function Cm(t={}){const e=Sm();if(e==null)throw zr(Cr.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw zr(Cr.NOT_INSTALLED);const n=rj(e),r=ij(n),s=N1(e),i=sj(t,s);if(i==="global")return zF(r,t,s),r;if(i==="parent"){let l=oj(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=on({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=F1(l),o.__composerExtend&&(a[Kh]=o.__composerExtend(a)),lj(o,e,a),o.__setInstance(e,a)}return a}function nj(t,e){const n=el(),r=n.run(()=>F1(t));if(r==null)throw zr(Cr.UNEXPECTED_ERROR);return[n,r]}function rj(t){const e=jt(t.isCE?ej:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw zr(t.isCE?Cr.NOT_INSTALLED_WITH_PROVIDE:Cr.UNEXPECTED_ERROR);return e}function sj(t,e){return kc(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function ij(t){return t.mode==="composition"?t.global:t.global.__composer}function oj(t,e,n=!1){let r=null;const s=e.root;let i=aj(e,n);for(;i!=null;){const o=t;if(t.mode==="composition"&&(r=o.__getInstance(i)),r!=null||s===i)break;i=i.parent}return r}function aj(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function lj(t,e,n){Wt(()=>{},e),ar(()=>{const r=n;t.__deleteInstance(e);const s=r[Kh];s&&(s(),delete r[Kh])},e)}const uj=["locale","fallbackLocale","availableLocales"],Bv=["t","rt","d","n","tm","te"];function cj(t,e){const n=Object.create(null);return uj.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw zr(Cr.UNEXPECTED_ERROR);const o=Ot(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,Bv.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw zr(Cr.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,Bv.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}const dj=me({name:"i18n-d",props:on({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Im),setup(t,e){const n=t.i18n||Cm({useScope:t.scope,__useComponent:!0});return U1(t,e,k1,(...r)=>n[zh](...r))}}),Vv=dj;qF();bF(eF);wF(gF);_F(I1);if(__INTLIFY_PROD_DEVTOOLS__){const t=vm();t.__INTLIFY__=!0,tF(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var fj=Object.defineProperty,hj=(t,e,n)=>e in t?fj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Md=(t,e,n)=>hj(t,typeof e!="symbol"?e+"":e,n);let pj=class{constructor(e,n){this.i18n=e,this.messages=n,this.messages.addListener((r,s)=>this.i18n.setLocaleMessage(r,s))}getLocale(){return this.i18n.locale.value}async setLocale(e){await this.messages.loadLocale(e),this.i18n.locale.value=e}getFallbackLocale(){const e=this.i18n.fallbackLocale.value;return typeof e!="string"?"":e}async setFallbackLocale(e){await this.messages.loadLocale(e),this.i18n.fallbackLocale.value=e}getLocales(){return this.messages.getLocales()}translate(e,n){return this.i18n.t(e,n??{})}translateWithDefault(e,n,r){const s=this.i18n.t(e,r??{},{missingWarn:!1});return s===e?this.replaceParameters(n,r):s}replaceParameters(e,n={}){if(typeof n=="number"){const r=e.split("|").map(i=>i.trim()),s=r[n]??r[2]??e;return this.replaceParameters(s,{n})}return Object.entries(n).reduce((r,[s,i])=>r.replace(new RegExp(`\\{.*${s}[^}]*\\}`),$t(i)),e)}},mj=class{constructor(e){Md(this,"listeners",[]),Md(this,"messages",{}),Md(this,"loaders"),this.loaders=Object.entries(e).reduce((n,[r,s])=>{var i;const o=(i=g0(r,/.*\/lang\/(.+)\.yaml/))==null?void 0:i[1];return o&&(n[o]=()=>s().then(({default:a})=>a)),n},{})}getMessages(){return Object.assign({},this.messages)}getLocales(){return Object.keys(this.loaders)}addListener(e){this.listeners.push(e)}async loadLocale(e){if(e in this.messages)return this.messages[e];const n=await(this.loaders[e]??Ge(`Couldn't load messages for '${e}' locale`))();return this.messages[e]=n,this.listeners.forEach(r=>r(e,n)),n}};async function gj(t){const e=t.defaultLocale??"en",n=t.fallbackLocale??"en";return await t.messages.loadLocale(e),await t.messages.loadLocale(n),tj({warnHtmlMessage:!1,locale:e,fallbackLocale:n,messages:t.messages.getMessages()})}function yj(t){return{async install(e){const n=new mj(t.messages),r=await gj({...t,messages:n});e.use(r),gi.setProvider(new pj(r.global,n))}}}var vj=Object.defineProperty,bj=(t,e,n)=>e in t?vj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zt=(t,e,n)=>bj(t,typeof e!="symbol"?e+"":e,n);class Be extends Error{constructor(e,n){super(...n?[e,n]:[e]),this.name=new.target.name,Object.setPrototypeOf(this,new.target.prototype)}}let Rm=class extends Be{constructor(e){super(`Could not create document with id ${e} because it is already in use.`),zt(this,"id"),this.id=e}},Lr=class extends Be{constructor(e,n){super(n?`Couldn't find document with id '${e}' in '${n}' Collection.`:`Couldn't find document with id '${e}'`),zt(this,"id"),zt(this,"collection"),this.id=e,this.collection=n}};function wj(t){return t instanceof _j||"getProxySubject"in t}let _j=class{constructor(e,n={}){zt(this,"subject"),zt(this,"overrides"),this.subject=e,this.overrides={create:(...r)=>e.create(...r),readOne:(...r)=>e.readOne(...r),readMany:(...r)=>e.readMany(...r),update:(...r)=>e.update(...r),delete:(...r)=>e.delete(...r),...n}}getProxySubject(){return this.subject}async create(e,n,r){return this.overrides.create(e,n,r)}async readOne(e,n){return this.overrides.readOne(e,n)}async readMany(e,n){return this.overrides.readMany(e,n)}async update(e,n,r){return this.overrides.update(e,n,r)}async delete(e,n){return this.overrides.delete(e,n)}},Lc=class{constructor(){zt(this,"rootFilters"),zt(this,"rootUpdates"),zt(this,"attributeFilters"),zt(this,"attributeUpdates"),zt(this,"documentsIn",(e,n,r)=>r.includes(e)),zt(this,"documentOverwrite",(e,n)=>{for(const r of Object.getOwnPropertyNames(e))delete e[r];Object.assign(e,n)}),zt(this,"attributeEq",(e,n,r)=>Tp(e[n],r)),zt(this,"attributeContains",(e,n,r)=>{Array.isArray(r)||(r=[r]);const s=e&&e[n];return Array.isArray(s)?!r.find(i=>!s.find(o=>this.filterValue(o,i))):!1}),zt(this,"attributeOr",(e,n,r)=>!!r.find(s=>!!this.filterValue(e,{[n]:s}))),zt(this,"attributeIn",(e,n,r)=>r.includes(e[n])),zt(this,"attributeUpdate",(e,n,r)=>{if(Array.isArray(r)||!ht(r)){e[n]=r;return}if(this.isOperation(r,this.attributeUpdates)){this.runOperation(r,this.attributeUpdates,e,n);return}if(!ht(e[n])){e[n]=r;return}this.updateAttributes(e[n],r)}),zt(this,"attributeUpdateItems",(e,n,r)=>{Array.isArray(r)||(r=[r]);for(const{$where:s,$update:i,$override:o,$unset:a}of r){s&&s.$in&&(s.$in=s.$in.map(c=>c.toString()));const l=this.requireArrayProperty("$updateItems",e,n),u=this.filterDocuments(l.reduce((c,d,f)=>({...c,[f]:ht(d)?d:{}}),{}),s||{});i&&Object.keys(u).forEach(c=>{this.updateAttributes(u,{[c]:i}),l[parseInt(c)]=u[c]}),o&&Object.keys(u).forEach(c=>{l[parseInt(c)]=o}),a&&(e[n]=Op(l,Object.keys(u).map(parseInt)))}}),zt(this,"attributePush",(e,n,r)=>{this.requireArrayProperty("$push",e,n).push(r)}),zt(this,"attributeUnset",(e,n,r)=>{if(r===!0){delete e[n];return}const s=e[n];if(ht(s)){r=Array.isArray(r)?r:[r];for(const i of r)delete s[i]}}),zt(this,"attributeApply",(e,n,r)=>{for(const s of r)this.runOperation(s,this.attributeUpdates,e,n)}),zt(this,"attributeOverwrite",(e,n,r)=>{e[n]=r}),this.rootFilters={$in:this.documentsIn},this.rootUpdates={$overwrite:this.documentOverwrite},this.attributeFilters={$eq:this.attributeEq,$contains:this.attributeContains,$or:this.attributeOr,$in:this.attributeIn},this.attributeUpdates={$update:this.attributeUpdate,$updateItems:this.attributeUpdateItems,$push:this.attributePush,$unset:this.attributeUnset,$apply:this.attributeApply,$overwrite:this.attributeOverwrite}}filterDocuments(e,n={}){return Object.entries(e).reduce((r,[s,i])=>(this.filterDocument(s,i,n)&&(r[s]=i),r),{})}updateAttributes(e,n){if(this.isOperation(n,{$unset:this.attributeUnset})){const r=n.$unset,s=Array.isArray(r)?r:[r];for(const i of s)this.attributeUnset(e,i,!0);return}if(this.isOperation(n,this.rootUpdates)){const[[r,s]]=Object.entries(n);this.rootUpdates[r](e,s);return}for(const[r,s]of Object.entries(n))this.attributeUpdate(e,r,s)}obtainDocumentId(e){return e??jn()}filterDocument(e,n,r={}){r={...r};for(const[s,i]of Object.entries(this.rootFilters))if(s in r){if(!i(e,n,r[s]))return!1;delete r[s]}return this.filterValue(n,r)}filterValue(e,n={}){return ht(n)?this.isOperation(n,this.attributeFilters)?this.runOperation(n,this.attributeFilters,{value:e},"value"):ht(e)?!Object.entries(n).find(([r,s])=>!(this.isOperation(s,this.attributeFilters)?this.runOperation(s,this.attributeFilters,e,r):this.attributeEq(e,r,s))):!1:this.attributeEq({value:e},"value",n)}isOperation(e,n){if(!ht(e))return!1;const[r,...s]=Object.keys(e);return!!(r&&s.length===0&&r in n)}runOperation(e,n,...r){const[s,i]=Object.entries(e)[0];return n[s](...r,i)}requireArrayProperty(e,n,r){if(!n||!ht(n)||!Array.isArray(n[r]))throw new Error(`${e} operator can only be applied to array attributes`);return n[r]}},ju;function jl(t){for(;t&&wj(t);)t=t.getProxySubject();return t}function xj(){return ju}function Mc(){return ju||Ge(Be,"Engine must be initialized before performing any operations. Learn more at https://soukai.js.org/guide/core-concepts/engines.html")}function q1(t){if(!t){ju=void 0;return}ju=t}var Ej=Object.defineProperty,Aj=(t,e,n)=>e in t?Ej(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nt=(t,e,n)=>Aj(t,typeof e!="symbol"?e+"":e,n);let B1=class extends Be{constructor(e,n,r){super(`Model ${e}: Invalid attributes (${JSON.stringify(n)}).`,r),nt(this,"modelName"),nt(this,"attributes"),this.modelName=e,this.attributes=n}},ti=class extends Be{constructor(e,n){super(`Model ${e}: ${n}. Learn more at https://soukai.js.org/guide/core-concepts/models.html`),nt(this,"modelName"),this.modelName=e}};class Sj{constructor(e=null){nt(this,"database"),nt(this,"helper"),nt(this,"lock"),nt(this,"_metadata"),nt(this,"_metadataConnection"),nt(this,"_documentsConnection"),this.database=e?"soukai-"+e:"soukai",this.helper=new Lc,this.lock=eu(`idb-${this.database}`,()=>new fc)}getCollections(){return this.lock.run(()=>this.__getCollections())}async dropCollections(e){await this.lock.run(async()=>{await this.withMetadataTransaction("readwrite",n=>(e.forEach(r=>{var s;n.store.put({name:r,dropped:!0,updates:(((s=this._metadata)==null?void 0:s[r].updates)??1)+1})}),n.done)),this.closeConnections(),await this.getDocumentsConnection()})}async purgeDatabase(){await this.lock.run(async()=>{this.closeConnections(),await Promise.all([ty(`${this.database}-meta`,{blocked:()=>this.throwDatabaseBlockedError()}),ty(this.database,{blocked:()=>this.throwDatabaseBlockedError()})]),delete this._metadata})}async closeConnections(){this._metadataConnection&&this._metadataConnection.close(),this._documentsConnection&&this._documentsConnection.close(),delete this._metadata,delete this._metadataConnection,delete this._documentsConnection}create(e,n,r){return this.lock.run(async()=>{const s=this.helper.obtainDocumentId(r);if(await this.documentExists(e,s))throw new Rm(s);return await this.createDocument(e,s,n),s})}async readOne(e,n){return this.lock.run(async()=>{if(!await this.collectionExists(e))throw new Lr(n,e);const r=await this.getDocument(e,n);if(!r)throw new Lr(n,e);return r})}async readMany(e,n){return this.lock.run(async()=>{const r={};return(await this.__getCollections()).indexOf(e)===-1?r:(await this.withDocumentsTransaction(e,"readonly",s=>{const i=async o=>{if(o)return r[o.key]=o.value,o.continue().then(i)};return s.store.openCursor().then(i)}),this.helper.filterDocuments(r,n))})}async update(e,n,r){await this.lock.run(async()=>{const s=await this.getDocument(e,n);if(!s)throw new Lr(n,e);this.helper.updateAttributes(s,r),await this.updateDocument(e,n,s)})}async delete(e,n){await this.lock.run(async()=>{if(!await this.documentExists(e,n))throw new Lr(n,e);await this.deleteDocument(e,n)})}async __getCollections(){const e=await this.getMetadata();return Object.values(e).filter(({dropped:n})=>!n).map(({name:n})=>n.toString())}async collectionExists(e){return(await this.__getCollections()).indexOf(e)!==-1}async documentExists(e,n){return!!await this.getDocument(e,n)}async getDocument(e,n){try{return(await this.__getCollections()).indexOf(e)===-1?null:await this.withDocumentsTransaction(e,"readonly",r=>r.store.get(n))||null}catch{return null}}async createDocument(e,n,r){const s=await this.__getCollections();return s.indexOf(e)===-1&&(await this.createCollection(e),s.push(e)),this.withDocumentsTransaction(e,"readwrite",i=>(i.store.add(r,n),i.done))}async updateDocument(e,n,r){if((await this.__getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",s=>(s.store.put(r,n),s.done))}async deleteDocument(e,n){if((await this.__getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",r=>(r.store.delete(n),r.done))}async withMetadataTransaction(e,n){const r=this._metadataConnection=this._metadataConnection||await Eu(`${this.database}-meta`,1,{upgrade(s){s.objectStoreNames.contains("collections")||s.createObjectStore("collections",{keyPath:"name"})},blocked:()=>this.throwDatabaseBlockedError()});return this.retryingOnTransactionInactive(()=>{const s=r.transaction("collections",e);return n(s)})}async withDocumentsTransaction(e,n,r){const s=await this.getDocumentsConnection();return this.retryingOnTransactionInactive(()=>{const i=s.transaction(e,n);return r(i)})}async getDocumentsConnection(){const e=await this.getMetadata(),n=Object.values(e).reduce((r,{updates:s})=>r+(s??1),0);return this._documentsConnection=this._documentsConnection||await Eu(this.database,n,{upgrade(r){for(const{name:s,dropped:i}of Object.values(e))r.objectStoreNames.contains(s)&&!i||!r.objectStoreNames.contains(s)&&i||(i?r.deleteObjectStore(s):r.createObjectStore(s))},blocked:()=>this.throwDatabaseBlockedError()})}async getMetadata(){return this._metadata??(this._metadata=await this.initializeMetadata())}async initializeMetadata(){return(await this.withMetadataTransaction("readonly",e=>e.store.getAll())).reduce((e,n)=>(e[n.name]=n,e),{})}retryingOnTransactionInactive(e){try{return e()}catch(n){if(!(n instanceof Error)||!n.name.toLowerCase().includes("inactive")&&!n.message.toLowerCase().includes("inactive"))throw n;return e()}}async createCollection(e){await this.withMetadataTransaction("readwrite",n=>(n.store.add({name:e}),n.done)),delete this._metadata,this._documentsConnection&&(this._documentsConnection.close(),delete this._documentsConnection)}throwDatabaseBlockedError(){throw new Be("An attempt to open an IndexedDB connection has been blocked, remember to call IndexedDBEngine.closeConnections when necessary. Learn more at https://developer.mozilla.org/en-US/docs/Web/API/IDBOpenDBRequest/blocked_event")}}let er=class Wh{constructor(e){nt(this,"value"),this.value=String(e)}static from(e){return e instanceof Wh?e:new Wh(e)}equals(e){return this.value===e.value}toString(){return this.value}};const Ij={},Cj={},Nd=new WeakMap;let ou=new WeakMap;function zv(t){if(t==null)return Ij;switch(typeof t){case"string":return eu(`listeners-string-key-${t}`,()=>new String(t));case"number":return eu(`listeners-number-key-${t}`,()=>new Number(t));case"boolean":return eu(`listeners-boolean-key-${t}`,()=>new Boolean(t));case"object":return t;default:return Cj}}function Rj(t,e,n){ou.has(t)||ou.set(t,{});const r=ou.get(t),s=r[e]??(r[e]=[]);return s.push(n),()=>zn(s,n)}async function Hv(...t){var e;const n="__attributeGetters"in t[0]?t[0]:t[0].static(),r="__attributeGetters"in t[0]?null:t[0],s=t[1],i=t[2],o=r??n,a=(e=ou.get(n))==null?void 0:e[s],l=zv(s),u=zv(i),c=Nd.has(l)?Nd.get(l):Ne(new WeakMap,f=>Nd.set(l,f)),d=c.has(u)?c.get(u):Ne(new WeakSet,f=>c.set(u,f));!a||d.has(o)||(d.add(o),await Promise.all(a.map(f=>r?f(r,i):f(i))),d.delete(o))}const aa=new WeakMap;function Kv(t){const e=t.target,[n,r]=aa.get(e)??[t.getTargetEngine(),0],s=()=>{const[o,a]=aa.get(e);if(a>1){aa.set(e,[o,a-1]);return}aa.delete(e),e.setEngine(o)},i=o=>{const a=o();return a instanceof Promise?a.then(()=>Ne(a,()=>s())):Ne(a,()=>s())};return aa.set(e,[n,r+1]),e.setEngine(t.engine),t.operation?i(t.operation):new Proxy(e,{get(o,a,l){const u=Reflect.get(o,a,l);return typeof u!="function"?(s(),u):(...c)=>i(()=>u.call(o,...c))}})}function Wv(t,e){let n=t;for(;n;){if(n!==e){n=Object.getPrototypeOf(n);continue}return!0}return!1}let Uu=class{constructor(e,n,r,s){nt(this,"name"),nt(this,"parent"),nt(this,"relatedClass"),nt(this,"foreignKeyName"),nt(this,"localKeyName"),nt(this,"enabled",!0),nt(this,"deleteStrategy",null),nt(this,"_related"),this.parent=e,this.relatedClass=n,this.foreignKeyName=r,this.localKeyName=s||n.primaryKey}get loaded(){return this.related!==void 0}get related(){return this._related}set related(e){const n=this._related;this._related=e,this.onRelatedUpdated(n,e)}static(){return this.constructor}enable(){this.enabled=!0}disable(){this.enabled=!1}resolve(){return this.load()}isEmpty(){return null}async getModels(){return this.loaded||await this.load(),this.getLoadedModels()}getLoadedModels(){return this.related?mn(this.related):[]}unload(){this.related=void 0}onDelete(e){return this.deleteStrategy=e,this}clone(e={}){const n=e.clones??new WeakMap,r=e.constructors??new WeakMap,s=Object.create(Object.getPrototypeOf(this));return s.name=this.name,s.parent=this.parent,s.foreignKeyName=this.foreignKeyName,s.localKeyName=this.localKeyName,s.deleteStrategy=this.deleteStrategy,s.enabled=this.enabled,s.relatedClass=r.get(this.relatedClass)??this.relatedClass,this.related===null?s.related=null:Array.isArray(this.related)?s.related=this.related.map(i=>i.clone({clones:n,constructors:r})):this.related&&(s.related=this.related.clone({clones:n,constructors:r})),s}initializeInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.setForeignAttributes(this.parent),r.addRelated(this.parent))}}clearInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.clearForeignAttributes(this.parent),r.removeRelated(this.parent))}}isInverseOf(e){const n=r=>e instanceof r;return this.static().inverseBelongsToRelationClasses.some(n)?Wv(e.parent.static(),this.relatedClass)&&e.foreignKeyName===this.foreignKeyName&&e.localKeyName===this.localKeyName:this.static().inverseHasRelationClasses.some(n)?Wv(e.parent.static(),this.relatedClass)&&this.foreignKeyName===e.foreignKeyName&&this.localKeyName===e.localKeyName:!1}onRelatedUpdated(e,n){}};nt(Uu,"inverseHasRelationClasses",[]),nt(Uu,"inverseBelongsToRelationClasses",[]);let ai=class extends Uu{constructor(e,n,r,s){super(e,n,r||ki(n.modelName+"_"+n.primaryKey+"s"),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return Ne(n,()=>{!this.assertLoaded("attach")||this.isRelated(n)||(this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n))})}async create(e={}){const n=this.attach(e);return await n.save(),n}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.related=(this.related??[]).concat(e))}removeRelated(e){var n;(n=this.related)!=null&&n.includes(e)&&(this.related=ir(this.related,e))}isRelated(e){var n;return!!((n=this.related)!=null&&n.includes(e))}onRelatedUpdated(e,n){}assertLoaded(e){if(this.loaded)return!0;if(!this.parent.exists())return this.related=[],!0;throw new Be(`The "${e}" method can't be called before loading the relationship`)}},wo=class extends ai{isEmpty(){return this.parent.getAttribute(this.foreignKeyName).length===0}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?[]:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.all({$in:e}):await this.relatedClass.all({[this.localKeyName]:{$or:[...e.map(n=>({$eq:n})),...e.map(n=>({$contains:n}))]}}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)||this.parent.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)&&this.parent.setAttribute(this.foreignKeyName,ir(r,n))}},Ko=class extends Uu{constructor(e,n,r,s){super(e,n,r||ki(n.modelName+"_"+n.primaryKey),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return Ne(n,()=>{if(this.loaded&&this.related&&!this.isRelated(n))throw new Be(`The "attach" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`);this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n)})}addRelated(e){e!==this.related&&(this.related=e)}removeRelated(e){e===this.related&&(this.related=null)}isRelated(e){return e===this.related}onRelatedUpdated(e,n){}},ka=class extends Ko{isEmpty(){return!this.parent.getAttribute(this.foreignKeyName)}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?null:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.find(e):await this.relatedClass.first({[this.localKeyName]:e}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);n&&this.parent.setAttribute(this.foreignKeyName,n)}clearForeignAttributes(e){e.getAttribute(this.localKeyName)===this.parent.getAttribute(this.foreignKeyName)&&this.parent.setAttribute(this.foreignKeyName,null)}},_o=class extends ai{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.all({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,ir(r,n))}},Pi=class extends Ko{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.first({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,ir(r,n))}};const Re={Number:"number",String:"string",Boolean:"boolean",Array:"array",Object:"object",Date:"date",Key:"key",Any:"any"},Gv=Object.values(Re);function Gh(t,e,n,r=!1){let s={};if(typeof n=="string"&&Gv.indexOf(n)!==-1)s.type=n;else if(typeof n=="object")s=n;else throw new ti(t,`Invalid field definition ${e}`);if(typeof s.type>"u")s={type:Re.Object,fields:s};else if(Gv.indexOf(s.type)===-1)throw new ti(t,`Invalid field definition ${e}`);switch(r||(s.required=!!s.required),s.type){case Re.Object:if(typeof s.fields>"u")throw new ti(t,`Field definition of type object requires fields attribute ${e}`);for(const i in s.fields)Au(s.fields,i)&&(s.fields[i]=Gh(t,i,s.fields[i]));break;case Re.Array:if(typeof s.items>"u")throw new ti(t,`Field definition of type array requires items attribute. Field: '${e}'`);s.items=Gh(t,"items",s.items,!0);break}return s}function V1(t){return t.type===Re.Array}function z1(t,e){for(const[n,r]of Object.entries(e)){if(!(n in t))switch(r.type){case Re.Object:t[n]={};break;case Re.Array:t[n]=[];break;default:t[n]=void 0;break}if(r.type===Re.Object){const s=t[n];if(!ht(s))throw new Be(`Invalid value for field ${n}`);t[n]=z1(s,r.fields)}}return t}function Jh(t,e){for(const[n,r]of Object.entries(e)){if(r.required&&(!(n in t)||oh(t[n])))throw new Be(`The ${n} attribute is required.`);if(n in t&&!oh(t[n])&&r.type===Re.Object){const s=t[n];if(!ht(s))throw new Be(`Invalid value for field ${n}`);Jh(s,r.fields)}}}function au(t,e){t=kr(t);for(const n in t){const r=e[n];if(typeof t[n]>"u")delete t[n];else if(n in e&&r.type===Re.Object){const s=au(t[n],r.fields);Ca(s)?delete t[n]:t[n]=s}}return t}const St={CreatedAt:"createdAt",UpdatedAt:"updatedAt"},Jv=Object.values(St);function Tj(){Pi.inverseBelongsToRelationClasses.length>0||(Pi.inverseBelongsToRelationClasses=[ka,wo],_o.inverseBelongsToRelationClasses=[ka,wo],ka.inverseHasRelationClasses=[Pi,_o],wo.inverseHasRelationClasses=[Pi,_o])}const Xv=new WeakSet,Fd=new WeakMap,cn=class lu{static boot(e){Tj();const n={};this.bootedModels.set(this,!0),this.modelName=this.bootModelName(e),this.collection=this.bootCollection(),this.timestamps=this.bootTimestamps(this.timestamps,n);const{fields:r,fieldAliases:s}=this.bootFields(this.fields,this.primaryKey,this.timestamps,n);this.fields=r,this.fieldAliases=s;const{classFields:i,relations:o,attributeGetters:a,attributeSetters:l}=this.bootClassDefinitions();this.classFields=i,this.relations=o,this.__attributeGetters=a,this.__attributeSetters=l;const u=this.bootHooks(this.hooks);this.hooks=u}static ensureBooted(){this.bootedModels.has(this)||this.boot()}static async updateSchema(e){await this.performSchemaUpdate(e),await Hv(this,"schema-updated",e)}static create(e={}){return new this(e).save()}static createFromEngineDocument(e,n){return this.instance().createFromEngineDocument(e,n)}static createManyFromEngineDocuments(e){return this.instance().createManyFromEngineDocuments(e)}static async findOrFail(e){return await this.find(e)??Ge(`Failed getting required model ${e}`)}static async find(e){this.ensureBooted();try{const n=await this.requireEngine().readOne(this.collection,this.instance().serializeKey(e));return await this.createFromEngineDocument(e,n)}catch{return null}}static async all(e){this.ensureBooted();const n=await this.requireEngine().readMany(this.collection,e);return await this.createManyFromEngineDocuments(n)}static async first(e){const[n]=await this.all(e);return n||null}static newInstance(...e){return this.instance().newInstance(...e)}static on(e,n){return Rj(this,e,n)}static instance(){return this.instances.has(this)||this.instances.set(this,new this),this.instances.get(this)}static hasAutomaticTimestamp(e){return this.timestamps.indexOf(e)!==-1}static hasAutomaticTimestamps(){return this.timestamps.length>0}static getEngine(){return this.engines.get(this)??xj()}static getFinalEngine(){const e=this.getEngine();return e&&jl(e)}static requireEngine(){return this.engines.get(this)??Mc()}static requireFinalEngine(){return jl(this.requireEngine())}static setEngine(e){if(!e){this.engines.delete(this);return}this.engines.set(this,e)}static withEngine(e,n){return Kv({target:this,getTargetEngine:()=>this.engines.get(this),engine:e,operation:n})}static async withCollection(e,n){return this.collection===e?n():this.exclusive(async()=>{const r=this.collection;this.collection=e||r;try{return await n()}finally{this.collection=r}})}static async withoutTimestamps(e){return this.ignoringTimestamps.set(this,!0),Ne(await e(),()=>this.ignoringTimestamps.delete(this))}static async exclusive(e){return Fd.has(this)||Fd.set(this,new fc),hn(Fd.get(this)).run(async()=>e())}static pureInstance(){return this.pureInstances.has(this)||this.pureInstances.set(this,new this({__pureInstance:!0})),this.pureInstances.get(this)}static bootModelName(e){const n=Object.getOwnPropertyDescriptor(this,"modelName");return(n==null?void 0:n.value)??e??this.name}static bootCollection(){let e=this;for(;e!==lu&&(!e.hasOwnProperty("collection")||Xv.has(e));)e=Object.getPrototypeOf(e);return e===lu&&Xv.add(this),e.collection??this.pureInstance().getDefaultCollection()}static bootTimestamps(e,n){if(typeof e!="boolean"&&typeof e<"u"&&!Array.isArray(e))throw new ti(this.modelName,"Invalid timestamps definition");if(e===!1)return[];Array.isArray(e)||(e=Jv);const r=e.find(s=>!Jv.includes(s));if(r)throw new ti(this.modelName,`Invalid timestamp field defined (${r})`);for(const s of e)n[s]={type:Re.Date,required:!1};return e}static bootFields(e,n,r,s){if(typeof e>"u")return s[n]={type:Re.Key,required:!1},{fields:s,fieldAliases:{}};const i={};for(const[o,a]of Object.entries(e)){if(!Au(e,o))continue;const l=s[o]=Gh(this.modelName,o,a);if(l.alias&&(i[o]=l.alias,i[l.alias]=o),r.includes(o)&&(l.type!==Re.Date||l.required))throw new ti(this.modelName,`Field ${o} definition must be type Date and not required because it is used an automatic timestamp. Learn more at https://soukai.js.org/guide/core-concepts/models.html#automatic-timestamps`)}return n in s||(s[n]={type:Re.Key,required:!1}),{fields:s,fieldAliases:i}}static bootClassDefinitions(){const e=this.pureInstance(),n=["_engine","_recentlyDeletedPrimaryKey"],r=Object.getOwnPropertyNames(e).concat(n),s=[],i=new Map,o=new Map;let a=Object.getPrototypeOf(e);for(;a!==lu.prototype;){a.constructor.classFields&&r.push(...a.constructor.classFields);for(const[l,u]of Object.entries(Object.getOwnPropertyDescriptors(a))){const c=l;typeof u.value=="function"&&(c.endsWith("Relationship")?s.push(c.slice(0,-12)):c.match(/get.+Attribute/)?i.set(ki(c.slice(3,-9)),e[c]):c.match(/set.+Attribute/)&&o.set(ki(c.slice(3,-9)),e[c]))}a=Object.getPrototypeOf(a)}return{classFields:Qn(r),relations:Qn(s),attributeGetters:i,attributeSetters:o}}static bootHooks(e){return e??{}}static async performSchemaUpdate(e){const n=e.primaryKey??"id",r={},s=this.bootTimestamps(e.timestamps,r),i=this.bootHooks(e.hooks),{fields:o,fieldAliases:a}=this.bootFields(e.fields,n,s,r);this.primaryKey=n,this.timestamps=s,this.hooks=i,this.fields=o,this.fieldAliases=a}constructor(e={},n){var r;if("__pureInstance"in e)return;this.static().ensureBooted(),this.initializeProxy();const s=arguments[1]??!1;return this.initialize(e,s),(r=this.static("hooks").afterInitialize)==null||r.call(this._proxy),this._proxy}static(e){const n=this.constructor;return e?n[e]:n}newInstance(...e){const n=this.constructor;return new n(...e)}async fresh(){const e=this.getPrimaryKey(),n=e?await this.static().find(e):null;if(!n)throw new Be(`Couldn't get fresh instance for ${this.static("modelName")} with id '${e}'`);return n}update(e={}){e=this.castAttributes(e,this.static("fields"));for(const n in e)this.setAttribute(n,e[n]);return this.save()}hasRelation(e){return this.static("relations").indexOf(e)!==-1}getRelation(e){return this._relations[e]||null}requireRelation(e){return this._relations[e]??Ge(Be,`Attempting to use undefined ${e} relation.`)}getEngine(){return this._engine??this.static().getEngine()}getFinalEngine(){const e=this.getEngine();return e&&jl(e)}requireEngine(){return this._engine??this.static().requireEngine()}requireFinalEngine(){return jl(this.requireEngine())}getDefaultCollection(){return this.static("modelName").toLowerCase()+"s"}async loadRelation(e){const n=this.requireRelation(e),r=await n.relatedClass.withEngine(this.requireEngine(),()=>n.load());return this.emit("relation-loaded",n),r}async loadRelationIfUnloaded(e){const n=this.requireRelation(e);return n.loaded?n.getLoadedModels():this.loadRelation(e)}unloadRelation(e){this.requireRelation(e).unload()}getRelationModel(e){var n;const r=this.requireRelation(e);return r instanceof ai?(console.warn(`You're getting a single model from the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),((n=r.related)==null?void 0:n[0])??null):r.related??null}getRelationModels(e){const n=this.requireRelation(e);return n instanceof Ko?n.related?[n.related]:null:n.related??null}setRelationModel(e,n){const r=this.requireRelation(e);if(r instanceof ai){console.warn(`You're setting a single model for the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),r.related=[n];return}r.related=n}setRelationModels(e,n){const r=this.requireRelation(e),s=()=>{if(n===null||r instanceof ai)return n;if(n.length>0)throw new Be("Can't set multiple models for SingleModelRelation, use setRelationModel instead");return n[0]??null};r.related=s()}isRelationLoaded(e){return this.requireRelation(e).loaded}hasAttribute(e){const n=e.split(".");let r=au(this._attributes,this.static("fields"));for(const s of n){if(!ht(r)||!(s in r))return!1;r=r[s]}return r!==void 0}setAttribute(e,n){const r=this.static().fieldAliases[e],s=this.getAttribute(e);this.hasAttributeSetter(e)?this.callAttributeSetter(e,n):this.setAttributeValue(e,n),r&&this.attributeValueChanged(this.getAttribute(r),n)&&this.setAttribute(r,n),this.attributeValueChanged(s,n)&&this.emit("modified",e)}setAttributeValue(e,n){this._attributes[e]=n=this.castAttribute(n,{definition:this.static("fields")[e]}),this.markAttributeDirty(e,this._originalAttributes[e],n)?this._dirtyAttributes[e]=n:delete this._dirtyAttributes[e]}hasAttributeSetter(e){var n;return this.static("__attributeSetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.set)}callAttributeSetter(e,n){var r;const s=this.static("__attributeSetters").get(e)??((r=this.static("fields")[e])==null?void 0:r.set);return s==null?void 0:s.call(this,n)}getOriginalAttribute(e){return this._originalAttributes[e]}getDeletedPrimaryKey(){return this._recentlyDeletedPrimaryKey??null}setOriginalAttribute(e,n){n=this.castAttribute(n,{definition:this.static("fields")[e]}),this._originalAttributes[e]=n,this._attributes[e]=n,delete this._dirtyAttributes[e]}setAttributes(e){for(const[n,r]of Object.entries(e))this.setAttribute(n,r)}getMalformedDocumentAttributes(){return this._malformedDocumentAttributes}setMalformedDocumentAttributes(e){this._malformedDocumentAttributes=e}setEngine(e){if(!e){delete this._engine;return}this._engine=e}withEngine(e,n){return Kv({target:this,getTargetEngine:()=>this._engine,operation:n&&(()=>n(this)),engine:e})}async withoutTimestamps(e){return this.static().ignoringTimestamps.set(this,!0),Ne(await e(),()=>this.static().ignoringTimestamps.delete(this))}getAttribute(e,n=!1){return this.hasAttributeGetter(e)?this.callAttributeGetter(e):this.getAttributeValue(e,n)}getAttributeValue(e,n=!1){const r=e.split(".");let s=this.getAttributes(n);for(;r.length>0;){const i=s[r.shift()];if(!ht(i))return i;s=i}return s}getAttributes(e=!1){return e?kr(this._attributes):au(this._attributes,this.static("fields"))}hasAttributeGetter(e){var n;return this.static("__attributeGetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.get)}callAttributeGetter(e){var n;const r=this.static("__attributeGetters").get(e)??((n=this.static("fields")[e])==null?void 0:n.get);return r==null?void 0:r.call(this)}unsetAttribute(e){Au(this._attributes,e)&&(e in this.static("fields")?this._attributes[e]=void 0:delete this._attributes[e],this.markAttributeDirty(e,this._originalAttributes[e],void 0)?this._dirtyAttributes[e]=void 0:delete this._dirtyAttributes[e])}hasIncompleteAttributes(){try{return Jh(this._attributes,this.static("fields")),!1}catch{return!0}}is(e){return this.getPrimaryKey()===e.getPrimaryKey()}isDirty(e){return e?e in this._dirtyAttributes:Object.values(this._dirtyAttributes).length>0}cleanDirty(){this._originalAttributes=kr(this._attributes),this._dirtyAttributes={},this._exists=!0}reset(){delete this._attributes[this.static("primaryKey")],this._exists=!1,this._dirtyAttributes=kr(this._attributes)}getPrimaryKey(){return this._attributes[this.static("primaryKey")]??null}getSerializedPrimaryKey(){const e=this.getPrimaryKey();return e?this.serializeKey(e):null}async delete(){return this._exists?(await this.performDelete(),await this.emit("deleted"),this):this}async save(){var e,n;Jh(this._attributes,this.static("fields"));const r=this.exists();return r&&!this.isDirty()?this:(await((e=this.static("hooks").beforeSave)==null?void 0:e.call(this)),await this.beforeSave(),await this.performSave(),await((n=this.static("hooks").afterSave)==null?void 0:n.call(this)),await this.afterSave(),await this.emit(r?"updated":"created"),this)}fixMalformedAttributes(){this.performMalformedAttributeFixes(),this._malformedDocumentAttributes={}}touch(){this.setAttribute(St.UpdatedAt,new Date)}setExists(e){this._exists=e}exists(){return this._exists}wasRecentlyCreated(){return this._wasRecentlyCreated}wasRecentlyDeleted(){return!!this._recentlyDeletedPrimaryKey}clone(e={}){const n=e.clones??new WeakMap;if(n.has(this))return n.get(this);const r=e.constructors,s=Array.isArray(r)?Ne(new WeakMap,a=>{r.forEach(([l,u])=>a.set(l,u))}):r??new WeakMap,i=s.get(this.static())??this.static(),o=new i(this.getAttributes());n.set(this,o);for(const[a,l]of Object.entries(this._relations))o._relations[a]=Ne(l.clone({clones:n,constructors:s}),u=>u.parent=o);return e.clean&&o.cleanDirty(),o}initialize(e,n){this._exists=n,this._wasRecentlyCreated=!1,this.initializeAttributes(e,n),this.initializeRelations()}initializeProxy(){this._proxy=new Proxy(this,{get(e,n,r){if(typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1)return Reflect.get(e,n,r);if(e.hasRelation(n))return e._proxy.isRelationLoaded(n)?e._proxy.requireRelation(n).related:void 0;if(n.startsWith("related")){const s=ki(n.substr(7));if(e._proxy.hasRelation(s))return e._relations[s]}return e._proxy.getAttribute(n)},set(e,n,r,s){return typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1?Reflect.set(e,n,r,s):e._proxy.hasRelation(n)?(e._proxy.requireRelation(n).related=r,!0):(e._proxy.setAttribute(n,r),!0)},deleteProperty(e,n){return typeof n!="string"||n in e?Reflect.deleteProperty(e,n):e._proxy.hasRelation(n)?(e._proxy.unloadRelation(n),!0):!(n in e._attributes)||e.static("classFields").indexOf(n)!==-1?Reflect.deleteProperty(e,n):(e._proxy.unsetAttribute(n),!0)}})}initializeAttributes(e,n){try{const r=this.static("fields");this._malformedDocumentAttributes={},this._attributes=kr(e),this._attributes=this.castAttributes(z1(this._attributes,r),r,this._malformedDocumentAttributes);for(const[s,i]of Object.entries(this.static().fieldAliases)){const o=this._attributes[s]??this._attributes[i];this._attributes[s]=o,this._attributes[i]=o}this._originalAttributes=n?kr(this._attributes):{},this._dirtyAttributes=n?{}:kr(this._attributes),delete this._malformedDocumentAttributes[this.static("primaryKey")]}catch(r){throw new B1(this.static("modelName"),e,{cause:r})}}initializeRelations(){this._relations=this.static("relations").reduce((e,n)=>{var r;const s=this._proxy,i=(r=s[ki(n)+"Relationship"])==null?void 0:r.call(s);return i.name=n,e[n]=i,e},{})}async createFromEngineDocument(e,n){const r=await this.parseEngineDocumentAttributes(e,n);r[this.static("primaryKey")]=e;for(const[s,i]of Object.entries(this.static("fields")))i.deserialize&&(r[s]=i.deserialize(r[s]));return this.newInstance(r,!0)}async createManyFromEngineDocuments(e){return Promise.all(Object.entries(e).map(([n,r])=>this.createFromEngineDocument(this.parseKey(n),r)))}async beforeSave(){const e=new Date,n=this.static().ignoringTimestamps;if(!n.has(this)&&!n.has(this.static())&&(this.static().hasAutomaticTimestamp(St.CreatedAt)&&this.setAttribute(St.CreatedAt,this.getAttribute(St.CreatedAt)??e),this.static().hasAutomaticTimestamp(St.UpdatedAt))){const r=this.isDirty(St.UpdatedAt)?this.getAttribute(St.UpdatedAt):e;this.setAttribute(St.UpdatedAt,r??e)}}async performSave(){const e=this.exists(),n=await this.syncDirty();this._wasRecentlyCreated=this._wasRecentlyCreated||!e,this._attributes[this.static("primaryKey")]=this.parseKey(n)}async afterSave(){this.cleanDirty(),await this.loadEmptyRelations()}async performDelete(){const e=this.getPrimaryKey(),n=await this.getCascadeModels();await this.deleteModelsFromEngine(n),n.forEach(r=>r.reset()),this._recentlyDeletedPrimaryKey=e}performMalformedAttributeFixes(){const e=Object.keys(this._malformedDocumentAttributes),n=(r,s)=>s.type===Re.Array?e.some(i=>i.startsWith(`${r}.`)):r in this._malformedDocumentAttributes;for(const[r,s]of Object.entries(this.static("fields")))n(r,s)&&(this._dirtyAttributes[r]=this._attributes[r])}async emit(...e){return Hv(this,...e)}async syncDirty(){if(!this.exists())return this.requireEngine().create(this.static("collection"),this.toEngineDocument(),this.getSerializedPrimaryKey()||void 0);const e=this.getDirtyEngineDocumentUpdates(),n=this.getSerializedPrimaryKey();return await this.requireEngine().update(this.static("collection"),n,e),n}async getCascadeModels(){let e=tu("cascade-models",this);if(!e){const n=new Set;await this.populateCascadeModels(n),e=Array.from(n).filter(r=>r.exists()),Dp("cascade-models",this,e)}return e}async deleteModelsFromEngine(e){const n=e.map(r=>[r.static("collection"),r.getSerializedPrimaryKey()]);await Promise.all(n.map(([r,s])=>this.requireEngine().delete(r,s)))}resetEngineData(){this.reset()}hasOne(e,n,r){return new Pi(this,e,n,r)}belongsToOne(e,n,r){return new ka(this,e,n,r)}hasMany(e,n,r){return new _o(this,e,n,r)}belongsToMany(e,n,r){return new wo(this,e,n,r)}async loadEmptyRelations(){const e=this.wasRecentlyCreated();for(const n of Object.values(this._relations))if(!(!n.enabled||n.loaded)){if(e&&n instanceof _o){n.related=[];continue}if(e&&n instanceof Pi){n.related=null;continue}n.isEmpty()&&await n.load()}}attributeValueChanged(e,n){return e instanceof er?$t(e)!==$t(n):!Tp(e,n)}markAttributeDirty(e,n,r){return this.attributeValueChanged(n,r)}castAttributes(e,n,r,s=""){const i={};for(const o in e)i[o]=this.castAttribute(e[o],{field:s+o,malformedAttributes:r,definition:n[o]});return i}castAttribute(e,{field:n,definition:r,malformedAttributes:s}={}){if(oh(e))return e;if(r!=null&&r.cast)return r.cast(e);if(typeof r>"u")switch(typeof e){case"object":return Array.isArray(e)?e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,malformedAttributes:s})):e instanceof Date||e instanceof er?e:$t(e);case"symbol":case"function":case"undefined":return;default:return e}switch(r.type){case Re.Date:if(!["string","number"].includes(typeof e)&&!(e instanceof Date))throw new Be(`Invalid Date value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return new Date(e);case Re.Object:if(!ht(e))throw new Be(`Invalid Object value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return this.castAttributes(e,r.fields,s,n&&`${n}.`);case Re.Array:if(!Array.isArray(e))throw new Be(`Invalid Array value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,definition:r.items,malformedAttributes:s}));case Re.Boolean:return!!e;case Re.Number:{const i=parseFloat(e);if(isNaN(i))throw new Be(`Invalid Number value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return i}case Re.String:return $t(e);case Re.Key:{if(e instanceof er)return $t(e);if(n&&s){const i=s[n]??[];s[n]=i.concat(["malformed-key"])}return e}default:return e}}toEngineDocument(){const e=this.static("fields"),n=au(this._attributes,e);for(const[r,s]of Object.entries(e))s.serialize&&(n[r]=s.serialize(n[r]));return n}getDirtyEngineDocumentUpdates(){const e=kr(this._dirtyAttributes);for(const n in e)e[n]===void 0&&(e[n]={$unset:!0});return e}async populateCascadeModels(e){if(!e.has(this)){e.add(this);for(const n of Object.values(this._relations))!n.enabled||n.deleteStrategy!=="cascade"||(await n.getModels()).forEach(r=>r.populateCascadeModels(e))}}async parseEngineDocumentAttributes(e,n){return{...n}}serializeKey(e){return $t(e)}parseKey(e){return e}};nt(cn,"collection"),nt(cn,"primaryKey","id"),nt(cn,"timestamps"),nt(cn,"fields"),nt(cn,"modelName"),nt(cn,"classFields",[]),nt(cn,"relations",[]),nt(cn,"hooks",{}),nt(cn,"__attributeGetters",new Map),nt(cn,"__attributeSetters",new Map),nt(cn,"instances",new WeakMap),nt(cn,"pureInstances",new WeakMap),nt(cn,"bootedModels",new WeakMap),nt(cn,"engines",new WeakMap),nt(cn,"ignoringTimestamps",new WeakMap),nt(cn,"fieldAliases",{});let $i=cn;function Oj(t,e){const n=e?t:$i;return Ne(class extends n{},r=>{Object.assign(r,e??t)})}const Tm=new Map;function H1(){return new Map(Tm)}function Xt(t){return Tm.get(t)??Ge(Be,`Could not find Model with name '${t}', are you sure it's booted?`)}function Om(t){for(const[e,n]of Object.entries(t))n.boot(e),Tm.set(e,n)}function Dj(t){let e=Object.getPrototypeOf(t);for(;e;){if(e!==$i){e=Object.getPrototypeOf(e);continue}return!0}return!1}function kj(t,e=[".schema",".test"]){const n={};for(const[r,s]of Object.entries(t)){const i=(r.match(/^(.*\/)?(.+)\.(j|t)s$/)||[])[2];if(typeof i>"u"||e.some(a=>i.endsWith(a)))continue;const o=s.default??s[Object.keys(s)[0]];!o||!Dj(o)||(n[i]=o)}return n}function Pj(t,e=[".schema"]){const n=kj(t,e);Om(n)}var Yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $j(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lj(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var jd={},Ud,Qv;function Dm(){return Qv||(Qv=1,Ud=class K1{constructor(e,n=new Map,r=0){this.prefix=e,this._existing=n,this.counter=r}clone(){const{prefix:e,_existing:n,counter:r}=this;return new K1(e,new Map(n),r)}getId(e){const n=e&&this._existing.get(e);if(n)return n;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}),Ud}var qd={},Zv;function Mj(){return Zv||(Zv=1,(function(t,e){if(t.setImmediate)return;var n=1,r={},s=!1,i=t.document,o;function a(E){typeof E!="function"&&(E=new Function(""+E));for(var _=new Array(arguments.length-1),p=0;p<_.length;p++)_[p]=arguments[p+1];var v={callback:E,args:_};return r[n]=v,o(n),n++}function l(E){delete r[E]}function u(E){var _=E.callback,p=E.args;switch(p.length){case 0:_();break;case 1:_(p[0]);break;case 2:_(p[0],p[1]);break;case 3:_(p[0],p[1],p[2]);break;default:_.apply(e,p);break}}function c(E){if(s)setTimeout(c,0,E);else{var _=r[E];if(_){s=!0;try{u(_)}finally{l(E),s=!1}}}}function d(){o=function(E){process.nextTick(function(){c(E)})}}function f(){if(t.postMessage&&!t.importScripts){var E=!0,_=t.onmessage;return t.onmessage=function(){E=!1},t.postMessage("","*"),t.onmessage=_,E}}function h(){var E="setImmediate$"+Math.random()+"$",_=function(p){p.source===t&&typeof p.data=="string"&&p.data.indexOf(E)===0&&c(+p.data.slice(E.length))};t.addEventListener?t.addEventListener("message",_,!1):t.attachEvent("onmessage",_),o=function(p){t.postMessage(E+p,"*")}}function m(){var E=new MessageChannel;E.port1.onmessage=function(_){var p=_.data;c(p)},o=function(_){E.port2.postMessage(_)}}function g(){var E=i.documentElement;o=function(_){var p=i.createElement("script");p.onreadystatechange=function(){c(_),p.onreadystatechange=null,E.removeChild(p),p=null},E.appendChild(p)}}function x(){o=function(E){setTimeout(c,0,E)}}var b=Object.getPrototypeOf&&Object.getPrototypeOf(t);b=b&&b.setTimeout?b:t,{}.toString.call(t.process)==="[object process]"?d():f()?h():t.MessageChannel?m():i&&"onreadystatechange"in i.createElement("script")?g():x(),b.setImmediate=a,b.clearImmediate=l})(typeof self>"u"?typeof Yv>"u"?qd:Yv:self)),qd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Bd,eb;function Nc(){if(eb)return Bd;eb=1,Mj();const t=self.crypto||self.msCrypto;return Bd=class{constructor(n){if(!(t&&t.subtle))throw new Error("crypto.subtle not found.");if(n==="sha256")this.algorithm={name:"SHA-256"};else if(n==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${n}".`);this._content=""}update(n){this._content+=n}async digest(){const n=new TextEncoder().encode(this._content),r=new Uint8Array(await t.subtle.digest(this.algorithm,n));let s="";for(let i=0;i<r.length;++i)s+=r[i].toString(16).padStart(2,"0");return s}},Bd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Vd,tb;function W1(){return tb||(tb=1,Vd=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let n=0;n<e.length;++n)this.dir.set(e[n],!0)}hasNext(){return!this.done}next(){const{current:e,dir:n}=this,r=e.slice();let s=null,i=0;const o=e.length;for(let a=0;a<o;++a){const l=e[a],u=n.get(l);(s===null||l>s)&&(u&&a>0&&l>e[a-1]||!u&&a<o-1&&l>e[a+1])&&(s=l,i=a)}if(s===null)this.done=!0;else{const a=n.get(s)?i-1:i+1;e[i]=e[a],e[a]=s;for(const l of e)l>s&&n.set(l,!n.get(l))}return r}}),Vd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var zd,nb;function km(){if(nb)return zd;nb=1;const e="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",n="http://www.w3.org/2001/XMLSchema#string",r="NamedNode",s="BlankNode",i="Literal",o="DefaultGraph",a={};(()=>{const h="(?:<([^:]+:[^>]*)>)",g="A-Za-z-----------"+"_",x=g+"0-9---",E="(_:(?:["+g+"0-9])(?:(?:["+x+".])*(?:["+x+"]))?)",_='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',p="(?:\\^\\^"+h+")",S="(?:"+_+"(?:"+p+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",C="[ \\t]+",R="[ \\t]*",T="(?:"+h+"|"+E+")"+C,D=h+C,U="(?:"+h+"|"+E+"|"+S+")"+R,z="(?:\\.|(?:(?:"+h+"|"+E+")"+R+"\\.))";a.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,a.empty=new RegExp("^"+R+"$"),a.quad=new RegExp("^"+R+T+D+U+z+R+"$")})(),zd=class uu{static parse(m){const g=[],x={},b=m.split(a.eoln);let E=0;for(const _ of b){if(E++,a.empty.test(_))continue;const p=_.match(a.quad);if(p===null)throw new Error("N-Quads parse error on line "+E+".");const v={subject:null,predicate:null,object:null,graph:null};if(p[1]!==void 0?v.subject={termType:r,value:p[1]}:v.subject={termType:s,value:p[2]},v.predicate={termType:r,value:p[3]},p[4]!==void 0?v.object={termType:r,value:p[4]}:p[5]!==void 0?v.object={termType:s,value:p[5]}:(v.object={termType:i,value:void 0,datatype:{termType:r}},p[7]!==void 0?v.object.datatype.value=p[7]:p[8]!==void 0?(v.object.datatype.value=e,v.object.language=p[8]):v.object.datatype.value=n,v.object.value=f(p[6])),p[9]!==void 0?v.graph={termType:r,value:p[9]}:p[10]!==void 0?v.graph={termType:s,value:p[10]}:v.graph={termType:o,value:""},!(v.graph.value in x))x[v.graph.value]=[v],g.push(v);else{let S=!0;const C=x[v.graph.value];for(const R of C)if(l(R,v)){S=!1;break}S&&(C.push(v),g.push(v))}}return g}static serialize(m){Array.isArray(m)||(m=uu.legacyDatasetToQuads(m));const g=[];for(const x of m)g.push(uu.serializeQuad(x));return g.sort().join("")}static serializeQuadComponents(m,g,x,b){let E="";return m.termType===r?E+=`<${m.value}>`:E+=`${m.value}`,E+=` <${g.value}> `,x.termType===r?E+=`<${x.value}>`:x.termType===s?E+=x.value:(E+=`"${c(x.value)}"`,x.datatype.value===e?x.language&&(E+=`@${x.language}`):x.datatype.value!==n&&(E+=`^^<${x.datatype.value}>`)),b.termType===r?E+=` <${b.value}>`:b.termType===s&&(E+=` ${b.value}`),E+=` .
`,E}static serializeQuad(m){return uu.serializeQuadComponents(m.subject,m.predicate,m.object,m.graph)}static legacyDatasetToQuads(m){const g=[],x={"blank node":s,IRI:r,literal:i};for(const b in m)m[b].forEach(_=>{const p={};for(const v in _){const S=_[v],C={termType:x[S.type],value:S.value};C.termType===i&&(C.datatype={termType:r},"datatype"in S&&(C.datatype.value=S.datatype),"language"in S?("datatype"in S||(C.datatype.value=e),C.language=S.language):"datatype"in S||(C.datatype.value=n)),p[v]=C}b==="@default"?p.graph={termType:o,value:""}:p.graph={termType:b.startsWith("_:")?s:r,value:b},g.push(p)});return g}};function l(h,m){return!(h.subject.termType===m.subject.termType&&h.object.termType===m.object.termType)||!(h.subject.value===m.subject.value&&h.predicate.value===m.predicate.value&&h.object.value===m.object.value)?!1:h.object.termType!==i?!0:h.object.datatype.termType===m.object.datatype.termType&&h.object.language===m.object.language&&h.object.datatype.value===m.object.datatype.value}const u=/["\\\n\r]/g;function c(h){return h.replace(u,function(m){switch(m){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const d=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function f(h){return h.replace(d,function(m,g,x,b){if(g)switch(g){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(x)return String.fromCharCode(parseInt(x,16));if(b)throw new Error("Unsupported U escape")})}return zd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Hd,rb;function G1(){if(rb)return Hd;rb=1;const t=Dm(),e=Nc(),n=W1(),r=km();Hd=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}async main(o){this.deepIterations=new Map,this.quads=o;for(const h of o)this._addBlankNodeQuadInfo({quad:h,component:h.subject}),this._addBlankNodeQuadInfo({quad:h,component:h.object}),this._addBlankNodeQuadInfo({quad:h,component:h.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];let u=0;for(const h of l)++u%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:h,hashToBlankNodes:a});const c=[...a.keys()].sort(),d=[];for(const h of c){const m=a.get(h);if(m.length>1){d.push(m);continue}const g=m[0];this.canonicalIssuer.getId(g)}for(const h of d){const m=[];for(const g of h){if(this.canonicalIssuer.hasId(g))continue;const x=new t("_:b");x.getId(g);const b=await this.hashNDegreeQuads(g,x);m.push(b)}m.sort(s);for(const g of m){const x=g.issuer.getOldIds();for(const b of x)this.canonicalIssuer.getId(b)}}const f=[];for(const h of this.quads){const m=r.serializeQuadComponents(this._componentWithCanonicalId(h.subject),h.predicate,this._componentWithCanonicalId(h.object),this._componentWithCanonicalId(h.graph));f.push(m)}return f.sort(),f.join("")}async hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),u=l.quads;for(const d of u){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const c=this.createMessageDigest();for(const d of a)c.update(d);return l.hash=await c.digest(),l.hash}async hashRelatedBlankNode(o,a,l,u){let c;this.canonicalIssuer.hasId(o)?c=this.canonicalIssuer.getId(o):l.hasId(o)?c=l.getId(o):c=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(u),u!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(c),d.digest()}async hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const u=this.createMessageDigest(),c=await this.createHashToRelated(o,a),d=[...c.keys()].sort();for(const f of d){u.update(f);let h="",m;const g=new n(c.get(f));let x=0;for(;g.hasNext();){const b=g.next();++x%3===0&&await this._yield();let E=a.clone(),_="";const p=[];let v=!1;for(const S of b)if(this.canonicalIssuer.hasId(S)?_+=this.canonicalIssuer.getId(S):(E.hasId(S)||p.push(S),_+=E.getId(S)),h.length!==0&&_>h){v=!0;break}if(!v){for(const S of p){const C=await this.hashNDegreeQuads(S,E);if(_+=E.getId(S),_+=`<${C.hash}>`,E=C.issuer,h.length!==0&&_>h){v=!0;break}}v||(h.length===0||_<h)&&(h=_,m=E)}}u.update(h),a=m}return{hash:await u.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}async createHashToRelated(o,a){const l=new Map,u=this.blankNodeInfo.get(o).quads;let c=0;for(const d of u)++c%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:o,issuer:a,hashToRelated:l})]);return l}async _hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=await this.hashFirstDegreeQuads(o),u=a.get(l);u?u.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,u=this.blankNodeInfo.get(l);u?u.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}async _addRelatedBlankNodeHash({quad:o,component:a,position:l,id:u,issuer:c,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==u))return;const f=a.value,h=await this.hashRelatedBlankNode(f,o,c,l),m=d.get(h);m?m.push(f):d.set(h,[f])}_componentWithCanonicalId(o){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}async _yield(){return new Promise(o=>setImmediate(o))}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return Hd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Kd,sb;function Nj(){if(sb)return Kd;sb=1;const t=Nc(),e=G1();return Kd=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}async createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;let a=0;for(const l of o){let u,c;if(l.subject.termType==="BlankNode"&&l.subject.value!==r)c=l.subject.value,u="p";else if(l.object.termType==="BlankNode"&&l.object.value!==r)c=l.object.value,u="r";else continue;++a%100===0&&await this._yield();const d=await this.hashRelatedBlankNode(c,l,s,u),f=i.get(d);f?f.push(c):i.set(d,[c])}return i}},Kd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Wd,ib;function J1(){if(ib)return Wd;ib=1;const t=Dm(),e=Nc(),n=W1(),r=km();Wd=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}main(o){this.deepIterations=new Map,this.quads=o;for(const f of o)this._addBlankNodeQuadInfo({quad:f,component:f.subject}),this._addBlankNodeQuadInfo({quad:f,component:f.object}),this._addBlankNodeQuadInfo({quad:f,component:f.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];for(const f of l)this._hashAndTrackBlankNode({id:f,hashToBlankNodes:a});const u=[...a.keys()].sort(),c=[];for(const f of u){const h=a.get(f);if(h.length>1){c.push(h);continue}const m=h[0];this.canonicalIssuer.getId(m)}for(const f of c){const h=[];for(const m of f){if(this.canonicalIssuer.hasId(m))continue;const g=new t("_:b");g.getId(m);const x=this.hashNDegreeQuads(m,g);h.push(x)}h.sort(s);for(const m of h){const g=m.issuer.getOldIds();for(const x of g)this.canonicalIssuer.getId(x)}}const d=[];for(const f of this.quads){const h=r.serializeQuadComponents(this._componentWithCanonicalId({component:f.subject}),f.predicate,this._componentWithCanonicalId({component:f.object}),this._componentWithCanonicalId({component:f.graph}));d.push(h)}return d.sort(),d.join("")}hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),u=l.quads;for(const d of u){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const c=this.createMessageDigest();for(const d of a)c.update(d);return l.hash=c.digest(),l.hash}hashRelatedBlankNode(o,a,l,u){let c;this.canonicalIssuer.hasId(o)?c=this.canonicalIssuer.getId(o):l.hasId(o)?c=l.getId(o):c=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(u),u!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(c),d.digest()}hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const u=this.createMessageDigest(),c=this.createHashToRelated(o,a),d=[...c.keys()].sort();for(const f of d){u.update(f);let h="",m;const g=new n(c.get(f));for(;g.hasNext();){const x=g.next();let b=a.clone(),E="";const _=[];let p=!1;for(const v of x)if(this.canonicalIssuer.hasId(v)?E+=this.canonicalIssuer.getId(v):(b.hasId(v)||_.push(v),E+=b.getId(v)),h.length!==0&&E>h){p=!0;break}if(!p){for(const v of _){const S=this.hashNDegreeQuads(v,b);if(E+=b.getId(v),E+=`<${S.hash}>`,b=S.issuer,h.length!==0&&E>h){p=!0;break}}p||(h.length===0||E<h)&&(h=E,m=b)}}u.update(h),a=m}return{hash:u.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}createHashToRelated(o,a){const l=new Map,u=this.blankNodeInfo.get(o).quads;for(const c of u)this._addRelatedBlankNodeHash({quad:c,component:c.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:c,component:c.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:c,component:c.graph,position:"g",id:o,issuer:a,hashToRelated:l});return l}_hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=this.hashFirstDegreeQuads(o),u=a.get(l);u?u.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,u=this.blankNodeInfo.get(l);u?u.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}_addRelatedBlankNodeHash({quad:o,component:a,position:l,id:u,issuer:c,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==u))return;const f=a.value,h=this.hashRelatedBlankNode(f,o,c,l),m=d.get(h);m?m.push(f):d.set(h,[f])}_componentWithCanonicalId({component:o}){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return Wd}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */var Gd,ob;function Fj(){if(ob)return Gd;ob=1;const t=Nc(),e=J1();return Gd=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;for(const a of o){let l,u;if(a.subject.termType==="BlankNode"&&a.subject.value!==r)u=a.subject.value,l="p";else if(a.object.termType==="BlankNode"&&a.object.value!==r)u=a.object.value,l="r";else continue;const c=this.hashRelatedBlankNode(u,a,s,l),d=i.get(c);d?d.push(u):i.set(c,[u])}return i}},Gd}const jj={},Uj=Object.freeze(Object.defineProperty({__proto__:null,default:jj},Symbol.toStringTag,{value:"Module"})),qj=Lj(Uj);var ab;function Bj(){return ab||(ab=1,(function(t){const e=G1(),n=Nj(),r=J1(),s=Fj();let i;try{i=qj}catch{}function o(a){return Array.isArray(a)?a:t.NQuads.legacyDatasetToQuads(a)}t.NQuads=km(),t.IdentifierIssuer=Dm(),t._rdfCanonizeNative=function(a){return a&&(i=a),i},t.canonize=async function(a,l){const u=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((c,d)=>i.canonize(u,l,(f,h)=>f?d(f):c(h)))}if(l.algorithm==="URDNA2015")return new e(l).main(u);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new n(l).main(u)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},t._canonizeSync=function(a,l){const u=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return i.canonizeSync(u,l)}if(l.algorithm==="URDNA2015")return new r(l).main(u);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new s(l).main(u)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}})(jd)),jd}var Jd,lb;function Pm(){return lb||(lb=1,Jd=Bj()),Jd}var Xd,ub;function dr(){if(ub)return Xd;ub=1;const t={};return Xd=t,t.isArray=Array.isArray,t.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]",t.isDouble=e=>t.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21),t.isEmptyObject=e=>t.isObject(e)&&Object.keys(e).length===0,t.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]",t.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),t.isObject=e=>Object.prototype.toString.call(e)==="[object Object]",t.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]",t.isUndefined=e=>typeof e>"u",Xd}var Yd,cb;function qs(){if(cb)return Yd;cb=1;const t=dr(),e={};return Yd=e,e.isSubject=n=>t.isObject(n)&&!("@value"in n||"@set"in n||"@list"in n)?Object.keys(n).length>1||!("@id"in n):!1,e.isSubjectReference=n=>t.isObject(n)&&Object.keys(n).length===1&&"@id"in n,e.isValue=n=>t.isObject(n)&&"@value"in n,e.isList=n=>t.isObject(n)&&"@list"in n,e.isGraph=n=>t.isObject(n)&&"@graph"in n&&Object.keys(n).filter(r=>r!=="@id"&&r!=="@index").length===1,e.isSimpleGraph=n=>e.isGraph(n)&&!("@id"in n),e.isBlankNode=n=>{if(t.isObject(n)){if("@id"in n){const r=n["@id"];return!t.isString(r)||r.indexOf("_:")===0}return Object.keys(n).length===0||!("@value"in n||"@set"in n||"@list"in n)}return!1},Yd}var Qd,db;function Tr(){return db||(db=1,Qd=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",n="jsonld.Error",r={}){super(e),this.name=n,this.message=e,this.details=r}}),Qd}var Zd,fb;function Rr(){if(fb)return Zd;fb=1;const t=qs(),e=dr(),n=Pm().IdentifierIssuer,r=Tr(),s=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,i=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,o=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,a=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,l=/^@[a-zA-Z]+$/,u={headers:{accept:"application/ld+json, application/json"}},c={};Zd=c,c.IdentifierIssuer=n,c.REGEX_BCP47=s,c.REGEX_KEYWORD=l,c.clone=function(f){if(f&&typeof f=="object"){let h;if(e.isArray(f)){h=[];for(let m=0;m<f.length;++m)h[m]=c.clone(f[m])}else if(f instanceof Map){h=new Map;for(const[m,g]of f)h.set(m,c.clone(g))}else if(f instanceof Set){h=new Set;for(const m of f)h.add(c.clone(m))}else if(e.isObject(f)){h={};for(const m in f)h[m]=c.clone(f[m])}else h=f.toString();return h}return f},c.asArray=function(f){return Array.isArray(f)?f:[f]},c.buildHeaders=(f={})=>{if(Object.keys(f).some(m=>m.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+u.headers.accept+'" is supported.');return Object.assign({Accept:u.headers.accept},f)},c.parseLinkHeader=f=>{const h={},m=f.match(i);for(let g=0;g<m.length;++g){let x=m[g].match(o);if(!x)continue;const b={target:x[1]},E=x[2];for(;x=a.exec(E);)b[x[1]]=x[2]===void 0?x[3]:x[2];const _=b.rel||"";Array.isArray(h[_])?h[_].push(b):h.hasOwnProperty(_)?h[_]=[h[_],b]:h[_]=b}return h},c.validateTypeValue=(f,h)=>{if(!e.isString(f)&&!(e.isArray(f)&&f.every(m=>e.isString(m)))){if(h&&e.isObject(f))switch(Object.keys(f).length){case 0:return;case 1:if("@default"in f&&c.asArray(f["@default"]).every(m=>e.isString(m)))return}throw new r('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:f})}},c.hasProperty=(f,h)=>{if(f.hasOwnProperty(h)){const m=f[h];return!e.isArray(m)||m.length>0}return!1},c.hasValue=(f,h,m)=>{if(c.hasProperty(f,h)){let g=f[h];const x=t.isList(g);if(e.isArray(g)||x){x&&(g=g["@list"]);for(let b=0;b<g.length;++b)if(c.compareValues(m,g[b]))return!0}else if(!e.isArray(m))return c.compareValues(m,g)}return!1},c.addValue=(f,h,m,g)=>{if(g=g||{},"propertyIsArray"in g||(g.propertyIsArray=!1),"valueIsArray"in g||(g.valueIsArray=!1),"allowDuplicate"in g||(g.allowDuplicate=!0),"prependValue"in g||(g.prependValue=!1),g.valueIsArray)f[h]=m;else if(e.isArray(m)){m.length===0&&g.propertyIsArray&&!f.hasOwnProperty(h)&&(f[h]=[]),g.prependValue&&(m=m.concat(f[h]),f[h]=[]);for(let x=0;x<m.length;++x)c.addValue(f,h,m[x],g)}else if(f.hasOwnProperty(h)){const x=!g.allowDuplicate&&c.hasValue(f,h,m);!e.isArray(f[h])&&(!x||g.propertyIsArray)&&(f[h]=[f[h]]),x||(g.prependValue?f[h].unshift(m):f[h].push(m))}else f[h]=g.propertyIsArray?[m]:m},c.getValues=(f,h)=>[].concat(f[h]||[]),c.removeProperty=(f,h)=>{delete f[h]},c.removeValue=(f,h,m,g)=>{g=g||{},"propertyIsArray"in g||(g.propertyIsArray=!1);const x=c.getValues(f,h).filter(b=>!c.compareValues(b,m));x.length===0?c.removeProperty(f,h):x.length===1&&!g.propertyIsArray?f[h]=x[0]:f[h]=x},c.relabelBlankNodes=(f,h)=>{h=h||{};const m=h.issuer||new n("_:b");return d(m,f)},c.compareValues=(f,h)=>f===h||t.isValue(f)&&t.isValue(h)&&f["@value"]===h["@value"]&&f["@type"]===h["@type"]&&f["@language"]===h["@language"]&&f["@index"]===h["@index"]?!0:e.isObject(f)&&"@id"in f&&e.isObject(h)&&"@id"in h?f["@id"]===h["@id"]:!1,c.compareShortestLeast=(f,h)=>f.length<h.length?-1:h.length<f.length?1:f===h?0:f<h?-1:1;function d(f,h){if(e.isArray(h))for(let m=0;m<h.length;++m)h[m]=d(f,h[m]);else if(t.isList(h))h["@list"]=d(f,h["@list"]);else if(e.isObject(h)){t.isBlankNode(h)&&(h["@id"]=f.getId(h["@id"]));const m=Object.keys(h).sort();for(let g=0;g<m.length;++g){const x=m[g];x!=="@id"&&(h[x]=d(f,h[x]))}}return h}return Zd}var ef,hb;function $m(){if(hb)return ef;hb=1;const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e="http://www.w3.org/2001/XMLSchema#";return ef={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:t,RDF_LIST:t+"List",RDF_FIRST:t+"first",RDF_REST:t+"rest",RDF_NIL:t+"nil",RDF_TYPE:t+"type",RDF_PLAIN_LITERAL:t+"PlainLiteral",RDF_XML_LITERAL:t+"XMLLiteral",RDF_JSON_LITERAL:t+"JSON",RDF_OBJECT:t+"object",RDF_LANGSTRING:t+"langString",XSD:e,XSD_BOOLEAN:e+"boolean",XSD_DOUBLE:e+"double",XSD_INTEGER:e+"integer",XSD_STRING:e+"string"},ef}var tf,pb;function X1(){return pb||(pb=1,tf=class{constructor(){this._requests={}}wrapLoader(e){const n=this;return n._loader=e,function(){return n.add.apply(n,arguments)}}async add(e){let n=this._requests[e];if(n)return Promise.resolve(n);n=this._requests[e]=this._loader(e);try{return await n}finally{delete this._requests[e]}}}),tf}var nf,mb;function Si(){if(mb)return nf;mb=1;const t=dr(),e={};nf=e,e.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.parse=(r,s)=>{const i={},o=e.parsers[s||"full"],a=o.regex.exec(r);let l=o.keys.length;for(;l--;)i[o.keys[l]]=a[l]===void 0?null:a[l];return(i.scheme==="https"&&i.port==="443"||i.scheme==="http"&&i.port==="80")&&(i.href=i.href.replace(":"+i.port,""),i.authority=i.authority.replace(":"+i.port,""),i.port=null),i.normalizedPath=e.removeDotSegments(i.path),i},e.prependBase=(r,s)=>{if(r===null||e.isAbsolute(s))return s;(!r||t.isString(r))&&(r=e.parse(r||""));const i=e.parse(s),o={protocol:r.protocol||""};if(i.authority!==null)o.authority=i.authority,o.path=i.path,o.query=i.query;else if(o.authority=r.authority,i.path==="")o.path=r.path,i.query!==null?o.query=i.query:o.query=r.query;else{if(i.path.indexOf("/")===0)o.path=i.path;else{let l=r.path;l=l.substr(0,l.lastIndexOf("/")+1),(l.length>0||r.authority)&&l.substr(-1)!=="/"&&(l+="/"),l+=i.path,o.path=l}o.query=i.query}i.path!==""&&(o.path=e.removeDotSegments(o.path));let a=o.protocol;return o.authority!==null&&(a+="//"+o.authority),a+=o.path,o.query!==null&&(a+="?"+o.query),i.fragment!==null&&(a+="#"+i.fragment),a===""&&(a="./"),a},e.removeBase=(r,s)=>{if(r===null)return s;(!r||t.isString(r))&&(r=e.parse(r||""));let i="";if(r.href!==""?i+=(r.protocol||"")+"//"+(r.authority||""):s.indexOf("//")&&(i+="//"),s.indexOf(i)!==0)return s;const o=e.parse(s.substr(i.length)),a=r.normalizedPath.split("/"),l=o.normalizedPath.split("/"),u=o.fragment||o.query?0:1;for(;a.length>0&&l.length>u&&a[0]===l[0];)a.shift(),l.shift();let c="";if(a.length>0){a.pop();for(let d=0;d<a.length;++d)c+="../"}return c+=l.join("/"),o.query!==null&&(c+="?"+o.query),o.fragment!==null&&(c+="#"+o.fragment),c===""&&(c="./"),c},e.removeDotSegments=r=>{if(r.length===0)return"";const s=r.split("/"),i=[];for(;s.length>0;){const o=s.shift(),a=s.length===0;if(o==="."){a&&i.push("");continue}if(o===".."){i.pop(),a&&i.push("");continue}i.push(o)}return r[0]==="/"&&i.length>0&&i[0]!==""&&i.unshift(""),i.length===1&&i[0]===""?"/":i.join("/")};const n=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;return e.isAbsolute=r=>t.isString(r)&&n.test(r),e.isRelative=r=>t.isString(r),nf}var rf,gb;function Vj(){if(gb)return rf;gb=1;const{parseLinkHeader:t,buildHeaders:e}=Rr(),{LINK_HEADER_CONTEXT:n}=$m(),r=Tr(),s=X1(),{prependBase:i}=Si(),o=/(^|(\r\n))link:/i;rf=({secure:l,headers:u={},xhr:c}={headers:{}})=>{return u=e(u),new s().wrapLoader(f);async function f(h){if(h.indexOf("http:")!==0&&h.indexOf("https:")!==0)throw new r('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:h});if(l&&h.indexOf("https")!==0)throw new r(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:h});let m;try{m=await a(c,h,u)}catch(_){throw new r("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:h,cause:_})}if(m.status>=400)throw new r("URL could not be dereferenced: "+m.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:h,httpStatusCode:m.status});let g={contextUrl:null,documentUrl:h,document:m.response},x=null;const b=m.getResponseHeader("Content-Type");let E;if(o.test(m.getAllResponseHeaders())&&(E=m.getResponseHeader("Link")),E&&b!=="application/ld+json"){const _=t(E),p=_[n];if(Array.isArray(p))throw new r("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:h});p&&(g.contextUrl=p.target),x=_.alternate,x&&x.type=="application/ld+json"&&!(b||"").match(/^application\/(\w*\+)?json$/)&&(g=await f(i(h,x.target)))}return g}};function a(l,u,c){l=l||XMLHttpRequest;const d=new l;return new Promise((f,h)=>{d.onload=()=>f(d),d.onerror=m=>h(m),d.open("GET",u,!0);for(const m in c)d.setRequestHeader(m,c[m]);d.send()})}return rf}var sf,yb;function zj(){if(yb)return sf;yb=1;const t=Vj(),e={};return sf=e,e.setupDocumentLoaders=function(n){typeof XMLHttpRequest<"u"&&(n.documentLoaders.xhr=t,n.useDocumentLoader("xhr"))},e.setupGlobals=function(n){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:n.JsonLdProcessor})},sf}var of,vb;function Hj(){return vb||(vb=1,of=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),of}var af,bb;function Kj(){if(bb)return af;bb=1,af=t,t.Node=s,t.create=t;function t(i){var o=this;if(o instanceof t||(o=new t),o.tail=null,o.head=null,o.length=0,i&&typeof i.forEach=="function")i.forEach(function(u){o.push(u)});else if(arguments.length>0)for(var a=0,l=arguments.length;a<l;a++)o.push(arguments[a]);return o}t.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var o=i.next,a=i.prev;return o&&(o.prev=a),a&&(a.next=o),i===this.head&&(this.head=o),i===this.tail&&(this.tail=a),i.list.length--,i.next=null,i.prev=null,i.list=null,o},t.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var o=this.head;i.list=this,i.next=o,o&&(o.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}},t.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var o=this.tail;i.list=this,i.prev=o,o&&(o.next=i),this.tail=i,this.head||(this.head=i),this.length++}},t.prototype.push=function(){for(var i=0,o=arguments.length;i<o;i++)n(this,arguments[i]);return this.length},t.prototype.unshift=function(){for(var i=0,o=arguments.length;i<o;i++)r(this,arguments[i]);return this.length},t.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}},t.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}},t.prototype.forEach=function(i,o){o=o||this;for(var a=this.head,l=0;a!==null;l++)i.call(o,a.value,l,this),a=a.next},t.prototype.forEachReverse=function(i,o){o=o||this;for(var a=this.tail,l=this.length-1;a!==null;l--)i.call(o,a.value,l,this),a=a.prev},t.prototype.get=function(i){for(var o=0,a=this.head;a!==null&&o<i;o++)a=a.next;if(o===i&&a!==null)return a.value},t.prototype.getReverse=function(i){for(var o=0,a=this.tail;a!==null&&o<i;o++)a=a.prev;if(o===i&&a!==null)return a.value},t.prototype.map=function(i,o){o=o||this;for(var a=new t,l=this.head;l!==null;)a.push(i.call(o,l.value,this)),l=l.next;return a},t.prototype.mapReverse=function(i,o){o=o||this;for(var a=new t,l=this.tail;l!==null;)a.push(i.call(o,l.value,this)),l=l.prev;return a},t.prototype.reduce=function(i,o){var a,l=this.head;if(arguments.length>1)a=o;else if(this.head)l=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=0;l!==null;u++)a=i(a,l.value,u),l=l.next;return a},t.prototype.reduceReverse=function(i,o){var a,l=this.tail;if(arguments.length>1)a=o;else if(this.tail)l=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=this.length-1;l!==null;u--)a=i(a,l.value,u),l=l.prev;return a},t.prototype.toArray=function(){for(var i=new Array(this.length),o=0,a=this.head;a!==null;o++)i[o]=a.value,a=a.next;return i},t.prototype.toArrayReverse=function(){for(var i=new Array(this.length),o=0,a=this.tail;a!==null;o++)i[o]=a.value,a=a.prev;return i},t.prototype.slice=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=0,u=this.head;u!==null&&l<i;l++)u=u.next;for(;u!==null&&l<o;l++,u=u.next)a.push(u.value);return a},t.prototype.sliceReverse=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=this.length,u=this.tail;u!==null&&l>o;l--)u=u.prev;for(;u!==null&&l>i;l--,u=u.prev)a.push(u.value);return a},t.prototype.splice=function(i,o,...a){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var l=0,u=this.head;u!==null&&l<i;l++)u=u.next;for(var c=[],l=0;u&&l<o;l++)c.push(u.value),u=this.removeNode(u);u===null&&(u=this.tail),u!==this.head&&u!==this.tail&&(u=u.prev);for(var l=0;l<a.length;l++)u=e(this,u,a[l]);return c},t.prototype.reverse=function(){for(var i=this.head,o=this.tail,a=i;a!==null;a=a.prev){var l=a.prev;a.prev=a.next,a.next=l}return this.head=o,this.tail=i,this};function e(i,o,a){var l=o===i.head?new s(a,null,o,i):new s(a,o,o.next,i);return l.next===null&&(i.tail=l),l.prev===null&&(i.head=l),i.length++,l}function n(i,o){i.tail=new s(o,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function r(i,o){i.head=new s(o,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function s(i,o,a,l){if(!(this instanceof s))return new s(i,o,a,l);this.list=l,this.value=i,o?(o.next=this,this.prev=o):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{Hj()(t)}catch{}return af}var lf,wb;function Y1(){if(wb)return lf;wb=1;const t=Kj(),e=Symbol("max"),n=Symbol("length"),r=Symbol("lengthCalculator"),s=Symbol("allowStale"),i=Symbol("maxAge"),o=Symbol("dispose"),a=Symbol("noDisposeOnSet"),l=Symbol("lruList"),u=Symbol("cache"),c=Symbol("updateAgeOnGet"),d=()=>1;class f{constructor(p){if(typeof p=="number"&&(p={max:p}),p||(p={}),p.max&&(typeof p.max!="number"||p.max<0))throw new TypeError("max must be a non-negative number");this[e]=p.max||1/0;const v=p.length||d;if(this[r]=typeof v!="function"?d:v,this[s]=p.stale||!1,p.maxAge&&typeof p.maxAge!="number")throw new TypeError("maxAge must be a number");this[i]=p.maxAge||0,this[o]=p.dispose,this[a]=p.noDisposeOnSet||!1,this[c]=p.updateAgeOnGet||!1,this.reset()}set max(p){if(typeof p!="number"||p<0)throw new TypeError("max must be a non-negative number");this[e]=p||1/0,g(this)}get max(){return this[e]}set allowStale(p){this[s]=!!p}get allowStale(){return this[s]}set maxAge(p){if(typeof p!="number")throw new TypeError("maxAge must be a non-negative number");this[i]=p,g(this)}get maxAge(){return this[i]}set lengthCalculator(p){typeof p!="function"&&(p=d),p!==this[r]&&(this[r]=p,this[n]=0,this[l].forEach(v=>{v.length=this[r](v.value,v.key),this[n]+=v.length})),g(this)}get lengthCalculator(){return this[r]}get length(){return this[n]}get itemCount(){return this[l].length}rforEach(p,v){v=v||this;for(let S=this[l].tail;S!==null;){const C=S.prev;E(this,p,S,v),S=C}}forEach(p,v){v=v||this;for(let S=this[l].head;S!==null;){const C=S.next;E(this,p,S,v),S=C}}keys(){return this[l].toArray().map(p=>p.key)}values(){return this[l].toArray().map(p=>p.value)}reset(){this[o]&&this[l]&&this[l].length&&this[l].forEach(p=>this[o](p.key,p.value)),this[u]=new Map,this[l]=new t,this[n]=0}dump(){return this[l].map(p=>m(this,p)?!1:{k:p.key,v:p.value,e:p.now+(p.maxAge||0)}).toArray().filter(p=>p)}dumpLru(){return this[l]}set(p,v,S){if(S=S||this[i],S&&typeof S!="number")throw new TypeError("maxAge must be a number");const C=S?Date.now():0,R=this[r](v,p);if(this[u].has(p)){if(R>this[e])return x(this,this[u].get(p)),!1;const U=this[u].get(p).value;return this[o]&&(this[a]||this[o](p,U.value)),U.now=C,U.maxAge=S,U.value=v,this[n]+=R-U.length,U.length=R,this.get(p),g(this),!0}const T=new b(p,v,R,C,S);return T.length>this[e]?(this[o]&&this[o](p,v),!1):(this[n]+=T.length,this[l].unshift(T),this[u].set(p,this[l].head),g(this),!0)}has(p){if(!this[u].has(p))return!1;const v=this[u].get(p).value;return!m(this,v)}get(p){return h(this,p,!0)}peek(p){return h(this,p,!1)}pop(){const p=this[l].tail;return p?(x(this,p),p.value):null}del(p){x(this,this[u].get(p))}load(p){this.reset();const v=Date.now();for(let S=p.length-1;S>=0;S--){const C=p[S],R=C.e||0;if(R===0)this.set(C.k,C.v);else{const T=R-v;T>0&&this.set(C.k,C.v,T)}}}prune(){this[u].forEach((p,v)=>h(this,v,!1))}}const h=(_,p,v)=>{const S=_[u].get(p);if(S){const C=S.value;if(m(_,C)){if(x(_,S),!_[s])return}else v&&(_[c]&&(S.value.now=Date.now()),_[l].unshiftNode(S));return C.value}},m=(_,p)=>{if(!p||!p.maxAge&&!_[i])return!1;const v=Date.now()-p.now;return p.maxAge?v>p.maxAge:_[i]&&v>_[i]},g=_=>{if(_[n]>_[e])for(let p=_[l].tail;_[n]>_[e]&&p!==null;){const v=p.prev;x(_,p),p=v}},x=(_,p)=>{if(p){const v=p.value;_[o]&&_[o](v.key,v.value),_[n]-=v.length,_[u].delete(v.key),_[l].removeNode(p)}};class b{constructor(p,v,S,C,R){this.key=p,this.value=v,this.length=S,this.now=C,this.maxAge=R||0}}const E=(_,p,v,S)=>{let C=v.value;m(_,C)&&(x(_,v),_[s]||(C=void 0)),C&&p.call(S,C.value,C.key,_)};return lf=f,lf}var uf,_b;function Wj(){if(_b)return uf;_b=1;const t=Y1(),e=10;return uf=class{constructor({document:r}){this.document=r,this.cache=new t({max:e})}getProcessed(r){return this.cache.get(r)}setProcessed(r,s){this.cache.set(r,s)}},uf}var cf,xb;function Gj(){if(xb)return cf;xb=1;const{isArray:t,isObject:e,isString:n}=dr(),{asArray:r}=Rr(),{prependBase:s}=Si(),i=Tr(),o=Wj(),a=10;cf=class{constructor({sharedCache:d}){this.perOpCache=new Map,this.sharedCache=d}async resolve({activeCtx:d,context:f,documentLoader:h,base:m,cycles:g=new Set}){f&&e(f)&&f["@context"]&&(f=f["@context"]),f=r(f);const x=[];for(const b of f){if(n(b)){let p=this._get(b);p||(p=await this._resolveRemoteContext({activeCtx:d,url:b,documentLoader:h,base:m,cycles:g})),t(p)?x.push(...p):x.push(p);continue}if(b===null){x.push(new o({document:null}));continue}e(b)||l(f);const E=JSON.stringify(b);let _=this._get(E);_||(_=new o({document:b}),this._cacheResolvedContext({key:E,resolved:_,tag:"static"})),x.push(_)}return x}_get(d){let f=this.perOpCache.get(d);if(!f){const h=this.sharedCache.get(d);h&&(f=h.get("static"),f&&this.perOpCache.set(d,f))}return f}_cacheResolvedContext({key:d,resolved:f,tag:h}){if(this.perOpCache.set(d,f),h!==void 0){let m=this.sharedCache.get(d);m||(m=new Map,this.sharedCache.set(d,m)),m.set(h,f)}return f}async _resolveRemoteContext({activeCtx:d,url:f,documentLoader:h,base:m,cycles:g}){f=s(m,f);const{context:x,remoteDoc:b}=await this._fetchContext({activeCtx:d,url:f,documentLoader:h,cycles:g});m=b.documentUrl||f,u({context:x,base:m});const E=await this.resolve({activeCtx:d,context:x,documentLoader:h,base:m,cycles:g});return this._cacheResolvedContext({key:f,resolved:E,tag:b.tag}),E}async _fetchContext({activeCtx:d,url:f,documentLoader:h,cycles:m}){if(m.size>a)throw new i("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:a});if(m.has(f))throw new i("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:f});m.add(f);let g,x;try{x=await h(f),g=x.document||null,n(g)&&(g=JSON.parse(g))}catch(b){throw new i(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${f}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:f,cause:b})}if(!e(g))throw new i(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${f}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:f});return"@context"in g?g={"@context":g["@context"]}:g={"@context":{}},x.contextUrl&&(t(g["@context"])||(g["@context"]=[g["@context"]]),g["@context"].push(x.contextUrl)),{context:g,remoteDoc:x}}};function l(c){throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:c})}function u({context:c,base:d}){if(!c)return;const f=c["@context"];if(n(f)){c["@context"]=s(d,f);return}if(t(f)){for(let h=0;h<f.length;++h){const m=f[h];if(n(m)){f[h]=s(d,m);continue}e(m)&&u({context:{"@context":m},base:d})}return}if(e(f))for(const h in f)u({context:f[h],base:d})}return cf}var df,Eb;function Jj(){return Eb||(Eb=1,df=Pm().NQuads),df}var ff,Ab;function pl(){if(Ab)return ff;Ab=1;const t=Tr(),{isArray:e}=dr(),{asArray:n}=Rr(),r={};ff=r,r.defaultEventHandler=null,r.setupEventHandler=({options:o={}})=>{const a=[].concat(o.safe?r.safeEventHandler:[],o.eventHandler?n(o.eventHandler):[],r.defaultEventHandler?r.defaultEventHandler:[]);return a.length===0?null:a},r.handleEvent=({event:o,options:a})=>{s({event:o,handlers:a.eventHandler})};function s({event:o,handlers:a}){let l=!0;for(let u=0;l&&u<a.length;++u){l=!1;const c=a[u];if(e(c))l=s({event:o,handlers:c});else if(typeof c=="function")c({event:o,next:()=>{l=!0}});else if(typeof c=="object")o.code in c?c[o.code]({event:o,next:()=>{l=!0}}):l=!0;else throw new t("Invalid event handler.","jsonld.InvalidEventHandler",{event:o})}return l}const i=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);return r.safeEventHandler=function({event:a,next:l}){if(a.level==="warning"&&i.has(a.code))throw new t("Safe mode validation error.","jsonld.ValidationError",{event:a});l()},r.logEventHandler=function({event:a,next:l}){console.log(`EVENT: ${a.message}`,{event:a}),l()},r.logWarningEventHandler=function({event:a,next:l}){a.level==="warning"&&console.warn(`WARNING: ${a.message}`,{event:a}),l()},r.unhandledEventHandler=function({event:a}){throw new t("No handler for event.","jsonld.UnhandledEvent",{event:a})},r.setDefaultEventHandler=function({eventHandler:o}={}){r.defaultEventHandler=o?n(o):null},ff}var hf,Sb;function zi(){if(Sb)return hf;Sb=1;const t=Rr(),e=Tr(),{isArray:n,isObject:r,isString:s,isUndefined:i}=dr(),{isAbsolute:o,isRelative:a,prependBase:l}=Si(),{handleEvent:u}=pl(),{REGEX_BCP47:c,REGEX_KEYWORD:d,asArray:f,compareShortestLeast:h}=Rr(),m=new Map,g=1e4,x={};hf=x,x.process=async({activeCtx:_,localCtx:p,options:v,propagate:S=!0,overrideProtected:C=!1,cycles:R=new Set})=>{if(r(p)&&"@context"in p&&n(p["@context"])&&(p=p["@context"]),f(p).length===0)return _;const D=[],U=[({event:X,next:O})=>{D.push(X),O()}];v.eventHandler&&U.push(v.eventHandler);const z=v;v={...v,eventHandler:U};const V=await v.contextResolver.resolve({activeCtx:_,context:p,documentLoader:v.documentLoader,base:v.base});r(V[0].document)&&typeof V[0].document["@propagate"]=="boolean"&&(S=V[0].document["@propagate"]);let P=_;!S&&!P.previousContext&&(P=P.clone(),P.previousContext=_);for(const X of V){let{document:O}=X;if(_=P,O===null){if(!C&&Object.keys(_.protected).length!==0)throw new e("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});P=_=x.getInitialContext(v).clone();continue}const H=X.getProcessed(_);if(H){if(z.eventHandler)for(const ie of H.events)u({event:ie,options:z});P=_=H.context;continue}if(r(O)&&"@context"in O&&(O=O["@context"]),!r(O))throw new e("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:O});P=P.clone();const q=new Map;if("@version"in O){if(O["@version"]!==1.1)throw new e("Unsupported JSON-LD version: "+O["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:O});if(_.processingMode&&_.processingMode==="json-ld-1.0")throw new e("@version: "+O["@version"]+" not compatible with "+_.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:O});P.processingMode="json-ld-1.1",P["@version"]=O["@version"],q.set("@version",!0)}if(P.processingMode=P.processingMode||_.processingMode,"@base"in O){let ie=O["@base"];if(!(ie===null||o(ie)))if(a(ie))ie=l(P["@base"],ie);else throw new e('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:O});P["@base"]=ie,q.set("@base",!0)}if("@vocab"in O){const ie=O["@vocab"];if(ie===null)delete P["@vocab"];else if(s(ie)){if(!o(ie)&&x.processingMode(P,1))throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:O});{const B=b(P,ie,{vocab:!0,base:!0},void 0,void 0,v);o(B)||v.eventHandler&&u({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:B}},options:v}),P["@vocab"]=B}}else throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:O});q.set("@vocab",!0)}if("@language"in O){const ie=O["@language"];if(ie===null)delete P["@language"];else if(s(ie))ie.match(c)||v.eventHandler&&u({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ie}},options:v}),P["@language"]=ie.toLowerCase();else throw new e('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:O});q.set("@language",!0)}if("@direction"in O){const ie=O["@direction"];if(_.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @direction not compatible with "+_.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:O});if(ie===null)delete P["@direction"];else{if(ie!=="ltr"&&ie!=="rtl")throw new e('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:O});P["@direction"]=ie}q.set("@direction",!0)}if("@propagate"in O){const ie=O["@propagate"];if(_.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @propagate not compatible with "+_.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:O});if(typeof ie!="boolean")throw new e("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:p});q.set("@propagate",!0)}if("@import"in O){const ie=O["@import"];if(_.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @import not compatible with "+_.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:O});if(!s(ie))throw new e("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:p});const B=await v.contextResolver.resolve({activeCtx:_,context:ie,documentLoader:v.documentLoader,base:v.base});if(B.length!==1)throw new e("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:p});const ue=B[0].getProcessed(_);if(ue)O=ue;else{const de=B[0].document;if("@import"in de)throw new e("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:p});for(const ye in de)O.hasOwnProperty(ye)||(O[ye]=de[ye]);B[0].setProcessed(_,O)}q.set("@import",!0)}q.set("@protected",O["@protected"]||!1);for(const ie in O)if(x.createTermDefinition({activeCtx:P,localCtx:O,term:ie,defined:q,options:v,overrideProtected:C}),r(O[ie])&&"@context"in O[ie]){const B=O[ie]["@context"];let ue=!0;if(s(B)){const de=l(v.base,B);R.has(de)?ue=!1:R.add(de)}if(ue)try{await x.process({activeCtx:P.clone(),localCtx:O[ie]["@context"],overrideProtected:!0,options:v,cycles:R})}catch{throw new e("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:O[ie]["@context"],term:ie})}}X.setProcessed(_,{context:P,events:D})}return P},x.createTermDefinition=({activeCtx:_,localCtx:p,term:v,defined:S,options:C,overrideProtected:R=!1})=>{if(S.has(v)){if(S.get(v))return;throw new e("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:p,term:v})}S.set(v,!1);let T;if(p.hasOwnProperty(v)&&(T=p[v]),v==="@type"&&r(T)&&(T["@container"]||"@set")==="@set"&&x.processingMode(_,1.1)){const O=["@container","@id","@protected"],H=Object.keys(T);if(H.length===0||H.some(q=>!O.includes(q)))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:p,term:v})}else{if(x.isKeyword(v))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:p,term:v});if(v.match(d)){C.eventHandler&&u({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:v}},options:C});return}else if(v==="")throw new e("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:p})}const D=_.mappings.get(v);_.mappings.has(v)&&_.mappings.delete(v);let U=!1;if((s(T)||T===null)&&(U=!0,T={"@id":T}),!r(T))throw new e("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:p});const z={};_.mappings.set(v,z),z.reverse=!1;const V=["@container","@id","@language","@reverse","@type"];x.processingMode(_,1.1)&&V.push("@context","@direction","@index","@nest","@prefix","@protected");for(const O in T)if(!V.includes(O))throw new e("Invalid JSON-LD syntax; a term definition must not contain "+O,"jsonld.SyntaxError",{code:"invalid term definition",context:p});const P=v.indexOf(":");if(z._termHasColon=P>0,"@reverse"in T){if("@id"in T)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});if("@nest"in T)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});const O=T["@reverse"];if(!s(O))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(O.match(d)){C.eventHandler&&u({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:O}},options:C}),D?_.mappings.set(v,D):_.mappings.delete(v);return}const H=b(_,O,{vocab:!0,base:!1},p,S,C);if(!o(H))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});z["@id"]=H,z.reverse=!0}else if("@id"in T){let O=T["@id"];if(O&&!s(O))throw new e("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(O===null)z["@id"]=null;else if(!x.isKeyword(O)&&O.match(d)){C.eventHandler&&u({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:O}},options:C}),D?_.mappings.set(v,D):_.mappings.delete(v);return}else if(O!==v){if(O=b(_,O,{vocab:!0,base:!1},p,S,C),!o(O)&&!x.isKeyword(O))throw new e("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(v.match(/(?::[^:])|\//)){const H=new Map(S).set(v,!0);if(b(_,v,{vocab:!0,base:!1},p,H,C)!==O)throw new e("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p})}z["@id"]=O,z._prefix=U&&!z._termHasColon&&O.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in z))if(z._termHasColon){const O=v.substr(0,P);if(p.hasOwnProperty(O)&&x.createTermDefinition({activeCtx:_,localCtx:p,term:O,defined:S,options:C}),_.mappings.has(O)){const H=v.substr(P+1);z["@id"]=_.mappings.get(O)["@id"]+H}else z["@id"]=v}else if(v==="@type")z["@id"]=v;else{if(!("@vocab"in _))throw new e("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p,term:v});z["@id"]=_["@vocab"]+v}if((T["@protected"]===!0||S.get("@protected")===!0&&T["@protected"]!==!1)&&(_.protected[v]=!0,z.protected=!0),S.set(v,!0),"@type"in T){let O=T["@type"];if(!s(O))throw new e("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:p});if(O==="@json"||O==="@none"){if(x.processingMode(_,1))throw new e(`Invalid JSON-LD syntax; an @context @type value must not be "${O}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:p})}else if(O!=="@id"&&O!=="@vocab"){if(O=b(_,O,{vocab:!0,base:!1},p,S,C),!o(O))throw new e("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:p});if(O.indexOf("_:")===0)throw new e("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:p})}z["@type"]=O}if("@container"in T){const O=s(T["@container"])?[T["@container"]]:T["@container"]||[],H=["@list","@set","@index","@language"];let q=!0;const ie=O.includes("@set");if(x.processingMode(_,1.1)){if(H.push("@graph","@id","@type"),O.includes("@list")){if(O.length!==1)throw new e("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:p})}else if(O.includes("@graph")){if(O.some(B=>B!=="@graph"&&B!=="@id"&&B!=="@index"&&B!=="@set"))throw new e("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:p})}else q&=O.length<=(ie?2:1);if(O.includes("@type")&&(z["@type"]=z["@type"]||"@id",!["@id","@vocab"].includes(z["@type"])))throw new e("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:p})}else q&=!n(T["@container"]),q&=O.length<=1;if(q&=O.every(B=>H.includes(B)),q&=!(ie&&O.includes("@list")),!q)throw new e("Invalid JSON-LD syntax; @context @container value must be one of the following: "+H.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:p});if(z.reverse&&!O.every(B=>["@index","@set"].includes(B)))throw new e("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});z["@container"]=O}if("@index"in T){if(!("@container"in T)||!z["@container"].includes("@index"))throw new e(`Invalid JSON-LD syntax; @index without @index in @container: "${T["@index"]}" on term "${v}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:p});if(!s(T["@index"])||T["@index"].indexOf("@")===0)throw new e(`Invalid JSON-LD syntax; @index must expand to an IRI: "${T["@index"]}" on term "${v}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:p});z["@index"]=T["@index"]}if("@context"in T&&(z["@context"]=T["@context"]),"@language"in T&&!("@type"in T)){let O=T["@language"];if(O!==null&&!s(O))throw new e("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:p});O!==null&&(O=O.toLowerCase()),z["@language"]=O}if("@prefix"in T){if(v.match(/:|\//))throw new e("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:p});if(x.isKeyword(z["@id"]))throw new e("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:p});if(typeof T["@prefix"]=="boolean")z._prefix=T["@prefix"]===!0;else throw new e("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:p})}if("@direction"in T){const O=T["@direction"];if(O!==null&&O!=="ltr"&&O!=="rtl")throw new e('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:p});z["@direction"]=O}if("@nest"in T){const O=T["@nest"];if(!s(O)||O!=="@nest"&&O.indexOf("@")===0)throw new e("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:p});z["@nest"]=O}// disallow aliasing @context and @preserve
const X=z["@id"];if(X==="@context"||X==="@preserve")throw new e("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:p});if(D&&D.protected&&!R&&(_.protected[v]=!0,z.protected=!0,!E(D,z)))throw new e("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:p,term:v})},x.expandIri=(_,p,v,S)=>b(_,p,v,void 0,void 0,S);function b(_,p,v,S,C,R){if(p===null||!s(p)||x.isKeyword(p))return p;if(p.match(d))return null;if(S&&S.hasOwnProperty(p)&&C.get(p)!==!0&&x.createTermDefinition({activeCtx:_,localCtx:S,term:p,defined:C,options:R}),v=v||{},v.vocab){const D=_.mappings.get(p);if(D===null)return null;if(r(D)&&"@id"in D)return D["@id"]}const T=p.indexOf(":");if(T>0){const D=p.substr(0,T),U=p.substr(T+1);if(D==="_"||U.indexOf("//")===0)return p;S&&S.hasOwnProperty(D)&&x.createTermDefinition({activeCtx:_,localCtx:S,term:D,defined:C,options:R});const z=_.mappings.get(D);if(z&&z._prefix)return z["@id"]+U;if(o(p))return p}if(v.vocab&&"@vocab"in _)p=_["@vocab"]+p;else if(v.base){let D,U;"@base"in _?_["@base"]?(U=l(R.base,_["@base"]),D=l(U,p)):(U=_["@base"],D=p):(U=R.base,D=l(R.base,p)),p=D}return p}x.getInitialContext=_=>{const p=JSON.stringify({processingMode:_.processingMode}),v=m.get(p);if(v)return v;const S={processingMode:_.processingMode,mappings:new Map,inverse:null,getInverse:C,clone:D,revertToPreviousContext:U,protected:{}};return m.size===g&&m.clear(),m.set(p,S),S;function C(){const z=this;if(z.inverse)return z.inverse;const V=z.inverse={},P=z.fastCurieMap={},X={},O=(z["@language"]||"@none").toLowerCase(),H=z["@direction"],q=z.mappings,ie=[...q.keys()].sort(h);for(const B of ie){const ue=q.get(B);if(ue===null)continue;let de=ue["@container"]||"@none";if(de=[].concat(de).sort().join(""),ue["@id"]===null)continue;const ye=f(ue["@id"]);for(const Se of ye){let G=V[Se];const W=x.isKeyword(Se);if(G)!W&&!ue._termHasColon&&X[Se].push(B);else if(V[Se]=G={},!W&&!ue._termHasColon){X[Se]=[B];const $={iri:Se,terms:X[Se]};Se[0]in P?P[Se[0]].push($):P[Se[0]]=[$]}if(G[de]||(G[de]={"@language":{},"@type":{},"@any":{}}),G=G[de],T(B,G["@any"],"@none"),ue.reverse)T(B,G["@type"],"@reverse");else if(ue["@type"]==="@none")T(B,G["@any"],"@none"),T(B,G["@language"],"@none"),T(B,G["@type"],"@none");else if("@type"in ue)T(B,G["@type"],ue["@type"]);else if("@language"in ue&&"@direction"in ue){const $=ue["@language"],Z=ue["@direction"];$&&Z?T(B,G["@language"],`${$}_${Z}`.toLowerCase()):$?T(B,G["@language"],$.toLowerCase()):Z?T(B,G["@language"],`_${Z}`):T(B,G["@language"],"@null")}else"@language"in ue?T(B,G["@language"],(ue["@language"]||"@null").toLowerCase()):"@direction"in ue?ue["@direction"]?T(B,G["@language"],`_${ue["@direction"]}`):T(B,G["@language"],"@none"):H?(T(B,G["@language"],`_${H}`),T(B,G["@language"],"@none"),T(B,G["@type"],"@none")):(T(B,G["@language"],O),T(B,G["@language"],"@none"),T(B,G["@type"],"@none"))}}for(const B in P)R(P,B,1);return V}function R(z,V,P){const X=z[V],O=z[V]={};let H,q;for(const ie of X)H=ie.iri,P>=H.length?q="":q=H[P],q in O?O[q].push(ie):O[q]=[ie];for(const ie in O)ie!==""&&R(O,ie,P+1)}function T(z,V,P){V.hasOwnProperty(P)||(V[P]=z)}function D(){const z={};return z.mappings=t.clone(this.mappings),z.clone=this.clone,z.inverse=null,z.getInverse=this.getInverse,z.protected=t.clone(this.protected),this.previousContext&&(z.previousContext=this.previousContext.clone()),z.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(z["@base"]=this["@base"]),"@language"in this&&(z["@language"]=this["@language"]),"@vocab"in this&&(z["@vocab"]=this["@vocab"]),z}function U(){return this.previousContext?this.previousContext.clone():this}},x.getContextValue=(_,p,v)=>{if(p===null)return v==="@context"?void 0:null;if(_.mappings.has(p)){const S=_.mappings.get(p);if(i(v))return S;if(S.hasOwnProperty(v))return S[v]}if(v==="@language"&&v in _||v==="@direction"&&v in _)return _[v];if(v!=="@context")return null},x.processingMode=(_,p)=>p.toString()>="1.1"?!_.processingMode||_.processingMode>="json-ld-"+p.toString():_.processingMode==="json-ld-1.0",x.isKeyword=_=>{if(!s(_)||_[0]!=="@")return!1;switch(_){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function E(_,p){if(!(_&&typeof _=="object")||!(p&&typeof p=="object"))return _===p;const v=Array.isArray(_);if(v!==Array.isArray(p))return!1;if(v){if(_.length!==p.length)return!1;for(let R=0;R<_.length;++R)if(!E(_[R],p[R]))return!1;return!0}const S=Object.keys(_),C=Object.keys(p);if(S.length!==C.length)return!1;for(const R in _){let T=_[R],D=p[R];if(R==="@container"&&Array.isArray(T)&&Array.isArray(D)&&(T=T.slice().sort(),D=D.slice().sort()),!E(T,D))return!1}return!0}return hf}var pf,Ib;function Xj(){if(Ib)return pf;Ib=1;const t=Tr(),{isArray:e,isObject:n,isEmptyObject:r,isString:s,isUndefined:i}=dr(),{isList:o,isValue:a,isGraph:l,isSubject:u}=qs(),{expandIri:c,getContextValue:d,isKeyword:f,process:h,processingMode:m}=zi(),{isAbsolute:g}=Si(),{REGEX_BCP47:x,REGEX_KEYWORD:b,addValue:E,asArray:_,getValues:p,validateTypeValue:v}=Rr(),{handleEvent:S}=pl(),C={};pf=C,C.expand=async({activeCtx:V,activeProperty:P=null,element:X,options:O={},insideList:H=!1,insideIndex:q=!1,typeScopedContext:ie=null})=>{if(X==null)return null;if(P==="@default"&&(O=Object.assign({},O,{isFrame:!1})),!e(X)&&!n(X))return!H&&(P===null||c(V,P,{vocab:!0},O)==="@graph")?(O.eventHandler&&S({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:X}},options:O}),null):D({activeCtx:V,activeProperty:P,value:X,options:O});if(e(X)){let $=[];const Z=d(V,P,"@container")||[];H=H||Z.includes("@list");for(let ae=0;ae<X.length;++ae){let re=await C.expand({activeCtx:V,activeProperty:P,element:X[ae],options:O,insideIndex:q,typeScopedContext:ie});H&&e(re)&&(re={"@list":re}),re!==null&&(e(re)?$=$.concat(re):$.push(re))}return $}const B=c(V,P,{vocab:!0},O),ue=d(V,P,"@context");ie=ie||(V.previousContext?V:null);let de=Object.keys(X).sort(),ye=!q;if(ye&&ie&&de.length<=2&&!de.includes("@context"))for(const $ of de){const Z=c(ie,$,{vocab:!0},O);if(Z==="@value"){ye=!1,V=ie;break}if(Z==="@id"&&de.length===1){ye=!1;break}}ye&&(V=V.revertToPreviousContext()),i(ue)||(V=await h({activeCtx:V,localCtx:ue,propagate:!0,overrideProtected:!0,options:O})),"@context"in X&&(V=await h({activeCtx:V,localCtx:X["@context"],options:O})),ie=V;let Se=null;for(const $ of de)if(c(V,$,{vocab:!0},O)==="@type"){Se=Se||$;const ae=X[$],re=Array.isArray(ae)?ae.length>1?ae.slice().sort():ae:[ae];for(const Ee of re){const L=d(ie,Ee,"@context");i(L)||(V=await h({activeCtx:V,localCtx:L,options:O,propagate:!1}))}}let G={};await T({activeCtx:V,activeProperty:P,expandedActiveProperty:B,element:X,expandedParent:G,options:O,insideList:H,typeKey:Se,typeScopedContext:ie}),de=Object.keys(G);let W=de.length;if("@value"in G){if("@type"in G&&("@language"in G||"@direction"in G))throw new t('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:G});let $=W-1;if("@type"in G&&($-=1),"@index"in G&&($-=1),"@language"in G&&($-=1),"@direction"in G&&($-=1),$!==0)throw new t('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:G});const Z=G["@value"]===null?[]:_(G["@value"]),ae=p(G,"@type");if(!(m(V,1.1)&&ae.includes("@json")&&ae.length===1))if(Z.length===0)O.eventHandler&&S({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:G}},options:O}),G=null;else{if(!Z.every(re=>s(re)||r(re))&&"@language"in G)throw new t("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:G});if(!ae.every(re=>g(re)&&!(s(re)&&re.indexOf("_:")===0)||r(re)))throw new t('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:G})}}else if("@type"in G&&!e(G["@type"]))G["@type"]=[G["@type"]];else if("@set"in G||"@list"in G){if(W>1&&!(W===2&&"@index"in G))throw new t('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:G});"@set"in G&&(G=G["@set"],de=Object.keys(G),W=de.length)}else W===1&&"@language"in G&&(O.eventHandler&&S({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:G}},options:O}),G=null);return n(G)&&!O.keepFreeFloatingNodes&&!H&&(P===null||B==="@graph"||(d(V,P,"@container")||[]).includes("@graph"))&&(G=R({value:G,count:W,options:O})),G};function R({value:V,count:P,options:X}){if(P===0||"@value"in V||"@list"in V||P===1&&"@id"in V){if(X.eventHandler){let O,H;P===0?(O="empty object",H="Dropping empty object."):"@value"in V?(O="object with only @value",H="Dropping object with only @value."):"@list"in V?(O="object with only @list",H="Dropping object with only @list."):P===1&&"@id"in V&&(O="object with only @id",H="Dropping object with only @id."),S({event:{type:["JsonLdEvent"],code:O,level:"warning",message:H,details:{value:V}},options:X})}return null}return V}async function T({activeCtx:V,activeProperty:P,expandedActiveProperty:X,element:O,expandedParent:H,options:q={},insideList:ie,typeKey:B,typeScopedContext:ue}){const de=Object.keys(O).sort(),ye=[];let Se;const G=O[B]&&c(V,e(O[B])?O[B][0]:O[B],{vocab:!0},{...q,typeExpansion:!0})==="@json";for(const W of de){let $=O[W],Z;if(W==="@context")continue;const ae=c(V,W,{vocab:!0},q);if(ae===null||!(g(ae)||f(ae))){q.eventHandler&&S({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:W,expandedProperty:ae}},options:q});continue}if(f(ae)){if(X==="@reverse")throw new t("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:$});if(ae in H&&ae!=="@included"&&ae!=="@type")throw new t("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ae})}if(ae==="@id"){if(!s($)){if(!q.isFrame)throw new t('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:$});if(n($)){if(!r($))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:$})}else if(e($)){if(!$.every(k=>s(k)))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:$})}else throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:$})}E(H,"@id",_($).map(k=>{if(s(k)){const K=c(V,k,{base:!0},q);return q.eventHandler&&(K===null?S(k===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:k}},options:q}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:k}},options:q}):g(K)||S({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:k,expandedId:K}},options:q})),K}return k}),{propertyIsArray:q.isFrame});continue}if(ae==="@type"){n($)&&($=Object.fromEntries(Object.entries($).map(([k,K])=>[c(ue,k,{vocab:!0}),_(K).map(he=>c(ue,he,{base:!0,vocab:!0},{...q,typeExpansion:!0}))]))),v($,q.isFrame),E(H,"@type",_($).map(k=>{if(s(k)){const K=c(ue,k,{base:!0,vocab:!0},{...q,typeExpansion:!0});return K!=="@json"&&!g(K)&&q.eventHandler&&S({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:k}},options:q}),K}return k}),{propertyIsArray:!!q.isFrame});continue}if(ae==="@included"&&m(V,1.1)){const k=_(await C.expand({activeCtx:V,activeProperty:P,element:$,options:q}));if(!k.every(K=>u(K)))throw new t("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:$});E(H,"@included",k,{propertyIsArray:!0});continue}if(ae==="@graph"&&!(n($)||e($)))throw new t('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:$});if(ae==="@value"){Se=$,G&&m(V,1.1)?H["@value"]=$:E(H,"@value",$,{propertyIsArray:q.isFrame});continue}if(ae==="@language"){if($===null)continue;if(!s($)&&!q.isFrame)throw new t('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:$});$=_($).map(k=>s(k)?k.toLowerCase():k);for(const k of $)s(k)&&!k.match(x)&&q.eventHandler&&S({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:k}},options:q});E(H,"@language",$,{propertyIsArray:q.isFrame});continue}if(ae==="@direction"){if(!s($)&&!q.isFrame)throw new t('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:$});$=_($);for(const k of $)if(s(k)&&k!=="ltr"&&k!=="rtl")throw new t('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:$});E(H,"@direction",$,{propertyIsArray:q.isFrame});continue}if(ae==="@index"){if(!s($))throw new t('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:$});E(H,"@index",$);continue}if(ae==="@reverse"){if(!n($))throw new t('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:$});if(Z=await C.expand({activeCtx:V,activeProperty:"@reverse",element:$,options:q}),"@reverse"in Z)for(const K in Z["@reverse"])E(H,K,Z["@reverse"][K],{propertyIsArray:!0});let k=H["@reverse"]||null;for(const K in Z){if(K==="@reverse")continue;k===null&&(k=H["@reverse"]={}),E(k,K,[],{propertyIsArray:!0});const he=Z[K];for(let ve=0;ve<he.length;++ve){const ge=he[ve];if(a(ge)||o(ge))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Z});E(k,K,ge,{propertyIsArray:!0})}}continue}if(ae==="@nest"){ye.push(W);continue}let re=V;const Ee=d(V,W,"@context");i(Ee)||(re=await h({activeCtx:V,localCtx:Ee,propagate:!0,overrideProtected:!0,options:q}));const L=d(V,W,"@container")||[];if(L.includes("@language")&&n($)){const k=d(re,W,"@direction");Z=U(re,$,k,q)}else if(L.includes("@index")&&n($)){const k=L.includes("@graph"),K=d(re,W,"@index")||"@index",he=K!=="@index"&&c(V,K,{vocab:!0},q);Z=await z({activeCtx:re,options:q,activeProperty:W,value:$,asGraph:k,indexKey:K,propertyIndex:he})}else if(L.includes("@id")&&n($)){const k=L.includes("@graph");Z=await z({activeCtx:re,options:q,activeProperty:W,value:$,asGraph:k,indexKey:"@id"})}else if(L.includes("@type")&&n($))Z=await z({activeCtx:re.revertToPreviousContext(),options:q,activeProperty:W,value:$,asGraph:!1,indexKey:"@type"});else{const k=ae==="@list";if(k||ae==="@set"){let K=P;k&&X==="@graph"&&(K=null),Z=await C.expand({activeCtx:re,activeProperty:K,element:$,options:q,insideList:k})}else d(V,W,"@type")==="@json"?Z={"@type":"@json","@value":$}:Z=await C.expand({activeCtx:re,activeProperty:W,element:$,options:q,insideList:!1})}if(!(Z===null&&ae!=="@value")){if(ae!=="@list"&&!o(Z)&&L.includes("@list")&&(Z={"@list":_(Z)}),L.includes("@graph")&&!L.some(k=>k==="@id"||k==="@index")){if(Z=_(Z),q.isFrame||(Z=Z.filter(k=>{const K=Object.keys(k).length;return R({value:k,count:K,options:q})!==null})),Z.length===0)continue;Z=Z.map(k=>({"@graph":_(k)}))}if(re.mappings.has(W)&&re.mappings.get(W).reverse){const k=H["@reverse"]=H["@reverse"]||{};Z=_(Z);for(let K=0;K<Z.length;++K){const he=Z[K];if(a(he)||o(he))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Z});E(k,ae,he,{propertyIsArray:!0})}continue}E(H,ae,Z,{propertyIsArray:!0})}}if("@value"in H&&!(H["@type"]==="@json"&&m(V,1.1))){if((n(Se)||e(Se))&&!q.isFrame)throw new t('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Se})}for(const W of ye){const $=e(O[W])?O[W]:[O[W]];for(const Z of $){if(!n(Z)||Object.keys(Z).some(ae=>c(V,ae,{vocab:!0},q)==="@value"))throw new t("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Z});await T({activeCtx:V,activeProperty:P,expandedActiveProperty:X,element:Z,expandedParent:H,options:q,insideList:ie,typeScopedContext:ue,typeKey:B})}}}function D({activeCtx:V,activeProperty:P,value:X,options:O}){if(X==null)return null;const H=c(V,P,{vocab:!0},O);if(H==="@id")return c(V,X,{base:!0},O);if(H==="@type")return c(V,X,{vocab:!0,base:!0},{...O,typeExpansion:!0});const q=d(V,P,"@type");if((q==="@id"||H==="@graph")&&s(X)){const B=c(V,X,{base:!0},O);return B===null&&X.match(b)&&O.eventHandler&&S({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:P}},options:O}),{"@id":B}}if(q==="@vocab"&&s(X))return{"@id":c(V,X,{vocab:!0,base:!0},O)};if(f(H))return X;const ie={};if(q&&!["@id","@vocab","@none"].includes(q))ie["@type"]=q;else if(s(X)){const B=d(V,P,"@language");B!==null&&(ie["@language"]=B);const ue=d(V,P,"@direction");ue!==null&&(ie["@direction"]=ue)}return["boolean","number","string"].includes(typeof X)||(X=X.toString()),ie["@value"]=X,ie}function U(V,P,X,O){const H=[],q=Object.keys(P).sort();for(const ie of q){const B=c(V,ie,{vocab:!0},O);let ue=P[ie];e(ue)||(ue=[ue]);for(const de of ue){if(de===null)continue;if(!s(de))throw new t("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:P});const ye={"@value":de};B!=="@none"&&(ie.match(x)||O.eventHandler&&S({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ie}},options:O}),ye["@language"]=ie.toLowerCase()),X&&(ye["@direction"]=X),H.push(ye)}}return H}async function z({activeCtx:V,options:P,activeProperty:X,value:O,asGraph:H,indexKey:q,propertyIndex:ie}){const B=[],ue=Object.keys(O).sort(),de=q==="@type";for(let ye of ue){if(de){const W=d(V,ye,"@context");i(W)||(V=await h({activeCtx:V,localCtx:W,propagate:!1,options:P}))}let Se=O[ye];e(Se)||(Se=[Se]),Se=await C.expand({activeCtx:V,activeProperty:X,element:Se,options:P,insideList:!1,insideIndex:!0});let G;ie?ye==="@none"?G="@none":G=D({activeCtx:V,activeProperty:q,value:ye,options:P}):G=c(V,ye,{vocab:!0},P),q==="@id"?ye=c(V,ye,{base:!0},P):de&&(ye=G);for(let W of Se){if(H&&!l(W)&&(W={"@graph":[W]}),q==="@type")G==="@none"||(W["@type"]?W["@type"]=[ye].concat(W["@type"]):W["@type"]=[ye]);else{if(a(W)&&!["@language","@type","@index"].includes(q))throw new t(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${q}".`,"jsonld.SyntaxError",{code:"invalid value object",value:W});ie?G!=="@none"&&E(W,ie,G,{propertyIsArray:!0,prependValue:!0}):G!=="@none"&&!(q in W)&&(W[q]=ye)}B.push(W)}}return B}return pf}var mf,Cb;function Fc(){if(Cb)return mf;Cb=1;const{isKeyword:t}=zi(),e=qs(),n=dr(),r=Rr(),s=Tr(),i={};return mf=i,i.createMergedNodeMap=(o,a)=>{a=a||{};const l=a.issuer||new r.IdentifierIssuer("_:b"),u={"@default":{}};return i.createNodeMap(o,u,"@default",l),i.mergeNodeMaps(u)},i.createNodeMap=(o,a,l,u,c,d)=>{if(n.isArray(o)){for(const g of o)i.createNodeMap(g,a,l,u,void 0,d);return}if(!n.isObject(o)){d&&d.push(o);return}if(e.isValue(o)){if("@type"in o){let g=o["@type"];g.indexOf("_:")===0&&(o["@type"]=g=u.getId(g))}d&&d.push(o);return}else if(d&&e.isList(o)){const g=[];i.createNodeMap(o["@list"],a,l,u,c,g),d.push({"@list":g});return}if("@type"in o){const g=o["@type"];for(const x of g)x.indexOf("_:")===0&&u.getId(x)}n.isUndefined(c)&&(c=e.isBlankNode(o)?u.getId(o["@id"]):o["@id"]),d&&d.push({"@id":c});const f=a[l],h=f[c]=f[c]||{};h["@id"]=c;const m=Object.keys(o).sort();for(let g of m){if(g==="@id")continue;if(g==="@reverse"){const b={"@id":c},E=o["@reverse"];for(const _ in E){const p=E[_];for(const v of p){let S=v["@id"];e.isBlankNode(v)&&(S=u.getId(S)),i.createNodeMap(v,a,l,u,S),r.addValue(f[S],_,b,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(g==="@graph"){c in a||(a[c]={}),i.createNodeMap(o[g],a,c,u);continue}if(g==="@included"){i.createNodeMap(o[g],a,l,u);continue}if(g!=="@type"&&t(g)){if(g==="@index"&&g in h&&(o[g]!==h[g]||o[g]["@id"]!==h[g]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:h});h[g]=o[g];continue}const x=o[g];if(g.indexOf("_:")===0&&(g=u.getId(g)),x.length===0){r.addValue(h,g,[],{propertyIsArray:!0});continue}for(let b of x)if(g==="@type"&&(b=b.indexOf("_:")===0?u.getId(b):b),e.isSubject(b)||e.isSubjectReference(b)){if("@id"in b&&!b["@id"])continue;const E=e.isBlankNode(b)?u.getId(b["@id"]):b["@id"];r.addValue(h,g,{"@id":E},{propertyIsArray:!0,allowDuplicate:!1}),i.createNodeMap(b,a,l,u,E)}else if(e.isValue(b))r.addValue(h,g,b,{propertyIsArray:!0,allowDuplicate:!1});else if(e.isList(b)){const E=[];i.createNodeMap(b["@list"],a,l,u,c,E),b={"@list":E},r.addValue(h,g,b,{propertyIsArray:!0,allowDuplicate:!1})}else i.createNodeMap(b,a,l,u,c),r.addValue(h,g,b,{propertyIsArray:!0,allowDuplicate:!1})}},i.mergeNodeMapGraphs=o=>{const a={};for(const l of Object.keys(o).sort())for(const u of Object.keys(o[l]).sort()){const c=o[l][u];u in a||(a[u]={"@id":u});const d=a[u];for(const f of Object.keys(c).sort())if(t(f)&&f!=="@type")d[f]=r.clone(c[f]);else for(const h of c[f])r.addValue(d,f,r.clone(h),{propertyIsArray:!0,allowDuplicate:!1})}return a},i.mergeNodeMaps=o=>{const a=o["@default"],l=Object.keys(o).sort();for(const u of l){if(u==="@default")continue;const c=o[u];let d=a[u];d?"@graph"in d||(d["@graph"]=[]):a[u]=d={"@id":u,"@graph":[]};const f=d["@graph"];for(const h of Object.keys(c).sort()){const m=c[h];e.isSubjectReference(m)||f.push(m)}}return a},mf}var gf,Rb;function Yj(){if(Rb)return gf;Rb=1;const{isSubjectReference:t}=qs(),{createMergedNodeMap:e}=Fc(),n={};return gf=n,n.flatten=r=>{const s=e(r),i=[],o=Object.keys(s).sort();for(let a=0;a<o.length;++a){const l=s[o[a]];t(l)||i.push(l)}return i},gf}var yf,Tb;function Qj(){if(Tb)return yf;Tb=1;const t=Tr(),e=qs(),n=dr(),{REGEX_BCP47:r,addValue:s}=Rr(),{handleEvent:i}=pl(),{RDF_LIST:o,RDF_FIRST:a,RDF_REST:l,RDF_NIL:u,RDF_TYPE:c,RDF_JSON_LITERAL:d,XSD_BOOLEAN:f,XSD_DOUBLE:h,XSD_INTEGER:m,XSD_STRING:g}=$m(),x={};yf=x,x.fromRDF=async(E,_)=>{const{useRdfType:p=!1,useNativeTypes:v=!1,rdfDirection:S=null}=_,C={},R={"@default":C},T={};if(S){if(S==="compound-literal")throw new t("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:S});if(S!=="i18n-datatype")throw new t("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:S})}for(const z of E){const V=z.graph.termType==="DefaultGraph"?"@default":z.graph.value;V in R||(R[V]={}),V!=="@default"&&!(V in C)&&(C[V]={"@id":V});const P=R[V],X=z.subject.value,O=z.predicate.value,H=z.object;X in P||(P[X]={"@id":X});const q=P[X],ie=H.termType.endsWith("Node");if(ie&&!(H.value in P)&&(P[H.value]={"@id":H.value}),O===c&&!p&&ie){s(q,"@type",H.value,{propertyIsArray:!0});continue}const B=b(H,v,S,_);if(s(q,O,B,{propertyIsArray:!0}),ie)if(H.value===u){const ue=P[H.value];"usages"in ue||(ue.usages=[]),ue.usages.push({node:q,property:O,value:B})}else H.value in T?T[H.value]=!1:T[H.value]={node:q,property:O,value:B}}for(const z in R){const V=R[z];if(!(u in V))continue;const P=V[u];if(P.usages){for(let X of P.usages){let O=X.node,H=X.property,q=X.value;const ie=[],B=[];let ue=Object.keys(O).length;for(;H===l&&n.isObject(T[O["@id"]])&&n.isArray(O[a])&&O[a].length===1&&n.isArray(O[l])&&O[l].length===1&&(ue===3||ue===4&&n.isArray(O["@type"])&&O["@type"].length===1&&O["@type"][0]===o)&&(ie.push(O[a][0]),B.push(O["@id"]),X=T[O["@id"]],O=X.node,H=X.property,q=X.value,ue=Object.keys(O).length,!!e.isBlankNode(O)););delete q["@id"],q["@list"]=ie.reverse();for(const de of B)delete V[de]}delete P.usages}}const D=[],U=Object.keys(C).sort();for(const z of U){const V=C[z];if(z in R){const P=V["@graph"]=[],X=R[z],O=Object.keys(X).sort();for(const H of O){const q=X[H];e.isSubjectReference(q)||P.push(q)}}e.isSubjectReference(V)||D.push(V)}return D};function b(E,_,p,v){if(E.termType.endsWith("Node"))return{"@id":E.value};const S={"@value":E.value};if(E.language)E.language.match(r)||v.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:E.language}},options:v}),S["@language"]=E.language;else{let C=E.datatype.value;if(C||(C=g),C===d){C="@json";try{S["@value"]=JSON.parse(S["@value"])}catch(R){throw new t("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:S["@value"],cause:R})}}if(_){if(C===f)S["@value"]==="true"?S["@value"]=!0:S["@value"]==="false"&&(S["@value"]=!1);else if(n.isNumeric(S["@value"]))if(C===m){const R=parseInt(S["@value"],10);R.toFixed(0)===S["@value"]&&(S["@value"]=R)}else C===h&&(S["@value"]=parseFloat(S["@value"]));[f,m,h,g].includes(C)||(S["@type"]=C)}else if(p==="i18n-datatype"&&C.startsWith("https://www.w3.org/ns/i18n#")){const[,R,T]=C.split(/[#_]/);R.length>0&&(S["@language"]=R,R.match(r)||v.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:R}},options:v})),S["@direction"]=T}else C!==g&&(S["@type"]=C)}return S}return yf}var vf,Ob;function Zj(){return Ob||(Ob=1,vf=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((n,r,s)=>{const i=s===0?"":",",o=r===void 0||typeof r=="symbol"?null:r;return n+i+t(o)},"")+"]":"{"+Object.keys(e).sort().reduce((n,r,s)=>{if(e[r]===void 0||typeof e[r]=="symbol")return n;const i=n.length===0?"":",";return n+i+t(r)+":"+t(e[r])},"")+"}"}),vf}var bf,Db;function eU(){if(Db)return bf;Db=1;const{createNodeMap:t}=Fc(),{isKeyword:e}=zi(),n=qs(),r=Zj(),s=Tr(),i=dr(),o=Rr(),{handleEvent:a}=pl(),{RDF_FIRST:l,RDF_REST:u,RDF_NIL:c,RDF_TYPE:d,RDF_JSON_LITERAL:f,RDF_LANGSTRING:h,XSD_BOOLEAN:m,XSD_DOUBLE:g,XSD_INTEGER:x,XSD_STRING:b}=$m(),{isAbsolute:E}=Si(),_={};bf=_,_.toRDF=(C,R)=>{const T=new o.IdentifierIssuer("_:b"),D={"@default":{}};t(C,D,"@default",T);const U=[],z=Object.keys(D).sort();for(const V of z){let P;if(V==="@default")P={termType:"DefaultGraph",value:""};else if(E(V))V.startsWith("_:")?P={termType:"BlankNode"}:P={termType:"NamedNode"},P.value=V;else{R.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:V}},options:R});continue}p(U,D[V],P,T,R)}return U};function p(C,R,T,D,U){const z=Object.keys(R).sort();for(const V of z){const P=R[V],X=Object.keys(P).sort();for(let O of X){const H=P[O];if(O==="@type")O=d;else if(e(O))continue;for(const q of H){const ie={termType:V.startsWith("_:")?"BlankNode":"NamedNode",value:V};if(!E(V)){U.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:V}},options:U});continue}const B={termType:O.startsWith("_:")?"BlankNode":"NamedNode",value:O};if(!E(O)){U.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:O}},options:U});continue}if(B.termType==="BlankNode"&&!U.produceGeneralizedRdf){U.eventHandler&&a({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:D.getOldIds().find(de=>D.getId(de)===O)}},options:U});continue}const ue=S(q,D,C,T,U.rdfDirection,U);ue&&C.push({subject:ie,predicate:B,object:ue,graph:T})}}}}function v(C,R,T,D,U,z){const V={termType:"NamedNode",value:l},P={termType:"NamedNode",value:u},X={termType:"NamedNode",value:c},O=C.pop(),H=O?{termType:"BlankNode",value:R.getId()}:X;let q=H;for(const ie of C){const B=S(ie,R,T,D,U,z),ue={termType:"BlankNode",value:R.getId()};T.push({subject:q,predicate:V,object:B,graph:D}),T.push({subject:q,predicate:P,object:ue,graph:D}),q=ue}if(O){const ie=S(O,R,T,D,U,z);T.push({subject:q,predicate:V,object:ie,graph:D}),T.push({subject:q,predicate:P,object:X,graph:D})}return H}function S(C,R,T,D,U,z){const V={};if(n.isValue(C)){V.termType="Literal",V.value=void 0,V.datatype={termType:"NamedNode"};let P=C["@value"];const X=C["@type"]||null;if(X==="@json")V.value=r(P),V.datatype.value=f;else if(i.isBoolean(P))V.value=P.toString(),V.datatype.value=X||m;else if(i.isDouble(P)||X===g)i.isDouble(P)||(P=parseFloat(P)),V.value=P.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),V.datatype.value=X||g;else if(i.isNumber(P))V.value=P.toFixed(0),V.datatype.value=X||x;else if("@direction"in C&&U==="i18n-datatype"){const O=(C["@language"]||"").toLowerCase(),H=C["@direction"],q=`https://www.w3.org/ns/i18n#${O}_${H}`;V.datatype.value=q,V.value=P}else{if("@direction"in C&&U==="compound-literal")throw new s("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:U});if("@direction"in C&&U)throw new s("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:U});"@language"in C?("@direction"in C&&!U&&z.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:V.value}},options:z}),V.value=P,V.datatype.value=X||h,V.language=C["@language"]):("@direction"in C&&!U&&z.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:V.value}},options:z}),V.value=P,V.datatype.value=X||b)}}else if(n.isList(C)){const P=v(C["@list"],R,T,D,U,z);V.termType=P.termType,V.value=P.value}else{const P=i.isObject(C)?C["@id"]:C;V.termType=P.startsWith("_:")?"BlankNode":"NamedNode",V.value=P}return V.termType==="NamedNode"&&!E(V.value)?(z.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:V.value}},options:z}),null):V}return bf}var wf,kb;function tU(){if(kb)return wf;kb=1;const{isKeyword:t}=zi(),e=qs(),n=dr(),r=Rr(),s=Si(),i=Tr(),{createNodeMap:o,mergeNodeMapGraphs:a}=Fc(),l={};wf=l,l.frameMergedOrDefault=(p,v,S)=>{const C={options:S,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},R=new r.IdentifierIssuer("_:b");o(p,C.graphMap,"@default",R),S.merged&&(C.graphMap["@merged"]=a(C.graphMap),C.graph="@merged"),C.subjects=C.graphMap[C.graph];const T=[];l.frame(C,Object.keys(C.subjects).sort(),v,T),S.pruneBlankNodeIdentifiers&&(S.bnodesToClear=Object.keys(C.bnodeMap).filter(D=>C.bnodeMap[D].length===1));// remove @preserve from results
return S.link={},x(T,S)},l.frame=(p,v,S,C,R=null)=>{f(S),S=S[0];const T=p.options,D={embed:d(S,T,"embed"),explicit:d(S,T,"explicit"),requireAll:d(S,T,"requireAll")};p.link.hasOwnProperty(p.graph)||(p.link[p.graph]={});const U=p.link[p.graph],z=h(p,v,S,D),V=Object.keys(z).sort();for(const P of V){const X=z[P];if(R===null?p.uniqueEmbeds={[p.graph]:{}}:p.uniqueEmbeds[p.graph]=p.uniqueEmbeds[p.graph]||{},D.embed==="@link"&&P in U){b(C,R,U[P]);continue}const O={"@id":P};if(P.indexOf("_:")===0&&r.addValue(p.bnodeMap,P,O,{propertyIsArray:!0}),U[P]=O,(D.embed==="@first"||D.embed==="@last")&&p.is11)throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:S});if(!(!p.embedded&&p.uniqueEmbeds[p.graph].hasOwnProperty(P))){if(p.embedded&&(D.embed==="@never"||c(X,p.graph,p.subjectStack))){b(C,R,O);continue}if(p.embedded&&(D.embed=="@first"||D.embed=="@once")&&p.uniqueEmbeds[p.graph].hasOwnProperty(P)){b(C,R,O);continue}if(D.embed==="@last"&&P in p.uniqueEmbeds[p.graph]&&g(p,P),p.uniqueEmbeds[p.graph][P]={parent:C,property:R},p.subjectStack.push({subject:X,graph:p.graph}),P in p.graphMap){let H=!1,q=null;"@graph"in S?(q=S["@graph"][0],H=!(P==="@merged"||P==="@default"),n.isObject(q)||(q={})):(H=p.graph!=="@merged",q={}),H&&l.frame({...p,graph:P,embedded:!1},Object.keys(p.graphMap[P]).sort(),[q],O,"@graph")}"@included"in S&&l.frame({...p,embedded:!1},v,S["@included"],O,"@included");for(const H of Object.keys(X).sort()){if(t(H)){if(O[H]=r.clone(X[H]),H==="@type")for(const q of X["@type"])q.indexOf("_:")===0&&r.addValue(p.bnodeMap,q,O,{propertyIsArray:!0});continue}if(!(D.explicit&&!(H in S)))for(const q of X[H]){const ie=H in S?S[H]:u(D);if(e.isList(q)){const B=S[H]&&S[H][0]&&S[H][0]["@list"]?S[H][0]["@list"]:u(D),ue={"@list":[]};b(O,H,ue);const de=q["@list"];for(const ye of de)e.isSubjectReference(ye)?l.frame({...p,embedded:!0},[ye["@id"]],B,ue,"@list"):b(ue,"@list",r.clone(ye))}else e.isSubjectReference(q)?l.frame({...p,embedded:!0},[q["@id"]],ie,O,H):_(ie[0],q)&&b(O,H,r.clone(q))}}for(const H of Object.keys(S).sort()){if(H==="@type"){if(!n.isObject(S[H][0])||!("@default"in S[H][0]))continue}else if(t(H))continue;const q=S[H][0]||{};if(!d(q,T,"omitDefault")&&!(H in O)){let B="@null";"@default"in q&&(B=r.clone(q["@default"])),n.isArray(B)||(B=[B]),O[H]=[{"@preserve":B}]}}for(const H of Object.keys(S["@reverse"]||{}).sort()){const q=S["@reverse"][H];for(const ie of Object.keys(p.subjects))r.getValues(p.subjects[ie],H).some(ue=>ue["@id"]===P)&&(O["@reverse"]=O["@reverse"]||{},r.addValue(O["@reverse"],H,[],{propertyIsArray:!0}),l.frame({...p,embedded:!0},[ie],q,O["@reverse"][H],R))}b(C,R,O),p.subjectStack.pop()}}},l.cleanupNull=(p,v)=>{if(n.isArray(p))return p.map(C=>l.cleanupNull(C,v)).filter(C=>C);if(p==="@null")return null;if(n.isObject(p)){if("@id"in p){const S=p["@id"];if(v.link.hasOwnProperty(S)){const C=v.link[S].indexOf(p);if(C!==-1)return v.link[S][C];v.link[S].push(p)}else v.link[S]=[p]}for(const S in p)p[S]=l.cleanupNull(p[S],v)}return p};function u(p){const v={};for(const S in p)p[S]!==void 0&&(v["@"+S]=[p[S]]);return[v]}function c(p,v,S){for(let C=S.length-1;C>=0;--C){const R=S[C];if(R.graph===v&&R.subject["@id"]===p["@id"])return!0}return!1}function d(p,v,S){const C="@"+S;let R=C in p?p[C][0]:v[S];if(S==="embed"){if(R===!0)R="@once";else if(R===!1)R="@never";else if(R!=="@always"&&R!=="@never"&&R!=="@link"&&R!=="@first"&&R!=="@last"&&R!=="@once")throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:p})}return R}function f(p){if(!n.isArray(p)||p.length!==1||!n.isObject(p[0]))throw new i("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:p});if("@id"in p[0]){for(const v of r.asArray(p[0]["@id"]))if(!(n.isObject(v)||s.isAbsolute(v))||n.isString(v)&&v.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:p})}if("@type"in p[0]){for(const v of r.asArray(p[0]["@type"]))if(!(n.isObject(v)||s.isAbsolute(v)||v==="@json")||n.isString(v)&&v.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:p})}}function h(p,v,S,C){const R={};for(const T of v){const D=p.graphMap[p.graph][T];m(p,D,S,C)&&(R[T]=D)}return R}function m(p,v,S,C){let R=!0,T=!1;for(const D in S){let U=!1;const z=r.getValues(v,D),V=r.getValues(S,D).length===0;if(D==="@id"){if(n.isEmptyObject(S["@id"][0]||{})?U=!0:S["@id"].length>=0&&(U=S["@id"].includes(z[0])),!C.requireAll)return U}else if(D==="@type"){if(R=!1,V){if(z.length>0)return!1;U=!0}else if(S["@type"].length===1&&n.isEmptyObject(S["@type"][0]))U=z.length>0;else for(const P of S["@type"])n.isObject(P)&&"@default"in P?U=!0:U=U||z.some(X=>X===P);if(!C.requireAll)return U}else{if(t(D))continue;{const P=r.getValues(S,D)[0];let X=!1;if(P&&(f([P]),X="@default"in P),R=!1,z.length===0&&X)continue;if(z.length>0&&V)return!1;if(P===void 0){if(z.length>0)return!1;U=!0}else if(e.isList(P)){const O=P["@list"][0];if(e.isList(z[0])){const H=z[0]["@list"];e.isValue(O)?U=H.some(q=>_(O,q)):(e.isSubject(O)||e.isSubjectReference(O))&&(U=H.some(q=>E(p,O,q,C)))}}else e.isValue(P)?U=z.some(O=>_(P,O)):e.isSubjectReference(P)?U=z.some(O=>E(p,P,O,C)):n.isObject(P)?U=z.length>0:U=!1}}if(!U&&C.requireAll)return!1;T=T||U}return R||T}function g(p,v){const S=p.uniqueEmbeds[p.graph],C=S[v],R=C.parent,T=C.property,D={"@id":v};if(n.isArray(R)){for(let z=0;z<R.length;++z)if(r.compareValues(R[z],D)){R[z]=D;break}}else{const z=n.isArray(R[T]);r.removeValue(R,T,D,{propertyIsArray:z}),r.addValue(R,T,D,{propertyIsArray:z})}const U=z=>{const V=Object.keys(S);for(const P of V)P in S&&n.isObject(S[P].parent)&&S[P].parent["@id"]===z&&(delete S[P],U(P))};U(v)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function x(p,v){if(n.isArray(p))return p.map(S=>x(S,v));if(n.isObject(p)){// remove @preserve
if("@preserve"in p)return p["@preserve"][0];if(e.isValue(p))return p;if(e.isList(p))return p["@list"]=x(p["@list"],v),p;if("@id"in p){const S=p["@id"];if(v.link.hasOwnProperty(S)){const C=v.link[S].indexOf(p);if(C!==-1)return v.link[S][C];v.link[S].push(p)}else v.link[S]=[p]}for(const S in p){if(S==="@id"&&v.bnodesToClear.includes(p[S])){delete p["@id"];continue}p[S]=x(p[S],v)}}return p}function b(p,v,S){n.isObject(p)?r.addValue(p,v,S,{propertyIsArray:!0}):p.push(S)}function E(p,v,S,C){if(!("@id"in S))return!1;const R=p.subjects[S["@id"]];return R&&m(p,R,v,C)}function _(p,v){const S=v["@value"],C=v["@type"],R=v["@language"],T=p["@value"]?n.isArray(p["@value"])?p["@value"]:[p["@value"]]:[],D=p["@type"]?n.isArray(p["@type"])?p["@type"]:[p["@type"]]:[],U=p["@language"]?n.isArray(p["@language"])?p["@language"]:[p["@language"]]:[];return T.length===0&&D.length===0&&U.length===0?!0:!(!(T.includes(S)||n.isEmptyObject(T[0]))||!(!C&&D.length===0||D.includes(C)||C&&n.isEmptyObject(D[0]))||!(!R&&U.length===0||U.includes(R)||R&&n.isEmptyObject(U[0])))}return wf}var _f,Pb;function nU(){if(Pb)return _f;Pb=1;const t=Tr(),{isArray:e,isObject:n,isString:r,isUndefined:s}=dr(),{isList:i,isValue:o,isGraph:a,isSimpleGraph:l,isSubjectReference:u}=qs(),{expandIri:c,getContextValue:d,isKeyword:f,process:h,processingMode:m}=zi(),{removeBase:g,prependBase:x}=Si(),{REGEX_KEYWORD:b,addValue:E,asArray:_,compareShortestLeast:p}=Rr(),v={};_f=v,v.compact=async({activeCtx:R,activeProperty:T=null,element:D,options:U={}})=>{if(e(D)){let V=[];for(let P=0;P<D.length;++P){const X=await v.compact({activeCtx:R,activeProperty:T,element:D[P],options:U});X!==null&&V.push(X)}return U.compactArrays&&V.length===1&&(d(R,T,"@container")||[]).length===0&&(V=V[0]),V}const z=d(R,T,"@context");if(s(z)||(R=await h({activeCtx:R,localCtx:z,propagate:!0,overrideProtected:!0,options:U})),n(D)){if(U.link&&"@id"in D&&U.link.hasOwnProperty(D["@id"])){const B=U.link[D["@id"]];for(let ue=0;ue<B.length;++ue)if(B[ue].expanded===D)return B[ue].compacted}if(o(D)||u(D)){const B=v.compactValue({activeCtx:R,activeProperty:T,value:D,options:U});return U.link&&u(D)&&(U.link.hasOwnProperty(D["@id"])||(U.link[D["@id"]]=[]),U.link[D["@id"]].push({expanded:D,compacted:B})),B}if(i(D)&&(d(R,T,"@container")||[]).includes("@list"))return v.compact({activeCtx:R,activeProperty:T,element:D["@list"],options:U});const V=T==="@reverse",P={},X=R;!o(D)&&!u(D)&&(R=R.revertToPreviousContext());const O=d(X,T,"@context");s(O)||(R=await h({activeCtx:R,localCtx:O,propagate:!0,overrideProtected:!0,options:U})),U.link&&"@id"in D&&(U.link.hasOwnProperty(D["@id"])||(U.link[D["@id"]]=[]),U.link[D["@id"]].push({expanded:D,compacted:P}));let H=D["@type"]||[];H.length>1&&(H=Array.from(H).sort());const q=R;for(const B of H){const ue=v.compactIri({activeCtx:q,iri:B,relativeTo:{vocab:!0}}),de=d(X,ue,"@context");s(de)||(R=await h({activeCtx:R,localCtx:de,options:U,propagate:!1}))}const ie=Object.keys(D).sort();for(const B of ie){const ue=D[B];if(B==="@id"){let de=_(ue).map(Se=>v.compactIri({activeCtx:R,iri:Se,relativeTo:{vocab:!1},base:U.base}));de.length===1&&(de=de[0]);const ye=v.compactIri({activeCtx:R,iri:"@id",relativeTo:{vocab:!0}});P[ye]=de;continue}if(B==="@type"){let de=_(ue).map($=>v.compactIri({activeCtx:X,iri:$,relativeTo:{vocab:!0}}));de.length===1&&(de=de[0]);const ye=v.compactIri({activeCtx:R,iri:"@type",relativeTo:{vocab:!0}}),W=(d(R,ye,"@container")||[]).includes("@set")&&m(R,1.1)||e(de)&&ue.length===0;E(P,ye,de,{propertyIsArray:W});continue}if(B==="@reverse"){const de=await v.compact({activeCtx:R,activeProperty:"@reverse",element:ue,options:U});for(const ye in de)if(R.mappings.has(ye)&&R.mappings.get(ye).reverse){const Se=de[ye],W=(d(R,ye,"@container")||[]).includes("@set")||!U.compactArrays;E(P,ye,Se,{propertyIsArray:W}),delete de[ye]}if(Object.keys(de).length>0){const ye=v.compactIri({activeCtx:R,iri:B,relativeTo:{vocab:!0}});E(P,ye,de)}continue}if(B==="@preserve"){const de=await v.compact({activeCtx:R,activeProperty:T,element:ue,options:U});e(de)&&de.length===0||E(P,B,de);continue}if(B==="@index"){if((d(R,T,"@container")||[]).includes("@index"))continue;const ye=v.compactIri({activeCtx:R,iri:B,relativeTo:{vocab:!0}});E(P,ye,ue);continue}if(B!=="@graph"&&B!=="@list"&&B!=="@included"&&f(B)){const de=v.compactIri({activeCtx:R,iri:B,relativeTo:{vocab:!0}});E(P,de,ue);continue}if(!e(ue))throw new t("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(ue.length===0){const de=v.compactIri({activeCtx:R,iri:B,value:ue,relativeTo:{vocab:!0},reverse:V}),ye=R.mappings.has(de)?R.mappings.get(de)["@nest"]:null;let Se=P;ye&&(C(R,ye,U),n(P[ye])||(P[ye]={}),Se=P[ye]),E(Se,de,ue,{propertyIsArray:!0})}for(const de of ue){const ye=v.compactIri({activeCtx:R,iri:B,value:de,relativeTo:{vocab:!0},reverse:V}),Se=R.mappings.has(ye)?R.mappings.get(ye)["@nest"]:null;let G=P;Se&&(C(R,Se,U),n(P[Se])||(P[Se]={}),G=P[Se]);const W=d(R,ye,"@container")||[],$=a(de),Z=i(de);let ae;Z?ae=de["@list"]:$&&(ae=de["@graph"]);let re=await v.compact({activeCtx:R,activeProperty:ye,element:Z||$?ae:de,options:U});if(Z)if(e(re)||(re=[re]),!W.includes("@list"))re={[v.compactIri({activeCtx:R,iri:"@list",relativeTo:{vocab:!0}})]:re},"@index"in de&&(re[v.compactIri({activeCtx:R,iri:"@index",relativeTo:{vocab:!0}})]=de["@index"]);else{E(G,ye,re,{valueIsArray:!0,allowDuplicate:!0});continue}if($)if(W.includes("@graph")&&(W.includes("@id")||W.includes("@index")&&l(de))){let Ee;G.hasOwnProperty(ye)?Ee=G[ye]:G[ye]=Ee={};const L=(W.includes("@id")?de["@id"]:de["@index"])||v.compactIri({activeCtx:R,iri:"@none",relativeTo:{vocab:!0}});E(Ee,L,re,{propertyIsArray:!U.compactArrays||W.includes("@set")})}else W.includes("@graph")&&l(de)?(e(re)&&re.length>1&&(re={"@included":re}),E(G,ye,re,{propertyIsArray:!U.compactArrays||W.includes("@set")})):(e(re)&&re.length===1&&U.compactArrays&&(re=re[0]),re={[v.compactIri({activeCtx:R,iri:"@graph",relativeTo:{vocab:!0}})]:re},"@id"in de&&(re[v.compactIri({activeCtx:R,iri:"@id",relativeTo:{vocab:!0}})]=de["@id"]),"@index"in de&&(re[v.compactIri({activeCtx:R,iri:"@index",relativeTo:{vocab:!0}})]=de["@index"]),E(G,ye,re,{propertyIsArray:!U.compactArrays||W.includes("@set")}));else if(W.includes("@language")||W.includes("@index")||W.includes("@id")||W.includes("@type")){let Ee;G.hasOwnProperty(ye)?Ee=G[ye]:G[ye]=Ee={};let L;if(W.includes("@language"))o(re)&&(re=re["@value"]),L=de["@language"];else if(W.includes("@index")){const k=d(R,ye,"@index")||"@index",K=v.compactIri({activeCtx:R,iri:k,relativeTo:{vocab:!0}});if(k==="@index")L=de["@index"],delete re[K];else{let he;if([L,...he]=_(re[k]||[]),!r(L))L=null;else switch(he.length){case 0:delete re[k];break;case 1:re[k]=he[0];break;default:re[k]=he;break}}}else if(W.includes("@id")){const k=v.compactIri({activeCtx:R,iri:"@id",relativeTo:{vocab:!0}});L=re[k],delete re[k]}else if(W.includes("@type")){const k=v.compactIri({activeCtx:R,iri:"@type",relativeTo:{vocab:!0}});let K;switch([L,...K]=_(re[k]||[]),K.length){case 0:delete re[k];break;case 1:re[k]=K[0];break;default:re[k]=K;break}Object.keys(re).length===1&&"@id"in de&&(re=await v.compact({activeCtx:R,activeProperty:ye,element:{"@id":de["@id"]},options:U}))}L||(L=v.compactIri({activeCtx:R,iri:"@none",relativeTo:{vocab:!0}})),E(Ee,L,re,{propertyIsArray:W.includes("@set")})}else{const Ee=!U.compactArrays||W.includes("@set")||W.includes("@list")||e(re)&&re.length===0||B==="@list"||B==="@graph";E(G,ye,re,{propertyIsArray:Ee})}}}return P}return D},v.compactIri=({activeCtx:R,iri:T,value:D=null,relativeTo:U={vocab:!1},reverse:z=!1,base:V=null})=>{if(T===null)return T;R.isPropertyTermScoped&&R.previousContext&&(R=R.previousContext);const P=R.getInverse();if(f(T)&&T in P&&"@none"in P[T]&&"@type"in P[T]["@none"]&&"@none"in P[T]["@none"]["@type"])return P[T]["@none"]["@type"]["@none"];if(U.vocab&&T in P){const ie=R["@language"]||"@none",B=[];n(D)&&"@index"in D&&!("@graph"in D)&&B.push("@index","@index@set"),n(D)&&"@preserve"in D&&(D=D["@preserve"][0]),a(D)?("@index"in D&&B.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in D&&B.push("@graph@id","@graph@id@set"),B.push("@graph","@graph@set","@set"),"@index"in D||B.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in D||B.push("@graph@id","@graph@id@set")):n(D)&&!o(D)&&B.push("@id","@id@set","@type","@set@type");let ue="@language",de="@null";if(z)ue="@type",de="@reverse",B.push("@set");else if(i(D)){"@index"in D||B.push("@list");const Se=D["@list"];if(Se.length===0)ue="@any",de="@none";else{let G=Se.length===0?ie:null,W=null;for(let $=0;$<Se.length;++$){const Z=Se[$];let ae="@none",re="@none";if(o(Z))if("@direction"in Z){const Ee=(Z["@language"]||"").toLowerCase(),L=Z["@direction"];ae=`${Ee}_${L}`}else"@language"in Z?ae=Z["@language"].toLowerCase():"@type"in Z?re=Z["@type"]:ae="@null";else re="@id";if(G===null?G=ae:ae!==G&&o(Z)&&(G="@none"),W===null?W=re:re!==W&&(W="@none"),G==="@none"&&W==="@none")break}G=G||"@none",W=W||"@none",W!=="@none"?(ue="@type",de=W):de=G}}else{if(o(D))if("@language"in D&&!("@index"in D)){B.push("@language","@language@set"),de=D["@language"];const Se=D["@direction"];Se&&(de=`${de}_${Se}`)}else"@direction"in D&&!("@index"in D)?de=`_${D["@direction"]}`:"@type"in D&&(ue="@type",de=D["@type"]);else ue="@type",de="@id";B.push("@set")}B.push("@none"),n(D)&&!("@index"in D)&&B.push("@index","@index@set"),o(D)&&Object.keys(D).length===1&&B.push("@language","@language@set");const ye=S(R,T,D,B,ue,de);if(ye!==null)return ye}if(U.vocab&&"@vocab"in R){const ie=R["@vocab"];if(T.indexOf(ie)===0&&T!==ie){const B=T.substr(ie.length);if(!R.mappings.has(B))return B}}let X=null;const O=[];let H=R.fastCurieMap;const q=T.length-1;for(let ie=0;ie<q&&T[ie]in H;++ie)H=H[T[ie]],""in H&&O.push(H[""][0]);for(let ie=O.length-1;ie>=0;--ie){const B=O[ie],ue=B.terms;for(const de of ue){const ye=de+":"+T.substr(B.iri.length);R.mappings.get(de)._prefix&&(!R.mappings.has(ye)||D===null&&R.mappings.get(ye)["@id"]===T)&&(X===null||p(ye,X)<0)&&(X=ye)}}if(X!==null)return X;for(const[ie,B]of R.mappings)if(B&&B._prefix&&T.startsWith(ie+":"))throw new t(`Absolute IRI "${T}" confused with prefix "${ie}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:R});if(!U.vocab)if("@base"in R)if(R["@base"]){const ie=g(x(V,R["@base"]),T);return b.test(ie)?`./${ie}`:ie}else return T;else return g(V,T);return T},v.compactValue=({activeCtx:R,activeProperty:T,value:D,options:U})=>{if(o(D)){const X=d(R,T,"@type"),O=d(R,T,"@language"),H=d(R,T,"@direction"),q=d(R,T,"@container")||[],ie="@index"in D&&!q.includes("@index");if(!ie&&X!=="@none"&&(D["@type"]===X||"@language"in D&&D["@language"]===O&&"@direction"in D&&D["@direction"]===H||"@language"in D&&D["@language"]===O||"@direction"in D&&D["@direction"]===H))return D["@value"];const B=Object.keys(D).length,ue=B===1||B===2&&"@index"in D&&!ie,de="@language"in R,ye=r(D["@value"]),Se=R.mappings.has(T)&&R.mappings.get(T)["@language"]===null;if(ue&&X!=="@none"&&(!de||!ye||Se))return D["@value"];const G={};return ie&&(G[v.compactIri({activeCtx:R,iri:"@index",relativeTo:{vocab:!0}})]=D["@index"]),"@type"in D?G[v.compactIri({activeCtx:R,iri:"@type",relativeTo:{vocab:!0}})]=v.compactIri({activeCtx:R,iri:D["@type"],relativeTo:{vocab:!0}}):"@language"in D&&(G[v.compactIri({activeCtx:R,iri:"@language",relativeTo:{vocab:!0}})]=D["@language"]),"@direction"in D&&(G[v.compactIri({activeCtx:R,iri:"@direction",relativeTo:{vocab:!0}})]=D["@direction"]),G[v.compactIri({activeCtx:R,iri:"@value",relativeTo:{vocab:!0}})]=D["@value"],G}const z=c(R,T,{vocab:!0},U),V=d(R,T,"@type"),P=v.compactIri({activeCtx:R,iri:D["@id"],relativeTo:{vocab:V==="@vocab"},base:U.base});return V==="@id"||V==="@vocab"||z==="@graph"?P:{[v.compactIri({activeCtx:R,iri:"@id",relativeTo:{vocab:!0}})]:P}};function S(R,T,D,U,z,V){V===null&&(V="@null");const P=[];if((V==="@id"||V==="@reverse")&&n(D)&&"@id"in D){V==="@reverse"&&P.push("@reverse");const O=v.compactIri({activeCtx:R,iri:D["@id"],relativeTo:{vocab:!0}});R.mappings.has(O)&&R.mappings.get(O)&&R.mappings.get(O)["@id"]===D["@id"]?P.push.apply(P,["@vocab","@id"]):P.push.apply(P,["@id","@vocab"])}else{P.push(V);const O=P.find(H=>H.includes("_"));O&&P.push(O.replace(/^[^_]+_/,"_"))}P.push("@none");const X=R.inverse[T];for(const O of U){if(!(O in X))continue;const H=X[O][z];for(const q of P)if(q in H)return H[q]}return null}function C(R,T,D){if(c(R,T,{vocab:!0},D)!=="@nest")throw new t("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}return _f}var xf,$b;function rU(){return $b||($b=1,xf=t=>{class e{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e}),e.compact=function(n,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):t.compact(n,r)},e.expand=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):t.expand(n)},e.flatten=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):t.flatten(n)},e}),xf}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var Ef,Lb;function sU(){if(Lb)return Ef;Lb=1;const t=Pm(),e=zj(),n=Rr(),r=Gj(),s=n.IdentifierIssuer,i=Tr(),o=Y1(),a=Jj(),{expand:l}=Xj(),{flatten:u}=Yj(),{fromRDF:c}=Qj(),{toRDF:d}=eU(),{frameMergedOrDefault:f,cleanupNull:h}=tU(),{isArray:m,isObject:g,isString:x}=dr(),{isSubjectReference:b}=qs(),{expandIri:E,getInitialContext:_,process:p,processingMode:v}=zi(),{compact:S,compactIri:C}=nU(),{createNodeMap:R,createMergedNodeMap:T,mergeNodeMaps:D}=Fc(),{logEventHandler:U,logWarningEventHandler:z,safeEventHandler:V,setDefaultEventHandler:P,setupEventHandler:X,strictEventHandler:O,unhandledEventHandler:H}=pl(),q=function(B){const ue={},ye=new o({max:100});B.compact=async function(G,W,$){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(W===null)throw new i("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(G===null)return null;$=Se($,{base:x(G)?G:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new s("_:b"),contextResolver:new r({sharedCache:ye})}),$.link&&($.skipExpansion=!0),$.compactToRelative||delete $.base;let Z;$.skipExpansion?Z=G:Z=await B.expand(G,$);const ae=await B.processContext(_($),W,$);let re=await S({activeCtx:ae,element:Z,options:$});$.compactArrays&&!$.graph&&m(re)?re.length===1?re=re[0]:re.length===0&&(re={}):$.graph&&g(re)&&(re=[re]),g(W)&&"@context"in W&&(W=W["@context"]),W=n.clone(W),m(W)||(W=[W]);const Ee=W;W=[];for(let k=0;k<Ee.length;++k)(!g(Ee[k])||Object.keys(Ee[k]).length>0)&&W.push(Ee[k]);const L=W.length>0;if(W.length===1&&(W=W[0]),m(re)){const k=C({activeCtx:ae,iri:"@graph",relativeTo:{vocab:!0}}),K=re;re={},L&&(re["@context"]=W),re[k]=K}else if(g(re)&&L){const k=re;re={"@context":W};for(const K in k)re[K]=k[K]}return re},B.expand=async function(G,W){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");W=Se(W,{keepFreeFloatingNodes:!1,contextResolver:new r({sharedCache:ye})});const $={},Z=[];if("expandContext"in W){const L=n.clone(W.expandContext);g(L)&&"@context"in L?$.expandContext=L:$.expandContext={"@context":L},Z.push($.expandContext)}let ae;if(!x(G))$.input=n.clone(G);else{const L=await B.get(G,W);ae=L.documentUrl,$.input=L.document,L.contextUrl&&($.remoteContext={"@context":L.contextUrl},Z.push($.remoteContext))}"base"in W||(W.base=ae||"");let re=_(W);for(const L of Z)re=await p({activeCtx:re,localCtx:L,options:W});let Ee=await l({activeCtx:re,element:$.input,options:W});return g(Ee)&&"@graph"in Ee&&Object.keys(Ee).length===1?Ee=Ee["@graph"]:Ee===null&&(Ee=[]),m(Ee)||(Ee=[Ee]),Ee},B.flatten=async function(G,W,$){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof W=="function"?W=null:W=W||null,$=Se($,{base:x(G)?G:"",contextResolver:new r({sharedCache:ye})});const Z=await B.expand(G,$),ae=u(Z);return W===null?ae:($.graph=!0,$.skipExpansion=!0,await B.compact(ae,W,$))},B.frame=async function(G,W,$){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if($=Se($,{base:x(G)?G:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new r({sharedCache:ye})}),x(W)){const ve=await B.get(W,$);if(W=ve.document,ve.contextUrl){let ge=W["@context"];ge?m(ge)?ge.push(ve.contextUrl):ge=[ge,ve.contextUrl]:ge=ve.contextUrl,W["@context"]=ge}}const Z=W?W["@context"]||{}:{},ae=await B.processContext(_($),Z,$);$.hasOwnProperty("omitGraph")||($.omitGraph=v(ae,1.1)),$.hasOwnProperty("pruneBlankNodeIdentifiers")||($.pruneBlankNodeIdentifiers=v(ae,1.1));const re=await B.expand(G,$),Ee={...$};Ee.isFrame=!0,Ee.keepFreeFloatingNodes=!0;const L=await B.expand(W,Ee),k=Object.keys(W).map(ve=>E(ae,ve,{vocab:!0}));Ee.merged=!k.includes("@graph"),Ee.is11=v(ae,1.1);const K=f(re,L,Ee);Ee.graph=!$.omitGraph,Ee.skipExpansion=!0,Ee.link={},Ee.framing=!0;let he=await B.compact(K,Z,Ee);return Ee.link={},he=h(he,Ee),he},B.link=async function(G,W,$){const Z={};return W&&(Z["@context"]=W),Z["@embed"]="@link",B.frame(G,Z,$)},B.normalize=B.canonize=async function(G,W){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(W=Se(W,{base:x(G)?G:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new r({sharedCache:ye})}),"inputFormat"in W){if(W.inputFormat!=="application/n-quads"&&W.inputFormat!=="application/nquads")throw new i("Unknown canonicalization input format.","jsonld.CanonizeError");const ae=a.parse(G);return t.canonize(ae,W)}const $={...W};delete $.format,$.produceGeneralizedRdf=!1;const Z=await B.toRDF(G,$);return t.canonize(Z,W)},B.fromRDF=async function(G,W){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");W=Se(W,{format:x(G)?"application/n-quads":void 0});const{format:$}=W;let{rdfParser:Z}=W;if($){if(Z=Z||ue[$],!Z)throw new i("Unknown input format.","jsonld.UnknownFormat",{format:$})}else Z=()=>G;const ae=await Z(G);return c(ae,W)},B.toRDF=async function(G,W){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");W=Se(W,{base:x(G)?G:"",skipExpansion:!1,contextResolver:new r({sharedCache:ye})});let $;W.skipExpansion?$=G:$=await B.expand(G,W);const Z=d($,W);if(W.format){if(W.format==="application/n-quads"||W.format==="application/nquads")return a.serialize(Z);throw new i("Unknown output format.","jsonld.UnknownFormat",{format:W.format})}return Z},B.createNodeMap=async function(G,W){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");W=Se(W,{base:x(G)?G:"",contextResolver:new r({sharedCache:ye})});const $=await B.expand(G,W);return T($,W)},B.merge=async function(G,W,$){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!m(G))throw new TypeError('Could not merge, "docs" must be an array.');typeof W=="function"?W=null:W=W||null,$=Se($,{contextResolver:new r({sharedCache:ye})});const Z=await Promise.all(G.map(ve=>{const ge={...$};return B.expand(ve,ge)}));let ae=!0;"mergeNodes"in $&&(ae=$.mergeNodes);const re=$.issuer||new s("_:b"),Ee={"@default":{}};for(let ve=0;ve<Z.length;++ve){const ge=n.relabelBlankNodes(Z[ve],{issuer:new s("_:b"+ve+"-")}),N=ae||ve===0?Ee:{"@default":{}};if(R(ge,N,"@default",re),N!==Ee)for(const j in N){const ee=N[j];if(!(j in Ee)){Ee[j]=ee;continue}const le=Ee[j];for(const Ie in ee)Ie in le||(le[Ie]=ee[Ie])}}const L=D(Ee),k=[],K=Object.keys(L).sort();for(let ve=0;ve<K.length;++ve){const ge=L[K[ve]];b(ge)||k.push(ge)}return W===null?k:($.graph=!0,$.skipExpansion=!0,await B.compact(k,W,$))},Object.defineProperty(B,"documentLoader",{get:()=>B._documentLoader,set:G=>B._documentLoader=G}),B.documentLoader=async G=>{throw new i("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:G})},B.get=async function(G,W){let $;typeof W.documentLoader=="function"?$=W.documentLoader:$=B.documentLoader;const Z=await $(G);try{if(!Z.document)throw new i("No remote document found at the given URL.","jsonld.NullRemoteDocument");x(Z.document)&&(Z.document=JSON.parse(Z.document))}catch(ae){throw new i("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ae,remoteDoc:Z})}return Z},B.processContext=async function(G,W,$){return $=Se($,{base:"",contextResolver:new r({sharedCache:ye})}),W===null?_($):(W=n.clone(W),g(W)&&"@context"in W||(W={"@context":W}),p({activeCtx:G,localCtx:W,options:$}))},B.getContextValue=zi().getContextValue,B.documentLoaders={},B.useDocumentLoader=function(G){if(!(G in B.documentLoaders))throw new i('Unknown document loader type: "'+G+'"',"jsonld.UnknownDocumentLoader",{type:G});B.documentLoader=B.documentLoaders[G].apply(B,Array.prototype.slice.call(arguments,1))},B.registerRDFParser=function(G,W){ue[G]=W},B.unregisterRDFParser=function(G){delete ue[G]},B.registerRDFParser("application/n-quads",a.parse),B.registerRDFParser("application/nquads",a.parse),B.url=Si(),B.logEventHandler=U,B.logWarningEventHandler=z,B.safeEventHandler=V,B.setDefaultEventHandler=P,B.strictEventHandler=O,B.unhandledEventHandler=H,B.util=n,Object.assign(B,n),B.promises=B,B.RequestQueue=X1(),B.JsonLdProcessor=rU()(B),e.setupGlobals(B),e.setupDocumentLoaders(B);function Se(G,{documentLoader:W=B.documentLoader,...$}){if(G&&"compactionMap"in G)throw new i('"compactionMap" not supported.',"jsonld.OptionsError");if(G&&"expansionMap"in G)throw new i('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:W},$,G,{eventHandler:X({options:G})})}return B},ie=function(){return q(function(){return ie()})};return q(ie),Ef=ie,Ef}var iU=sU();const Lm=$j(iU);var Af={exports:{}},Sf={exports:{}},Mb;function oU(){return Mb||(Mb=1,(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return e.rotl(n,8)&16711935|e.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=e.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,i=0;s<n.length;s++,i+=8)r[i>>>5]|=n[s]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var i=n[s]<<16|n[s+1]<<8|n[s+2],o=0;o<4;o++)s*8+o*6<=n.length*8?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,i=0;s<n.length;i=++s%4)i!=0&&r.push((t.indexOf(n.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<i*2|t.indexOf(n.charAt(s))>>>6-i*2);return r}};Sf.exports=e})()),Sf.exports}var If,Nb;function Fb(){if(Nb)return If;Nb=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],r=0;r<e.length;r++)n.push(e.charCodeAt(r)&255);return n},bytesToString:function(e){for(var n=[],r=0;r<e.length;r++)n.push(String.fromCharCode(e[r]));return n.join("")}}};return If=t,If}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Cf,jb;function aU(){if(jb)return Cf;jb=1,Cf=function(n){return n!=null&&(t(n)||e(n)||!!n._isBuffer)};function t(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function e(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&t(n.slice(0,0))}return Cf}var Ub;function lU(){return Ub||(Ub=1,(function(){var t=oU(),e=Fb().utf8,n=aU(),r=Fb().bin,s=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=r.stringToBytes(i):i=e.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var a=t.bytesToWords(i),l=i.length*8,u=1732584193,c=-271733879,d=-1732584194,f=271733878,h=0;h<a.length;h++)a[h]=(a[h]<<8|a[h]>>>24)&16711935|(a[h]<<24|a[h]>>>8)&4278255360;a[l>>>5]|=128<<l%32,a[(l+64>>>9<<4)+14]=l;for(var m=s._ff,g=s._gg,x=s._hh,b=s._ii,h=0;h<a.length;h+=16){var E=u,_=c,p=d,v=f;u=m(u,c,d,f,a[h+0],7,-680876936),f=m(f,u,c,d,a[h+1],12,-389564586),d=m(d,f,u,c,a[h+2],17,606105819),c=m(c,d,f,u,a[h+3],22,-1044525330),u=m(u,c,d,f,a[h+4],7,-176418897),f=m(f,u,c,d,a[h+5],12,1200080426),d=m(d,f,u,c,a[h+6],17,-1473231341),c=m(c,d,f,u,a[h+7],22,-45705983),u=m(u,c,d,f,a[h+8],7,1770035416),f=m(f,u,c,d,a[h+9],12,-1958414417),d=m(d,f,u,c,a[h+10],17,-42063),c=m(c,d,f,u,a[h+11],22,-1990404162),u=m(u,c,d,f,a[h+12],7,1804603682),f=m(f,u,c,d,a[h+13],12,-40341101),d=m(d,f,u,c,a[h+14],17,-1502002290),c=m(c,d,f,u,a[h+15],22,1236535329),u=g(u,c,d,f,a[h+1],5,-165796510),f=g(f,u,c,d,a[h+6],9,-1069501632),d=g(d,f,u,c,a[h+11],14,643717713),c=g(c,d,f,u,a[h+0],20,-373897302),u=g(u,c,d,f,a[h+5],5,-701558691),f=g(f,u,c,d,a[h+10],9,38016083),d=g(d,f,u,c,a[h+15],14,-660478335),c=g(c,d,f,u,a[h+4],20,-405537848),u=g(u,c,d,f,a[h+9],5,568446438),f=g(f,u,c,d,a[h+14],9,-1019803690),d=g(d,f,u,c,a[h+3],14,-187363961),c=g(c,d,f,u,a[h+8],20,1163531501),u=g(u,c,d,f,a[h+13],5,-1444681467),f=g(f,u,c,d,a[h+2],9,-51403784),d=g(d,f,u,c,a[h+7],14,1735328473),c=g(c,d,f,u,a[h+12],20,-1926607734),u=x(u,c,d,f,a[h+5],4,-378558),f=x(f,u,c,d,a[h+8],11,-2022574463),d=x(d,f,u,c,a[h+11],16,1839030562),c=x(c,d,f,u,a[h+14],23,-35309556),u=x(u,c,d,f,a[h+1],4,-1530992060),f=x(f,u,c,d,a[h+4],11,1272893353),d=x(d,f,u,c,a[h+7],16,-155497632),c=x(c,d,f,u,a[h+10],23,-1094730640),u=x(u,c,d,f,a[h+13],4,681279174),f=x(f,u,c,d,a[h+0],11,-358537222),d=x(d,f,u,c,a[h+3],16,-722521979),c=x(c,d,f,u,a[h+6],23,76029189),u=x(u,c,d,f,a[h+9],4,-640364487),f=x(f,u,c,d,a[h+12],11,-421815835),d=x(d,f,u,c,a[h+15],16,530742520),c=x(c,d,f,u,a[h+2],23,-995338651),u=b(u,c,d,f,a[h+0],6,-198630844),f=b(f,u,c,d,a[h+7],10,1126891415),d=b(d,f,u,c,a[h+14],15,-1416354905),c=b(c,d,f,u,a[h+5],21,-57434055),u=b(u,c,d,f,a[h+12],6,1700485571),f=b(f,u,c,d,a[h+3],10,-1894986606),d=b(d,f,u,c,a[h+10],15,-1051523),c=b(c,d,f,u,a[h+1],21,-2054922799),u=b(u,c,d,f,a[h+8],6,1873313359),f=b(f,u,c,d,a[h+15],10,-30611744),d=b(d,f,u,c,a[h+6],15,-1560198380),c=b(c,d,f,u,a[h+13],21,1309151649),u=b(u,c,d,f,a[h+4],6,-145523070),f=b(f,u,c,d,a[h+11],10,-1120210379),d=b(d,f,u,c,a[h+2],15,718787259),c=b(c,d,f,u,a[h+9],21,-343485551),u=u+E>>>0,c=c+_>>>0,d=d+p>>>0,f=f+v>>>0}return t.endian([u,c,d,f])};s._ff=function(i,o,a,l,u,c,d){var f=i+(o&a|~o&l)+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._gg=function(i,o,a,l,u,c,d){var f=i+(o&l|a&~l)+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._hh=function(i,o,a,l,u,c,d){var f=i+(o^a^l)+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._ii=function(i,o,a,l,u,c,d){var f=i+(a^(o|~l))+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._blocksize=16,s._digestsize=16,Af.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var a=t.wordsToBytes(s(i,o));return o&&o.asBytes?a:o&&o.asString?r.bytesToString(a):t.bytesToHex(a)}})()),Af.exports}lU();var Rf={},la={},qb;function uU(){if(qb)return la;qb=1,la.byteLength=a,la.toByteArray=u,la.fromByteArray=f;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)t[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(h){var m=h.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=h.indexOf("=");g===-1&&(g=m);var x=g===m?0:4-g%4;return[g,x]}function a(h){var m=o(h),g=m[0],x=m[1];return(g+x)*3/4-x}function l(h,m,g){return(m+g)*3/4-g}function u(h){var m,g=o(h),x=g[0],b=g[1],E=new n(l(h,x,b)),_=0,p=b>0?x-4:x,v;for(v=0;v<p;v+=4)m=e[h.charCodeAt(v)]<<18|e[h.charCodeAt(v+1)]<<12|e[h.charCodeAt(v+2)]<<6|e[h.charCodeAt(v+3)],E[_++]=m>>16&255,E[_++]=m>>8&255,E[_++]=m&255;return b===2&&(m=e[h.charCodeAt(v)]<<2|e[h.charCodeAt(v+1)]>>4,E[_++]=m&255),b===1&&(m=e[h.charCodeAt(v)]<<10|e[h.charCodeAt(v+1)]<<4|e[h.charCodeAt(v+2)]>>2,E[_++]=m>>8&255,E[_++]=m&255),E}function c(h){return t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]}function d(h,m,g){for(var x,b=[],E=m;E<g;E+=3)x=(h[E]<<16&16711680)+(h[E+1]<<8&65280)+(h[E+2]&255),b.push(c(x));return b.join("")}function f(h){for(var m,g=h.length,x=g%3,b=[],E=16383,_=0,p=g-x;_<p;_+=E)b.push(d(h,_,_+E>p?p:_+E));return x===1?(m=h[g-1],b.push(t[m>>2]+t[m<<4&63]+"==")):x===2&&(m=(h[g-2]<<8)+h[g-1],b.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),b.join("")}return la}var Ul={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Bb;function cU(){return Bb||(Bb=1,Ul.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?s-1:0,f=n?-1:1,h=t[e+d];for(d+=f,i=h&(1<<-c)-1,h>>=-c,c+=a;c>0;i=i*256+t[e+d],d+=f,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;c>0;o=o*256+t[e+d],d+=f,c-=8);if(i===0)i=1-u;else{if(i===l)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(h?-1:1)*o*Math.pow(2,i-r)},Ul.write=function(t,e,n,r,s,i){var o,a,l,u=i*8-s-1,c=(1<<u)-1,d=c>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,m=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=f/l:e+=f*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=c?(a=0,o=c):o+d>=1?(a=(e*l-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+h]=a&255,h+=m,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[n+h]=o&255,h+=m,o/=256,u-=8);t[n+h-m]|=g*128}),Ul}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Vb;function dU(){return Vb||(Vb=1,(function(t){const e=uU(),n=cU(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const I=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(I,y),I.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(I){if(I>s)throw new RangeError('The value "'+I+'" is invalid for option "size"');const y=new Uint8Array(I);return Object.setPrototypeOf(y,a.prototype),y}function a(I,y,w){if(typeof I=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(I)}return l(I,y,w)}a.poolSize=8192;function l(I,y,w){if(typeof I=="string")return f(I,y);if(ArrayBuffer.isView(I))return m(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(Ie(I,ArrayBuffer)||I&&Ie(I.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ie(I,SharedArrayBuffer)||I&&Ie(I.buffer,SharedArrayBuffer)))return g(I,y,w);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const M=I.valueOf&&I.valueOf();if(M!=null&&M!==I)return a.from(M,y,w);const Y=x(I);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return a.from(I[Symbol.toPrimitive]("string"),y,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}a.from=function(I,y,w){return l(I,y,w)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function c(I,y,w){return u(I),I<=0?o(I):y!==void 0?typeof w=="string"?o(I).fill(y,w):o(I).fill(y):o(I)}a.alloc=function(I,y,w){return c(I,y,w)};function d(I){return u(I),o(I<0?0:b(I)|0)}a.allocUnsafe=function(I){return d(I)},a.allocUnsafeSlow=function(I){return d(I)};function f(I,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const w=_(I,y)|0;let M=o(w);const Y=M.write(I,y);return Y!==w&&(M=M.slice(0,Y)),M}function h(I){const y=I.length<0?0:b(I.length)|0,w=o(y);for(let M=0;M<y;M+=1)w[M]=I[M]&255;return w}function m(I){if(Ie(I,Uint8Array)){const y=new Uint8Array(I);return g(y.buffer,y.byteOffset,y.byteLength)}return h(I)}function g(I,y,w){if(y<0||I.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<y+(w||0))throw new RangeError('"length" is outside of buffer bounds');let M;return y===void 0&&w===void 0?M=new Uint8Array(I):w===void 0?M=new Uint8Array(I,y):M=new Uint8Array(I,y,w),Object.setPrototypeOf(M,a.prototype),M}function x(I){if(a.isBuffer(I)){const y=b(I.length)|0,w=o(y);return w.length===0||I.copy(w,0,0,y),w}if(I.length!==void 0)return typeof I.length!="number"||xe(I.length)?o(0):h(I);if(I.type==="Buffer"&&Array.isArray(I.data))return h(I.data)}function b(I){if(I>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return I|0}function E(I){return+I!=I&&(I=0),a.alloc(+I)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,w){if(Ie(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),Ie(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(y)||!a.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===w)return 0;let M=y.length,Y=w.length;for(let fe=0,we=Math.min(M,Y);fe<we;++fe)if(y[fe]!==w[fe]){M=y[fe],Y=w[fe];break}return M<Y?-1:Y<M?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,w){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let M;if(w===void 0)for(w=0,M=0;M<y.length;++M)w+=y[M].length;const Y=a.allocUnsafe(w);let fe=0;for(M=0;M<y.length;++M){let we=y[M];if(Ie(we,Uint8Array))fe+we.length>Y.length?(a.isBuffer(we)||(we=a.from(we)),we.copy(Y,fe)):Uint8Array.prototype.set.call(Y,we,fe);else if(a.isBuffer(we))we.copy(Y,fe);else throw new TypeError('"list" argument must be an Array of Buffers');fe+=we.length}return Y};function _(I,y){if(a.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||Ie(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const w=I.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&w===0)return 0;let Y=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return ge(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return ee(I).length;default:if(Y)return M?-1:ge(I).length;y=(""+y).toLowerCase(),Y=!0}}a.byteLength=_;function p(I,y,w){let M=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,y>>>=0,w<=y))return"";for(I||(I="utf8");;)switch(I){case"hex":return ie(this,y,w);case"utf8":case"utf-8":return P(this,y,w);case"ascii":return H(this,y,w);case"latin1":case"binary":return q(this,y,w);case"base64":return V(this,y,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,y,w);default:if(M)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),M=!0}}a.prototype._isBuffer=!0;function v(I,y,w){const M=I[y];I[y]=I[w],I[w]=M}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<y;w+=2)v(this,w,w+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<y;w+=4)v(this,w,w+3),v(this,w+1,w+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<y;w+=8)v(this,w,w+7),v(this,w+1,w+6),v(this,w+2,w+5),v(this,w+3,w+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?P(this,0,y):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const w=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,w,M,Y,fe){if(Ie(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(w===void 0&&(w=0),M===void 0&&(M=y?y.length:0),Y===void 0&&(Y=0),fe===void 0&&(fe=this.length),w<0||M>y.length||Y<0||fe>this.length)throw new RangeError("out of range index");if(Y>=fe&&w>=M)return 0;if(Y>=fe)return-1;if(w>=M)return 1;if(w>>>=0,M>>>=0,Y>>>=0,fe>>>=0,this===y)return 0;let we=fe-Y,Ke=M-w;const ze=Math.min(we,Ke),Je=this.slice(Y,fe),gt=y.slice(w,M);for(let it=0;it<ze;++it)if(Je[it]!==gt[it]){we=Je[it],Ke=gt[it];break}return we<Ke?-1:Ke<we?1:0};function S(I,y,w,M,Y){if(I.length===0)return-1;if(typeof w=="string"?(M=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,xe(w)&&(w=Y?0:I.length-1),w<0&&(w=I.length+w),w>=I.length){if(Y)return-1;w=I.length-1}else if(w<0)if(Y)w=0;else return-1;if(typeof y=="string"&&(y=a.from(y,M)),a.isBuffer(y))return y.length===0?-1:C(I,y,w,M,Y);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(I,y,w):Uint8Array.prototype.lastIndexOf.call(I,y,w):C(I,[y],w,M,Y);throw new TypeError("val must be string, number or Buffer")}function C(I,y,w,M,Y){let fe=1,we=I.length,Ke=y.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(I.length<2||y.length<2)return-1;fe=2,we/=2,Ke/=2,w/=2}function ze(gt,it){return fe===1?gt[it]:gt.readUInt16BE(it*fe)}let Je;if(Y){let gt=-1;for(Je=w;Je<we;Je++)if(ze(I,Je)===ze(y,gt===-1?0:Je-gt)){if(gt===-1&&(gt=Je),Je-gt+1===Ke)return gt*fe}else gt!==-1&&(Je-=Je-gt),gt=-1}else for(w+Ke>we&&(w=we-Ke),Je=w;Je>=0;Je--){let gt=!0;for(let it=0;it<Ke;it++)if(ze(I,Je+it)!==ze(y,it)){gt=!1;break}if(gt)return Je}return-1}a.prototype.includes=function(y,w,M){return this.indexOf(y,w,M)!==-1},a.prototype.indexOf=function(y,w,M){return S(this,y,w,M,!0)},a.prototype.lastIndexOf=function(y,w,M){return S(this,y,w,M,!1)};function R(I,y,w,M){w=Number(w)||0;const Y=I.length-w;M?(M=Number(M),M>Y&&(M=Y)):M=Y;const fe=y.length;M>fe/2&&(M=fe/2);let we;for(we=0;we<M;++we){const Ke=parseInt(y.substr(we*2,2),16);if(xe(Ke))return we;I[w+we]=Ke}return we}function T(I,y,w,M){return le(ge(y,I.length-w),I,w,M)}function D(I,y,w,M){return le(N(y),I,w,M)}function U(I,y,w,M){return le(ee(y),I,w,M)}function z(I,y,w,M){return le(j(y,I.length-w),I,w,M)}a.prototype.write=function(y,w,M,Y){if(w===void 0)Y="utf8",M=this.length,w=0;else if(M===void 0&&typeof w=="string")Y=w,M=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(M)?(M=M>>>0,Y===void 0&&(Y="utf8")):(Y=M,M=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const fe=this.length-w;if((M===void 0||M>fe)&&(M=fe),y.length>0&&(M<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y||(Y="utf8");let we=!1;for(;;)switch(Y){case"hex":return R(this,y,w,M);case"utf8":case"utf-8":return T(this,y,w,M);case"ascii":case"latin1":case"binary":return D(this,y,w,M);case"base64":return U(this,y,w,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,y,w,M);default:if(we)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),we=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(I,y,w){return y===0&&w===I.length?e.fromByteArray(I):e.fromByteArray(I.slice(y,w))}function P(I,y,w){w=Math.min(I.length,w);const M=[];let Y=y;for(;Y<w;){const fe=I[Y];let we=null,Ke=fe>239?4:fe>223?3:fe>191?2:1;if(Y+Ke<=w){let ze,Je,gt,it;switch(Ke){case 1:fe<128&&(we=fe);break;case 2:ze=I[Y+1],(ze&192)===128&&(it=(fe&31)<<6|ze&63,it>127&&(we=it));break;case 3:ze=I[Y+1],Je=I[Y+2],(ze&192)===128&&(Je&192)===128&&(it=(fe&15)<<12|(ze&63)<<6|Je&63,it>2047&&(it<55296||it>57343)&&(we=it));break;case 4:ze=I[Y+1],Je=I[Y+2],gt=I[Y+3],(ze&192)===128&&(Je&192)===128&&(gt&192)===128&&(it=(fe&15)<<18|(ze&63)<<12|(Je&63)<<6|gt&63,it>65535&&it<1114112&&(we=it))}}we===null?(we=65533,Ke=1):we>65535&&(we-=65536,M.push(we>>>10&1023|55296),we=56320|we&1023),M.push(we),Y+=Ke}return O(M)}const X=4096;function O(I){const y=I.length;if(y<=X)return String.fromCharCode.apply(String,I);let w="",M=0;for(;M<y;)w+=String.fromCharCode.apply(String,I.slice(M,M+=X));return w}function H(I,y,w){let M="";w=Math.min(I.length,w);for(let Y=y;Y<w;++Y)M+=String.fromCharCode(I[Y]&127);return M}function q(I,y,w){let M="";w=Math.min(I.length,w);for(let Y=y;Y<w;++Y)M+=String.fromCharCode(I[Y]);return M}function ie(I,y,w){const M=I.length;(!y||y<0)&&(y=0),(!w||w<0||w>M)&&(w=M);let Y="";for(let fe=y;fe<w;++fe)Y+=ne[I[fe]];return Y}function B(I,y,w){const M=I.slice(y,w);let Y="";for(let fe=0;fe<M.length-1;fe+=2)Y+=String.fromCharCode(M[fe]+M[fe+1]*256);return Y}a.prototype.slice=function(y,w){const M=this.length;y=~~y,w=w===void 0?M:~~w,y<0?(y+=M,y<0&&(y=0)):y>M&&(y=M),w<0?(w+=M,w<0&&(w=0)):w>M&&(w=M),w<y&&(w=y);const Y=this.subarray(y,w);return Object.setPrototypeOf(Y,a.prototype),Y};function ue(I,y,w){if(I%1!==0||I<0)throw new RangeError("offset is not uint");if(I+y>w)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,w,M){y=y>>>0,w=w>>>0,M||ue(y,w,this.length);let Y=this[y],fe=1,we=0;for(;++we<w&&(fe*=256);)Y+=this[y+we]*fe;return Y},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,w,M){y=y>>>0,w=w>>>0,M||ue(y,w,this.length);let Y=this[y+--w],fe=1;for(;w>0&&(fe*=256);)Y+=this[y+--w]*fe;return Y},a.prototype.readUint8=a.prototype.readUInt8=function(y,w){return y=y>>>0,w||ue(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,w){return y=y>>>0,w||ue(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,w){return y=y>>>0,w||ue(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,w){return y=y>>>0,w||ue(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,w){return y=y>>>0,w||ue(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=pe(function(y){y=y>>>0,k(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&K(y,this.length-8);const Y=w+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,fe=this[++y]+this[++y]*2**8+this[++y]*2**16+M*2**24;return BigInt(Y)+(BigInt(fe)<<BigInt(32))}),a.prototype.readBigUInt64BE=pe(function(y){y=y>>>0,k(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&K(y,this.length-8);const Y=w*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],fe=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+M;return(BigInt(Y)<<BigInt(32))+BigInt(fe)}),a.prototype.readIntLE=function(y,w,M){y=y>>>0,w=w>>>0,M||ue(y,w,this.length);let Y=this[y],fe=1,we=0;for(;++we<w&&(fe*=256);)Y+=this[y+we]*fe;return fe*=128,Y>=fe&&(Y-=Math.pow(2,8*w)),Y},a.prototype.readIntBE=function(y,w,M){y=y>>>0,w=w>>>0,M||ue(y,w,this.length);let Y=w,fe=1,we=this[y+--Y];for(;Y>0&&(fe*=256);)we+=this[y+--Y]*fe;return fe*=128,we>=fe&&(we-=Math.pow(2,8*w)),we},a.prototype.readInt8=function(y,w){return y=y>>>0,w||ue(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,w){y=y>>>0,w||ue(y,2,this.length);const M=this[y]|this[y+1]<<8;return M&32768?M|4294901760:M},a.prototype.readInt16BE=function(y,w){y=y>>>0,w||ue(y,2,this.length);const M=this[y+1]|this[y]<<8;return M&32768?M|4294901760:M},a.prototype.readInt32LE=function(y,w){return y=y>>>0,w||ue(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,w){return y=y>>>0,w||ue(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=pe(function(y){y=y>>>0,k(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&K(y,this.length-8);const Y=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(M<<24);return(BigInt(Y)<<BigInt(32))+BigInt(w+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=pe(function(y){y=y>>>0,k(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&K(y,this.length-8);const Y=(w<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(Y)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+M)}),a.prototype.readFloatLE=function(y,w){return y=y>>>0,w||ue(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,w){return y=y>>>0,w||ue(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,w){return y=y>>>0,w||ue(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,w){return y=y>>>0,w||ue(y,8,this.length),n.read(this,y,!1,52,8)};function de(I,y,w,M,Y,fe){if(!a.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>Y||y<fe)throw new RangeError('"value" argument is out of bounds');if(w+M>I.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,w,M,Y){if(y=+y,w=w>>>0,M=M>>>0,!Y){const Ke=Math.pow(2,8*M)-1;de(this,y,w,M,Ke,0)}let fe=1,we=0;for(this[w]=y&255;++we<M&&(fe*=256);)this[w+we]=y/fe&255;return w+M},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,w,M,Y){if(y=+y,w=w>>>0,M=M>>>0,!Y){const Ke=Math.pow(2,8*M)-1;de(this,y,w,M,Ke,0)}let fe=M-1,we=1;for(this[w+fe]=y&255;--fe>=0&&(we*=256);)this[w+fe]=y/we&255;return w+M},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,1,255,0),this[w]=y&255,w+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,2,65535,0),this[w]=y&255,this[w+1]=y>>>8,w+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,2,65535,0),this[w]=y>>>8,this[w+1]=y&255,w+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,4,4294967295,0),this[w+3]=y>>>24,this[w+2]=y>>>16,this[w+1]=y>>>8,this[w]=y&255,w+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,4,4294967295,0),this[w]=y>>>24,this[w+1]=y>>>16,this[w+2]=y>>>8,this[w+3]=y&255,w+4};function ye(I,y,w,M,Y){L(y,M,Y,I,w,7);let fe=Number(y&BigInt(4294967295));I[w++]=fe,fe=fe>>8,I[w++]=fe,fe=fe>>8,I[w++]=fe,fe=fe>>8,I[w++]=fe;let we=Number(y>>BigInt(32)&BigInt(4294967295));return I[w++]=we,we=we>>8,I[w++]=we,we=we>>8,I[w++]=we,we=we>>8,I[w++]=we,w}function Se(I,y,w,M,Y){L(y,M,Y,I,w,7);let fe=Number(y&BigInt(4294967295));I[w+7]=fe,fe=fe>>8,I[w+6]=fe,fe=fe>>8,I[w+5]=fe,fe=fe>>8,I[w+4]=fe;let we=Number(y>>BigInt(32)&BigInt(4294967295));return I[w+3]=we,we=we>>8,I[w+2]=we,we=we>>8,I[w+1]=we,we=we>>8,I[w]=we,w+8}a.prototype.writeBigUInt64LE=pe(function(y,w=0){return ye(this,y,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=pe(function(y,w=0){return Se(this,y,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,w,M,Y){if(y=+y,w=w>>>0,!Y){const ze=Math.pow(2,8*M-1);de(this,y,w,M,ze-1,-ze)}let fe=0,we=1,Ke=0;for(this[w]=y&255;++fe<M&&(we*=256);)y<0&&Ke===0&&this[w+fe-1]!==0&&(Ke=1),this[w+fe]=(y/we>>0)-Ke&255;return w+M},a.prototype.writeIntBE=function(y,w,M,Y){if(y=+y,w=w>>>0,!Y){const ze=Math.pow(2,8*M-1);de(this,y,w,M,ze-1,-ze)}let fe=M-1,we=1,Ke=0;for(this[w+fe]=y&255;--fe>=0&&(we*=256);)y<0&&Ke===0&&this[w+fe+1]!==0&&(Ke=1),this[w+fe]=(y/we>>0)-Ke&255;return w+M},a.prototype.writeInt8=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,1,127,-128),y<0&&(y=255+y+1),this[w]=y&255,w+1},a.prototype.writeInt16LE=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,2,32767,-32768),this[w]=y&255,this[w+1]=y>>>8,w+2},a.prototype.writeInt16BE=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,2,32767,-32768),this[w]=y>>>8,this[w+1]=y&255,w+2},a.prototype.writeInt32LE=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,4,2147483647,-2147483648),this[w]=y&255,this[w+1]=y>>>8,this[w+2]=y>>>16,this[w+3]=y>>>24,w+4},a.prototype.writeInt32BE=function(y,w,M){return y=+y,w=w>>>0,M||de(this,y,w,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[w]=y>>>24,this[w+1]=y>>>16,this[w+2]=y>>>8,this[w+3]=y&255,w+4},a.prototype.writeBigInt64LE=pe(function(y,w=0){return ye(this,y,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=pe(function(y,w=0){return Se(this,y,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(I,y,w,M,Y,fe){if(w+M>I.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function W(I,y,w,M,Y){return y=+y,w=w>>>0,Y||G(I,y,w,4),n.write(I,y,w,M,23,4),w+4}a.prototype.writeFloatLE=function(y,w,M){return W(this,y,w,!0,M)},a.prototype.writeFloatBE=function(y,w,M){return W(this,y,w,!1,M)};function $(I,y,w,M,Y){return y=+y,w=w>>>0,Y||G(I,y,w,8),n.write(I,y,w,M,52,8),w+8}a.prototype.writeDoubleLE=function(y,w,M){return $(this,y,w,!0,M)},a.prototype.writeDoubleBE=function(y,w,M){return $(this,y,w,!1,M)},a.prototype.copy=function(y,w,M,Y){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(M||(M=0),!Y&&Y!==0&&(Y=this.length),w>=y.length&&(w=y.length),w||(w=0),Y>0&&Y<M&&(Y=M),Y===M||y.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(M<0||M>=this.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length),y.length-w<Y-M&&(Y=y.length-w+M);const fe=Y-M;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,M,Y):Uint8Array.prototype.set.call(y,this.subarray(M,Y),w),fe},a.prototype.fill=function(y,w,M,Y){if(typeof y=="string"){if(typeof w=="string"?(Y=w,w=0,M=this.length):typeof M=="string"&&(Y=M,M=this.length),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!a.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);if(y.length===1){const we=y.charCodeAt(0);(Y==="utf8"&&we<128||Y==="latin1")&&(y=we)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(w<0||this.length<w||this.length<M)throw new RangeError("Out of range index");if(M<=w)return this;w=w>>>0,M=M===void 0?this.length:M>>>0,y||(y=0);let fe;if(typeof y=="number")for(fe=w;fe<M;++fe)this[fe]=y;else{const we=a.isBuffer(y)?y:a.from(y,Y),Ke=we.length;if(Ke===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(fe=0;fe<M-w;++fe)this[fe+w]=we[fe%Ke]}return this};const Z={};function ae(I,y,w){Z[I]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${I}]`,this.stack,delete this.name}get code(){return I}set code(Y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Y,writable:!0})}toString(){return`${this.name} [${I}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(I,y){return`The "${I}" argument must be of type number. Received type ${typeof y}`},TypeError),ae("ERR_OUT_OF_RANGE",function(I,y,w){let M=`The value of "${I}" is out of range.`,Y=w;return Number.isInteger(w)&&Math.abs(w)>2**32?Y=re(String(w)):typeof w=="bigint"&&(Y=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(Y=re(Y)),Y+="n"),M+=` It must be ${y}. Received ${Y}`,M},RangeError);function re(I){let y="",w=I.length;const M=I[0]==="-"?1:0;for(;w>=M+4;w-=3)y=`_${I.slice(w-3,w)}${y}`;return`${I.slice(0,w)}${y}`}function Ee(I,y,w){k(y,"offset"),(I[y]===void 0||I[y+w]===void 0)&&K(y,I.length-(w+1))}function L(I,y,w,M,Y,fe){if(I>w||I<y){const we=typeof y=="bigint"?"n":"";let Ke;throw y===0||y===BigInt(0)?Ke=`>= 0${we} and < 2${we} ** ${(fe+1)*8}${we}`:Ke=`>= -(2${we} ** ${(fe+1)*8-1}${we}) and < 2 ** ${(fe+1)*8-1}${we}`,new Z.ERR_OUT_OF_RANGE("value",Ke,I)}Ee(M,Y,fe)}function k(I,y){if(typeof I!="number")throw new Z.ERR_INVALID_ARG_TYPE(y,"number",I)}function K(I,y,w){throw Math.floor(I)!==I?(k(I,w),new Z.ERR_OUT_OF_RANGE("offset","an integer",I)):y<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,I)}const he=/[^+/0-9A-Za-z-_]/g;function ve(I){if(I=I.split("=")[0],I=I.trim().replace(he,""),I.length<2)return"";for(;I.length%4!==0;)I=I+"=";return I}function ge(I,y){y=y||1/0;let w;const M=I.length;let Y=null;const fe=[];for(let we=0;we<M;++we){if(w=I.charCodeAt(we),w>55295&&w<57344){if(!Y){if(w>56319){(y-=3)>-1&&fe.push(239,191,189);continue}else if(we+1===M){(y-=3)>-1&&fe.push(239,191,189);continue}Y=w;continue}if(w<56320){(y-=3)>-1&&fe.push(239,191,189),Y=w;continue}w=(Y-55296<<10|w-56320)+65536}else Y&&(y-=3)>-1&&fe.push(239,191,189);if(Y=null,w<128){if((y-=1)<0)break;fe.push(w)}else if(w<2048){if((y-=2)<0)break;fe.push(w>>6|192,w&63|128)}else if(w<65536){if((y-=3)<0)break;fe.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((y-=4)<0)break;fe.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return fe}function N(I){const y=[];for(let w=0;w<I.length;++w)y.push(I.charCodeAt(w)&255);return y}function j(I,y){let w,M,Y;const fe=[];for(let we=0;we<I.length&&!((y-=2)<0);++we)w=I.charCodeAt(we),M=w>>8,Y=w%256,fe.push(Y),fe.push(M);return fe}function ee(I){return e.toByteArray(ve(I))}function le(I,y,w,M){let Y;for(Y=0;Y<M&&!(Y+w>=y.length||Y>=I.length);++Y)y[Y+w]=I[Y];return Y}function Ie(I,y){return I instanceof y||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===y.name}function xe(I){return I!==I}const ne=(function(){const I="0123456789abcdef",y=new Array(256);for(let w=0;w<16;++w){const M=w*16;for(let Y=0;Y<16;++Y)y[M+Y]=I[w]+I[Y]}return y})();function pe(I){return typeof BigInt>"u"?Oe:I}function Oe(){throw new Error("BigInt not supported")}})(Rf)),Rf}var fU=dU();const ua="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ca="http://www.w3.org/2001/XMLSchema#",ql="http://www.w3.org/2000/10/swap/",hr={xsd:{decimal:`${ca}decimal`,boolean:`${ca}boolean`,double:`${ca}double`,integer:`${ca}integer`,string:`${ca}string`},rdf:{type:`${ua}type`,nil:`${ua}nil`,first:`${ua}first`,rest:`${ua}rest`,langString:`${ua}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${ql}reify#forSome`,forAll:`${ql}reify#forAll`},log:{implies:`${ql}log#implies`,isImpliedBy:`${ql}log#isImpliedBy`}},{xsd:Bl}=hr,hU=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,zb={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},pU=/[\x00-\x20<>\\"\{\}\|\^\`]/,mU={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},gU=/$0^/;class yU{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const n in this)!(n in mU)&&this[n]instanceof RegExp&&(this[n]=gU)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let r=this._input,s=r.length;for(;;){let a,l;for(;a=this._newline.exec(r);)this.comments&&(l=this._comment.exec(a[0]))&&i("comment",l[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),s=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return n&&(this.comments&&(l=this._comment.exec(r))&&i("comment",l[1],"",this._line,r.length),r=null,i("eof","","",this._line,0)),this._input=r;const u=this._line,c=r[0];let d="",f="",h="",m=null,g=0,x=!1;switch(c){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){x=!0;break}}else{this._n3Mode&&(g=1,d="^");break}case"<":if(m=this._unescapedIri.exec(r))d="IRI",f=m[1];else if(m=this._iri.exec(r)){if(f=this._unescape(m[1]),f===null||pU.test(f))return o(this);d="IRI"}else r.length>1&&r[1]==="<"?(d="<<",g=2):this._n3Mode&&r.length>1&&r[1]==="="&&(g=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":r.length>1&&r[1]===">"&&(d=">>",g=2);break;case"_":((m=this._blank.exec(r))||n&&(m=this._blank.exec(`${r} `)))&&(d="blank",h="_",f=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(r))f=m[1];else if({value:f,matchLength:g}=this._parseLiteral(r),f===null)return o(this);(m!==null||g!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(r))f=m[1];else if({value:f,matchLength:g}=this._parseLiteral(r),f===null)return o(this);(m!==null||g!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(r))&&(d="var",f=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(r))?(d="langcode",f=m[1]):(m=this._keyword.exec(r))&&(d=m[0]);break;case".":if(r.length===1?n:r[1]<"0"||r[1]>"9"){d=".",g=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(r)||n&&(m=this._number.exec(`${r} `)))&&(d="literal",f=m[0],h=typeof m[1]=="string"?Bl.double:typeof m[2]=="string"?Bl.decimal:Bl.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(r))?d=m[0].toUpperCase():x=!0;break;case"f":case"t":(m=this._boolean.exec(r))?(d="literal",f=m[0],h=Bl.boolean):x=!0;break;case"a":(m=this._shortPredicates.exec(r))?(d="abbreviation",f="a"):x=!0;break;case"=":this._n3Mode&&r.length>1&&(d="abbreviation",r[1]!==">"?(g=1,f="="):(g=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(g=1,d=c);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(d="{|",g=2):(d=c,g=1));break;case"|":r.length>=2&&r[1]==="}"&&(d="|}",g=2);break;default:x=!0}if(x&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(r))?(d="prefix",f=m[1]||""):((m=this._prefixed.exec(r))||n&&(m=this._prefixed.exec(`${r} `)))&&(d="prefixed",h=m[1]||"",f=this._unescape(m[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?o(this):this._input=r;const b=g||m[0].length,E=i(d,f,h,u,b);this.previousToken=E,this._previousMarker=d,r=r.substr(b,r.length)}function i(a,l,u,c,d){const f=r?s-r.length:s,h=f+d,m={type:a,value:l,prefix:u,line:c,start:f,end:h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let n=!1;const r=e.replace(hU,(s,i,o,a)=>{if(typeof i=="string")return String.fromCharCode(Number.parseInt(i,16));if(typeof o=="string"){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return a in zb?zb[a]:(n=!0,"")});return n?null:r}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],r=n.length;let s=Math.max(this._literalClosingPos,r);for(;(s=e.indexOf(n,s))>0;){let i=0;for(;e[s-i-1]==="\\";)i++;if(i%2===0){const o=e.substring(r,s),a=o.split(/\r\n|\r|\n/).length-1,l=s+r;if(r===1&&a!==0||r===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}s++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,n){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof n=="function")queueMicrotask(()=>this._tokenizeToEnd(n,!0));else{const r=[];let s;if(this._tokenizeToEnd((i,o)=>i?s=i:r.push(o),!0),s)throw s;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=fU.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}const{rdf:vU,xsd:lo}=hr;let ml,bU=0;const Q1={namedNode:tE,blankNode:nE,variable:sE,literal:rE,defaultGraph:EU,quad:Xh,triple:Xh,fromTerm:ga,fromQuad:iE};class fs{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof fs?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Z1 extends fs{get termType(){return"NamedNode"}}class Pa extends fs{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&e[n++]==="@"?e.substr(n).toLowerCase():""}get datatype(){return new Z1(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,r=n<e.length?e[n]:"";return r==="^"?e.substr(n+2):r!=="@"?lo.string:vU.langString}equals(e){return e instanceof Pa?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class wU extends fs{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class _U extends fs{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class xU extends fs{constructor(){return super(""),ml||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}ml=new xU;class eE extends fs{constructor(e,n,r,s){super(""),this._subject=e,this._predicate=n,this._object=r,this._graph=s||ml}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function tE(t){return new Z1(t)}function nE(t){return new wU(t||`n3-${bU++}`)}function rE(t,e){if(typeof e=="string")return new Pa(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return n===""&&(typeof t=="boolean"?n=lo.boolean:typeof t=="number"&&(Number.isFinite(t)?n=Number.isInteger(t)?lo.integer:lo.double:(n=lo.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),n===""||n===lo.string?new Pa(`"${t}"`):new Pa(`"${t}"^^${n}`)}function sE(t){return new _U(t)}function EU(){return ml}function Xh(t,e,n,r){return new eE(t,e,n,r)}function ga(t){if(t instanceof fs)return t;switch(t.termType){case"NamedNode":return tE(t.value);case"BlankNode":return nE(t.value);case"Variable":return sE(t.value);case"DefaultGraph":return ml;case"Literal":return rE(t.value,t.language||t.datatype);case"Quad":return iE(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function iE(t){if(t instanceof eE)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return Xh(ga(t.subject),ga(t.predicate),ga(t.object),ga(t.graph))}let Hb=0;class oE{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&aE(this,e.factory);const n=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(n),s=/trig/.test(n),i=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),l=i||o;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||s||i||a),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=n===""||/star|\*$/.test(n),l&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new yU({lineMode:l,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Hb=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,n,r,s,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:s,object:i,graph:n,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let r;switch(e.type){case"IRI":case"typeIRI":const s=this._resolveIRI(e.value);if(s===null)return this._error("Invalid IRI",e);r=this._factory.namedNode(s);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(i===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(i+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${n}`,e):(this._subject=null,n==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,r=null,s=this._readListItem;const i=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=n=this._factory.blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,s=this._readListItemDataTypeOrLang):(n=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((n=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),i===null?a.predicate===null?a.subject=r:a.object=r:this._emit(i,this.RDF_REST,r,this._graph),n!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,n,this._graph)}return s}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;n=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":n=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const r=this._completeLiteral(e);if(r)return this._object=r.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,r=this._graph;const s=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,a=this._object;this._subject=this._factory.quad(s,o,a,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(s!==null){const o=this._predicate,a=this._object;i?this._emit(a,o,s,r):this._emit(s,o,a,r)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n=e.type==="IRI"&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if((n=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,r=n.length&&n[n.length-1];if(r&&r.type==="item"){const s=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,s,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,r;const s=this._factory.blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=s):(n=this._object,this._object=s),this._emit(n,r,s,this._graph),this._readPath}_readBackwardPath(e){const n=this._factory.blankNode();let r,s;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(s=this._subject,this._subject=n):(s=this._object,this._object=n),this._emit(n,r,s,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const n=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,r,s){this._callback(null,this._factory.quad(e,n,r,s||this.DEFAULTGRAPH))}_error(e,n){const r=new Error(`${e} on line ${n.line}.`);r.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=Vl}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let r="",s=-1,i=-1,o=0,a="/";for(;s<n;){switch(a){case":":if(i<0&&e[++s]==="/"&&e[++s]==="/")for(;(i=s+1)<n&&e[i]!=="/";)s=i;break;case"?":case"#":s=n;break;case"/":if(e[s+1]===".")switch(a=e[++s+1],a){case"/":r+=e.substring(o,s-1),o=s+1;break;case void 0:case"?":case"#":return r+e.substring(o,s)+e.substr(s+1);case".":if(a=e[++s+1],a===void 0||a==="/"||a==="?"||a==="#"){if(r+=e.substring(o,s-2),(o=r.lastIndexOf("/"))>=i&&(r=r.substr(0,o)),a!=="/")return`${r}/${e.substr(s+1)}`;o=s+1}}}a=e[++s]}return r+e.substring(o)}parse(e,n,r){let s,i,o;if(n&&(n.onQuad||n.onPrefix||n.onComment)?(s=n.onQuad,i=n.onPrefix,o=n.onComment):(s=n,i=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Hb++}_`,this._prefixCallback=i||Vl,this._inversePredicate=!1,this._quantified=Object.create(null),!s){const l=[];let u;if(this._callback=(c,d)=>{c?u=c:d&&l.push(d)},this._lexer.tokenize(e).every(c=>this._readCallback=this._readCallback(c)),u)throw u;return l}let a=(l,u)=>{l!==null?(this._callback(l),this._callback=Vl):this._readCallback&&(this._readCallback=this._readCallback(u))};o&&(this._lexer.comments=!0,a=(l,u)=>{l!==null?(this._callback(l),this._callback=Vl):this._readCallback&&(u.type==="comment"?o(u.value):this._readCallback=this._readCallback(u))}),this._callback=s,this._lexer.tokenize(e,a)}}function Vl(){}function aE(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(hr.rdf.first),t.RDF_REST=e.namedNode(hr.rdf.rest),t.RDF_NIL=e.namedNode(hr.rdf.nil),t.N3_FORALL=e.namedNode(hr.r.forAll),t.N3_FORSOME=e.namedNode(hr.r.forSome),t.ABBREVIATIONS={a:e.namedNode(hr.rdf.type),"=":e.namedNode(hr.owl.sameAs),">":e.namedNode(hr.log.implies),"<":e.namedNode(hr.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}aE(oE.prototype,Q1);function AU(t){return!!t&&t.termType==="DefaultGraph"}function cu(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const SU=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,IU=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,Kb="./",CU="../",Tf="?",Wb="#";class Mm{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!SU.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!Mm.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],n=["^",cu(e)],r=[],s=[],i=/[^/?#]*([/?#])/y;let o,a=0,l=0,u=i.lastIndex=e.length;for(;!a&&!l&&(o=i.exec(this.base));)o[1]===Wb?l=i.lastIndex-1:(n.push(cu(o[0]),"(?:"),r.push(")?"),o[1]!==Tf?s.push(u=i.lastIndex):(a=u=i.lastIndex,l=this.base.indexOf(Wb,a),this._pathReplacements[a]=Tf));for(let c=0;c<s.length;c++)this._pathReplacements[s[c]]=CU.repeat(s.length-c-1);return this._pathReplacements[s[s.length-1]]=Kb,this._baseLength=l>0?l:this.base.length,n.push(cu(this.base.substring(u,this._baseLength)),a?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...n,...r].join(""))}toRelative(e){const n=this._getBaseMatcher().exec(e);if(!n)return e;const r=n[0].length;if(r===this._baseLength&&r===e.length)return"";const s=this._pathReplacements[r];if(s){const i=e.substring(r);return s!==Tf&&!IU.test(i)?e:s===Kb&&/^[^?#]/.test(i)?i:s+i}return e.substring(r-1)}}const da=Q1.defaultGraph(),{rdf:RU,xsd:no}=hr,Gb=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Jb=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,TU={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class fa extends fs{equals(e){return e===this}}class OU{constructor(e,n){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(n=e,e=null),n=n||{},this._lists=n.lists,e)this._outputStream=e,this._endStream=n.end===void 0?!0:!!n.end;else{let r="";this._outputStream={write(s,i,o){r+=s,o&&o()},end:s=>{s&&s(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(n.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=da,this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes),n.baseIRI&&(this._baseIri=new Mm(n.baseIRI)))}get _inDefaultGraph(){return da.equals(this._graph)}_write(e,n){this._outputStream.write(e,"utf8",n)}_writeQuad(e,n,r,s,i){try{s.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(da.equals(s)?"":`${this._encodeIriOrBlank(s)} {
`)),this._graph=s,this._subject=null),e.equals(this._subject)?n.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i)}catch(o){i&&i(o)}}_writeQuadLine(e,n,r,s,i){delete this._prefixMatch,this._write(this.quadToString(e,n,r,s),i)}quadToString(e,n,r,s){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(n)} ${this._encodeObject(r)}${s&&s.value?` ${this._encodeIriOrBlank(s)} .
`:` .
`}`}quadsToString(e){let n="";for(const r of e)n+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return n}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let n=e.value;this._baseIri&&(n=this._baseIri.toRelative(n)),Gb.test(n)&&(n=n.replace(Jb,Xb));const r=this._prefixRegex.exec(n);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:n:`<${n}>`}_encodeLiteral(e){let n=e.value;if(Gb.test(n)&&(n=n.replace(Jb,Xb)),e.language)return`"${n}"@${e.language}`;if(this._lineMode){if(e.datatype.value===no.string)return`"${n}"`}else switch(e.datatype.value){case no.string:return`"${n}"`;case no.boolean:if(n==="true"||n==="false")return n;break;case no.integer:if(/^[+-]?\d+$/.test(n))return n;break;case no.decimal:if(/^[+-]?\d*\.\d+$/.test(n))return n;break;case no.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(n))return n;break}return`"${n}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===RU.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:n,object:r,graph:s}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(n)} ${this._encodeObject(r)}${AU(s)?"":` ${this._encodeIriOrBlank(s)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,n,r,s,i){r===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,n):typeof s=="function"?this._writeQuad(e,n,r,da,s):this._writeQuad(e,n,r,s||da,i)}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}addPrefix(e,n,r){const s={};s[e]=n,this.addPrefixes(s,r)}addPrefixes(e,n){if(!this._prefixIRIs)return n&&n();let r=!1;for(let s in e){let i=e[s];typeof i!="string"&&(i=i.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[i]=s+=":",this._write(`@prefix ${s} <${i}>.
`)}if(r){let s="",i="";for(const o in this._prefixIRIs)s+=s?`|${o}`:o,i+=(i?"|":"")+this._prefixIRIs[o];s=cu(s),this._prefixRegex=new RegExp(`^(?:${i})[^/]*$|^(${s})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",n)}blank(e,n){let r=e,s,i;switch(e===void 0?r=[]:e.termType?r=[{predicate:e,object:n}]:"length"in e||(r=[e]),i=r.length){case 0:return new fa("[]");case 1:if(s=r[0],!(s.object instanceof fa))return new fa(`[ ${this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)} ]`);default:let o="[";for(let a=0;a<i;a++)s=r[a],s.predicate.equals(e)?o+=`, ${this._encodeObject(s.object)}`:(o+=`${(a?`;
  `:`
  `)+this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)}`,e=s.predicate);return new fa(`${o}
]`)}}list(e){const n=e&&e.length||0,r=new Array(n);for(let s=0;s<n;s++)r[s]=this._encodeObject(e[s]);return new fa(`(${r.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let n=e&&((r,s)=>{n=null,e(r,s)});if(this._endStream)try{return this._outputStream.end(n)}catch{}n&&n()}}function Xb(t){let e=TU[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var DU=Object.defineProperty,kU=(t,e,n)=>e in t?DU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xr=(t,e,n)=>kU(t,typeof e!="symbol"?e+"":e,n);function PU(t,e,n){return t?`Malformed ${e} document found at ${t} - ${n}`:`Malformed ${e} document - ${n}`}var lE=(t=>(t.Turtle="Turtle",t))(lE||{});let uE=class extends cr{constructor(e,n,r){super(PU(e,n,r)),xr(this,"documentUrl"),xr(this,"documentFormat"),xr(this,"malformationDetails"),this.documentUrl=e,this.documentFormat=n,this.malformationDetails=r}},cE=class extends cr{constructor(e,n){super(`Request failed trying to fetch ${e}`,n),xr(this,"url"),this.url=e}},Yh=class extends cr{constructor(e){super(`Document with '${e}' url not found`),xr(this,"url"),this.url=e}};function $U(t,e){return`Unauthorized${e===403?" (Forbidden)":""}: ${t}`}let Qh=class extends cr{constructor(e,n){super($U(e,n)),xr(this,"url"),xr(this,"responseStatus"),this.url=e,this.responseStatus=n}get forbidden(){return typeof this.responseStatus<"u"?this.responseStatus===403:void 0}};const LU={acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",vcard:"http://www.w3.org/2006/vcard/ns#"};function li(t,e={}){var n;if(t.startsWith("http"))return t;const[r,s]=t.split(":");if(r&&s){const i=LU[r]??((n=e.extraContext)==null?void 0:n[r])??null;if(!i)throw new Error(`Can't expand IRI with unknown prefix: '${t}'`);return i+s}if(!e.defaultPrefix)throw new Error(`Can't expand IRI without a default prefix: '${t}'`);return e.defaultPrefix+r}class MU{constructor(e,n){xr(this,"url"),xr(this,"quads"),this.url=e,this.quads=n}value(e){var n;return(n=this.quads.find(r=>r.predicate.value===li(e)))==null?void 0:n.object.value}values(e){return this.quads.filter(n=>n.predicate.value===li(e)).map(n=>n.object.value)}}let dE=class{constructor(e=[]){xr(this,"quads"),this.quads=e}isEmpty(){return this.statements.length===0}getQuads(){return this.quads.slice(0)}addQuads(e){this.quads.push(...e)}statements(e,n,r){return this.quads.filter(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))}statement(e,n,r){return this.quads.find(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))??null}contains(e,n,r){return this.statement(e,n,r)!==null}getThing(e){const n=this.statements(e);return new MU(e,n)}expandIRI(e){return li(e)}termMatches(e,n){return typeof n=="string"?this.expandIRI(n)===e.value:e.termType===e.termType&&e.value===n.value}};var ni=(t=>(t.Read="read",t.Write="write",t.Append="append",t.Control="control",t))(ni||{});let qu=class extends dE{constructor(e,n,r){super(n),xr(this,"url"),xr(this,"headers"),this.url=e,this.headers=r}isACPResource(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/solid\/acp#AccessControlResource>;[^,]+rel="type"/))}isPersonalProfile(){return!!this.statement(this.url,li("rdf:type"),li("foaf:PersonalProfileDocument"))}isStorage(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/pim\/space#Storage>;[^,]+rel="type"/))}isUserWritable(){return this.getUserPermissions().includes("write")}getUserPermissions(){return this.getPermissionsFromWAC("user")}getPublicPermissions(){return this.getPermissionsFromWAC("public")}getLastModified(){var e;return cd(this.headers.get("last-modified"))??cd((e=this.statement(this.url,"purl:modified"))==null?void 0:e.object.value)??this.getLatestDocumentDate()??null}expandIRI(e){return li(e,{defaultPrefix:this.url})}getLatestDocumentDate(){const e=[...this.statements(void 0,"purl:modified"),...this.statements(void 0,"purl:created")].map(n=>cd(n.object.value)).filter(n=>n!==null);return e.length>0?e.reduce((n,r)=>n>r?n:r):null}getPermissionsFromWAC(e){var n;const r=this.headers.get("WAC-Allow")??"",s=((n=g0(r,new RegExp(`${e}="([^"]+)"`)))==null?void 0:n[1])??"";return rn([s.includes("read")&&"read",s.includes("write")&&"write",s.includes("append")&&"append",s.includes("control")&&"control"])}};async function NU(t){const e=await Lm.compact(t,{});return"@graph"in e?e:"@id"in e?{"@graph":[e]}:{"@graph":[]}}function FU(t){return"@graph"in t}const Bu="anonymous://",Yb=Bu.length;async function jU(t,e){const n={headers:{Accept:"text/turtle"}};e!=null&&e.cache&&(n.cache=e.cache);try{const r=await((e==null?void 0:e.fetch)??window.fetch)(t,n);if(r.status===404)throw new Yh(t);if([401,403].includes(r.status))throw new Qh(t,r.status);return{body:await r.text(),headers:r.headers}}catch(r){throw r instanceof Qh||r instanceof Yh?r:new cE(t,{cause:r})}}function fE(t){var e;if((e=t["@id"])!=null&&e.startsWith("#")){t["@id"]=Bu+t["@id"];for(const[n,r]of Object.entries(t))typeof r!="object"||r===null||!("@id"in r)||fE(t[n])}}function UU(t){for(const e of t)e.subject.value.startsWith(Bu)&&(e.subject.value=e.subject.value.slice(Yb)),e.object.value.startsWith(Bu)&&(e.object.value=e.object.value.slice(Yb))}async function qU(t,e,n){n=n??window.fetch.bind(window);const r=await Fm(e);return await n(t,{method:"PUT",headers:{"Content-Type":"text/turtle"},body:e}),new qu(t,r,new Headers({}))}async function Lo(t,e){const{body:n,headers:r}=await jU(t,e),s=await Fm(n,{baseIRI:t});return new qu(t,s,r)}async function BU(t,e){try{return await Lo(t,e)}catch(n){if(!(n instanceof Yh))throw n;return null}}async function Nm(t,e){if(FU(t))return(await Promise.all(t["@graph"].map(r=>Nm(r,e)))).flat();fE(t);const n=await Lm.toRDF(t,{base:e});return UU(n),n}function hE(t,e={}){const n=Fn({baseIRI:e.baseIRI}),r=new oE(n),s={quads:[],containsRelativeIRIs:!1};return new Promise((i,o)=>{const a=r._resolveRelativeIRI;r._resolveRelativeIRI=(...l)=>(s.containsRelativeIRIs=!0,r._resolveRelativeIRI=a,r._resolveRelativeIRI(...l)),r.parse(t,(l,u)=>{if(l){o(new uE(e.baseIRI??null,lE.Turtle,l.message));return}if(!u){i(s);return}s.quads.push(u)})})}async function jc(t){return{"@graph":await Lm.fromRDF(t)}}function VU(t){return new OU().quadsToString(t)}async function zU(t,e){try{return!(await Lo(t,e)).isEmpty()}catch{return!1}}async function Fm(t,e={}){const{quads:n}=await hE(t,e);return n}async function HU(t,e,n){n=n??window.fetch.bind(window),await n(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:e})}var KU=Object.defineProperty,WU=(t,e,n)=>e in t?KU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zh=(t,e,n)=>WU(t,typeof e!="symbol"?e+"":e,n);function GU(t,e){return e=e??t,typeof t=="string"?`${t} (returned ${e.status} status code)`:`Request to ${e.url} returned ${e.status} status code`}let JU=class extends cr{constructor(e,n){super(GU(e,n)),Zh(this,"response"),this.response=n??e}},XU=class extends cr{constructor(e,n,r){super(`The resource at ${e} is using an unsupported authorization protocol (${n})`,r),Zh(this,"url"),Zh(this,"protocol"),this.url=e,this.protocol=n}};async function YU(t,e){var n;const r=new dE(t.getQuads()),s={[t.url]:t},i=a=>{a.statements(void 0,"foaf:isPrimaryTopicOf").map(l=>l.object.value).forEach(l=>s[l]=s[l]??null),a.statements(void 0,"foaf:primaryTopic").map(l=>l.subject.value).forEach(l=>s[l]=s[l]??null)},o=async()=>{for(const[a,l]of Object.entries(s))if(l===null)try{const u=await Lo(a,e);s[a]=u,r.addQuads(u.getQuads()),i(u)}catch(u){if(u instanceof Qh){s[a]=!1;continue}throw u}};i(t);do await o();while(Object.values(s).some(a=>a===null));return{store:r,cloaked:Object.values(s).some(a=>a===!1),writableProfileUrl:t.isUserWritable()?t.url:((n=Object.values(s).find(a=>!!a&&a.isUserWritable()))==null?void 0:n.url)??null}}async function Qb(t,e={}){var n,r,s,i,o,a;const l={fetch:e.fetch,cache:"no-store"},u=wr(t),c=await Lo(u,l);if(!c.isPersonalProfile()&&!c.contains(t,"solid:oidcIssuer"))throw new Error(`${t} is not a valid webId.`);const{store:d,writableProfileUrl:f,cloaked:h}=await YU(c,e),m=d.statements(t,"pim:storage").map(E=>E.object.value),g=d.statement(t,"solid:publicTypeIndex"),x=d.statement(t,"solid:privateTypeIndex");let b=br(u);for(;b&&m.length===0;){const E=await m0(Lo(b,l));if(E!=null&&E.isStorage()){m.push(b);break}b=br(b)}if(m.length===0)throw new Error(`Could not find any storage for ${t}.`);return await((n=e.onLoaded)==null?void 0:n.call(e,d)),{webId:t,cloaked:h,writableProfileUrl:f,storageUrls:Qn(m),...Fn({name:((r=d.statement(t,"vcard:fn"))==null?void 0:r.object.value)??((s=d.statement(t,"foaf:name"))==null?void 0:s.object.value),avatarUrl:((i=d.statement(t,"vcard:hasPhoto"))==null?void 0:i.object.value)??((o=d.statement(t,"foaf:img"))==null?void 0:o.object.value),oidcIssuerUrl:(a=d.statement(t,"solid:oidcIssuer"))==null?void 0:a.object.value,publicTypeIndexUrl:g==null?void 0:g.object.value,privateTypeIndexUrl:x==null?void 0:x.object.value})}}async function QU(t,e={}){if(e.required)return Qb(t,e);const n=m0(r=>Qb(r,e));return await n(t)??await n(t.replace(/\/$/,"").concat("/profile/card#me"))??await n(ls(t).concat("/profile/card#me"))}function ZU(t){return!t.path||!t.path.startsWith("/")?null:t.path.match(/^\/[^/]*$/)?"/":`/${S0(t.path.split("/")).filter().slice(0,-1).join("/")}/`.replace("//","/")}function e3(t){const e=ZU(t);return t.protocol&&t.domain?`${t.protocol}://${t.domain}${e??"/"}`:e}function ep(t){if(!(!("@type"in t)||"@value"in t)){t["@id"]=t["@id"]??jn();for(const e of Object.values(t))ht(e)&&ep(e),n0(e)&&e.forEach(n=>ht(n)&&ep(n))}}function t3(t){return Ne(kr(t),e=>ep(e))}function n3(t){const e=ol(t);return e?Fn({containerUrl:e3(e),documentName:e.path?e.path.split("/").pop():null,resourceHash:e.fragment}):{}}async function r3(t,e,n){n=n??window.fetch.bind(n);const r=t.storageUrls[0],s=`${r}settings/${e}TypeIndex`;return await zU(s,{fetch:n})?`${r}settings/${e}TypeIndex-${jn()}`:s}async function pE(t,e,n){if(t.writableProfileUrl===null)throw new Error("Can't create type index without a writable profile document");n=n??window.fetch.bind(n);const r=await r3(t,e,n),s=e==="public"?"<> a <http://www.w3.org/ns/solid/terms#TypeIndex> .":`
            <> a
                <http://www.w3.org/ns/solid/terms#TypeIndex>,
                <http://www.w3.org/ns/solid/terms#UnlistedDocument> .
        `,i=`
        INSERT DATA {
            <${t.webId}> <http://www.w3.org/ns/solid/terms#${e}TypeIndex> <${r}> .
        }
    `;return await qU(r,s,n),await HU(t.writableProfileUrl,i,n),r}async function mE(t,e,n,r){const s=await Lo(t,{fetch:r});return(Array.isArray(e)?e:[e]).map(i=>s.statements(void 0,"rdf:type","solid:TypeRegistration").filter(o=>s.contains(o.subject.value,"solid:forClass",i)).map(o=>s.statements(o.subject.value,n)).flat().map(o=>o.object.value).filter(o=>!!o)).flat()}async function s3(t,e){return pE(t,"public",e)}async function i3(t,e){return pE(t,"private",e)}async function o3(t,e,n){return mE(t,e,"solid:instanceContainer",n)}async function a3(t,e,n){return mE(t,e,"solid:instance",n)}async function gE(t,e){var n;e=e??window.fetch.bind(window);const r=((n=((await e(t,{method:"HEAD"})).headers.get("Link")??"").match(/<([^>]+)>;\s*rel="acl"/))==null?void 0:n[1])??null;if(!r)throw new Error(`Could not find ACL Resource for '${t}'`);return To(Tt(t),r)}async function yE(t,e,n){n=n??await gE(t,e);const r=await BU(n??"",{fetch:e});if(!r)return yE(Tt(t),e);if(r.isACPResource())throw new XU(t,"ACP");return r}async function l3(t,e){const n=await gE(t,e),r=await yE(t,e,n);return Fn({url:n,effectiveUrl:r.url,document:r})}var u3=Object.defineProperty,c3=(t,e,n)=>e in t?u3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,De=(t,e,n)=>c3(t,typeof e!="symbol"?e+"":e,n);const Sn={ChangeUrl:"change",RemoveProperty:"remove",ShieldProperty:"shield",UpdateProperty:"update"};class d3{constructor(e,n){De(this,"type",Sn.ChangeUrl),this.resourceUrl=e,this.newResourceUrl=n}}const f3={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"};function bt(t,e={},n=""){if(/^https?:\/\//.test(t))return t;const r=t.indexOf(":");if(r===-1)return n+t;e={...f3,...e};const s=t.slice(0,r);return s in e?e[s]+t.slice(s.length+1):t}const h3=bt("crdt:property"),Zb=bt("crdt:resource"),ji=bt("ldp:Container"),jm=bt("ldp:contains"),p3=bt("purl:modified"),vE=bt("rdf:type"),ew=bt("xsd:dateTime");function bE(t){const e=(...i)=>i.map(o=>o.toString().padStart(2,"0")),n=e(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()).join("-"),r=e(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()).join(":"),s=t.getUTCMilliseconds().toString().padStart(3,"0");return`${n}T${r}.${s}Z`}var Qs=(t=>(t[t.Type=0]="Type",t[t.Reference=1]="Reference",t[t.Literal=2]="Literal",t))(Qs||{});let wE=class{constructor(e){De(this,"name"),this.name=e}};const ro={dateTime:bt("xsd:dateTime"),integer:bt("xsd:integer"),boolean:bt("xsd:boolean"),decimal:bt("xsd:decimal"),float:bt("xsd:float"),double:bt("xsd:double")};let Pn=class du{constructor(e,n,r){De(this,"resourceUrl"),De(this,"name"),De(this,"value"),this.resourceUrl=e,this.name=n,this.value=r}static fromStatement(e){const n=e.subject.termType==="NamedNode"?e.subject.value:null;if(e.predicate.value===vE)return this.type(n,e.object.value);if(e.object.termType==="NamedNode")return this.reference(n,e.predicate.value,decodeURI(e.object.value));if(e.object.termType==="BlankNode")return this.reference(n,e.predicate.value,null);if(e.object.termType==="Variable")return this.reference(n,e.predicate.value,new wE(e.object.value));const r=e.object;return this.literal(n,e.predicate.value,this.castLiteralValue(e.object.value,r.datatype.value),r.value)}static literal(e,n,r,s){return new m3(e,n,r,s)}static reference(e,n,r){return new g3(e,n,r)}static type(e,n){return new y3(e,n)}static toTurtle(e,n=null){return e.map(r=>r.toTurtle(n)+" .").join(`
`)}static castLiteralValue(e,n){switch(n){case ro.dateTime:return new Date(e);case ro.integer:case ro.decimal:return parseInt(e);case ro.boolean:return e==="true"||e==="1";case ro.float:case ro.double:return parseFloat(e)}return e}toTurtle(e=null){const n=this.getTurtleSubject(e),r=this.getTurtlePredicate(),s=this.getTurtleObject(e);return`${n} ${r} ${s}`}clone(e){switch(e=e??this.resourceUrl,this.type){case 2:{const n=this;return du.literal(e,n.name,n.value,n.originalValue)}case 0:return du.type(e,this.value);case 1:return du.reference(e,this.name,this.value)}}valueEquals(e){const n=this.value instanceof Date?this.value.getTime():this.value,r=e.value instanceof Date?e.value.getTime():e.value;return n===r}getTurtleReference(e,n){const r=(e==null?void 0:e.indexOf("#"))??-1;return!e||e===n?"<>":n===null||!e.startsWith(n)||r===-1?`<${encodeURI(e)}>`:`<#${e.slice(r+1)}>`}getTurtleSubject(e){return this.getTurtleReference(this.resourceUrl,e)}getTurtlePredicate(){return`<${encodeURI(this.name)}>`}};class m3 extends Pn{constructor(e,n,r,s){super(e,n,r),De(this,"type",2),this.originalValue=s}getTurtleObject(){return this.originalValue&&this.value instanceof Date?`"${this.originalValue}"^^<${ew}>`:this.value instanceof Date?`"${bE(this.value)}"^^<${ew}>`:JSON.stringify(this.value)}}class g3 extends Pn{constructor(e,n,r){super(e,n,r),De(this,"type",1)}getTurtleObject(e){return this.value instanceof wE?this.value.name:this.getTurtleReference(this.value,e)}}class y3 extends Pn{constructor(e,n){super(e,vE,n),De(this,"type",0)}getTurtlePredicate(){return"a"}getTurtleObject(){return`<${encodeURI(this.value)}>`}}let v3=class{constructor(e){De(this,"url"),De(this,"types"),De(this,"properties"),De(this,"propertiesIndex"),De(this,"statements"),this.url=e,this.statements=[],this.types=[],this.properties=[],this.propertiesIndex={}}get name(){return this.getPropertyValue(bt("foaf:name"))}get label(){return this.getPropertyValue(bt("rdfs:label"))}isType(e){return this.types.indexOf(bt(e))!==-1}getPropertyValue(e,n=null){const[r]=this.propertiesIndex[bt(e)]||[];return r?r.value:n}getPropertyValues(e){return(this.propertiesIndex[bt(e)]||[]).map(n=>n.value)}addStatement(e){if(e.subject.value!==this.url)return;const n=Pn.fromStatement(e);n.type===Qs.Type&&this.types.push(n.value),this.statements.push(e),this.properties.push(n),this.propertiesIndex[n.name]=(this.propertiesIndex[n.name]||[]).concat([n])}},Um=class extends Be{constructor(e,n){super(n?`Couldn't find resource with id '${e}' in '${n}' document.`:`Couldn't find resource with id '${e}' in document.`)}};const _E=class fu{constructor(e,n=[],r={}){De(this,"url"),De(this,"metadata"),De(this,"statements"),De(this,"resourcesIndex"),De(this,"properties"),De(this,"resources"),this.url=e,this.statements=n,this.metadata=r,this.resourcesIndex=this.statements.reduce((s,i)=>{const o=i.subject.value;return(s[o]=s[o]??new v3(o)).addStatement(i),s},{}),this.resources=Object.values(this.resourcesIndex),this.properties=this.resources.reduce((s,i)=>s.concat(i.properties),[])}static async fromTurtle(e,n={}){const r=await hE(e,{baseIRI:n.baseIRI});return new fu(n.baseIRI||"",r.quads,{containsRelativeIRIs:r.containsRelativeIRIs,describedBy:b3(n),headers:n.headers})}static async resourceFromJsonLDGraph(e,n,r){const s=()=>r??e["@graph"].find(i=>i["@id"]===n)??Ge(Um,n);return(this.documentsCache.get(e)??await this.fromJsonLD(s())).requireResource(n)}static async fromJsonLD(e,n){return this.documentsCache.get(e)??await this.getFromJsonLD(e,n)}static reduceJsonLDGraph(e,n){return Ne({"@graph":e["@graph"].filter(r=>r["@id"]!==n)},r=>{const s=this.documentsCache.get(e);s&&this.cacheJsonLD(r,s.clone({removeResourceUrls:[n]}))})}static cacheJsonLD(e,n){this.documentsCache.set(e,n)}static async getFromJsonLD(e,n){const r=await Nm(e,n);return Ne(new fu(e["@id"]?wr(e["@id"]):null,r),s=>{this.documentsCache.set(e,s)})}isEmpty(){return this.statements.length===0}hasProperty(e,n){const r=this.resourcesIndex[e];return!!r&&n in r.propertiesIndex}async toJsonLD(){return jc(this.statements)}resource(e){return this.resourcesIndex[e]??null}requireResource(e){const n=this.resource(e);if(!n)throw new Be(`Resource '${e}' not found`);return n}clone(e={}){return Ne(new fu(e.changeUrl??this.url,[],this.metadata),n=>{const r=e.removeResourceUrls;if(!r){n.statements=this.statements.slice(0),n.properties=this.properties.slice(0),n.resources=this.resources.slice(0),n.resourcesIndex={...this.resourcesIndex};return}n.statements=this.statements.filter(s=>!r.includes(s.subject.value)),n.properties=this.properties.filter(s=>!s.resourceUrl||!r.includes(s.resourceUrl)),n.resources=this.resources.filter(s=>!r.includes(s.url)),n.resourcesIndex=r0(n.resources,"url")})}};De(_E,"documentsCache",new WeakMap);let In=_E;function b3(t={}){var e,n;if(!((e=t.headers)!=null&&e.has("Link")))return;const r=(n=t.headers.get("Link"))==null?void 0:n.match(/<([^>]+)>;\s*rel="describedBy"/i);if(r)return To(t.baseIRI||"",r[1])}let xo=class{constructor(e,n,r){De(this,"type",Sn.RemoveProperty),this.resourceUrl=e,this.property=n,this.value=r}};class w3{constructor(e,n){De(this,"type",Sn.ShieldProperty),this.resourceUrl=e,this.property=n}}let Eo=class{constructor(e){if(De(this,"type",Sn.UpdateProperty),De(this,"propertyOrProperties"),this.propertyOrProperties=e,!Array.isArray(e))return;const[n,...r]=e;if(!n)throw new Error("Cannot create an UpdatePropertyOperation with an empty array");const{resourceUrl:s,name:i,type:o}=n;if(r.some(a=>a.resourceUrl!==s||a.name!==i||a.type!==o))throw new Error("All properties in an UpdatePropertyOperation must have the same resourceUrl, name and type")}get propertyResourceUrl(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].resourceUrl:this.propertyOrProperties.resourceUrl}get propertyName(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].name:this.propertyOrProperties.name}get propertyType(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].type:this.propertyOrProperties.type}};function _3(t){return t.reduce((e,n)=>(e[n.type].push(n),e),{[Sn.ChangeUrl]:[],[Sn.RemoveProperty]:[],[Sn.ShieldProperty]:[],[Sn.UpdateProperty]:[]})}function tw(t){const e=t.filter(n=>n.type===Sn.ShieldProperty).reduce((n,r)=>{var s,i;const o=r;return n[s=o.resourceUrl]??(n[s]=[]),(i=n[o.resourceUrl])==null||i.push(o.property),n},{});return t.reduce((n,r)=>{var s;switch(r.type){case Sn.UpdateProperty:n[0].push(r.propertyOrProperties);break;case Sn.RemoveProperty:if(!e[r.resourceUrl]){n[1].push(rn([r.resourceUrl,r.property,r.value]));break}if(!r.property){n[1].push(rn([r.resourceUrl,e[r.resourceUrl]]));break}if((s=e[r.resourceUrl])!=null&&s.includes(r.property))break;n[1].push(rn([r.resourceUrl,r.property,r.value]));break}return n},[[],[]])}const x3=[jm,bt("posix:mtime"),bt("posix:size"),bt("purl:modified")],E3=[ji,bt("ldp:BasicContainer")],nw=new Map;class A3{constructor(e){De(this,"fetch"),De(this,"config");const n=e??(globalThis==null?void 0:globalThis.fetch);this.fetch=async(r,s)=>{try{return await n(r,s)}catch(i){const o=typeof r=="object"?r.url:r;throw new cE(o,{cause:i})}},this.config={concurrentFetchBatchSize:5}}getFetch(){return this.fetch}setConfig(e){Object.assign(this.config,e)}async createDocument(e,n=null,r=[],s={}){return n&&r.some(i=>i.resourceUrl===n&&i.type===Qs.Type&&i.value===ji)?this.createContainerDocument(e,n,r):this.createNonContainerDocument(e,n,r,s)}async getDocument(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status!==200)return null;const r=await n.text();return await In.fromTurtle(r,{headers:n.headers,baseIRI:e})}async getDocuments(e){const n=await(await this.fetch(e,{headers:{Accept:"text/turtle"}})).text(),r=await In.fromTurtle(n,{baseIRI:e});return this.getDocumentsFromContainer(e,r)}async updateDocument(e,n,r={}){var s;if(n.length===0)return;e=nw.get(e)??e;const i=await this.getDocument(e);if(i===null)throw new Lr(e);return this.processChangeUrlOperations(i,n),this.processUpdatePropertyOperations(i,n),n.length===0?void 0:(s=i.resource(e))!=null&&s.isType(ji)?await this.updateContainerDocument(i,n):await this.updateNonContainerDocument(i,n,r)}async overwriteDocument(e,n){const r=await this.getDocument(e);if(r===null)throw new Lr(e);const s=await this.fetch(e,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:`
                DELETE DATA { ${Pn.toTurtle(r.properties,e)} } ;
                INSERT DATA { ${Pn.toTurtle(n,e)} }
            `});return this.assertSuccessfulResponse(s,`Error overwriting document at ${r.url}`),{headers:s.headers}}async deleteDocument(e,n){var r;const s=n??await this.getDocument(e);if(s===null)return;if((r=s.resource(e))!=null&&r.isType(ji)){const o=await this.getDocumentsFromContainer(e,s);await Promise.all(o.map(a=>this.deleteDocument(a.url,a)))}const i=await this.fetch(e,{method:"DELETE"});return this.assertSuccessfulResponse(i,`Error deleting document at ${e}`),{headers:i.headers}}async documentExists(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status===200)return(await n.text()).length>0;if(n.status===404)return!1;throw new Be(`Couldn't determine if document at ${e} exists, got ${n.status} response`)}async createContainerDocument(e,n,r){let s=await this.createContainerFolder(e,n);if(r.length!==0){const i=this.withoutReservedContainerProperties(n,r).map(o=>new Eo(o));s=await this.updateDocument(n,i)??s}return{url:n,metadata:s}}async createContainerFolder(e,n){if(!n.startsWith(e))throw new Be("Explicit document url should start with the parent url");if(!n.endsWith("/"))throw new Be(`Container urls must end with a trailing slash, given ${n}`);const r=await this.fetch(n,{method:"PUT",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',"If-None-Match":"*"}});return this.isInternalErrorResponse(r)?this.createContainerDocumentUsingPOST(n):(this.assertSuccessfulResponse(r,`Error creating container folder at ${n}`),{headers:r.headers})}async createContainerDocumentUsingPOST(e,n=!0){const r=Tt(e),s=await this.fetch(r,{method:"POST",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',Slug:ZC(e),"If-None-Match":"*"}});return s.status===404&&n?(await this.createContainerDocumentUsingPOST(r),this.createContainerDocumentUsingPOST(e,!1)):(this.assertSuccessfulResponse(s,`Error creating container at ${e}`),{headers:s.headers})}async createNonContainerDocument(e,n,r,s={}){var i;if(!n||((i=s.method)==null?void 0:i.toLowerCase())==="post"){const a=s.format??"text/turtle",l=await this.renderProperties(n,r,a),u={"Content-Type":a};n&&(u.Slug=b0(n));const c=await this.fetch(e,{method:s.method??"POST",headers:u,body:l});return this.assertSuccessfulResponse(c,`Error creating document under ${e}`),{url:To(e,c.headers.get("Location")||""),metadata:{headers:c.headers}}}if(!n.startsWith(e))throw new Be("A minted document url should start with the parent url");const o=await this.fetch(n,{method:"PATCH",headers:{"Content-Type":"application/sparql-update","If-None-Match":"*"},body:`INSERT DATA { ${Pn.toTurtle(r,n)} }`});return this.assertSuccessfulResponse(o,`Error creating document at ${n}`),{url:n,metadata:{headers:o.headers}}}async getDocumentsFromContainer(e,n){var r;const s=[],i=((r=n.resource(e))==null?void 0:r.getPropertyValues("ldp:contains"))??[];for(;i.length>0;){const o=i.splice(0,this.config.concurrentFetchBatchSize||i.length),a=await Promise.all(o.map(l=>this.getDocument(l)));s.push(...a)}return s.filter(o=>!!o)}async updateContainerDocument(e,n){const r=e.metadata.describedBy||`${e.url}.meta`;return e.url&&nw.set(e.url,r),await this.updateNonContainerDocument(e.clone({changeUrl:r}),n)}async updateNonContainerDocument(e,n,r={}){const s=r.format??"application/sparql-update";switch(s){case"application/sparql-update":return this.updateNonContainerDocumentWithSparql(e,n);case"application/ld+json":return this.updateNonContainerDocumentWithJsonLD(e,n)}throw new Error(`Unsupported update format: '${s}'`)}async updateNonContainerDocumentWithSparql(e,n){const[r,s]=tw(n),i=r.flat().map(l=>l.toTurtle(e.url)+" ."),o=e.properties.filter(l=>s.some(([u,c,d])=>u===l.resourceUrl&&(!c||typeof c=="string"&&c===l.name||Array.isArray(c)&&!c.includes(l.name))&&(!d||d===l.value))).map(l=>l.toTurtle(e.url)+" .");if(i.length===0&&o.length===0)return;const a=await this.fetch(e.url,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:rn([o.length>0&&`DELETE DATA { ${o.join(`
`)} }`,i.length>0&&`INSERT DATA { ${i.join(`
`)} }`]).join(" ; ")});return this.assertSuccessfulResponse(a,`Error updating document at ${e.url}`),{headers:a.headers}}async updateNonContainerDocumentWithJsonLD(e,n){if(!e.url)throw new Error("Missing document url for JsonLD update");const[r,s]=tw(n),i=e.properties.filter(a=>!s.some(([l,u,c])=>l===a.resourceUrl&&(!u||typeof u=="string"&&u===a.name||Array.isArray(u)&&!u.includes(a.name))&&(!c||c===a.value))).concat(r.flat()),o=await this.fetch(e.url,{headers:{"Content-Type":"application/ld+json"},method:"PUT",body:await this.renderProperties(e.url,i,"application/ld+json")});return this.assertSuccessfulResponse(o,`Error updating document at ${e.url}`),{headers:o.headers}}withoutReservedContainerProperties(e,n){const r=i=>x3.includes(i.name),s=i=>i.type===Qs.Type&&E3.includes(i.value);return n.filter(i=>i.resourceUrl!==e||!r(i)&&!s(i))}processChangeUrlOperations(e,n){const r=_3(n);for(const s of r[Sn.ChangeUrl]){const i=e.resource(s.resourceUrl);if(!i)continue;const o=r[Sn.UpdateProperty].filter(l=>l.propertyResourceUrl===s.resourceUrl),a=r[Sn.RemoveProperty].filter(l=>l.resourceUrl===s.resourceUrl);o.forEach(l=>{l.propertyOrProperties=Array.isArray(l.propertyOrProperties)?l.propertyOrProperties.map(u=>u.clone(s.newResourceUrl)):l.propertyOrProperties.clone(s.newResourceUrl)}),a.forEach(l=>l.resourceUrl=s.newResourceUrl),n.push(new xo(s.resourceUrl)),n.push(...i.properties.filter(l=>!o.some(u=>u.propertyName===l.name)&&!a.some(u=>!u.property||u.property===l.name)).map(l=>new Eo(l.clone(s.newResourceUrl)))),zn(n,s)}}processUpdatePropertyOperations(e,n){var r;const s=[],i=[],o=[];for(let l=0;l<n.length;l++){const u=n[l];if(u.type!==Sn.UpdateProperty||u.propertyResourceUrl===null)continue;if(!Array.isArray(u.propertyOrProperties)){const g=u.propertyOrProperties,x=g.resourceUrl,[b,...E]=((r=e.resource(x??""))==null?void 0:r.propertiesIndex[g.name])??[];x&&b&&E.length===0&&g.type===b.type&&g.valueEquals(b)&&(i.push(u),n.push(new w3(x,g.name)));continue}const c=e.statements.filter(g=>g.subject.value===u.propertyResourceUrl&&g.predicate.value===u.propertyName).map(g=>g.object),d=u.propertyOrProperties[0].type===Qs.Literal,f=g=>"type"in g?g.type===Qs.Reference:g.termType==="NamedNode",{added:h,removed:m}=qo(c,u.propertyOrProperties,(g,x)=>g.value===x.value&&f(g)===f(x));h.forEach(g=>n.push(new Eo(d?Pn.literal(u.propertyResourceUrl,u.propertyName,g.value):Pn.reference(u.propertyResourceUrl,u.propertyName,g.value)))),m.forEach(g=>n.push(new xo(u.propertyResourceUrl,u.propertyName,g.value))),s.push(u),o.push(`${u.propertyResourceUrl}-${u.propertyName}`)}s.forEach(l=>zn(n,l)),i.forEach(l=>zn(n,l));const a=n.filter(l=>l.type===Sn.UpdateProperty&&l.propertyType!==Qs.Type&&e.hasProperty(l.propertyResourceUrl,l.propertyName));for(const l of a)o.includes(`${l.propertyResourceUrl}-${l.propertyName}`)||n.push(new xo(l.propertyResourceUrl,l.propertyName))}async renderProperties(e,n,r){switch(r){case"text/turtle":return Pn.toTurtle(n,e);case"application/ld+json":{const s=await Fm(Pn.toTurtle(n,e)),i=await jc(s);if(i["@graph"].length!==1)throw new Error("Cannot render JSONLD with multiple or no subjects");const o=i["@graph"][0];return Ca(o["@id"])&&delete o["@id"],JSON.stringify(o)}}throw new Error(`Unsupported render format: '${r}'`)}assertSuccessfulResponse(e,n){if(Math.floor(e.status/100)!==2)throw new JU(n,e)}isInternalErrorResponse(e){return Math.floor(e.status/100)===5}}const S3={activityPods:!1};function I3(t){return S3[t]}function nn(){return I3("activityPods")}function C3(t){const e=new Date(t);return isNaN(e.getTime())?null:e}let qm=class{constructor(e,n={}){De(this,"__isSolidEngine",!0),De(this,"config"),De(this,"helper"),De(this,"client"),De(this,"cache",new Map),De(this,"_listeners",new o0),this.helper=new Lc,this.config={concurrentFetchBatchSize:10,cachesDocuments:!1,...n},this.client=new A3(e),this.client.setConfig({concurrentFetchBatchSize:this.config.concurrentFetchBatchSize})}get listeners(){return this._listeners}setConfig(e){Object.assign(this.config,e)}getFetch(){return this.client.getFetch()}async create(e,n,r){if(this.validateJsonLDGraph(n),r&&await this.client.documentExists(r))throw new Rm(r);const s=await this.getJsonLDGraphProperties(n),{url:i,metadata:o}=await this.client.createDocument(e,r,s,nn()?{method:"post",format:"application/ld+json"}:{});return await this._listeners.emit("onDocumentCreated",i,o),i}async readOne(e,n){var r,s,i,o,a;if((r=this.config.persistentCache)!=null&&r.has(e,n)){const c=await this.config.persistentCache.get(e,n);if(c)return c;console.warn(`[Soukai] Document '${n}' not found in persistent cache, fetching from server`)}const l=await this.getDocument(n);if(l===null)throw new Lr(n);const u=await this.convertToEngineDocument(l);if(await this._listeners.emit("onRDFDocumentLoaded",l.url,l.metadata),await this._listeners.emit("onDocumentRead",l.url,l.metadata),this.config.persistentCache&&(s=l.resource(n))!=null&&s.isType(ji))for(const c of((i=l.resource(n))==null?void 0:i.getPropertyValues(jm))??[]){const d=String(c),f=(o=l.resource(d))==null?void 0:o.isType(ji),h=C3((a=l.resource(d))==null?void 0:a.getPropertyValue(p3));f||!h||await this.config.persistentCache.activate(n,d,h.getTime())}return u}async readMany(e,n={}){const r=await this.getDocumentsForFilters(e,n),s={};return await Promise.all(Object.entries(r).map(async([i,o])=>{if(!Yt(o,In)){s[i]=o;return}s[i]=await this.convertToEngineDocument(o),await this._listeners.emit("onRDFDocumentLoaded",o.url,o.metadata),await this._listeners.emit("onDocumentRead",o.url,o.metadata)})),this.helper.filterDocuments(s,n)}async update(e,n,r){if("$overwrite"in r){const o=await this.getJsonLDGraphProperties(r.$overwrite),a=await this.client.overwriteDocument(n,o);await this._listeners.emit("onDocumentUpdated",n,a);return}const s=await this.extractJsonLDGraphUpdate(r),i=await this.client.updateDocument(n,s,nn()?{format:"application/ld+json"}:{});this.cache.delete(n),i&&await this._listeners.emit("onDocumentUpdated",n,i)}async delete(e,n){const r=await this.client.deleteDocument(n);this.cache.delete(n),r&&await this._listeners.emit("onDocumentDeleted",n,r)}addListener(e){return this.listeners.add(e)}removeListener(e){this.listeners.remove(e)}clearCache(){this.cache=new Map}async getDocument(e){var n;if(this.config.cachesDocuments&&this.cache.has(e))return((n=this.cache.get(e))==null?void 0:n.clone())??null;const r=await this.client.getDocument(e);return this.config.cachesDocuments&&this.cache.set(e,r),r}async getDocumentsForFilters(e,n){if(n.$in)return this.getDocumentsFromUrls(n.$in.map($t));const r=await this.client.getDocuments(e);return Object.fromEntries(r.map(s=>[s.url,s]))}async getDocumentsFromUrls(e){const n=e.reduce((i,o)=>{const a=br(o)??ls(o);return{...i,[a]:(i[a]||[]).concat([o])}},{}),r=Object.entries(n).map(async([i,o])=>{const a=o.map(l=>{var u;return(u=this.config.persistentCache)!=null&&u.has(i,l)?this.config.persistentCache.get(i,l):this.getDocument(l)});return(await Promise.all(a)).map((l,u)=>[o[u],l]).filter(([l,u])=>u!==null)}),s=await Promise.all(r);return Object.fromEntries(s.flat())}async convertToEngineDocument(e){const n=await jc(e.statements);return await NU(n)}validateJsonLDGraph(e){if(!Array.isArray(e["@graph"]))throw new Be("Invalid JSON-LD graph provided for SolidEngine. Are you using a model that isn't a SolidModel?")}async extractJsonLDGraphUpdate(e){if(!this.isJsonLDGraphUpdate(e))throw new Be("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const n=new Map,r=[],s="$apply"in e["@graph"]?e["@graph"].$apply:[e["@graph"]];for(const i of s){if(i.$updateItems){const o=[];for(const a of mn(i.$updateItems)){const l=await this.extractJsonLDGraphItemsUpdate(a,n);o.push(...l)}r.push(...o.flat())}if(i.$push){const o=await this.extractJsonLDGraphItemPush(i.$push);r.push(...o)}}return r}async extractJsonLDGraphItemsUpdate({$where:e,$update:n,$override:r,$unset:s},i){if(!e||!("@id"in e))throw new Be("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");if(s){const u=e["@id"];return(typeof u=="string"?[u]:u.$in).map(c=>new xo(c))}if(r){const u=e["@id"],c=typeof u=="string"?[u]:u.$in;return(await Promise.all(c.map(async d=>{const f=i.get(d)??d,h=[new xo(f)],m=await this.getJsonLDGraphProperties(r);for(const g of m)h.push(new Eo(g));return h}))).flat()}if(typeof e["@id"]!="string")throw new Be("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const o=i.get(e["@id"])??e["@id"],a=n,l=[];for(const[u,c]of Object.entries(a)){if(c===null)throw new Be("SolidEngine doesn't support setting properties to null, delete");if(typeof c=="object"&&"$unset"in c){l.push(new xo(o,u));continue}if(u==="@id"&&o!==c){l.push(new d3(o,c)),i.set(c,o);continue}l.push(new Eo(this.getUpdatePropertyOperationProperty(o,u,c)))}return l}getUpdatePropertyOperationProperty(e,n,r,s=!0){return n==="@type"?Pn.type(e,r):Array.isArray(r)?s?r.map(i=>this.getUpdatePropertyOperationProperty(e,n,i,!1)):Ge("Cannot have nested array values"):ht(r)&&"@id"in r?Pn.reference(e,n,r["@id"]):ht(r)&&"@type"in r&&r["@type"]==="http://www.w3.org/2001/XMLSchema#dateTime"?Pn.literal(e,n,new Date(r["@value"])):Pn.literal(e,n,r)}async extractJsonLDGraphItemPush(e){return(await this.getJsonLDGraphProperties(e)).map(n=>new Eo(n))}extractJsonLDGraphTypes(e){if(!this.isJsonLDGraphTypesFilter(e))return[];const n=e["@graph"].$contains["@type"].$or.reduce((r,s)=>("$contains"in s&&r.push(...s.$contains),"$eq"in s&&r.push(s.$eq),r),[]);return Qn(n.filter(r=>r.startsWith("http")))}async getJsonLDGraphProperties(e){return(await In.fromJsonLD(e)).properties}isJsonLDGraphUpdate(e){const n=e["@graph"];return ht(n)?!(n.$apply??[n]).some(r=>{const s=Object.keys(r);return s.length!==1||!["$updateItems","$push"].includes(s[0]??"")}):!1}isJsonLDGraphTypesFilter(e){const n=e["@graph"];return ht(n)&&ht(n.$contains)&&ht(n.$contains["@type"])&&Array.isArray(n.$contains["@type"].$or)}},Of=class extends Be{constructor(e){super(`Some required attributes were missing from '${e}' document.`)}};const Vu=new WeakMap,Df=new WeakMap;function rw(t){var e;return((e=Object.getPrototypeOf(t))==null?void 0:e.constructor)!==Object}function R3(t,e){if(Vu.has(t))throw new Be(`${t.modelName} schema update already in progress!`);Vu.set(t,e)}function T3(t){return Vu.get(t)??null}function O3(t){Vu.delete(t)}function D3(t,e,n){const r=t;if(rw(r))return r.ensureBooted(),r;if(!Df.has(r)){const s=rw(t)?t:e,i=xE(r,s);i.ensureBooted(),Df.set(r,i)}return Df.get(r)??Ge("Couldn't boot schema")}function xE(t,e,n){const r=Oj(n?t:e,n??t);return r.__isSchema=!0,r}let k3=class{async deleteModels(e){const n=this.decantDocumentModelsByContainer(e);await Promise.all(Object.entries(n).map(([r,s])=>this.deleteContainerDocumentsModels(r,s)))}decantDocumentModelsByContainer(e){const n=this.decantModelsByDocument(e);return Object.entries(n).reduce((r,[s,i])=>{const o=br(s)??ls(s);return(r[o]=r[o]??[]).push({documentUrl:s,models:i}),r},{})}decantModelsByDocument(e){return e.reduce((n,r)=>{const s=r.requireDocumentUrl();return(n[s]=n[s]??[]).push(r),n},{})}async deleteContainerDocumentsModels(e,n){const r=await this.requireEngine().readMany(e,{$in:n.map(({documentUrl:s})=>s)});await Promise.all(n.map(({documentUrl:s,models:i})=>this.deleteDocumentModels(r,e,s,i)))}async deleteDocumentModels(e,n,r,s){const i=e[r];if(!i)return;const o=this.requireEngine(),a=s.filter(l=>l.exists()).map(l=>l.url);if(!i["@graph"].some(l=>!a.some(u=>u===l["@id"]))){const l=s.filter(u=>u.isRelationLoaded("tombstone")).map(u=>u.tombstone);l.length===0?await o.delete(n,r):await o.update(n,r,{$overwrite:{"@graph":l.map(u=>u.serializeToJsonLD({includeRelations:!1}))}}),s.forEach(u=>u.setDocumentExists(!1));return}await o.update(n,r,{"@graph":{$updateItems:{$where:{"@id":{$in:a}},$unset:!0}}})}},hu=class extends ai{constructor(e,n){super(e,n)}setForeignAttributes(){}clearForeignAttributes(){}async load(){return this.related??(this.related=[]),this.related}create(e){return Ne(this.attach(e??{}),()=>this.parent.save())}async __loadDocumentModels(e,n){const r=await In.fromJsonLD(n),s=In.reduceJsonLDGraph(n,this.parent.url);this.related=rn(await Promise.all(this.relatedClass.findMatchingResourceIds(r.statements).map(i=>{const o=s["@graph"].find(a=>a["@id"]===i);return o&&this.relatedClass.createFromEngineDocument(e,s,o["@id"])})))}};class P3{get isPublic(){var e;return((e=this._publicPermissions)==null?void 0:e.includes(ni.Read))??null}get isPrivate(){return this._publicPermissions?!this._publicPermissions.includes(ni.Read):null}async fetchPublicPermissionsIfMissing(){this._publicPermissions||await this.fetchPublicPermissions()}async fetchPublicPermissions(){const e=Xt("SolidACLAuthorization"),n=this.requireDocumentUrl(),r=await e.requireFetch()(n,{method:"HEAD"}),s=new qu(n,[],r.headers);this._publicPermissions=s.getPublicPermissions()}async updatePublicPermissions(e){const n=Xt("SolidACLAuthorization");await this.withEngine(n.requireEngine(),()=>this.updateAuthorizations(e)),this._publicPermissions=e}trackPublicPermissions(){if(!this.static().usingSolidEngine())return{documentPermissions:{},stopTracking(){}};const e={},n=this.static().requireFinalEngine().listeners.add({onDocumentRead(r,s){if(!s.headers)return;const i=new qu(r,[],s.headers);e[r]=i.getPublicPermissions()}});return{documentPermissions:e,stopTracking:n}}async updateAuthorizations(e){this.relatedAuthorizations.enable();const n=await this.loadRelationIfUnloaded("authorizations"),r=Xt("SolidACLAuthorization"),s=e.map(a=>r.modeFromSolidDocumentPermission(a)),i=n.filter(a=>a.agentClasses.includes(li("foaf:Agent"))),o=i.map(a=>a.modes).flat();if(!(s.length===o.length&&!s.some(a=>o.includes(a)))){if(!this.relatedAuthorizations.isDocumentACL()){await this.createDocumentACLResource(s);return}if(s.length===0){for(const a of i)await a.delete();this.relatedAuthorizations.related=ir(n,i);return}if(i.length===0){await this.createPublicAuthorization(s);return}for(const a of i)await a.update({modes:s})}}async createDocumentACLResource(e){this.relatedAuthorizations.enable();const n=Xt("SolidACLAuthorization"),r=this.authorizations.filter(s=>s.modes.includes(n.rdfTerm("acl:Control"))).map(s=>Ne(new n(s.getAttributes()),i=>{var o;i.accessTo=[this.requireDocumentUrl()],i.accessToClasses=[],i.default=[],i.mintUrl(this.relatedAuthorizations.requireACLUrl(),!1,((o=ol(s.url))==null?void 0:o.fragment)??jn())}));for(const s of r)await s.save();this.relatedAuthorizations.related=r,this.relatedAuthorizations.effectiveACLUrl=this.relatedAuthorizations.aclUrl,await this.createPublicAuthorization(e)}async createPublicAuthorization(e){var n;this.relatedAuthorizations.enable();const r=Xt("SolidACLAuthorization"),s=await r.createInDocument({agentClasses:[r.rdfTerm("foaf:Agent")],accessTo:[this.requireDocumentUrl()],modes:e},this.relatedAuthorizations.requireACLUrl(),"public");(n=this.relatedAuthorizations.related)==null||n.push(s)}}let sw;function ui(t){return Bm()[t]}function Bm(){return sw??(sw={Operation:Xt("Operation"),PropertyOperation:Xt("PropertyOperation"),AddPropertyOperation:Xt("AddPropertyOperation"),RemovePropertyOperation:Xt("RemovePropertyOperation"),SetPropertyOperation:Xt("SetPropertyOperation"),UnsetPropertyOperation:Xt("UnsetPropertyOperation"),DeleteOperation:Xt("DeleteOperation")})}class $3{async migrateSchema(e,n={}){if(this.isDirty())throw new Be("Can't migrate dirty model, call save() before proceeding.");const r=D3(e,this.static()),{model:s,updates:i}=await this.getSchemaUpdates(r,n);return await this.updateEngineDocumentSchema(i),s}async getSchemaUpdates(e,n){const{removed:r,added:s}=qo(Object.keys(this.static().fields),Object.keys(e.fields)),i=await this.newInstanceForSchema(e,s,r),o=i.url!==this.url?i.url:null,a=(await this.getOperationSchemaUpdates(i,r,o,n)).concat(this.getMetadataSchemaUpdates(o)).concat(this.getUrlSchemaUpdates(o)).concat([this.getResourceSchemaUpdate(i,o)]);return{model:i,updates:a}}async newInstanceForSchema(e,n,r){var s,i;const o=ui("PropertyOperation"),a=e.newInstance(Ne(this.getAttributes(),l=>{l.url=`${this.requireDocumentUrl()}#${e.defaultResourceHash}`;for(const u of r)delete l[u]}),!0);return a.setRelationModels("operations",this.operations.filter(l=>{if(!Yt(l,o))return!0;const u=this.static().getRdfPropertyField(l.property);return!u||!r.includes(u)})),n.forEach(l=>{a.hasAttribute(l)&&(a._dirtyAttributes[l]=a.getAttributeValue(l))}),await((i=(s=a.static().hooks)==null?void 0:s.beforeSave)==null?void 0:i.call(a)),a.operations.length>0&&await a.addDirtyHistoryOperations(),a}async getOperationSchemaUpdates(e,n,r,s){var i;const o=[],a=[],l=ui("PropertyOperation"),u=this.usingSolidEngine()?Zb:"resource",c=this.usingSolidEngine()?h3:"property";await e.loadRelationIfUnloaded("operations");for(const d of e.operations){if(o.push(d.url),!d.exists()){d.date=this.getUpdatedAtAttribute(),d.resourceUrl=e.url;const g=(i=s.mintOperationUrl)==null?void 0:i.call(s,d);g?d.url=g:d.mintUrl(),a.push({$push:d.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})});continue}if(!Yt(d,l)){r&&a.push({$updateItems:{$where:{"@id":d.url},$update:{[u]:{"@id":r}}}});continue}const f=this.static().getRdfPropertyField(d.property),h=f&&e.static().getFieldRdfProperty(f),m=Fn({[u]:r?{"@id":r}:null,[c]:h&&h!==d.property?{"@id":h}:null});Object.keys(m).length!==0&&a.push({$updateItems:{$where:{"@id":d.url},$update:m}})}for(const d of this.operations)o.includes(d.url)||a.push({$updateItems:{$where:{"@id":d.url},$unset:!0}});return a}getMetadataSchemaUpdates(e){if(!e||!this.metadata)return[];const n=this.usingSolidEngine()?Zb:"resource";return[{$updateItems:{$where:{"@id":this.metadata.url},$update:{[n]:{"@id":e}}}}]}getUrlSchemaUpdates(e){return e?[{$updateItems:{$where:{"@id":this.url},$update:{"@id":e}}}]:[]}getResourceSchemaUpdate(e,n){return{$updateItems:{$where:{"@id":n??this.url},$override:e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})}}}async updateEngineDocumentSchema(e){const n=this.requireDocumentUrl();await this.requireEngine().update(Tt(n),n,e.length===1?{"@graph":e[0]}:{"@graph":{$apply:e}})}}function zu(t,e,n,r){const s=i=>Fn({type:i,rdfProperty:e,rdfPropertyAliases:n,required:r});switch(typeof t){case"string":return s(Re.String);case"number":case"bigint":return s(Re.Number);case"boolean":return s(Re.Boolean);case"object":return t===null?s(Re.Any):t instanceof er?s(Re.Key):t instanceof Date?s(Re.Date):Array.isArray(t)?Fn({required:r,rdfProperty:e,type:Re.Array,items:t.length>0?zu(t[0]):s(Re.Any)}):Fn({required:r,rdfProperty:e,type:Re.Object,fields:Object.entries(t).reduce((i,[o,a])=>(i[o]=zu(a),i),{})});default:return s(Re.Any)}}function L3(t){return V1(t)}class Vm{get protectedSolidBelongsTo(){return this}async __loadDocumentModels(e,n){const r=new Lc,s=this.parent.getAttribute(this.foreignKeyName),i=Array.isArray(s)?s:s?[s]:[],o=this.relatedClass.prepareEngineFilters(),a=In.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>i.indexOf(d["@id"])!==-1).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),u=await Promise.all(Object.keys(r.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),c=i.filter(d=>!u.some(f=>f.url===d)&&wr(d)!==e);this.protectedSolidBelongsTo.loadDocumentModels(u,c)}}class M3{getJsonLDProperty(e,n){if(n=bt(n),n in e)return this.getJsonLDPropertyValue(e[n]);if(!("@context"in e))return null;const r=e["@context"],s=Object.entries(r).find(([a,l])=>n.startsWith(l));if(!s)return null;const i=s[0]==="@vocab"?"":`${s[0]}:`,o=e[i+n.slice(s[1].length)];return this.getJsonLDPropertyValue(o)}getJsonLDPropertyValue(e){return e===void 0?null:Array.isArray(e)&&e.length===1?e[0]:e}}const EE=new M3;class zm{get protectedSolidHas(){return this}async __loadDocumentModels(e,n){var r;const s=new Lc,i=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??Ge(Be,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),o=this.relatedClass.prepareEngineFilters(),a=In.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>{const f=EE.getJsonLDProperty(d,i);return typeof f=="object"&&f!==null&&"@id"in f&&f["@id"]===this.parent.url}).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),u=await Promise.all(Object.keys(s.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),c=Object.keys(l).filter(d=>!u.some(f=>f.url===d)&&wr(d)!==e);this.protectedSolidHas.loadDocumentModels(u,c)}}function N3(t){return"__beforeParentCreate"in t}function F3(t){return"__afterParentSave"in t}function uo(t){return"useSameDocument"in t}function j3(t){return yc(t,Vm)}function Hm(t){return yc(t,zm)}function iw(t){return"__synchronizeRelated"in t}class kf{}class Km{constructor(e){De(this,"terms"),De(this,"reverseProperties"),this.terms=e,this.reverseProperties=new Map}static fromRdfClasses(e,n){const[r,...s]=Object.entries(e),i={name:"@vocab",compactingPrefix:"",value:r==null?void 0:r[1],used:!0},o=s.reduce((a,[l,u])=>(u!==i.value&&a.push({name:l,value:u,compactingPrefix:`${l}:`,used:n.some(c=>c.startsWith(u))}),a),[i]);return new Km(o)}addReverseProperty(e,n){this.reverseProperties.set(e,n)}addTerms(e,n){for(const[r,s]of Object.entries(e)){const i=this.terms.find(l=>l.value===s);if(i){i.used||(i.used=n.some(l=>l.startsWith(s)));continue}let o=r,a=1;for(;this.terms.some(l=>l.name===o);)o=`${r}${++a}`;this.terms.push({name:r,value:s,compactingPrefix:`${r}`,used:n.some(l=>l.startsWith(s))})}}getTermForExpandedIRI(e){return this.terms.find(n=>e.startsWith(n.value))??null}render(){const e=this.terms.reduce((n,r)=>(r.used&&(n[r.name]=r.value),n),{});return this.reverseProperties.forEach((n,r)=>{e[r]={"@reverse":n}}),e}}class Ao{constructor(e,n){De(this,"context"),De(this,"iriFormat"),this.context=e,this.iriFormat=n}static forModel(e,n=!0){const r=e.fields,s=rn(Object.values(r).map(o=>o.rdfProperty)),i=Km.fromRdfClasses(e.rdfContexts,s);return new Ao(i,n?"compacted":"expanded")}serialize(e,n={}){const r=n.attributes??e.getAttributes(),s=new Set(n.ignoreModels??[]),i={"@context":{},"@type":null};s.add(e);for(const[o,a]of Object.entries(r))this.setJsonLDField(i,e,o,a,n);if(!(e.static("primaryKey")in r)&&n.includeAnonymousHashes){const o=e.static("defaultResourceHash");o&&!nn()&&(i["@id"]=`#${o}`)}return(n.includeRelations??!0)&&this.setJsonLDRelations(i,e,s),n.includeTypes??!0?this.setJsonLDTypes(i,e):delete i["@type"],n.includeContext??!0?this.setJsonLDContext(i):delete i["@context"],i}processExpandedIRI(e){return this.iriFormat==="expanded"?e:this.compactExpandedIRI(e)}compactExpandedIRI(e){const n=this.context.getTermForExpandedIRI(e);return n?Ne(n.compactingPrefix+e.slice(n.value.length),()=>n.used=!0):e}setJsonLDField(e,n,r,s,i){if(r===n.static("primaryKey")){e["@id"]=$t(s);return}const o=n.static().getFieldRdfProperty(r);o&&this.setJsonLDProperty(e,n,this.processExpandedIRI(o),r,s,i)}setJsonLDRelations(e,n,r){for(const s of n.static("relations")){const i=n.requireRelation(s),o=i.getLoadedModels()[0];if(!i.enabled||!i.loaded||!uo(i)||i.isEmpty()||o&&r.has(o))continue;const a=i.relatedClass.fields,l=rn(Object.values(a).map(u=>u.rdfProperty));this.context.addTerms(i.relatedClass.rdfContexts,l),this.setJsonLDRelation(e,i,r)}}setJsonLDRelation(e,n,r){const s=n.relatedClass.instance(),i=n.related,o=Hm(n),a=o?s.static().getFieldRdfProperty(n.foreignKeyName):n.parent.static().getFieldRdfProperty(n.foreignKeyName),l=this.processExpandedIRI(a),u={ignoreModels:r,includeRelations:!0,includeContext:!1},c=o?d=>Ne(this.serialize(d,u),f=>{delete f[l]}):d=>this.serialize(d,u);i&&(o&&this.context.addReverseProperty(n.name,l),e[o?n.name:l]=Array.isArray(i)?i.map(d=>c(d)):c(i))}setJsonLDTypes(e,n){const r=n.static("rdfsClasses").map(s=>this.processExpandedIRI(s));e["@type"]=r.length===1?r[0]:r}setJsonLDContext(e){e["@context"]=this.context.render()}setJsonLDProperty(e,n,r,s,i,o){const a=n.static().getFieldDefinition(s,i);if(i=this.castJsonLDValue(i,a),a.serialize&&(i=a.serialize(i)),i instanceof kf){o.keepEmptyValues&&(e[r]=null);return}e[r]=i}castJsonLDValue(e,n){switch(n.type){case Re.Any:{if(e==null)return new kf;const r=zu(e,n.rdfProperty,n.rdfPropertyAliases,n.required);if(r.type===Re.Any)throw new Be("Couldn't infer field definition for a field declared as any");return this.castJsonLDValue(e,r)}case Re.Key:return{"@id":$t(e)};case Re.Date:return typeof e=="object"&&e!==null&&"$unset"in e?e:{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":new Date(e).toISOString()};case Re.Array:{const r=e,s=n.items;switch(r.length){case 0:return new kf;case 1:return this.castJsonLDValue(r[0],s);default:return r.map(i=>this.castJsonLDValue(i,s))}}default:return JSON.parse(JSON.stringify(e))}}}function an(t){const e=t&&tu("related-models",t),n=t&&tu("document-models",t),r=t&&tu("cascade-models",t);e==null||e.forEach(s=>ud("related-models",s)),n==null||n.forEach(s=>ud("document-models",s)),r==null||r.forEach(s=>ud("cascade-models",s))}class AE{constructor(){De(this,"useSameDocument",!1),De(this,"documentModelsLoaded",!1)}usingSameDocument(e=!0){return this.useSameDocument=e,this}}let Uc=class extends AE{constructor(){super(...arguments),De(this,"__removedDocumentModels",[])}get protectedSolidMulti(){return this}get super(){return new Proxy(this,{get:(e,n)=>(...r)=>ai.prototype[n].call(this,...r)})}get __newModels(){return this.__newModelsValue??(this.__newModelsValue=[])}set __newModels(e){var n;an(this.parent),(n=this.__newModelsValue)==null||n.forEach(r=>an(r)),e==null||e.forEach(r=>an(r)),this.__newModelsValue=e}isEmpty(){var e,n,r;return!this.documentModelsLoaded&&this.parent.exists()?null:(((e=this.__modelsInSameDocument)==null?void 0:e.length)||0)+(((n=this.__modelsInOtherDocumentIds)==null?void 0:n.length)||0)+this.__newModels.length+(((r=this.related)==null?void 0:r.length)||0)===0}async create(e={}){this.protectedSolidMulti.assertLoaded("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.protectedSolidMulti.assertLoaded("save"),this.attach(e),!this.useSameDocument||nn()?(await e.save(),this.setForeignAttributes(e)):this.parent.exists()&&await this.parent.save(),e}async remove(e){this.detach(e),await this.parent.save()}detach(e){var n,r,s,i;const o=typeof e=="string"?e:e.getAttribute(this.localKeyName),a=(n=this.related)==null?void 0:n.find(l=>l.getAttribute(this.localKeyName)===o);a&&(this.related=(r=this.related)==null?void 0:r.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__newModels=this.__newModels.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInSameDocument=(s=this.__modelsInSameDocument)==null?void 0:s.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInOtherDocumentIds=(i=this.__modelsInOtherDocumentIds)==null?void 0:i.filter(l=>l!==o),a.getDocumentUrl()===this.parent.getDocumentUrl()&&!this.parent.tracksHistory()&&this.__removedDocumentModels.push(a),Hm(this)&&a.setAttribute(this.foreignKeyName,null),j3(this)&&this.parent.setAttribute(this.foreignKeyName,this.parent.getAttribute(this.foreignKeyName).filter(l=>l!==o)))}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.super.addRelated(e),e.exists()||(this.__newModels=this.__newModels.concat([e])))}isRelated(e){return this.super.isRelated(e)||this.__newModels.includes(e)}__afterParentSave(){this.__removedDocumentModels=[]}cloneSolidData(e){const n=e.related??[];e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,e.__newModels=[],e.__removedDocumentModels=[];for(const r of this.__newModels)e.__newModels.push(n.find(s=>s.is(r))??Ne(r.clone(),s=>n.push(s)));for(const r of this.__removedDocumentModels)e.__removedDocumentModels.push(n.find(s=>s.is(r))??Ne(r.clone(),s=>n.push(s)));this.__modelsInSameDocument&&(e.__modelsInSameDocument=this.__modelsInSameDocument.map(r=>n.find(s=>s.is(r))??r.clone())),this.__modelsInOtherDocumentIds&&(e.__modelsInOtherDocumentIds=this.__modelsInOtherDocumentIds)}loadDocumentModels(e,n){this.__modelsInSameDocument=e,this.__modelsInOtherDocumentIds=n,this.__modelsInOtherDocumentIds.length===0&&(this.related=Qn(this.related??[]).concat(this.__modelsInSameDocument)),this.documentModelsLoaded=!0}};s0(Uc,"onRelatedUpdated",function(t,e){if(this!==this.parent.requireRelation(this.name))return;const{added:n,removed:r}=qo(t??[],e??[]);an(this.parent),t==null||t.forEach(s=>an(s)),e==null||e.forEach(s=>an(s)),r.forEach(s=>this.clearInverseRelations(s)),n.forEach(s=>this.initializeInverseRelations(s))});const U3=gc(_o,[Uc,zm]);class SE extends U3{async load(){if(this.isEmpty())return this.related=[];if(!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)return this.related=[];const e=await this.loadRelatedModels(this.__modelsInOtherDocumentIds);return this.related=this.__modelsInSameDocument.concat(e)}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[],e.forEach(n=>{var r;n.unsetAttribute(this.foreignKeyName),(r=this.related)==null||r.push(n),this.__newModels.push(n)})}clone(e={}){return Ne(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){const{models:r,...s}=n,i=dn(this.related??[],"url"),o=dn(e.related??[],"url"),a=o.getItems().filter(u=>!i.hasKey(u.url)),l=[];for(const u of i.items()){const c=o.get(u.url);if(!c){l.push(u);continue}await u.static().synchronize(u,c,{__models:r,...s})}this.related=Array.from(i.items()).concat(a.map(u=>u.clone({clones:Ne(new WeakMap,c=>c.set(e.parent,this.parent)),...s}))),e.related=Array.from(o.items()).concat(l.map(u=>u.clone({clones:Ne(new WeakMap,c=>c.set(e.parent,this.parent)),...s})))}loadRelatedModels(e){return this.relatedClass.all({$in:e})}}const IE=class tp extends SE{constructor(e){super(e,ui("Operation"),"resourceUrl")}attach(e={},n){const r=ui("Operation"),s=e instanceof r?e:ui(n??"SetPropertyOperation").newInstance(e);if(s.constructor===r)throw new Error("Creating base operations is meaningless, you should create a specific operation instead (add property, remove property, etc.)");return super.attach(s)}attachAddOperation(e){return this.attach(e,"AddPropertyOperation")}attachRemoveOperation(e){return this.attach(e,"RemovePropertyOperation")}attachSetOperation(e){return this.attach(e,"SetPropertyOperation")}attachUnsetOperation(e){return this.attach(e,"UnsetPropertyOperation")}attachDeleteOperation(e){return this.attach(e,"DeleteOperation")}async __loadDocumentModels(e,n){var r;const s=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??Ge(Be,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),i=In.reduceJsonLDGraph(n,this.parent.url),o=n["@graph"].filter(u=>{const c=EE.getJsonLDProperty(u,s);return typeof c=="object"&&c!==null&&"@id"in c&&c["@id"]===this.parent.url}),a=rn(await Promise.all(o.map(async u=>{var c;return(c=this.getOperationClass(u))==null?void 0:c.createFromEngineDocument(e,i,u["@id"])}))),l=o.map(u=>u["@id"]).filter(u=>!a.some(c=>c.url===u)&&wr(u)!==e);this.protectedSolidHas.loadDocumentModels(a,l)}async loadRelatedModels(){throw new Error("loading operations from different documents has not been implemented yet")}getOperationClass(e){const n=this.getOperationMatchers(),r=mn(e["@type"]??[]),s=n.find(i=>i.match(r));return s==null?void 0:s.operation}getOperationMatchers(){return tp.operationMatchers??(tp.operationMatchers=Object.values(Bm()).map(e=>{const n=Ao.forModel(e),r=e.rdfsClasses,s=r.map(o=>n.processExpandedIRI(o)),i=r.concat(s);return{operation:e,match:o=>i.some(a=>o.includes(a))}}))}};De(IE,"operationMatchers");let q3=IE;class B3{serializeToJsonLD(e={}){return e.includeRelations??(e.includeRelations=!0),Ao.forModel(this.static()).serialize(this,e)}async parseEngineDocumentAttributesFromJsonLD(e,n){const r=e,s=r["@graph"].find(l=>l["@id"]===n)??Ge(Um,n,e.url),i=await In.resourceFromJsonLDGraph(r,n,s),o=this.static("fields"),a={};a[this.static("primaryKey")]=n;for(const[l,u]of Object.entries(o)){if(!u.rdfProperty)continue;const c=(i.propertiesIndex[u.rdfProperty]??u.rdfPropertyAliases.reduce((h,m)=>h.concat(i.propertiesIndex[m]??[]),[])).map(h=>h.type===Qs.Reference?new er(h.value):h.value),[d,...f]=c;typeof d>"u"||(a[l]=f.length>0?[d].concat(f):d)}return a}convertEngineFiltersToJsonLD(e,n){const r={},s=Ao.forModel(this.static()),i=this.static("rdfsClasses"),o=i.map(u=>s.processExpandedIRI(u)),a=[];i.length>0&&(a.push({$contains:o}),a.push({$contains:i})),i.length===1&&(a.push({$eq:o[0]}),a.push({$eq:i[0]})),this.static("rdfsClassesAliases").forEach(u=>{u.length>0&&a.push({$contains:u}),u.length===1&&a.push({$eq:u[0]})}),e.$in&&(r.$in=e.$in,delete e.$in);const l=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!1});return a.length>0&&(l["@type"]={$or:a}),Object.keys(l).length>0&&(r["@graph"]={$contains:l}),r}convertEngineUpdatesToJsonLD(e,n){const r=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!0});for(const[s,i]of Object.entries(r))i===null&&(r[s]={$unset:!0});return r}convertAttributeValuesToJsonLD(e,n){return Ao.forModel(this.static(),n.compactIRIs).serialize(this,{includeContext:!1,includeTypes:!1,includeRelations:!1,keepEmptyValues:n.keepEmptyValues,attributes:e})}}class V3 extends ai{constructor(e){const n=Xt("SolidACLAuthorization");super(e,n)}requireACLUrl(){return this.aclUrl??Ge("Could not get ACL Url")}isDocumentACL(){return!this.aclUrl||!this.effectiveACLUrl?null:this.aclUrl===this.effectiveACLUrl}setForeignAttributes(){}clearForeignAttributes(){}async load(){const e=Xt("SolidACLAuthorization"),n=await l3(this.parent.requireDocumentUrl(),e.requireFetch()),r=await jc(n.document.statements()),s=await Promise.all(n.document.statements(void 0,"rdf:type","acl:Authorization").map(({subject:i})=>e.createFromEngineDocument(n.effectiveUrl,r,i.value)));return this.aclUrl=n.url,this.effectiveACLUrl=n.effectiveUrl,this.related=s,s}}const z3=gc(wo,[Uc,Vm]);let Wm=class extends z3{async load(){var e;if((!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)&&(this.__modelsInSameDocument=[],this.__modelsInOtherDocumentIds=this.parent.getAttribute(this.foreignKeyName)),this.isEmpty())return this.related=[];const n={};for(const s of this.__modelsInOtherDocumentIds??[]){const i=br(s)??ls(s);i in n||(n[i]=new Set),(e=n[i])==null||e.add(wr(s))}const r=(await Promise.all(Object.entries(n).map(([s,i])=>this.relatedClass.from(s).all({$in:Array.from(i)})))).reduce((s,i)=>(s.push(...i),s),[]);return this.related=this.__modelsInSameDocument.concat(this.__newModels).concat(r)}associate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=er.from(e);this.parent.setAttribute(this.foreignKeyName,n.concat(r))}disassociate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=er.from(e);this.parent.setAttribute(this.foreignKeyName,n.filter(s=>!r.equals(er.from(s))))}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[];const n=this.parent.getAttribute(this.foreignKeyName);e.forEach(r=>{var s;zn(n,r.getAttribute(this.localKeyName)),(s=this.related)==null||s.push(r),this.__newModels.push(r)}),this.parent.setAttribute(this.foreignKeyName,n)}clone(e={}){return Ne(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);if(!Array.isArray(e))throw new Error(`Foreign key (${this.foreignKeyName}) for '${this.name}' relation in '${this.parent.static("modelName")}' model is missing.`);this.loadDocumentModels([],e)}async __synchronizeRelated(e,n){const{models:r,...s}=n,{SetPropertyOperation:i,AddPropertyOperation:o,RemovePropertyOperation:a}=Bm(),l=this.parent.static().getFieldRdfProperty(this.foreignKeyName),u=this.localKeyName,c=dn(this.related??[],u),d=dn(e.related??[],u),f=Ne(new WeakMap,m=>m.set(e.parent,this.parent));this.parent.operations.filter(m=>!m.exists()&&(m instanceof i||m instanceof o||m instanceof a)&&m.property===l).map(m=>mn(m.value)).flat().map(m=>d.get(m instanceof er?m.toString():m)).filter(m=>!!m).forEach(m=>{var g;if(c.hasKey(m.getAttribute(u)))return;const x=m.clone({clones:f,...s});(g=this.related)==null||g.push(x),c.add(x)});const h=await Promise.all(this.parent.getAttribute(this.foreignKeyName).map(async m=>{const g=c.get(m),x=d.get(m);return!g||!x||await g.static().synchronize(g,x,{__models:r,...s}),g}));this.related=rn(h).concat(this.__newModels)}};class qc extends AE{get super(){return new Proxy(this,{get:(e,n)=>(...r)=>Ko.prototype[n].call(this,...r)})}get __newModel(){return this.__newModelValue}set __newModel(e){an(this.parent),an(this.__newModelValue),an(e),this.__newModelValue=e}isEmpty(){return!this.documentModelsLoaded&&this.parent.exists()?null:!(this.__modelInSameDocument||this.__modelInOtherDocumentId||this.__newModel||this.related)}async create(e={}){this.assertNotLoadedOrEmpty("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.assertNotLoadedOrEmpty("save"),this.attach(e),!this.useSameDocument||nn()?await e.save():this.parent.exists()&&await this.parent.save(),e}addRelated(e){this.related!==e&&(this.super.addRelated(e),e.exists()||(this.__newModel=e))}isRelated(e){return this.super.isRelated(e)||this.__newModel===e}cloneSolidData(e){let n=e.related??null;e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,this.__newModel&&(this.__newModel=n??Ne(this.__newModel.clone(),r=>n=r)),this.__modelInSameDocument&&(e.__modelInSameDocument=n??this.__modelInSameDocument.clone()),this.__modelInOtherDocumentId&&(e.__modelInOtherDocumentId=this.__modelInOtherDocumentId)}loadDocumentModels(e,n){var r;if(e.length+n.length>1&&console.warn(`The ${this.name} relationship in ${this.parent.static("modelName")} has been declared as hasOne, but more than one related model were found.`),e.length>0){if(this.__modelInSameDocument=e[0],this.documentModelsLoaded=!0,this.related=this.__modelInSameDocument,!((r=this.__modelInSameDocument)!=null&&r.exists())){this.__newModel=this.__modelInSameDocument;return}this.__newModel=void 0;return}if(n.length>0){this.__modelInOtherDocumentId=n[0],this.documentModelsLoaded=!0;return}this.documentModelsLoaded=!0}async __synchronizeRelated(e,n){const{models:r,...s}=n;if(!this.related&&e.related){this.related=e.related.clone({clones:Ne(new WeakMap,o=>o.set(e.parent,this.parent)),...s});return}if(!e.related||!this.related)return;const i=this.parent.getAttribute(this.foreignKeyName);if(await this.related.static().synchronize(this.related,e.related,{__models:r,...s}),this.__newModel||this.related.url===i){this.related=this.__newModel??this.related;return}e.related.url===i&&(this.related=e.related.clone({clones:Ne(new WeakMap,o=>o.set(e.parent,this.parent)),...s}))}assertNotLoadedOrEmpty(e){if(!(!this.loaded||!this.related))throw new Be(`The "${e}" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`)}}s0(qc,"onRelatedUpdated",function(t,e){this===this.parent.requireRelation(this.name)&&(an(this.parent),an(t),an(e),t&&this.clearInverseRelations(t),e&&this.initializeInverseRelations(e))});const H3=gc(ka,[qc,Vm]);class K3 extends H3{async load(){if(this.__modelInSameDocument)return this.related=this.__modelInSameDocument;const e=this.__modelInOtherDocumentId??this.parent.getAttribute(this.foreignKeyName);if(!e)return this.related=null;const n=await this.relatedClass.find(e);return this.related=n}reset(e=[]){const n=e[0];delete this.related,delete this.__modelInSameDocument,delete this.__modelInSameDocument,n&&(this.parent.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return Ne(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);this.loadDocumentModels([],e?[e]:[])}async __synchronizeRelated(e,n){if(!e.related||this.related&&this.related.url!==e.related.url)return;const{models:r,...s}=n,i=this.parent.getAttribute(this.foreignKeyName);if(!this.related){this.related=e.related.clone({clones:Ne(new WeakMap,o=>o.set(e.parent,this.parent)),...s});return}if(await this.related.static().synchronize(this.related,e.related,{__models:r,...s}),this.__newModel||this.related.url===i){this.related=this.__newModel??this.related;return}e.related.url===i&&(this.related=e.related.clone({clones:Ne(new WeakMap,o=>o.set(e.parent,this.parent)),...s}))}}const W3=gc(Pi,[qc,zm]);class G3 extends W3{async load(){if(this.isEmpty())return this.related=null;if(!(this.__modelInSameDocument||this.__modelInOtherDocumentId))return this.related=null;const e=await(async()=>this.__modelInSameDocument?this.__modelInSameDocument:this.__modelInOtherDocumentId?this.relatedClass.find(this.__modelInOtherDocumentId):null)();return this.related=e}async remove(){if(!this.related)return;const e=this.related;this.related=null,await e.delete()}reset(e=[]){const n=e[0];this.related=void 0,this.__newModel=void 0,delete this.__modelInSameDocument,n&&(n.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return Ne(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){const{models:r,...s}=n;if(this.related&&e.related&&this.related.url===e.related.url){await this.related.static().synchronize(this.related,e.related,{__models:r,...s});return}if(!(!e.related||this.related&&this.related.url!==e.related.url)&&!this.related){this.related=e.related.clone({clones:Ne(new WeakMap,i=>i.set(e.parent,this.parent)),...s});return}}}class CE extends Ko{constructor(e,n){super(e,n,"resourceUrls","url")}isEmpty(){return!1}setForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||e.resourceUrls.includes(n))return;const r=e.resourceUrls.concat([n]);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||!e.resourceUrls.includes(n))return;const r=ir(e.resourceUrls,n);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}async load(){const e=this.relatedClass.collection,n=Tt(this.parent.url);return this.related=await this.relatedClass.from(br(n)??ls(n)).find(n),this.relatedClass.collection=e,this.related}onRelatedUpdated(e,n){this===this.parent.requireRelation(this.name)&&(an(this.parent),an(e),an(n),e&&this.clearInverseRelations(e),n&&this.initializeInverseRelations(n))}}class J3 extends Ko{constructor(e){super(e,Xt("Tombstone"))}create(){const e=Xt("Tombstone");this.related=new e({url:this.parent.metadata.url,resourceUrl:this.parent.url,deletedAt:new Date})}async load(){return null}setForeignAttributes(){}clearForeignAttributes(){}}const Pf=new WeakMap;function fr(t,e){return t[e]}async function X3(t,e,n){if(t.getPrimaryKey()!==e.getPrimaryKey())throw new Be("Can't synchronize different models");if(!(n.models.has(t)||n.models.has(e))){n.models.add(t),n.models.add(e),await t.loadRelationIfUnloaded("operations"),await e.loadRelationIfUnloaded("operations"),(t.operations.length>0||e.operations.length>0)&&(t.addHistoryOperations(e.operations),e.addHistoryOperations(t.operations));for(const r of ir(t.static().relations,t.static().reservedRelations)){const s=t.requireRelation(r),i=e.requireRelation(r);!s.enabled||!i.enabled||(await lh(s,iw).__synchronizeRelated(i,n),await lh(i,iw).__synchronizeRelated(s,n))}}}class Y3{tracksHistory(){return Pf.has(this)?!1:this._history??this.static("history")}withoutTrackingHistory(e){if(!this.tracksHistory())return e();const n=()=>(Pf.delete(this),!0);Pf.set(this);const r=e();return GC(r)?r.then(s=>n()&&s):n()&&r}enableHistory(){this._history=!0}disableHistory(){this._history=!1}disableTombstone(){this._tombstone=!1}enableTombstone(){this._tombstone=!0}leavesTombstone(){return this._tombstone??this.static("tombstone")}getHistoryHash(){const e=this.getRelatedModels().map(n=>n.operations??[]).flat();return e.length===0?null:PC(Ra(e,"url").reduce((n,r)=>n+r.url,""))}rebuildAttributesFromHistory(){var e,n;if(!this.hasRelation("operations")||!this.isRelationLoaded("operations"))throw new Be("Can't rebuild attributes from history if 'operations'  relation isn't loaded");if(this.operations.length===0)return;const r=ui("PropertyOperation"),s=Ra(this.operations,"date"),i=new Set(Object.keys(fr(this,"_attributes"))),o=Object.entries(this.static("fields")).filter(([a,l])=>l.type===Re.Array);i.delete(this.static("primaryKey")),i.delete(St.CreatedAt),i.delete(St.UpdatedAt),o.forEach(([a,l])=>{this.ignoreRdfPropertyHistory(l.rdfProperty)||this.setAttribute(a,[])}),s.forEach(a=>{if(a instanceof r){const l=this.static().getRdfPropertyField(a.property);l&&i.delete(l)}a.apply(this)}),i.forEach(a=>{const l=this.static().getFieldRdfProperty(a);l&&this.ignoreRdfPropertyHistory(l)||this.unsetAttribute(a)}),this.setAttribute("createdAt",(e=s[0])==null?void 0:e.date),this.setAttribute("updatedAt",(n=s[s.length-1])==null?void 0:n.date)}addHistoryOperations(e){const n=ui("PropertyOperation"),r=new Set(this.operations.map(a=>a.url)),s=[],i=new Set,o=Object.keys(this.static("fields")).reduce((a,l)=>{const u=this.static().getFieldRdfProperty(l);return u&&(a[u]=l),a},{});for(const a of e){if(r.has(a.url)||a instanceof n&&this.ignoreRdfPropertyHistory(a.property))continue;const l=a.clone();l.reset(),l.url=a.url,s.push(l),a instanceof n&&a.property in o&&i.add(a.property)}if(s.some(a=>!a.isInception(this))){this.setRelationModels("operations",Ra(this.operations.concat(s),["date","url"])),this.removeDuplicatedHistoryOperations(),this.rebuildAttributesFromHistory();for(const a of i){const l=o[a];fr(this,"_trackedDirtyAttributes")[l]=fr(this,"_dirtyAttributes")[l]}}}async addDirtyHistoryOperations(){const e=fr(this,"_trackedDirtyAttributes");if(await this.loadRelationIfUnloaded("operations"),"url"in fr(this,"_dirtyAttributes"))throw new Be(`It wasn't possible to generate the changes history for a model because its primary key was modified from '${this.url}' to '${fr(this,"_originalAttributes").url}'.`);if(this.operations.length===0){const n=Fn(di(fr(this,"_originalAttributes"),[this.static("primaryKey")]));for(const[r,s]of Object.entries(n)){if(s===null||Array.isArray(s)&&s.length===0||r in e&&e[r]===s)continue;const i=this.static().getFieldRdfProperty(r);i&&this.ignoreRdfPropertyHistory(i)||this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(r),date:this.metadata.createdAt,value:this.getOperationValue(r,s)})}}for(const[n,r]of Object.entries(fr(this,"_dirtyAttributes"))){if(n in e&&e[n]===r)continue;const s=this.static().getFieldRdfProperty(n);if(!(s&&this.ignoreRdfPropertyHistory(s))){if(Array.isArray(r)){this.addArrayHistoryOperations(n,r,fr(this,"_originalAttributes")[n]);continue}if(r==null){this.relatedOperations.attachUnsetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt});continue}this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt,value:this.getOperationValue(n,r)})}}this.metadata.isDirty("deletedAt")&&this.metadata.deletedAt&&this.relatedOperations.attachDeleteOperation({date:this.metadata.deletedAt})}removeDuplicatedHistoryOperations(){const e=ui("PropertyOperation"),n=[],r=[],s=this.operations.filter(o=>o.isInception(this)),i=o=>!r.includes(o.url);for(const o of s)if(o instanceof e){if(!n.includes(o.property)){n.push(o.property);continue}r.push(o.url),o.exists()&&fr(this,"_removedResourceUrls").push(o.url)}this.setRelationModels("operations",this.operations.filter(i))}getOperationValue(e,n){const r=this.static().getFieldDefinition(e,n);return V1(r)?rn(mn(n,!0).map(s=>this.getOperationValue(`${e}.*`,s))):(n&&r.type===Re.Key&&(n=new er(n)),r.serialize&&(n=r.serialize(n)),n)}addArrayHistoryOperations(e,n,r){const s=mn(this.getOperationValue(e,r),!0),i=mn(this.getOperationValue(e,n),!0),{added:o,removed:a}=qo(s,i,(l,u)=>l instanceof er&&u instanceof er?l.equals(u):l===u);o.length>0&&this.relatedOperations.attachAddOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:rn(o)}),a.length>0&&this.relatedOperations.attachRemoveOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:rn(a)})}reconcileModelTimestamps(e){var n;const[r,...s]=this.operations??[];if(r){this.setAttribute(St.UpdatedAt,s.reduce((a,l)=>a>l.date?a:l.date,r.date));return}if(e)return;const i=fr(this,"_originalAttributes")[St.UpdatedAt]??((n=this.metadata)==null?void 0:n.getOriginalAttribute(St.UpdatedAt));if(!i)return;const o=Object.keys(fr(this,"_dirtyAttributes"));o[1]||o[0]&&o[0]!==St.UpdatedAt||this.setAttribute(St.UpdatedAt,i)}}function zl(t){return yc(t,Uc)}function $f(t){return yc(t,qc)}const Q3=mc($i,[k3,P3,$3,B3,Y3]);let kt=class extends Q3{constructor(){super(...arguments),De(this,"_sourceSubject",{}),De(this,"_lock",new fc)}static getFieldDefinition(e,n){if(e.endsWith(".*")){const r=this.getFieldDefinition(e.slice(0,-2),Array.isArray(n)&&n.length>0?n[0]:void 0);if(!L3(r))throw new Be("Can't get item field definition for non-array field");return{type:r.items.type,rdfProperty:r.rdfProperty,rdfPropertyAliases:r.rdfPropertyAliases,required:!1}}return this.fields[e]??zu(n,this.getDefaultRdfContext()+e,[],!1)}static getFieldRdfProperty(e){const n=this.fields[e];return n&&!n.rdfProperty?null:(n==null?void 0:n.rdfProperty)??this.getDefaultRdfContext()+e}static getRdfPropertyField(e){return(this.rdfPropertyFields??(this.rdfPropertyFields=dC(dn(Object.keys(this.fields),n=>this.getFieldRdfProperty(n)))))[e]??null}static async updateSchema(e){await super.updateSchema(e),delete this.rdfPropertyFields}static requireFetch(){if(!this.usingSolidEngine())throw new Be(`Could not get fetch from ${this.modelName} model`);return this.requireFinalEngine().getFetch()}static requireFieldRdfProperty(e){return this.getFieldRdfProperty(e)??Ge(`Couldn't get required property for rdf field '${e}'`)}static usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}static useSoftDeletes(e){this.softDeletesEnabled=e}static from(e){return this.collection=e,this}static at(e){return this.from(e)}static boot(e){var n,r,s,i;this.modelName=this.bootModelName(e),this.rdfContexts=this.bootRdfContexts(((n=Object.getOwnPropertyDescriptor(this,"rdfContext"))==null?void 0:n.value)??null,((r=Object.getOwnPropertyDescriptor(this,"rdfContexts"))==null?void 0:r.value)??{},this.rdfsClass),this.rdfsClasses=this.bootRdfsClasses(((s=Object.getOwnPropertyDescriptor(this,"rdfsClass"))==null?void 0:s.value)??null,((i=Object.getOwnPropertyDescriptor(this,"rdfsClasses"))==null?void 0:i.value)??null,this.rdfContexts),this.rdfsClassesAliases=this.bootRdfsClassesAliases(this.rdfsClassesAliases,this.rdfContexts),super.boot(e)}static aliasRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){const i=this.rdfsClasses.reduce((o,a)=>(a.startsWith(r)&&o.push(a.replace(r,s)),o),[]);i.length>0&&this.rdfsClassesAliases.push(i);for(const o of Object.values(this.fields))(n=o.rdfProperty)!=null&&n.startsWith(r)&&o.rdfPropertyAliases.push(o.rdfProperty.replace(r,s))}}static resetRdfAliases(){this.rdfsClassesAliases=[];for(const e of Object.values(this.fields))e.rdfPropertyAliases&&(e.rdfPropertyAliases=[])}static replaceRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){this.rdfsClasses=this.rdfsClasses.map(i=>i.replace(r,s));for(const i of Object.values(this.fields))(n=i.rdfProperty)!=null&&n.startsWith(r)&&(i.rdfProperty=i.rdfProperty.replace(r,s))}}static createFromEngineDocument(e,n,r){return this.instance().createFromEngineDocument(e,n,r)}static async find(e){const n=Qn([this.rdfsClasses,...this.rdfsClassesAliases].flat()),r=this.instance().serializeKey(e),s=wr(r),i=br(s)??ls(s);this.ensureBooted();try{const{documentPermissions:o,stopTracking:a}=this.instance().trackPublicPermissions(),l=await this.requireEngine().readOne(i,s),u=await In.resourceFromJsonLDGraph(l,r);if(!n.some(d=>u.isType(d)))return null;const c=await this.instance().createFromEngineDocument(s,l,r);return a(),c._publicPermissions=o[s],c}catch(o){if(kC()&&!Yt(o,Lr)&&!Yt(o,Um)&&!Yt(o,Of))throw o;return null}}static async all(e={}){e=this.prepareEngineFilters(e);const{documentPermissions:n,stopTracking:r}=this.instance().trackPublicPermissions(),s=await super.all(e);return r(),s.forEach(i=>i._publicPermissions=n[i.requireDocumentUrl()]),s}static prepareEngineFilters(e={}){const n=!this.usingSolidEngine();return this.instance().convertEngineFiltersToJsonLD(e,n)}static rdfTerm(e,n){return n??(n=this.rdfContexts),li(e,Fn({extraContext:n,defaultPrefix:Object.values(n).shift()}))}static async newFromJsonLD(e,n,r){const s=t3(e),i=await In.fromJsonLD(s,n??this.collection),o=await i.toJsonLD(),a=r??this.findMatchingResourceIds(i.statements,n)[0]??Ge(Be,"Couldn't find matching resource in JSON-LD"),l=i.resource(a),u=n||wr(a),c=await this.instance().parseEngineDocumentAttributes(u,o,a);return this.hasAutomaticTimestamp(St.CreatedAt)&&(c.createdAt=l==null?void 0:l.getPropertyValue(bt("purl:created"))),this.hasAutomaticTimestamp(St.UpdatedAt)&&(c.updatedAt=l==null?void 0:l.getPropertyValue(bt("purl:modified"))),Ne(this.newInstance(Fn(c)),async d=>{await d.loadDocumentModels(u,o),d.reset(),d._sourceSubject=e["@id"]?n3(e["@id"]):{};for(const f of this.relations){const h=d.requireRelation(f),m=h.getLoadedModels();h.enabled&&(lh(h,uo).reset(m),m.forEach(g=>g.reset()))}})}static async createFromJsonLD(e,n,r){return Ne(await this.newFromJsonLD(e,n,r),s=>s.save(n))}static async createInDocument(e,n,r){return Ne(new this(e),s=>s.saveInDocument(n,r))}static async synchronize(e,n,r={}){if(this!==e.static())return e.static().synchronize(e,n,{...r,__models:r.__models??new WeakSet});await X3(e,n,{...r,models:r.__models??new WeakSet})}static findMatchingResourceIds(e,n){const r=e.reduce((s,i)=>{var o;return i.predicate.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&(s[i.subject.value]=s[i.subject.value]??[],(o=s[i.subject.value])==null||o.push(i.object.value)),s},{});return Object.entries(r).filter(([s,i])=>i.some(o=>this.rdfsClasses.includes(o))).map(([s])=>n?To(n,s):s)}static bootRdfContexts(e,n,r,s={}){var i,o;const a=s.modelClass??this,l={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"},u=()=>{var d;return(d=Object.entries({...n,...l}).find(([f,h])=>(r==null?void 0:r.startsWith(`${f}:`))||(r==null?void 0:r.startsWith($t(h)))))==null?void 0:d[1]};n.default??(n.default=e??u()??Object.values(n).find(d=>!!d));let c=Object.getPrototypeOf(a);return s.skipParentSchema&&c.__isSchema&&(c=Object.getPrototypeOf(c)),c?this.bootRdfContexts(((i=Object.getOwnPropertyDescriptor(c,"rdfContext"))==null?void 0:i.value)??null,{...n,...((o=Object.getOwnPropertyDescriptor(c,"rdfContexts"))==null?void 0:o.value)??{}},c.rdfsClass,{modelClass:c}):{...n,...l,default:n.default??"http://www.w3.org/ns/solid/terms#"}}static bootRdfsClasses(e,n,r,s){var i,o,a;const l=s??this;if(n&&n.length>0)return Qn((n==null?void 0:n.map(c=>this.rdfTerm(c,r)))??[]);if(e)return[this.rdfTerm(e,r)];const u=Object.getPrototypeOf(l);return u?this.bootRdfsClasses(((i=Object.getOwnPropertyDescriptor(u,"rdfsClass"))==null?void 0:i.value)??null,((o=Object.getOwnPropertyDescriptor(u,"rdfsClasses"))==null?void 0:o.value)??null,{...r,...((a=Object.getOwnPropertyDescriptor(u,"rdfContexts"))==null?void 0:a.value)??{}},u):[this.rdfTerm(this.getDefaultRdfContext(r)+this.modelName,r)]}static bootRdfsClassesAliases(e,n){return e.map(r=>Qn(r.map(s=>bt(s,this.rdfContexts,this.getDefaultRdfContext(n)))??[]))}static bootCollection(){const e=super.bootCollection();if(!e.match(/^\w+:\/\/.*\/$/))throw new ti(this.modelName,`SolidModel collections must be valid container urls (ending with a trailing slash), '${e}' isn't.`);return e}static bootFields(e,n,r,s){var i,o,a;const l=T3(this)??this.rdfContexts,u=this.getDefaultRdfContext(l),{fieldAliases:c}=super.bootFields(e,n,r,s);r.includes(St.CreatedAt)&&delete s[St.CreatedAt],r.includes(St.UpdatedAt)&&delete s[St.UpdatedAt];for(const[d,f]of Object.entries(s))f.rdfProperty=bt(f.rdfProperty??`${u}${d}`,l,u),f.rdfPropertyAliases=((i=f.rdfPropertyAliases)==null?void 0:i.map(h=>bt(h,l,u)))??[];return(o=s[n])==null||delete o.rdfProperty,(a=s[n])==null||delete a.rdfPropertyAliases,{fields:s,fieldAliases:c}}static getDefaultRdfContext(e){return e??(e=this.rdfContexts),e.default??""}static async performSchemaUpdate(e){try{e.primaryKey??(e.primaryKey="url");const n=this.bootRdfContexts(e.rdfContext??null,{...e.rdfContexts},e.rdfsClass,{skipParentSchema:!0}),r=this.bootRdfsClasses(e.rdfsClass??null,e.rdfsClasses??null,n),s=this.bootRdfsClassesAliases(e.rdfsClassesAliases??[],n);R3(this,n),await super.performSchemaUpdate(e),this.rdfContexts=n,this.rdfsClasses=r,this.rdfsClassesAliases=s,this.rdfsClass=e.rdfsClass,this.rdfContext=e.rdfContext,this.defaultResourceHash=e.defaultResourceHash??"it",this.slugField=e.slugField,this.history=e.history??!1,this.tombstone=e.tombstone??!0}finally{O3(this)}}initialize(e,n){this._documentExists=n,this._sourceDocumentUrl=this._sourceDocumentUrl??null,this._trackedDirtyAttributes={},this._removedResourceUrls=[],this._usesRdfAliases=!1,super.initialize(e,n)}initializeRelations(){super.initializeRelations(),this.initializeRelationsEnabling(),this.initializeMetadataRelation()}initializeRelationsEnabling(){this.static().hasAutomaticTimestamps()||this._proxy.relatedMetadata.disable(),this._proxy.tracksHistory()||(this._proxy.relatedOperations.disable(),this._proxy.relatedTombstone.disable()),this._proxy.relatedAuthorizations.disable()}initializeMetadataRelation(){if(!this._proxy.relatedMetadata.enabled)return;const e=this._proxy.relatedMetadata.relatedClass.newInstance(Fn({resourceUrl:this._attributes[this.static("primaryKey")],createdAt:this._attributes.createdAt,updatedAt:this._attributes.updatedAt}),!1);e.resourceUrl&&e.mintUrl(this.getDocumentUrl()||void 0,this._documentExists),this._proxy.relatedMetadata.attach(e),delete this._attributes.createdAt,delete this._attributes.updatedAt,delete this._originalAttributes.createdAt,delete this._originalAttributes.updatedAt}static(e){return super.static(e)}update(e){return this._lock.run(()=>super.update(e))}save(e){return this.static().withCollection(e||this.guessCollection(),()=>super.save())}async saveInDocument(e,n){return this.exists()?oC(this.getDocumentUrl()===e,Be,"Model already exists and is not stored in the given document"):this.mintUrl(e,!0,n),await this.save(),this}delete(){return this.static().softDeletesEnabled?this.softDelete():this.forceDelete()}forceDelete(){return this.static().withCollection(this.guessCollection(),()=>super.delete())}async softDelete(){if(!this.static().hasAutomaticTimestamps())throw new Be("Cannot soft delete a model without automatic timestamps");if(this.isSoftDeleted())return this;const e=new Date;return this.metadata.setAttribute(St.UpdatedAt,e),this.metadata.setAttribute("deletedAt",e),await this.save(),this}async registerInTypeIndex(e){const n=Xt("SolidDocument");await new n({url:this.getDocumentUrl()}).register(e,this.static())}mintUrl(e,n,r){this.setAttribute(this.static("primaryKey"),this.newUrl(e,r)),e&&(this._documentExists=n??!0)}toJsonLD(e={}){e={ids:!0,timestamps:!0,history:!0,...e};const n=this.clone();return e.ids||n.getRelatedModels().forEach(r=>r.setAttribute("url",null)),e.timestamps||n.getRelatedModels().forEach(r=>{r.relatedMetadata.related=null,delete r.relatedMetadata.__modelInSameDocument,delete r.relatedMetadata.__modelInOtherDocumentId,delete r.relatedMetadata.__newModel}),e.history||n.getRelatedModels().forEach(r=>{r.relatedOperations.related=[],r.relatedOperations.__newModels=[],delete r.relatedOperations.__modelsInSameDocument,delete r.relatedOperations.__modelsInOtherDocumentIds}),n.serializeToJsonLD()}async toTurtle(e={}){const n=await Nm(this.toJsonLD(e));return VU(n)}getIdAttribute(){return this.getAttribute("url")}setExists(e){this._documentExists=e&&this._documentExists,super.setExists(e)}documentExists(){return this._documentExists}setDocumentExists(e){this.getDocumentModels().forEach(n=>n._documentExists=e)}isDirty(e,n){var r,s;if(e)return this.static("timestamps").includes(e)?((r=this.metadata)==null?void 0:r.isDirty(e))||super.isDirty(e):super.isDirty(e);if(super.isDirty())return!0;if(n)return!!((s=this.metadata)!=null&&s.isDirty("deletedAt"));const i=this.getDocumentModels().filter(a=>a.isDirty(void 0,!0)),o=this.getRemovedDocumentModels();return i.length+o.length>0}isSoftDeleted(){var e;return!!((e=this.metadata)!=null&&e.deletedAt)}cleanDirty(e){super.cleanDirty(),this._documentExists=!0,this._trackedDirtyAttributes={},this._removedResourceUrls=[],Object.values(this._relations).filter(zl).filter(n=>n.enabled&&!nn()).forEach(n=>{if(n.useSameDocument){n.__modelsInSameDocument=n.__modelsInSameDocument||[],n.__modelsInSameDocument.push(...n.__newModels),n.__newModels=[];return}n.__newModels=n.__newModels.filter(r=>!r.exists())}),Object.values(this._relations).filter($f).filter(n=>n.enabled&&!!n.__newModel&&!nn()).forEach(n=>{var r;if(n.useSameDocument){n.__modelInSameDocument=n.__newModel,n.__newModel=void 0;return}n.__newModel=(r=n.__newModel)!=null&&r.exists()?void 0:n.__newModel}),e||this.getDocumentModels().forEach(n=>n.cleanDirty(!0))}fixMalformedAttributes(){super.fixMalformedAttributes(),this.relatedMetadata.enabled&&(this.static().hasAutomaticTimestamp(St.CreatedAt)&&(this.metadata.createdAt=this.getAttribute("createdAt")??new Date),this.static().hasAutomaticTimestamp(St.UpdatedAt)&&(this.metadata.updatedAt=this.getAttribute("updatedAt")??this.getAttribute("createdAt")??new Date))}ignoreRdfPropertyHistory(e,n){return!1}getDocumentUrl(){return this.url?wr(this.url):null}requireDocumentUrl(){return this.getDocumentUrl()??Ge(Be,"Failed getting required document url")}usesRdfAliases(){return this._usesRdfAliases}getSourceDocumentUrl(){return this._sourceDocumentUrl}setSourceDocumentUrl(e){this._sourceDocumentUrl=e}requireContainerUrl(){return this.getContainerUrl()??Ge(Be,"Failed getting required container url")}getContainerUrl(){const e=this.getDocumentUrl();return e?br(e):null}getSourceContainerUrl(){const e=this.getSourceDocumentUrl();return e?br(e):null}setAttribute(e,n){const r=this.getPrimaryKey();super.setAttribute(e,n);const s=this.getPrimaryKey();r!==s&&this.onPrimaryKeyUpdated(s,r)}unsetAttribute(e){var n,r;return((r=(n=this.static("fields"))==null?void 0:n[e])==null?void 0:r.type)===Re.Array?this.setAttributeValue(e,[]):super.unsetAttribute(e)}setCreatedAtAttribute(e){(this.metadata??this).setAttributeValue("createdAt",e)}setUpdatedAtAttribute(e){(this.metadata??this).setAttributeValue("updatedAt",e)}getCreatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("createdAt"))??super.getAttributeValue("createdAt")}getUpdatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("updatedAt"))??super.getAttributeValue("updatedAt")}getDeletedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("deletedAt"))??super.getAttributeValue("deletedAt")}getDocumentModels(){return nn()?[]:ly("document-models",this,()=>{const e=new Set;return this.populateDocumentModels(e),Ne(Array.from(e),n=>{n.forEach(r=>Dp("document-models",r,n))})})}getRemovedDocumentModels(){const e=new Set;for(const n of Object.values(this._relations))!n.enabled||!n.loaded||!uo(n)||!zl(n)||n.__removedDocumentModels.forEach(r=>e.add(r));return Array.from(e)}getDirtyDocumentModels(){return this.getDocumentModels().filter(e=>e.isDirty(void 0,!0))}requireRelation(e){return super.requireRelation(e)}getRelationModel(e){return super.getRelationModel(e)}getRelationModels(e){return super.getRelationModels(e)}setRelationModel(e,n){return super.setRelationModel(e,n)}setRelationModels(e,n){return super.setRelationModels(e,n)}getRelatedModels(){return ly("related-models",this,()=>{const e=new Set;return this.populateRelatedModels(e),Array.from(e)})}getDefaultCollection(){return`solid://${super.getDefaultCollection()}/`}usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}metadataRelationship(){const e=Xt("Metadata");return this.hasOne(e,"resourceUrl").usingSameDocument(!nn()).onDelete("cascade")}operationsRelationship(){return new q3(this).usingSameDocument(!nn()).onDelete("cascade")}tombstoneRelationship(){return new J3(this)}authorizationsRelationship(){return new V3(this)}onMoved(e,n){n&&this.setSourceDocumentUrl(n)}async createFromEngineDocument(e,n,r){const s=async()=>{const l=await this.parseEngineDocumentAttributes(e,n,r);l[this.static("primaryKey")]=new er(r||e);for(const[u,c]of Object.entries(this.static("fields")))c.deserialize&&(l[u]=c.deserialize(l[u]));return this.newInstance(l,!0)},i=$t(e),o=await In.resourceFromJsonLDGraph(n,r||i),a=await s();if(await a.loadDocumentModels(i,n),a.hasIncompleteAttributes())throw new Of(i);return Ne(a,l=>{l._sourceDocumentUrl=w0(i,{fragment:!1}),l._usesRdfAliases=this.static("rdfsClassesAliases").some(u=>!u.some(c=>!o.isType(c)))})}async createManyFromEngineDocuments(e){const n=Qn([this.static("rdfsClasses"),...this.static("rdfsClassesAliases")].flat()),r=await Promise.all(Object.entries(e).map(async([s,i])=>{const o=await In.fromJsonLD(i);return Promise.all(o.resources.filter(a=>!!a.url&&n.some(l=>a.isType(l))).map(async a=>{try{return await this.createFromEngineDocument(s,i,a.url)}catch(l){if(l instanceof Of)return null;throw l}}))}));return rn(r.flat())}async loadDocumentModels(e,n){const r=this.requireEngine();await Promise.all(Object.values(this._relations).filter(s=>s.enabled&&(uo(s)||s instanceof hu)).map(async s=>s.relatedClass.withEngine(r,()=>s.__loadDocumentModels(e,n))))}async beforeSave(e){var n;const r=this.isDirty(St.UpdatedAt)||!!((n=this.metadata)!=null&&n.isDirty(St.UpdatedAt));await super.beforeSave(),!this.url&&this.static("mintsUrls")&&!nn()&&this.mintUrl(),!e&&(await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()||s.beforeCreate())),await this.beforeDocumentSave(),await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()&&s.beforeUpdate())),this.reconcileModelTimestamps(r))}async beforeDocumentSave(){let e=[];const n=new Set,r=()=>(e=this.getDocumentModels().filter(s=>!n.has(s)),e.length>0);for(;r();)this.static("mintsUrls")&&!nn()&&this.mintDocumentModelsKeys(e),await Promise.all(e.map(async s=>{s!==this&&s.isDirty(void 0,!0)&&await s.beforeSave(!0),n.add(s)}))}async beforeCreate(){for(const e of Object.values(this._relations))!e.enabled||!N3(e)||e.__beforeParentCreate();this.metadata&&!this.metadata.resourceUrl&&this.static("defaultResourceHash")&&!nn()&&(this.metadata.resourceUrl=this.url??`#${this.static("defaultResourceHash")}`,this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists))}async beforeUpdate(){this.tracksHistory()&&this.isDirty(void 0,!0)&&(await this.addDirtyHistoryOperations(),await Promise.all(this.operations.map(async e=>{e.exists()||(await e.beforeCreate(),await e.beforeSave(!0),this.mintDocumentModelsKeys([e]))})))}async performSave(){const e=this.getDirtyDocumentModels().map(n=>[n,n.exists()]);try{await super.performSave()}catch(n){if(!(n instanceof Rm))throw n;this.url=this.newUniqueUrl(this.url),await super.performSave()}e.forEach(([n,r])=>{n._wasRecentlyCreated=n._wasRecentlyCreated||!r})}async performDelete(){this.tracksHistory()&&this.leavesTombstone()&&this.relatedTombstone.create(),await super.performDelete()}async afterSave(e){if(await super.afterSave(),!e){this.metadata&&this.metadata.resourceUrl!==this.url&&(this.metadata.resourceUrl=this.url,nn()||this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists)),await Promise.all(this.getDirtyDocumentModels().map(n=>n.afterSave(!0)));for(const n of Object.values(this._relations))!n.enabled||!F3(n)||n.__afterParentSave()}}onPrimaryKeyUpdated(e,n){var r,s;const i=this.getDocumentUrl()||void 0,o=this.documentExists(),a=Object.values(this._relations).filter(l=>l.enabled&&Hm(l));for(const l of a)l.getLoadedModels().forEach(u=>{const c=u.getAttribute(l.foreignKeyName);u.setAttribute(l.foreignKeyName,Array.isArray(c)?Ne(c.slice(0),d=>i0(d,n,e)):e)});nn()||((r=this.metadata)==null||r.mintUrl(i,o),(s=this.operations)==null||s.map(l=>l.mintUrl(i,o)))}async syncDirty(){const e=this.getDocumentUrl(),n=()=>this.requireEngine().create(e?Tt(e):this.static("collection"),this.toEngineDocument(),e||void 0),r=()=>this.requireEngine().update(Tt(e),e,{"@graph":{$push:this.serializeToJsonLD()}}),s=()=>this.requireEngine().update(Tt(e),e,this.getDirtyEngineDocumentUpdates());return await(async()=>{if(!this._documentExists){const i=this.static("defaultResourceHash"),o=await n();return this.getSerializedPrimaryKey()??(i&&!nn()?`${o}#${i}`:o)}return this._exists?(await s(),this.getSerializedPrimaryKey()):(await r(),this.getSerializedPrimaryKey())})()??Ge(Be,"Missing primary key")}async deleteModelsFromEngine(e){await this.deleteModels(e)}hasOne(e,n,r){return new G3(this,e,n,r)}hasMany(e,n,r){return new SE(this,e,n,r)}belongsToOne(e,n,r){return new K3(this,e,n,r)}belongsToMany(e,n,r){return new Wm(this,e,n,r)}isContainedBy(e){return new CE(this,e)}documentContainsMany(e){return new hu(this,e)}toEngineDocument(){return{"@graph":this.getDirtyDocumentModels().map(e=>e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0}))}}getDirtyEngineDocumentUpdates(e){const n=[],r=this.requireEngine(),s=this.getDirtyDocumentModels(),i=this.getRemovedDocumentModels();if(!e){for(const o of s){if(o===this)continue;if(!o.exists()){n.push({$push:o.serializeToJsonLD({includeRelations:!1})});continue}const a=o.withEngine(r,l=>l.getDirtyEngineDocumentUpdates(!0))["@graph"];"$apply"in a?n.push(...a.$apply):n.push(a)}for(const o of i)o.getDocumentModels().forEach(a=>n.push({$updateItems:{$where:{"@id":a.url},$unset:!0}}))}if(super.isDirty()&&this.url){const o=super.getDirtyEngineDocumentUpdates(),a=!this.usingSolidEngine();n.push({$updateItems:{$where:{"@id":this.url},$update:this.convertEngineUpdatesToJsonLD(o,a)}})}return this._removedResourceUrls.forEach(o=>n.push({$updateItems:{$where:{"@id":o},$unset:!0}})),n.length===1?{"@graph":n[0]}:{"@graph":{$apply:n}}}async parseEngineDocumentAttributes(e,n,r){return this.parseEngineDocumentAttributesFromJsonLD(n,r||e)}castAttribute(e,n={}){const r=()=>{var s;const i=typeof e>"u"||e===null;switch((s=n.definition)==null?void 0:s.type){case Re.Array:{const o=i?[]:mn(e),a=Qn(o);return o.length!==a.length&&console.warn("An array field had duplicate values, this is not supported in Solid models."),a}case Re.Any:if(!Array.isArray(e))return e;if(e.length===0)return;if(e.length===1)return e[0];break}return i?void 0:e};return super.castAttribute(r(),n)}newUrl(e,n){return e=e??this.newUrlDocumentUrl(),n=n??this.newUrlResourceHash(),n?`${e}#${n}`:e}newUrlDocumentUrl(){var e;const n=((e=this._sourceSubject)==null?void 0:e.documentName)??this.newUrlDocumentUrlSlug()??jn();return To(this.static("collection"),n)}newUrlDocumentUrlSlug(){const e=this.static("slugField"),n=e&&this.getAttribute(e);return(n&&Pp(n))??null}newUrlResourceHash(){var e;return((e=this._sourceSubject)==null?void 0:e.resourceHash)??this.static("defaultResourceHash")}newUniqueUrl(e){var n;e=e??this.newUrl();const r=(n=ol(e))==null?void 0:n.fragment;return`${wr(e)}-${h0()}${r?`#${r}`:""}`}guessCollection(){if(this.url)return br(this.url)??void 0}mintDocumentModelsKeys(e){const n=this.requireDocumentUrl(),r=this._documentExists;for(const s of e)s.url||s.mintUrl(n,r,jn());for(const s of e)for(const i of Object.values(s._relations))i.enabled&&i.getLoadedModels().forEach(o=>i.setForeignAttributes(o))}populateRelatedModels(e){if(!e.has(this)){e.add(this);for(const n of Object.values(this._relations))n.enabled&&($f(n)&&n.__newModel&&n.__newModel.populateRelatedModels(e),zl(n)&&n.__newModels.map(r=>r.populateRelatedModels(e)),n.getLoadedModels().forEach(r=>r.populateRelatedModels(e)))}}populateDocumentModels(e){if(e.has(this))return;const n=this.getDocumentUrl(),r=(s,i)=>n&&i.getDocumentUrl()===n||uo(s)&&s.useSameDocument;e.add(this);for(const s of Object.values(this._relations)){const i=s instanceof hu;if(!(!s.enabled||!s.loaded||!i&&!uo(s))){if($f(s)&&s.__newModel&&r(s,s.__newModel)&&s.__newModel.populateDocumentModels(e),zl(s))for(const o of s.__newModels)r(s,o)&&o.populateDocumentModels(e);s.getLoadedModels().filter(o=>i||r(s,o)).forEach(o=>o.populateDocumentModels(e))}}}};De(kt,"primaryKey","url"),De(kt,"fields"),De(kt,"classFields",["_history","_publicPermissions","_tombstone"]),De(kt,"rdfContext"),De(kt,"rdfContexts",{}),De(kt,"rdfsClass"),De(kt,"rdfsClasses",[]),De(kt,"rdfsClassesAliases",[]),De(kt,"reservedRelations",["metadata","operations","tombstone","authorizations"]),De(kt,"defaultResourceHash","it"),De(kt,"slugField"),De(kt,"mintsUrls",!0),De(kt,"history",!1),De(kt,"tombstone",!0),De(kt,"rdfPropertyFields"),De(kt,"historyDisabled",new WeakMap),De(kt,"softDeletesEnabled",!1);function Xn(t,e){return xE(t,kt,e)}const RE={resourceUrl:{type:Re.Key,required:!0,rdfProperty:"resource"},date:{type:Re.Date,required:!0}},Z3=Xn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Operation",timestamps:!1,fields:RE});let Bc=class extends Z3{apply(e){}isInception(e){var n,r;return((r=(n=e.metadata)==null?void 0:n.createdAt)==null?void 0:r.getTime())===this.date.getTime()}newUrl(e,n){if(!this.resourceUrl)return super.newUrl(e,n);const r=n??jn();return this.resourceUrl.includes("#")?`${this.resourceUrl}-operation-${r}`:`${this.resourceUrl}#operation-${r}`}};const Vc={...RE,property:{type:Re.Key,required:!0}},eq=Xn(Bc,{rdfsClass:"PropertyOperation",fields:Vc});let Ms=class extends eq{apply(e){const n=e.static().getRdfPropertyField(this.property);n&&this.applyPropertyUpdate(e,n)}applyPropertyUpdate(e,n){}};const tq=Xn(Ms,{rdfsClass:"AddPropertyOperation",fields:{...Vc,value:{type:Re.Any,required:!0}}});class nq extends tq{applyPropertyUpdate(e,n){const r=e.getAttributeValue(n);if(!Array.isArray(r))throw new Be("Can't apply Add operation to non-array field (should be Set instead)");e.setAttributeValue(n,r.concat(mn(this.value)))}}const rq=Xn(Bc,{rdfsClass:"DeleteOperation"});class sq extends rq{apply(e){e.metadata.setAttribute("deletedAt",this.date)}}const iq=Xn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Metadata",timestamps:!1,fields:{resourceUrl:{type:Re.Key,required:!0,rdfProperty:"resource"},createdAt:Re.Date,updatedAt:Re.Date,deletedAt:Re.Date}});class Gm extends iq{getCreatedAtAttribute(){return this.getAttributeValue("createdAt")}getUpdatedAtAttribute(){return this.getAttributeValue("updatedAt")}newUrl(e,n){return this.resourceUrl?this.resourceUrl.includes("#")?`${this.resourceUrl}-metadata`:`${this.resourceUrl}#metadata`:super.newUrl(e,n)}}const oq=Xn(Ms,{rdfsClass:"RemovePropertyOperation",fields:{...Vc,value:{type:Re.Any,required:!0}}}),TE=class np extends oq{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=e.getAttributeValue(n),i=r.deserialize?r.deserialize(s):s;if(!Array.isArray(i))throw new Be("Can't apply Remove operation to non-array field (use Unset instead)");e.setAttributeValue(n,ir(i,this.castModelAttribute(e,n,mn(this.value))))}castModelAttribute(e,n,r){const s=e.constructor;return(np.attributeCasters.get(s)??this.createAttributeCaster(s))(n,r)}createAttributeCaster(e){const n=(class extends e{castAttribute(r,s={}){return super.castAttribute(r,s)}}).pureInstance();return Ne((r,s)=>n.castAttribute(s,{definition:n.static().getFieldDefinition(r)}),r=>np.attributeCasters.set(e,r))}};De(TE,"attributeCasters",new WeakMap);let aq=TE;const lq=Xn(Ms,{rdfsClass:"SetPropertyOperation",fields:{...Vc,value:{type:Re.Any,required:!0}}});class uq extends lq{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=r.deserialize?r.deserialize(this.value):this.value;e.setAttributeValue(n,s)}}let Cs=class extends Gm{};De(Cs,"rdfsClass","Tombstone");const cq=Xn(Ms,{rdfsClass:"UnsetPropertyOperation"});class dq extends cq{applyPropertyUpdate(e,n){e.unsetAttribute(n)}}const fq={AddPropertyOperation:nq,DeleteOperation:sq,Metadata:Gm,Operation:Bc,PropertyOperation:Ms,RemovePropertyOperation:aq,SetPropertyOperation:uq,Tombstone:Cs,UnsetPropertyOperation:dq},hq=Xn({rdfContexts:{acl:"http://www.w3.org/ns/auth/acl#"},rdfsClass:"Authorization",timestamps:!1,fields:{agents:{rdfProperty:"agent",type:Re.Array,items:Re.Key},agentClasses:{rdfProperty:"agentClass",type:Re.Array,items:Re.Key},agentGroups:{rdfProperty:"agentGroup",type:Re.Array,items:Re.Key},accessTo:{type:Re.Array,items:Re.Key},accessToClasses:{rdfProperty:"accessToClass",type:Re.Array,items:Re.Key},default:{type:Re.Array,items:Re.Key},modes:{rdfProperty:"mode",type:Re.Array,items:Re.Key}}}),pq={[ni.Read]:"http://www.w3.org/ns/auth/acl#Read",[ni.Write]:"http://www.w3.org/ns/auth/acl#Write",[ni.Append]:"http://www.w3.org/ns/auth/acl#Append",[ni.Control]:"http://www.w3.org/ns/auth/acl#Control"};class OE extends hq{static get fetch(){return this.requireFetch()}static modeFromSolidDocumentPermission(e){return pq[e]}}const mq=Xn({rdfsClass:"ldp:Resource",timestamps:!1,fields:{updatedAt:{type:Re.Date,rdfProperty:"purl:modified"}}}),gq=Xn({rdfContexts:{solid:"http://www.w3.org/ns/solid/terms#"},rdfsClass:"TypeRegistration",timestamps:!1,fields:{forClass:{type:Re.Array,items:Re.Key},instance:Re.Key,instanceContainer:Re.Key}});let Xa=class extends gq{};class ho extends mq{static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof qm?r.getFetch():void 0;return(await a3(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}async register(e,n){const r=new Xa({forClass:n.rdfsClasses[0],instance:this.url});if(typeof e=="string"){r.mintUrl(e,!0,jn()),await r.withEngine(this.requireEngine(),()=>r.save(Tt(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),await e.relatedRegistrations.create(r)})}}const yq=["http://www.w3.org/ns/iana/media-types/text/turtle#Resource","http://www.w3.org/ns/iana/media-types/application/rdf+xml#Resource","http://www.w3.org/ns/iana/media-types/application/ld+json#Resource","http://www.w3.org/ns/ldp#Container","http://www.w3.org/ns/ldp#BasicContainer"];class vq extends Wm{constructor(e){super(e,ho,"resourceUrls")}get container(){return this.parent}async load(){if(this.isEmpty())return this.related=[];if(this.parent.usingSolidEngine())return super.load();const e=await this.parent.requireEngine().readMany(this.container.requireDocumentUrl());return this.related=Object.entries(e).map(([n,r])=>new ho({url:n,updatedAt:this.getLatestUpdateDate(r["@graph"])})),this.related}async __loadDocumentModels(e,n){if(!ho.usingSolidEngine())return super.__loadDocumentModels(e,n);const r=this.parent.resourceUrls,s=In.reduceJsonLDGraph(n,this.parent.url),i=n["@graph"].filter(a=>{if(r.indexOf(a["@id"])===-1)return!1;const l=mn(a["@type"]??[]);return yq.some(u=>l.includes(u))}).map(a=>a["@id"]),o=await Promise.all(i.map(a=>ho.createFromEngineDocument(e,s,a)));this.protectedSolidBelongsTo.loadDocumentModels(o,[])}getLatestUpdateDate(e){const n=e.reduce((r,s)=>{const{"@value":i}=s["purl:modified"]??s["http://purl.org/dc/terms/modified"]??s["purl:created"]??s["http://purl.org/dc/terms/created"]??{"@value":0},o=new Date(i).getTime();return Math.max(r,o)},0);return new Date(n)}}const bq=Xn({rdfsClass:"ldp:Resource",timestamps:!1,fields:{types:{type:Re.Array,rdfProperty:"rdf:type",items:Re.Key},updatedAt:{type:Re.Date,rdfProperty:"purl:modified"}}});let po=class extends bq{};class wq extends Wm{constructor(e){super(e,po,"resourceUrls")}get container(){return this.parent}async load(){if(this.isEmpty())return this.related=[];if(this.parent.usingSolidEngine())return super.load();const e=await this.parent.requireEngine().readMany(this.container.requireDocumentUrl());return this.related=Object.entries(e).map(([n,r])=>new po({url:n,updatedAt:this.getLatestUpdateDate(r["@graph"])})),this.related}async __loadDocumentModels(e,n){if(!po.usingSolidEngine())return super.__loadDocumentModels(e,n);const r=this.parent.resourceUrls,s=In.reduceJsonLDGraph(n,this.parent.url),i=n["@graph"].filter(a=>r.indexOf(a["@id"])!==-1).map(a=>a["@id"]),o=await Promise.all(i.map(a=>po.createFromEngineDocument(e,s,a)));this.protectedSolidBelongsTo.loadDocumentModels(o,[])}getLatestUpdateDate(e){const n=e.reduce((r,s)=>{const{"@value":i}=s["purl:modified"]??s["http://purl.org/dc/terms/modified"]??s["purl:created"]??s["http://purl.org/dc/terms/created"]??{"@value":0},o=new Date(i).getTime();return Math.max(r,o)},0);return new Date(n)}}class DE extends wo{constructor(e,n){super(e,n,"resourceUrls","url")}setForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||this.parent.resourceUrls.includes(n))return;const r=this.parent.resourceUrls.concat([n]);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||!this.parent.resourceUrls.includes(n))return;const r=ir(this.parent.resourceUrls,n);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}async load(){return this.related=this.isEmpty()?[]:await this.relatedClass.from(this.parent.url).all({$in:this.parent.resourceUrls}),this.related}async create(e={}){this.assertParentExists();const n=this.relatedClass.newInstance(e);return!n.url&&n.static("mintsUrls")&&!nn()&&await this.relatedClass.withCollection(this.parent.url,()=>n.mintUrl()),Ne(this.attach(n),r=>this.save(r))}async save(e){return this.assertParentExists(),Ne(e,async()=>{await e.save(this.parent.url),this.setForeignAttributes(e),await this.parent.save()})}async delete(e){var n;const r=e instanceof this.relatedClass?e:(n=this.related)==null?void 0:n.find(s=>s.url===e);r&&(await r.delete(),this.related&&(this.related=ir(this.related,r)))}assertParentExists(){if(!this.parent.exists())throw new Be("Cannot save a model because the container doesn't exist")}onRelatedUpdated(e,n){if(this!==this.parent.requireRelation(this.name))return;const{added:r,removed:s}=qo(e??[],n??[]);an(this.parent),e==null||e.forEach(i=>an(i)),n==null||n.forEach(i=>an(i)),s.forEach(i=>this.clearInverseRelations(i)),r.forEach(i=>this.initializeInverseRelations(i))}}const _q={name:{type:Re.String,rdfProperty:"rdfs:label"},description:{type:Re.String,rdfProperty:"rdfs:comment"},resourceUrls:{type:Re.Array,rdfProperty:"ldp:contains",items:Re.Key},createdAt:{type:Re.Date,rdfProperty:"purl:created"},updatedAt:{type:Re.Date,rdfProperty:"purl:modified"}},xq=Xn({rdfsClass:"ldp:Container",timestamps:!1,fields:_q});let Er=class extends xq{static boot(e){super.boot(e),this.slugField=this.slugField??"name"}static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof qm?r.getFetch():void 0;return(await o3(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}documentsRelationship(){return new vq(this)}resourcesRelationship(){return new wq(this)}markAttributeDirty(e,n,r){return e==="resourceUrls"&&this.usingSolidEngine()?!1:super.markAttributeDirty(e,n,r)}async register(e,n){const r=new Xa({forClass:mn(n).map(s=>s.rdfsClasses).flat(),instanceContainer:this.url});if(typeof e=="string"){r.mintUrl(e,!0,jn()),await r.withEngine(this.requireEngine(),()=>r.save(Tt(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),!e.registrations.some(s=>r.instanceContainer===s.instanceContainer&&!r.forClass.some(i=>!s.forClass.includes(i)))&&await e.relatedRegistrations.create(r)})}static(e){return super.static(e)}ignoreRdfPropertyHistory(e,n){return n??(n=this.usingSolidEngine()),n&&e===jm}contains(e){return new DE(this,e)}newUrl(){return ah(this.newUrlDocumentUrl())}newUniqueUrl(e){e=e??this.newUrl();const n=v0(e);return ah(Tt(e),`${n}-${h0()}`)}};De(Er,"defaultResourceHash",null);const Eq=Xn({rdfContext:"http://www.w3.org/ns/solid/terms#",rdfsClass:"TypeIndex",timestamps:!1,fields:{registrationUrls:{type:Re.Array,items:Re.Key,rdfProperty:"hasTypeRegistration"}}});class ri extends Eq{static async createPublic(e){const n=await s3(e,ri.requireFetch()),r=await this.findOrFail(n);return await r.updatePublicPermissions([ni.Read]),r}static async createPrivate(e){const n=await i3(e,ri.requireFetch());return await this.findOrFail(n)}registrationsRelationship(){return nn()?this.belongsToMany(Xa,"registrationUrls"):new hu(this,Xa)}async findContainer(e,n){await this.loadRelationIfUnloaded("registrations");const r=this.registrations.filter(s=>s.instanceContainer&&vC(s.forClass,e.rdfsClasses));return WC(r,async s=>s!=null&&s.instanceContainer?(n??Er).find(s.instanceContainer):null)}}function kE(t){return"rdfContexts"in t}function xs(t){return t instanceof Er}function Mo(t){return t.rdfsClasses.includes(ji)}const PE={...fq,SolidACLAuthorization:OE,SolidContainer:Er,SolidDocument:ho,SolidResource:po,SolidTypeIndex:ri,SolidTypeRegistration:Xa},Aq=new Set(Object.values(PE));function Sq(){Om(PE)}class Iq{constructor(e,n){De(this,"engine"),De(this,"metadata"),De(this,"active",{}),this.engine=n,this.metadata=new aC(`${e}-documents-cache`)}has(e,n){return!!this.active[this.getDocumentKey(e,n)]}async get(e,n){const r=await this.metadata.get(this.getDocumentKey(e,n));if(r!=null&&r.tombstone){const s=new Date(r.modifiedAt);return{"@graph":[{"@id":r.tombstone.url,"@type":"https://vocab.noeldemartin.com/crdt/Tombstone","https://vocab.noeldemartin.com/crdt/deletedAt":{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":bE(s)},"https://vocab.noeldemartin.com/crdt/resource":{"@id":r.tombstone.resourceUrl}}]}}try{return await this.engine.readOne(e,n)}catch(s){if(s instanceof Lr)return null;throw s}}async remember(e,n,r,s={}){const i={modifiedAt:typeof r=="number"?r:r.getTime()};s.tombstone&&(i.tombstone=s.tombstone),await this.metadata.set(this.getDocumentKey(e,n),i)}async forget(e,n){await this.metadata.delete(this.getDocumentKey(e,n))}async activate(e,n,r){const s=await this.metadata.get(this.getDocumentKey(e,n));this.active[this.getDocumentKey(e,n)]=!!(s!=null&&s.modifiedAt)&&s.modifiedAt>=r}async clear(){await this.metadata.clear(),this.metadata.close()}getDocumentKey(e,n){return`${e}-${n}`}}const Hl={clientID:{client_id:"https://noeldemartin.github.io/manga-reader/clientid.jsonld",client_name:"Manga Reader",redirect_uris:["https://noeldemartin.github.io/manga-reader/"]}};function Cq(t){return Xt(t)}const Rq=Object.freeze(Object.defineProperty({__proto__:null,model:Cq},Symbol.toStringTag,{value:"Module"}));let Jm=new WeakMap;function Tq(t){const e=Hx(void 0,{equals:(i,o)=>i.id===o.id}),n=J(()=>e.values()),r=new Set([t.collection]),s={modelsSet:e,modelsArray:n,collectionsSet:r,async refresh(){const i=new Set;for(const o of r)(await t.withCollection(o,()=>t.all())).forEach(a=>i.add(a));e.reset(i)}};return Jm.set(t,s),t.on("created",i=>e.add(Ye(i))),t.on("deleted",i=>e.delete(Ye(i))),t.on("updated",i=>e.add(Ye(i))),We.on("purge-storage",()=>e.clear()),We.on("cloud:migration-completed",()=>s.refresh()),We.on("cloud:migration-cancelled",()=>s.refresh()),We.on("cloud:backup-completed",()=>s.refresh()),We.emit("soukai:track-models",t),s}function Oq(t){return"isSoftDeleted"in t?t.isSoftDeleted():!1}function gl(){return Jm}function Dq(t){return Jm.get(t)??Tq(t)}function kq(t){return ic((e,n)=>{let r;const s=[],i=a=>r instanceof $i&&a.id===r.id&&n(),o=()=>{s.forEach(a=>a()),s.splice(0,s.length)};return tl()&&Zu(o),qt(()=>{const a=t();r instanceof $i&&(!Yt(a,$i)||a.static()!==r.static())&&o(),r=a,n(),r instanceof $i&&!s.length&&(s.push(We.on("cloud:migration-completed",n)),s.push(We.on("cloud:migration-cancelled",n)),s.push(r.static().on("modified",i)),s.push(r.static().on("updated",i)),s.push(r.static().on("relation-loaded",i)))}),{get:()=>Ne(r,()=>e()),set:()=>console.warn("Computed model ref was not set (it is immutable).")}})}function Xm(t,e={}){var n;const r=((n=gl().get(t))==null?void 0:n.modelsArray.value)??[];return e.includeSoftDeleted?r:r.filter(s=>!Oq(s))}function Pq(t){return gl().has(t)}function ow(t,e){hn(gl().get(t),"Failed ignoring models collection, please track the model first using trackModels()").collectionsSet.delete(e)}async function ci(t,e,n={}){const r=n.refresh??!0,s=hn(gl().get(t),"Failed tracking models collection, please track the model first using trackModels()");if(!s.collectionsSet.has(e)&&(s.collectionsSet.add(e),r)){const i=await t.withCollection(e,()=>t.all());for(const o of i)s.modelsSet.add(o)}}async function $q(t,e){const{service:n,property:r,transform:s,...i}=e??{},o=s??(u=>u),a=gl().has(t),l=Dq(t);for(const[u,c]of Object.entries(i))t.on(u,c);n&&r&&qt(()=>n.setState(r,o(l.modelsArray.value))),a||await l.refresh()}function Lq(){globalThis.testingRuntime&&Object.assign(globalThis.testingRuntime,Rq)}function Mq(t){return{install(){const e=new Sj(fm());Lq(),q1(e),Pj(t.models),We.on("purge-storage",()=>e.purgeDatabase())}}}var Nq=Object.defineProperty,Fq=(t,e,n)=>e in t?Nq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vr=(t,e,n)=>Fq(t,typeof e!="symbol"?e+"":e,n);class jq extends cr{}function Uq(t,e){return t}class Hu extends cr{constructor(e,n,r){super(Uq(e),r),vr(this,"description"),this.description=n}}let qq=class extends cr{constructor(e,n){super(`Container at ${e.url} is already in use`,n)}},$E=class{constructor(){vr(this,"name"),vr(this,"authenticatedFetch"),vr(this,"booted"),vr(this,"listeners",S0([])),vr(this,"_engine")}get engine(){return this._engine=this._engine??new qm(this.requireAuthenticatedFetch()),this._engine}getAuthenticatedFetch(){return this.authenticatedFetch??null}requireAuthenticatedFetch(){return this.authenticatedFetch??Ge("Authenticated fetch is not ready")}addListener(e){return this.listeners.includes(e)||this.listeners.push(e),()=>{this.removeListener(e)}}removeListener(e){this.listeners.includes(e)&&this.listeners.remove(e)}async boot(){if(this.booted)return this.booted;this.booted=new Nr,await this.restoreSession(),this.booted.resolve()}async initAuthenticatedFetch(e){this.authenticatedFetch=e,await this.notifyListeners("onAuthenticatedFetchReady",e)}async startSession(e){const n={authenticator:this,...e};return await this.notifyListeners("onSessionStarted",n),n}async failSession(e,n){await this.notifyListeners("onSessionFailed",e,n)}async endSession(){await this.notifyListeners("onSessionEnded")}async notifyListeners(e,...n){await Promise.all(this.listeners.toArray().map(async r=>{const s=r[e];await(s==null?void 0:s(...n))}))}};const Lf="inrupt-authenticator";let Bq=class extends $E{constructor(){super(...arguments),vr(this,"_events"),vr(this,"_fetch"),vr(this,"_login"),vr(this,"_logout"),vr(this,"_handleIncomingRedirect")}async login(e){mr.set(Lf,e);const n={oidcIssuer:e};return Hl.clientID&&(n.clientId=Hl.clientID.client_id,n.clientName=Hl.clientID.client_name,n.redirectUrl=Hl.clientID.redirect_uris[0]),await this._login(n),await Hn({seconds:60}),Ge("Browser should have redirected, but it didn't")}async logout(){await this._logout(),await this.endSession()}async restoreSession(){const{events:e,fetch:n,handleIncomingRedirect:r,login:s,logout:i}=await Mi(async()=>{const{events:o,fetch:a,handleIncomingRedirect:l,login:u,logout:c}=await import("./InruptAuthenticator.lazy-BvpQLGoj-BcuBhoBT.js");return{events:o,fetch:a,handleIncomingRedirect:l,login:u,logout:c}},[]);this._fetch=n,this._login=s,this._logout=i,this._events=e,this._handleIncomingRedirect=r,await this.loginFromRedirect()}async loginFromRedirect(){const e=mr.get(Lf);if(!e)return;this._events().on("error",(r,s)=>{r??(r="Error using Inrupt Authenticator method"),typeof s=="object"?this.failSession(e,new Hu(r,null,{cause:s})):this.failSession(e,new Hu(r,s))});const n=await this._handleIncomingRedirect(globalThis.location.href);mr.remove(Lf),n!=null&&n.isLoggedIn&&n.webId&&await this.initSession(n.webId)}async initSession(e){await this.initAuthenticatedFetch(this._fetch);try{const n=await at.requireUserProfile(e);await this.startSession({user:n,loginUrl:e})}catch(n){await this.failSession(e,n)}}};class Vq extends $E{constructor(){super(),vr(this,"store"),this.store=cL("legacy-authenticator",{})}async login(e,n){const{SolidAuthClient:r}=await Mi(async()=>{const{SolidAuthClient:s}=await import("./LegacyAuthenticator.lazy-ChFFqP14-ANe1Q6A3.js");return{SolidAuthClient:s}},[]);throw this.store.webId=n==null?void 0:n.webId,this.store.loginUrl=(n==null?void 0:n.oidcIssuerUrl)??e,await r.login(this.store.loginUrl)===null?(delete this.store.webId,delete this.store.loginUrl,new Hu("Could not log in with Solid using the legacy authenticator")):(await Hn({seconds:60}),new Error("Browser should have redirected, but it didn't"))}async logout(){const{SolidAuthClient:e}=await Mi(async()=>{const{SolidAuthClient:n}=await import("./LegacyAuthenticator.lazy-ChFFqP14-ANe1Q6A3.js");return{SolidAuthClient:n}},[]);delete this.store.webId,delete this.store.loginUrl,await e.logout(),await this.endSession()}async restoreSession(){if(!this.store.loginUrl)return;const{SolidAuthClient:e}=await Mi(async()=>{const{SolidAuthClient:s}=await import("./LegacyAuthenticator.lazy-ChFFqP14-ANe1Q6A3.js");return{SolidAuthClient:s}},[]),n=await e.currentSession(),r=hn(this.store.loginUrl);await this.initAuthenticatedFetch((s,i)=>e.fetch(s,i));try{const s=await at.requireUserProfile(hn((n==null?void 0:n.webId)??this.store.webId));await this.startSession({user:s,loginUrl:r})}catch(s){await this.failSession(r,s)}}}const Ym={},zq={inrupt:new Bq,legacy:new Vq};function Hq(t){Ym.default=t}function LE(t){return Ym[t]}function Kq(t){Object.entries(t).forEach(([e,n])=>Wq(e,n))}function Wq(t,e){Ym[t]=e,e.name=e.name??t}const Qm={autoReconnect:!0},Gq=Wi({name:"solid",persist:["autoReconnect","dismissed","previousSession","profiles","staleProfiles","collections"],initialState:{autoReconnect:Qm.autoReconnect,dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,loginOngoing:!1,preferredAuthenticator:null,previousSession:null,profiles:{},session:null,loginStale:!1,staleProfiles:[],collections:{}},serialize(t){var e;return((e=t.previousSession)==null?void 0:e.error)instanceof Error&&(t.previousSession.error=t.previousSession.error.message),t},computed:{user:t=>{var e,n;return((e=t.session)==null?void 0:e.user)??((n=t.previousSession)==null?void 0:n.profile)??null},authenticator:t=>{var e;return((e=t.session)==null?void 0:e.authenticator)??null},fetch(){var t;return((t=this.authenticator)==null?void 0:t.getAuthenticatedFetch())??globalThis.fetch.bind(globalThis)},error(t){var e;return t.loginStartupError?t.loginStartupError??null:t.ignorePreviousSessionError?null:((e=t.previousSession)==null?void 0:e.error)??null}}});let Jq=class extends Gq{isLoggedIn(){return!!this.session}wasLoggedIn(){return!!this.previousSession}hasLoggedIn(){return!!(this.session||this.previousSession)}requireAuthenticator(){return this.authenticator??Ge("Could not get authenticator")}requireUser(){return this.user??Ge("Could not get user profile (are you logged in?)")}requireUserProfile(e){return this.getUserProfile(e,{required:!0})}async getUserProfile(e,n={}){var r;let s=null;const i=n.markStale??!((r=this.authenticator)!=null&&r.getAuthenticatedFetch()),o=this.profiles[e]??await Ne(await QU(e,{fetch:this.fetch,required:n.required??!1,onLoaded(a){s=a}}),async a=>{a&&(s&&await We.emit("solid:user-profile-loaded",[a,s]),this.rememberProfile(a))});return o&&i&&this.setState({staleProfiles:Qn(this.staleProfiles.concat([o.webId]))}),o}async refreshUserProfile(){if(!this.isLoggedIn())return;this.setState({profiles:di(this.profiles,[this.user.webId])});const e=await this.requireUserProfile(this.user.webId);this.setState({session:{...this.session,user:e}})}async login(e,n={}){if(fi()&&e==="dev"&&(e="http://localhost:3000"),/^https?:\/\//.test(e)||(n.fallbackUrl??(n.fallbackUrl=`http://${e}`),e=`https://${e}`),this.isLoggedIn())return!0;if(this.loginOngoing)throw new Error("Authentication already in progress");return n.loading?Ht.loading(Le("solid.loginOngoing","Logging in..."),()=>this.attemptLogin(e,n)):this.attemptLogin(e,n)}async reconnect(e={}){const{force:n,...r}=e;this.isLoggedIn()||!this.previousSession||this.previousSession.error!==null&&!n||await this.login(this.previousSession.loginUrl,{authenticator:this.previousSession.authenticator,...r,loading:r.loading??!1})}async logout(e=!1){var n,r;const s=!lt.plugin("@aerogel/local-first")||!!((n=lt.service("$cloud"))!=null&&n.ready),i=!lt.plugin("@aerogel/local-first")||!!((r=lt.service("$cloud"))!=null&&r.dirty),[o,a]=e?[!0,{wipeLocalData:s}]:await Ht.confirm(s?Le("solid.logoutConfirmTitle","Log out from this device?"):Le("solid.disconnectConfirmTitle","Disconnect account?"),s?i?Le("solid.logoutConfirmMessageWithLocalChanges","There are some changes that haven't been synchronized and will be lost, but the rest of the data will remain in your Solid POD."):Le("solid.logoutConfirmMessage","Logging out will remove all the data from this device, but you'll still have it in your Solid POD."):Le("solid.disconnectConfirmMessage","You'll need to introduce your credentials again to connect to your Solid POD."),{acceptText:Le("solid.logoutConfirmAccept","Log out"),acceptVariant:"danger",cancelText:Le("solid.logoutConfirmCancel",Le("ui.cancel","Cancel")),checkboxes:s?i?{wipeLocalData:{label:Le("solid.logoutConfirmWipeNotice","I understand that changes that haven't been synchronized will be lost."),default:!1,required:!0}}:void 0:{wipeLocalData:{label:Le("solid.logoutConfirmWipe","Also remove all existing data"),default:!1}}});o&&this.previousSession&&await Ht.loading(Le("solid.logoutOngoing","Logging out..."),async()=>{this.setState({dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,previousSession:null,...Qm}),this.isLoggedIn()&&await this.authenticator.logout(),(a.wipeLocalData??!0)&&await Oc.purge(),await We.emit("auth:logout"),await We.emit("auth:after-logout")})}async whenLoggedIn(e){return this.isLoggedIn()?e(this.session):new Promise(n=>{const r=s=>n(e(s));We.once("auth:login",r)})}dismiss(){this.setState({dismissed:!0})}async findOrCreatePrivateTypeIndex(){return await this.findPrivateTypeIndex()??await this.createPrivateTypeIndex()}async findPrivateTypeIndex(e={}){const{webId:n,privateTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&uy(`${n}-privateTypeIndex`),ay(`${n}-privateTypeIndex`,()=>ri.withEngine(s).find(r))):null}async findOrCreatePublicTypeIndex(){return await this.findPublicTypeIndex()??await this.createPublicTypeIndex()}async findPublicTypeIndex(e={}){const{webId:n,publicTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&uy(`${n}-publicTypeIndex`),ay(`${n}-publicTypeIndex`,()=>ri.withEngine(s).find(r))):null}async createPrivateContainer(e){const n=this.requireAuthenticator().engine;return Er.withEngine(n,async()=>{const r=await Er.find(e.url);if(r&&!e.reuseExisting)throw new qq(r);const s=r??new Er({url:e.url,name:e.name});if(await s.save(),e.registerFor){const i=await this.findOrCreatePrivateTypeIndex();await s.register(i,e.registerFor)}return s})}async boot(){var e,n;await yi.booted,fo("authenticator")&&this.setState({preferredAuthenticator:Ta("authenticator")}),fo("refreshProfile")&&this.setState({staleProfiles:Qn(this.staleProfiles.concat(rn([(e=this.session)==null?void 0:e.user.webId,(n=this.previousSession)==null?void 0:n.loginUrl])))}),await this.restorePreviousSession(),await this.startupReconnect(),await this.trackSolidModels()}async createPrivateTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await ri.withEngine(n.engine).createPrivate(e);return Ne(r,()=>{e.privateTypeIndexUrl=r.url,cy(`${e.webId}-privateTypeIndex`,r),this.rememberProfile(e)})}async createPublicTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await ri.withEngine(n.engine).createPublic(e);return Ne(r,()=>{e.privateTypeIndexUrl=r.url,cy(`${e.webId}-publicTypeIndex`,r),this.rememberProfile(e)})}async attemptLogin(e,n){const r=n.authenticator??this.preferredAuthenticator??"default",s=n.onError??(a=>lt.isMounted()?yi.report(a):this.setState({loginStartupError:a})),i=setTimeout(()=>this.loginStale=!0,1e4),o={dismissed:this.dismissed,ignorePreviousSessionError:this.ignorePreviousSessionError,previousSession:this.previousSession};this.loginOngoing=!0;try{const a=await this.getUserProfile(e,{markStale:!0}),l=(a==null?void 0:a.oidcIssuerUrl)??ls((a==null?void 0:a.webId)??e),u=await this.bootAuthenticator(r),{domain:c}=eR(e);return this.setState({dismissed:!1,ignorePreviousSessionError:!0,previousSession:Fn({profile:a,loginUrl:e,authenticator:r,error:Le("solid.stuckConnecting","We didn't hear back from the identity provider at `{domain}`, maybe try reconnecting?",{domain:c})})}),await We.emit("auth:before-login"),await u.login(l,a),!0}catch(a){return this.setState(o),a instanceof jq?!1:n.fallbackUrl?Hn().then(()=>this.login(n.fallbackUrl??"",di(n,"fallbackUrl"))):(s(a),!1)}finally{clearTimeout(i),this.setState({loginOngoing:!1,loginStale:!1})}}async restorePreviousSession(){this.previousSession&&await this.bootAuthenticator(this.previousSession.authenticator)}async startupReconnect(){this.reconnectOnStartup()&&await this.reconnect({force:this.forcingReconnect()})}reconnectOnStartup(){return fo("autoReconnect")?Iu(Ta("autoReconnect")):this.autoReconnect}forcingReconnect(){return fo("autoReconnect")&&Iu(Ta("autoReconnect"))}async bootAuthenticator(e){const n=LE(e);return n.addListener({onSessionStarted:async r=>{this.setState({session:r,previousSession:{authenticator:n.name,loginUrl:r.loginUrl,profile:r.user,error:null}}),this.staleProfiles.includes(r.user.webId)&&await this.refreshUserProfile(),lt.plugin("@aerogel/local-first")||q1(r.authenticator.engine),Aq.forEach(s=>s.setEngine(r.authenticator.engine)),await We.emit("auth:login",r)},onSessionFailed:async(r,s)=>{var i;this.setState({session:null,previousSession:{profile:(i=this.previousSession)==null?void 0:i.profile,authenticator:n.name,loginUrl:r,error:s}})},onSessionEnded:()=>this.setState({session:null}),onAuthenticatedFetchReady:r=>We.emit("auth:fetch-ready",r)}),await n.boot(),n}rememberProfile(e){this.setState({profiles:{...this.profiles,[e.webId]:e},staleProfiles:ir(this.staleProfiles,e.webId)})}async trackSolidModels(){We.on("purge-storage",()=>this.collections={}),We.on("soukai:track-models",async e=>{var n;kE(e)&&(e.on("created",async r=>{var s;const i=r.getContainerUrl();if(!i||r.getDefaultCollection()===i||(s=this.collections[r.static().modelName])!=null&&s.includes(i))return;const o=this.collections[r.static().modelName]??[];o.push(i),this.collections={...this.collections,[r.static().modelName]:o},await ci(e,i,{refresh:!1})}),await Promise.all(((n=this.collections[e.modelName])==null?void 0:n.map(r=>ci(e,r),{refresh:!1}))??[]))});for(const[e,n]of Object.entries(this.collections)){const r=H1().get(e);if(!(!r||!Pq(r)))for(const s of n)await ci(r,s)}}};const at=Kr(Jq);function Xq(){Vx("container_url",t=>{if(!t.endsWith("/"))return"containerEndingSlashMissing"})}const Yq={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function Qq(t,e){return F(),be("svg",Yq,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M15 2H5L4 8h12zM0 10s2 1 10 1s10-1 10-1l-4-2H4zm8 4h4v1H8z"},null,-1),te("circle",{cx:"6",cy:"15",r:"3",fill:"currentColor"},null,-1),te("circle",{cx:"14",cy:"15",r:"3",fill:"currentColor"},null,-1)]))}const Zq=st({name:"ooui-user-anonymous",render:Qq}),eB=["src"],tB=me({__name:"SolidImage",props:{src:{}},setup(t){const e=Kx(async()=>{const r=await Od.get(t.src)??await n(t.src),s=await(r==null?void 0:r.blob());return s&&URL.createObjectURL(s)||t.src});async function n(r){try{const s=await at.fetch(r);return s.status!==200?null:(await Od.store(r,s),Od.get(r))}catch{return null}}return(r,s)=>(F(),be("img",{src:A(e)},null,8,eB))}}),nB={class:"relative flex items-center justify-center rounded-full bg-gray-200"},rB={key:1,class:"text-sm font-semibold tracking-wider text-gray-500","aria-hidden":"true"},ME=me({__name:"SolidAvatar",setup(t){const e=J(()=>{var n;return(((n=at.user)==null?void 0:n.name)??"").trim().split(" ").map(r=>{var s;return(s=r[0])==null?void 0:s.toUpperCase()}).join("").slice(0,3)});return(n,r)=>{var s,i;return F(),be("div",nB,[(s=n.$solid.user)!=null&&s.avatarUrl?(F(),ce(tB,{key:0,src:(i=n.$solid.user)==null?void 0:i.avatarUrl,alt:"",class:"absolute inset-0 size-full rounded-full"},null,8,["src"])):e.value?(F(),be("span",rB,Te(e.value),1)):(F(),ce(A(Zq),{key:2,class:"size-6 text-gray-500"}))])}}}),sB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function iB(t,e){return F(),be("svg",sB,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M9 2h9c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H9c-1.1 0-2-.9-2-2v-2h2v2h9V4H9v2H7V4c0-1.1.9-2 2-2"},null,-1),te("path",{fill:"currentColor",d:"M10.09 15.59L11.5 17l5-5l-5-5l-1.41 1.41L12.67 11H3v2h9.67z"},null,-1)]))}const oB=st({name:"ic-baseline-log-in",render:iB}),aB={key:2,class:"flex w-full justify-center gap-2"},lB=me({__name:"SolidLogin",props:{class:{default:""},buttonClass:{},layout:{default:"horizontal"},noLoading:{type:Boolean},allowLegacyAuthenticator:{type:Boolean}},setup(t){const e={inrupt:"Log in using Inrupt's authentication library",legacy:"Log in using the legacy authentication library"},n=pm({url:h1(),authenticator:fM()}),r=Object.keys(e),s=_e(!1),i=_e(!1),o=J(()=>!a.value||i.value),a=J(()=>lt.development&&(!n.url||n.url==="dev"||n.url.trim().length===0)),l=J(()=>wt("flex flex-col items-center gap-2 w-full md:w-auto",t.class)),u=J(()=>wt("w-full whitespace-nowrap",{"md:w-auto":t.layout==="horizontal"&&!n.authenticator},t.buttonClass));function c(f){return Le(`solid.logIn.switchAuthenticator${f.charAt(0).toUpperCase()+f.slice(1)}`,e[f])}async function d(){if(t.noLoading){await at.login(n.url,{authenticator:n.authenticator});return}await Ht.loading(Le("solid.loginOngoing","Logging in..."),at.login(n.url))}return(f,h)=>{const m=PS("measure");return F(),ce(A(gm),{form:A(n),class:Ve(l.value),onSubmit:d},{default:se(()=>[te("div",{class:Ve(["flex w-full flex-col items-center gap-2",{"md:flex-row":f.layout==="horizontal"&&!A(n).authenticator}])},[o.value?(F(),ce(A(f1),{key:0,name:"url","aria-label":f.$td("solid.logIn.label","Login url"),placeholder:f.$td("solid.logIn.placeholder","https://me.solidcommunity.net"),class:"w-full md:min-w-96"},null,8,["aria-label","placeholder"])):je("",!0),A(n).authenticator?(F(),ce(A(a1),{key:1,name:"authenticator",class:"w-full max-w-full md:min-w-96","label-class":"sr-only","options-class":"md:w-96 w-full max-w-[calc(100vw-4rem)]",label:f.$td("solid.logIn.switchAuthenticatorLabel","Authentication method"),options:A(r),"render-option":c},null,8,["label","options"])):je("",!0),a.value&&!i.value?(F(),be("div",aB,[oe(A(Ct),{variant:"secondary",class:"group gap-0",title:f.$td("solid.logIn.manualUrl","Enter url"),onClick:h[0]||(h[0]=g=>i.value=!0)},{default:se(()=>[oe(A(oB),{class:"size-4"}),Ts((F(),be("span",{class:Ve(["overflow-hidden pl-1 whitespace-nowrap",{"opacity-0":!s.value,"w-0 transition-[width] md:group-hover:w-(--width)":s.value}])},[rt(Te(f.$td("solid.logIn.manualUrl","Enter url")),1)],2)),[[m,()=>s.value=!0,void 0,{css:!0}]])]),_:1},8,["title"]),oe(A(Ct),{disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:"whitespace-nowrap",onClick:h[1]||(h[1]=g=>A(n).url="dev")},{default:se(()=>[rt(Te(f.$td("solid.logIn.dev","Log in to dev server")),1)]),_:1},8,["disabled"])])):(F(),ce(A(Ct),{key:3,disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:Ve(u.value)},{default:se(()=>[rt(Te(f.$td("solid.logIn.submit","Log in")),1)]),_:1},8,["disabled","class"]))],2),f.allowLegacyAuthenticator&&o.value&&!A(n).authenticator?(F(),ce(A(Po),{key:0,class:"text-sm font-normal text-gray-700",onClick:h[2]||(h[2]=g=>A(n).authenticator="inrupt")},{default:se(()=>[rt(Te(f.$td("solid.logIn.switchAuthenticator","Can't log in? Try using a different authentication method")),1)]),_:1})):je("",!0)]),_:1},8,["form","class"])}}}),uB={$solid:at};function cB(t={}){return{async install(e){Sq(),Kq({...zq,...t.authenticators??{}}),Xq(),Hq(LE(t.defaultAuthenticator??"inrupt")),CL(n=>{if(n instanceof Hu)return n.description?`${n.message} (${n.description})`:n.message}),typeof t.autoReconnect=="boolean"&&(Qm.autoReconnect=t.autoReconnect,at.hasPersistedState()||(at.autoReconnect=t.autoReconnect)),t.onUserProfileLoaded&&We.on("solid:user-profile-loaded",([n,r])=>{var s;(s=t.onUserProfileLoaded)==null||s.call(t,n,r)}),await Gi(e,uB)}}}var dB=Object.defineProperty,fB=(t,e,n)=>e in t?dB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jt=(t,e,n)=>fB(t,typeof e!="symbol"?e+"":e,n);const Mf=new WeakMap;function rp(t){return rn(Ns(t).map(e=>{const n=t.instance().requireRelation(e).relatedClass;return Mo(n)?!1:n}))}function Ns(t){return Mf.has(t)||Mf.set(t,t.relations.filter(e=>kt.reservedRelations.includes(e)?!1:t.instance().requireRelation(e)instanceof DE)),Mf.get(t)??[]}function NE(t){return Ns(t.static()).reduce((e,n)=>e.concat(t.getRelationModels(n)??[]),[])}function aw(t){const e=new Set,n=t.instance();e.add(t);for(const r of t.relations)t.reservedRelations.includes(r)||e.add(n.requireRelation(r).relatedClass);return[...e.values()]}function Ui(t){return t.getRelatedModels().filter(e=>!Yt(e,OE)&&!Yt(e,ho)&&!Yt(e,po)&&!Yt(e,Gm)&&!Yt(e,Bc)&&e.static()!==Er)}function FE(t){if(t.isDirty())return!0;if(!(t instanceof Er))return!1;const e=n=>{var r;return(r=t.getRelationModels(n))==null?void 0:r.some(s=>FE(s))};return Ns(t.static()).some(e)}async function sp(t,e){const n=["authorizations","metadata","operations","tombstone"];let r;do{r=!1;const s=Ui(t);for(const i of s)for(const o of i.static("relations"))if(!(n.includes(o)||i.isRelationLoaded(o)||i.getRelation(o)instanceof CE))try{await i.loadRelation(o),r=!0}catch(a){if(!e)throw a;e(a)}}while(r)}const hB=hn(()=>lt.service("$cloud"));class pB{constructor(){Jt(this,"models",new Set),Jt(this,"promises",[])}push(e){this.models.add(e),this.syncAfter(Hn({seconds:1}))}clear(e){if(!e){this.models=new Set;return}for(const n of e)this.models.delete(n)}async syncAfter(e){const n=typeof e=="function"?e():e;return this.promises.push(n),n.then(()=>zn(this.promises,n)),this.promises.length===1&&this.schedule(),n}schedule(){Promise.all(this.promises).then(()=>Hn()).then(()=>{if(this.promises.length!==0){this.schedule();return}const e=this.consume();e.length!==0&&hB.syncIfOnline(e)})}consume(){const e=[],n=new Set;for(const r of this.models)xs(r)&&(this.models.delete(r),NE(r).forEach(s=>n.add(s)),e.push(r));for(const r of this.models)this.models.delete(r),!n.has(r)&&e.push(r);return e}}const Ku=Kr(pB),It=hn(()=>lt.service("$cloud")),jE=new WeakMap,Zm=new WeakMap,Nf=new WeakMap;function UE(t,e){if(e??(e=new Set),!e.has(t)){e.add(t);for(const n of t.relations)UE(t.instance().requireRelation(n).relatedClass,e)}return e}function mB(t){const e=t.getRelatedModels().concat([t]);for(const n of e)n.cleanDirty(!0)}function gB(t){const e=Ui(t).concat([t]);for(const n of e){if(!n.operations||n.operations.length===0)continue;const r=(n.operations??[]).filter(s=>!(s instanceof Ms)||!n.ignoreRdfPropertyHistory(s.property,!0));if(!r.some(s=>!s.isInception(n))){n.setRelationModels("operations",[]);continue}n.setRelationModels("operations",r)}}async function lw(t){It.setState({localModelUpdates:{...It.localModelUpdates,[t.url]:1}}),AB(t.static())&&await ip(t.static(),Tt(t.url)),It.autoPush&&It.ready&&!It.syncing&&Ku.push(t)}function yB(t,e){var n;const r=Ar(Er),s=(n=It.registeredModels.find(({modelClass:i})=>i===t.static()))==null?void 0:n.path;return new r({url:pu(VE(t,e).static(),s)})}async function ip(t,e){var n;(n=It.modelCollections[t.modelName])!=null&&n.includes(e)||(It.setState("modelCollections",{...It.modelCollections,[t.modelName]:(It.modelCollections[t.modelName]??[]).concat(e)}),await ci(t,e))}async function uw(t){if(vB(t))return;const e=It.localModelUpdates[t.url]??0;It.setState({localModelUpdates:{...It.localModelUpdates,[t.url]:t.isSoftDeleted()?1:e+1}}),await It.getDocumentsCache().forget(Tt(t.requireDocumentUrl()),t.requireDocumentUrl()),It.autoPush&&It.ready&&!It.syncing&&Ku.push(t)}function op(t,e){const n={},r=Array.from(t);for(const[s,i]of Object.entries(It.localModelUpdates)){const o=wr(s);(t.has(s)||r.some(a=>a.endsWith("/")&&s.startsWith(a)))&&!(e!=null&&e.has(o))||(n[s]=i)}It.setState({localModelUpdates:n})}function qE(t,e={}){const n=Array.from(new Set(Ui(t).map(r=>r.static()))).map(r=>[r,Ar(r)]);return Ne(t.clone({constructors:n}),r=>{gB(r),e.clean&&mB(r)})}function BE(t){return t.clone({constructors:ya(t)})}async function cw(t,e,n){const r=Ar(Cs),s=e.map(a=>a.url),i=t.filter(a=>!s.includes(a.url)).map(a=>a.requireDocumentUrl()).filter(a=>!n.has(a)),o=await r.all({$in:i});return e.concat(o)}function vB(t){return!t.getDocumentModels().flatMap(e=>{var n;return((n=e.operations)==null?void 0:n.map(r=>[e,r]))??[]}).some(([e,n])=>{var r,s;return n.date.getTime()!==((s=(r=e.metadata)==null?void 0:r.updatedAt)==null?void 0:s.getTime())?!1:n instanceof Ms?!e.ignoreRdfPropertyHistory(n.property,!0):!0})}function ya(t){const e=t.static();if(!Nf.has(e)){const n=Array.from(UE(e)).map(r=>zE(r)?[r,IB(r)]:[r,Ar(r)]).map(([r,s])=>[[r,s],[s,r]]).flat();for(const r of n)Nf.set(r[0],n)}return hn(Nf.get(e))}function VE(t,e){return e.get(t.url)??BE(t)}function ap(){return[...It.registeredModels].map(({modelClass:t})=>Xm(t,{includeSoftDeleted:!0})).flat()}function bB(){return It.schemaMigrations}function wB(){It.schemaMigrations.clear()}function dw(t){return It.schemaMigrations.get(t)}function Ar(t){return jE.get(t)??SB(t)}function pu(t,e){const n=at.requireUser().storageUrls[0],r=Mo(t)&&Ns(t).map(s=>{const i=t.instance().requireRelation(s).relatedClass;return Mo(i)?null:i}).filter(Boolean)[0];return e??(e=`/${(r||t).modelName.toLowerCase()}s/`),ah((e.startsWith("/")?n.slice(0,-1):n)+e)}function _B(t,e){return e.get(t.url)??qE(t)}function xB(t){for(const{modelClass:e}of It.registeredModels)if(Xm(e).some(n=>n.url===t.url))return!0;return!1}function $a(t){return zE(t.static())}function zE(t){return Zm.has(t)}function EB(t){return!$a(t)}function AB(t){return It.registeredModels.some(({modelClass:e})=>e===t)}function SB(t){var e;const n=t,r=(i,o)=>{i.timestamps=n.timestamps,i.history=n.history,o(),i.timestamps=[],i.history=!1},s=(e=class extends n{initialize(i,o){r(this._proxy.static(),()=>super.initialize(i,o))}initializeRelations(){super.initializeRelations();for(const i of Object.values(this._relations))i.relatedClass=Ar(i.relatedClass)}fixMalformedAttributes(){r(this.static(),()=>super.fixMalformedAttributes())}},Jt(e,"timestamps",!1),Jt(e,"history",!1),e);return n.on("schema-updated",async i=>{await s.updateSchema({...i,timestamps:!1,history:!1})}),t.ensureBooted(),Om({[`Remote${t.modelName}`]:s}),lt.service("$cloud")&&It.getEngine()&&s.setEngine(It.requireEngine()),jE.set(n,s),Zm.set(s,n),s}function IB(t){return Zm.get(t)??Ge(`Couldn't find local class for ${t.modelName}`)}class CB extends ym{constructor(){super(...arguments),Jt(this,"urlMigrations",[]),Jt(this,"collectionMigrations",[])}migrateUrl(e,n,r){this.urlMigrations.push({modelClass:e,local:n,remote:r})}migrateCollection(e,n,r){this.collectionMigrations.push({modelClass:e,local:n,remote:r})}async run(){const e=Mc(),n=await e.getCollections(),r=new Set;for(const s of n){const i=await e.readMany(s);for(const[o,a]of Object.entries(i)){const l=this.replaceUrl(o);await e.create(Tt(l),this.replaceDocumentUrls(a),l),await e.delete(s,o)}}for(const{modelClass:s,remote:i}of this.urlMigrations)ci(s,Tt(i));for(const{modelClass:s,local:i,remote:o}of this.collectionMigrations){const a=Object.assign({},at.collections),l=(at.collections[s.modelName]??[]).filter(u=>!i.startsWith(u));ow(s,i),ci(s,o);for(const u of at.collections[s.modelName]??[]){const c=this.replaceUrl(u);c!==u&&(ow(s,u),ci(s,c))}at.collections=a,n.filter(u=>i.startsWith(u)).forEach(u=>r.add(u)),l.length>0?a[s.modelName]=l:delete a[s.modelName]}await e.dropCollections(Array.from(r))}replaceDocumentUrls(e){for(const[n,r]of Object.entries(e)){if(n==="@id"&&typeof r=="string"){e[n]=this.replaceUrl(r);continue}typeof r!="object"||r===null||(e[n]=this.replaceDocumentUrls(r))}return e}replaceUrl(e){for(const{local:n,remote:r}of this.urlMigrations)if(e.startsWith(n))return e.replace(n,r);for(const{local:n,remote:r}of this.collectionMigrations)if(e.startsWith(n))return e.replace(n,r);return e}}function RB(t){const e={};return async()=>("value"in e||(e.value=await t()),e.value)}class HE{async loadContainedModels(e,n={}){if(EB(e)){const c=[];for(const d of Ns(e.static())){const f=await e.loadRelationIfUnloaded(d)??[];c.push(...mn(f))}return c}const r={},s=[],i=iy(e.resourceUrls,10),o=i.flat().map(c=>({documentUrl:c,completed:!1})),a=dn(o,"documentUrl"),l=n.updateProgress??(c=>Promise.resolve(c==null?void 0:c()));n.status&&(n.status.children=o);for(const c of i)await Promise.all(c.map(async d=>{var f;if(e.resources.some(g=>g.url===d&&g.types.some(x=>x.startsWith("http://www.w3.org/ns/iana/media-types/image/"))))return;const{children:h,tombstones:m}=await this.loadDocumentChildren(e,d,n);s.push(...m);for(const[g,x]of Object.entries(h))(r[g]??(r[g]=[])).push(...x);d.endsWith("/")||(await l(()=>{hn(a.get(d)).completed=!0}),await((f=n.onDocumentLoaded)==null?void 0:f.call(n)))}));for(const[c,d]of Object.entries(r))e.setRelationModels(c,d);const u=n.ignoreTombstones?Object.values(r).flat():Object.values(r).flat().concat(s);return await l(()=>{n.status&&(n.status.children=u.map(c=>hn(a.get(c.requireDocumentUrl()))))}),u}async loadContainedDocuments(e,n={}){if(!$a(e))throw Error("Cannot get contained models from local model");const r={},s=e.requireEngine(),i=iy(e.resourceUrls,10),o=i.flat().map(u=>({documentUrl:u,completed:!1})),a=dn(o,"documentUrl"),l=n.updateProgress??(u=>Promise.resolve(u==null?void 0:u()));n.status&&(n.status.children=o);for(const u of i)await Promise.all(u.map(async c=>{var d,f,h;if(!c||c.endsWith("/")||e.resources.some(g=>g.url===c&&g.types.some(x=>x.startsWith("http://www.w3.org/ns/iana/media-types/image/")))){await l(()=>{hn(a.get(c)).completed=!0});return}const m=e.documents.find(({url:g})=>g===c);try{r[c]=await s.readOne(e.url,c)}catch(g){if(!n.onDocumentError)throw g;await((d=n.onDocumentError)==null?void 0:d.call(n,g))}m&&await((f=n.onDocumentRead)==null?void 0:f.call(n,m)),await l(()=>{hn(a.get(c)).completed=!0}),await((h=n.onDocumentLoaded)==null?void 0:h.call(n))}));return r}async loadDocumentChildren(e,n,r={}){return this.loadDocumentChildrenFromRemote(e,n,r)}async loadDocumentChildrenFromRemote(e,n,r={}){const s={},i=[],o=RB(async()=>{var l;try{const u=e.documents.find(f=>f.url===n),c=await e.requireEngine().readOne(Tt(n),n),d=await Cs.createManyFromEngineDocuments({[n]:c});return i.push(...d),u&&((l=r.onDocumentRead)==null||l.call(r,u)),c}catch(u){if(Yt(u,Lr))return null;if(!r.onDocumentError)throw u;return r.onDocumentError(u),null}});let a=!1;for(const l of Ns(e.static())){const u=e.requireRelation(l);if(u.loaded){s[l]=u.getLoadedModels();continue}const c=await o();if(c)try{const d=await u.relatedClass.createManyFromEngineDocuments({[n]:c});s[l]=d,a||(a=d.length>0)}catch(d){if(!r.onDocumentError)throw d;r.onDocumentError(d)}}if(!a&&r.onDocumentIgnored){const l=e.documents.find(u=>u.url===n);l&&await r.onDocumentIgnored(l)}return{children:s,tombstones:i}}}const ha=new WeakMap;class KE{async loadTypeIndex(e={}){const n=at.requireUser();return(e.fresh||!ha.has(n))&&ha.set(n,await at.findPrivateTypeIndex({fresh:e.fresh})),e.create&&!ha.get(n)&&ha.set(n,await at.findOrCreatePrivateTypeIndex()),ha.get(n)??null}}class WE{async indexLocalModels(e){for(const n of e)await this.addLocalModel(n)}async addLocalModel(e){if(!this.localModels.hasKey(e.url)){this.localModels.add(e),await sp(e);for(const n of Ui(e))await this.addLocalModel(n)}}}const TB=ym;let GE=class JE extends mc(TB,[HE,KE,WE]){constructor(){super(),Jt(this,"_models"),this.localModels=dn([],"url")}static restore(e){return Ne(new JE,n=>{n.status=e})}get models(){return this._models}set models(e){if(!e){delete this._models,this.localModels=dn([],"url");return}const n=r0(this.status.children??[],"modelUrl");this._models=e,this.localModels=dn([],"url"),this.status.children=e.map(r=>n[r.url]??{modelUrl:r.url,completed:!1})}async run(){if(!this.models)throw new Error("Cant start migration without models");await this.indexLocalModels(this.models);const e=this.status.children??[],n=await this.loadTypeIndex();for(const r of e){const s=this.models.find(({url:i})=>r.modelUrl===i);!s||r.completed||(await this.migrateRegisteredModel(s,r,n),await this.updateProgress(()=>r.completed=!0))}for(const[r,s]of bB())await r.updateSchema(s);wB()}async migrateRegisteredModel(e,n,r){if(await this.migrate(e,n),!xs(e))return;const s=rp(e.static()),i=r==null?void 0:r.registrations.find(({instanceContainer:o})=>o===e.url);!r||!i||s.length===0||(i.setAttribute("forClass",s.map(o=>{var a;return((a=dw(o))==null?void 0:a.rdfsClasses)??o.rdfsClass}).flat()),await r.save())}async migrate(e,n){this.assertNotCancelled(),await this.migrateChildren(e,n);const r=dw(e.static());if(!r)return;const s=await Ar(e.static()).find(e.url),i=await(s==null?void 0:s.migrateSchema(r));await e.migrateSchema(r,{mintOperationUrl:o=>{var a,l;return(l=(a=i==null?void 0:i.operations)==null?void 0:a.find(u=>!Yt(o,Ms)||!Yt(u,Ms)?!1:o.property===u.property&&o.date.getTime()===u.date.getTime()))==null?void 0:l.url}})}async migrateChildren(e,n){if(!xs(e))return;const r=await this.loadContainedModels(e,{ignoreTombstones:!0});n.children??(n.children=r.map(s=>({modelUrl:s.url,completed:!1})));for(const s of n.children){const i=r.find(({url:o})=>s.modelUrl===o);!i||s.completed||(await this.migrate(i,s),await this.updateProgress(()=>s.completed=!0))}}};const Vs=hn(()=>lt.service("$cloud")),OB=ym;function DB(t){return!!t&&"root"in t}class kB extends mc(OB,[HE,KE,WE]){constructor(e){super(),Jt(this,"documentsWithErrors"),Jt(this,"models"),Jt(this,"dirtyRemoteModels"),Jt(this,"rootLocalModels"),Jt(this,"tombstones"),Jt(this,"syncedModelUrls"),Jt(this,"documentsModifiedAt"),Jt(this,"screenLock",null),Jt(this,"localModels"),this.documentsWithErrors=new Set,this.models=e,this.rootLocalModels=[],this.localModels=dn([],"url"),this.tombstones=dn([],"resourceUrl"),this.syncedModelUrls=new Set,this.documentsModifiedAt={}}async run(){const e=at.requireAuthenticator().engine,n=(s,{headers:i},o)=>{const a=(i==null?void 0:i.get("last-modified"))??o;!a||s.endsWith("/")||(this.documentsModifiedAt[s]=new Date(a))},r=e.listeners.add({onDocumentRead:(s,i)=>n(s,i),onDocumentUpdated:(s,i)=>n(s,i,new Date)});try{this.lockScreen(),this.rootLocalModels=this.models??ap(),e.setConfig({cachesDocuments:!0,persistentCache:Vs.getDocumentsCache()}),await this.indexLocalModels(this.rootLocalModels),await this.pullChanges(),await this.pushChanges()}finally{e.clearCache(),e.setConfig({cachesDocuments:!1,persistentCache:void 0}),this.releaseScreen(),r()}}lockScreen(){const e=navigator;if(e.wakeLock)try{this.screenLock=e.wakeLock.request("screen").catch(n=>{yi.reportDevelopmentError(n,"Could not request screen wake lock")})}catch(n){yi.reportDevelopmentError(n,"Could not request screen wake lock")}}releaseScreen(){this.screenLock&&(this.screenLock.then(e=>e==null?void 0:e.release()),this.screenLock=null)}getInitialStatus(){return{root:!0,completed:!1,children:[{completed:!1},{completed:!1}]}}calculateCurrentProgress(e){return e??(e=this.status),DB(e)?p0(this.calculateCurrentProgress(e.children[0])*.9+this.calculateCurrentProgress(e.children[1])*.1,2):super.calculateCurrentProgress(e)}async pullChanges(){const e=this.models?await this.fetchRemoteModelsForLocal(this.models):await this.fetchRemoteModels(),n=dn(e,r=>r instanceof Cs?r.resourceUrl:r.url);this.dirtyRemoteModels=await this.synchronizeModels(n),await this.updateProgress(r=>r.children[0].completed=!0)}async pushChanges(){const e=new Set(this.localModels.getItems().map(o=>o.getDocumentUrl())),n=this.dirtyRemoteModels??[],r=this.status.children[1].children=n.map(()=>({completed:!1}));for(let o=0;o<n.length;o++){const a=n[o],l=r[o];if(a.isSoftDeleted()){a.enableHistory(),a.enableTombstone(),await a.forceDelete(),await this.updateProgress(()=>l.completed=!0),this.syncedModelUrls.add(a.url??a.getDeletedPrimaryKey());continue}await this.saveModelAndRelated(a,l),await this.updateTypeRegistrations(a),await this.updateProgress(()=>l.completed=!0)}const s=Vs.getDocumentsCache(),i=dn(this.tombstones.getItems(),o=>o.requireDocumentUrl());for(const[o,a]of Object.entries(this.documentsModifiedAt)){if(i.hasKey(o)){const l=i.require(o);await s.remember(Tt(o),o,a,{tombstone:{url:l.url,resourceUrl:l.resourceUrl}});continue}if(e.has(o)){await s.remember(Tt(o),o,a);continue}}op(this.syncedModelUrls,this.documentsWithErrors),await this.updateProgress(o=>o.children[1].completed=!0)}async fetchRemoteModels(){var e,n,r;const s=this.status.children[0],i=await this.loadTypeIndex({fresh:!0});if(!i)return[];const o=[],a=this.getTypeRegistrations(i);s.children=a.map(()=>({completed:!1}));for(let l=0;l<a.length;l++){const u=hn((e=s.children)==null?void 0:e[l]),{registration:c,registeredModel:d}=hn(a[l]),f=Ar(d.modelClass);if(!c.instanceContainer)continue;if((n=Vs.rootModelCollections)[r=d.modelClass.modelName]??(n[r]=c.instanceContainer),Mo(f)){await ip(d.modelClass,Tt(c.instanceContainer));const m=await f.find(c.instanceContainer);m&&(await this.loadChildren(m,u),o.push(m)),await this.updateProgress(()=>u.completed=!0);continue}const h=await this.fetchRemoteModelsFromContainer(u,d.modelClass,f,c.instanceContainer);o.push(...h),await this.updateProgress(()=>u.completed=!0)}for(const l of o)await sp(l,u=>this.handleDocumentError(u));return cw(this.rootLocalModels,o,this.documentsWithErrors)}async fetchRemoteModelsFromContainer(e,n,r,s){var i;const o=await Ar(Er).find(s);if(!o)return[];e.children=o.resourceUrls.map(()=>({completed:!1}));const a=await this.loadContainedDocuments(o,{status:e,updateProgress:f=>this.updateProgress(f),onDocumentError:f=>this.handleDocumentError(f),onDocumentRead:f=>{f.url.endsWith("/")||!f.updatedAt||f.url in this.documentsModifiedAt||(this.documentsModifiedAt[f.url]=f.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()}}),l=await r.createManyFromEngineDocuments(a),u=await Cs.createManyFromEngineDocuments(a),c=Vs.getDocumentsCache(),d=new Set(l.map(f=>f.requireDocumentUrl()));for(const f of u)this.tombstones.add(f),d.add(f.requireDocumentUrl());for(const f of o.documents){if(!f.updatedAt||d.has(f.url))continue;await c.remember(Tt(f.url),f.url,f.updatedAt);const h=Mc();try{await h.readOne(Tt(f.url),f.url)}catch(m){if(!Yt(m,Lr))throw m;await h.create(Tt(f.url),{},f.url)}}l.length>0&&await ip(n,s);for(let f=0;f<o.resourceUrls.length;f++){const h=o.resourceUrls[f];if(!(h!=null&&h.endsWith("/")))continue;const m=await this.fetchRemoteModelsFromContainer(hn((i=e.children)==null?void 0:i[f]),n,r,h);l.push(...m),await this.updateProgress()}return await this.updateProgress(()=>e.completed=!0),l}async fetchRemoteModelsForLocal(e){const n=[],r=this.status.children[0].children=e.map(()=>({completed:!1}));for(let s=0;s<e.length;s++)await this.ignoringDocumentErrors(async()=>{const i=e[s],o=r[s],a=await Ar(i.static()).find(i.url);if(!a){await this.updateProgress(()=>o.completed=!0);return}xs(a)&&await this.loadChildren(a,o),n.push(a),await this.updateProgress(()=>o.completed=!0)});for(const s of n)await sp(s,i=>this.handleDocumentError(i));return cw(e,n,this.documentsWithErrors)}getTypeRegistrations(e){const n=new Set,r=[...Vs.registeredModels].map(({modelClass:o})=>{const a=Mo(o)?rp(o):[];return{modelClass:o,rdfsClasses:a.length>0?a.map(l=>l.rdfsClasses).flat():o.rdfsClasses}}),s=e.registrations.map(o=>{const a=r.find(({rdfsClasses:l})=>!!o.instanceContainer&&l.some(u=>o.forClass.includes(u)));return!a||!o.instanceContainer||n.has(o.instanceContainer)?null:(n.add(o.instanceContainer),{registration:o,registeredModel:a})}).filter(o=>!!o),i=s.map(({registration:o})=>o.instanceContainer);return s.filter(({registration:o})=>!i.some(a=>{var l;return a&&a!==o.instanceContainer&&((l=o.instanceContainer)==null?void 0:l.startsWith(a))}))}async updateTypeRegistrations(e){if(!xB(e))return;const n=xs(e)?e:yB(e,this.localModels),r=xs(e)?rp(e.static()):[e.static()];if(r.length===0)return;const s=await this.loadTypeIndex({create:!0});s.registrations.some(i=>i.instanceContainer&&e.url.startsWith(i.instanceContainer))||await n.register(s,r)}async loadChildren(e,n){var r,s;if(this.assertNotCancelled(),!xs(e))return;const i=await this.loadContainedModels(e,{status:n,updateProgress:o=>this.updateProgress(o),onDocumentError:o=>this.handleDocumentError(o),onDocumentRead:o=>{o.url.endsWith("/")||!o.updatedAt||o.url in this.documentsModifiedAt||(this.documentsModifiedAt[o.url]=o.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()},onDocumentIgnored:async o=>{o.updatedAt&&await Vs.getDocumentsCache().remember(Tt(o.url),o.url,o.updatedAt)}});for(let o=0;o<i.length;o++){const a=i[o];if(a instanceof Cs){this.tombstones.add(a);continue}if(this.tombstones.hasKey(a.url)){await this.deleteChild(e,a);continue}await this.loadChildren(a,(r=n==null?void 0:n.children)==null?void 0:r[o]),(s=n==null?void 0:n.children)!=null&&s[o]&&await this.updateProgress(()=>{var l;return hn((l=n.children)==null?void 0:l[o]).completed=!0})}}async deleteChild(e,n){for(const r of e.static("relations")){const s=e.requireRelation(r);if(s.related){if(Array.isArray(s.related)){s.related=s.related.filter(i=>i!==n);continue}if(s.related===n){s.related=null;continue}}}await n.forceDelete()}async saveModelAndRelated(e,n,r){if(this.assertNotCancelled(),r??(r=new Set),r.has(e))return;if(r.add(e),$a(e)&&e.isSoftDeleted()){e.enableHistory(),e.enableTombstone(),await e.forceDelete();return}if(e.getDocumentUrl()&&this.documentsWithErrors.has(e.requireDocumentUrl()))return;const s=e.isDirty();if(await e.save(),(s||$a(e))&&this.syncedModelUrls.add(e.url),$a(e)){const a=e.requireDocumentUrl(),l=this.documentsModifiedAt[a];l&&(await Vs.getDocumentsCache().remember(Tt(a),a,l),delete this.documentsModifiedAt[a])}const i=ir(Ui(e),e),o=n?i.map(()=>({completed:!1})):[];n&&(n.children=o);for(let a=0;a<i.length;a++){const l=i[a],u=o[a];await this.saveModelAndRelated(l,u,r),u&&await this.updateProgress(()=>u.completed=!0)}}async synchronizeModels(e){const n=new Set,r=new Set;for(const i of e.items()){if(i instanceof Cs){const a=this.localModels.get(i.resourceUrl);a&&(await a.forceDelete(),r.add(a));continue}const o=VE(i,this.localModels);o.exists()||this.syncedModelUrls.add(o.url),await this.loadChildren(o),await kt.synchronize(o,i,{constructors:ya(o)}),await this.reconcileInconsistencies(o,i),await this.saveModelAndRelated(o),await this.addLocalModel(o),this.rootLocalModels.includes(o)||this.rootLocalModels.push(o),n.add(o.url)}for(const i of this.rootLocalModels){if(r.has(i)||n.has(i.url))continue;await this.loadChildren(i);const o=_B(i,e);await kt.synchronize(i,o,{constructors:ya(i)}),e.add(o)}const s=[];for(const i of e.getItems()){if(FE(i)){s.push(i);continue}await this.rememberModelDocuments(i)}return s}async reconcileInconsistencies(e,n,r){e.rebuildAttributesFromHistory(),e.setAttributes(n.getAttributes(!0)),r??(r=new Set),r.add(e);for(const i of Ns(e.static()))await this.synchronizeContainerDocuments(e.requireRelation(i),n.requireRelation(i));const s=dn(Ui(n),"url");for(const i of Ui(e))r.has(i)||!i.isRelationLoaded("operations")||!s.hasKey(i.url)||await this.reconcileInconsistencies(i,s.require(i.url),r);e.isDirty()&&await kt.synchronize(e,n,{constructors:ya(e)})}async synchronizeContainerDocuments(e,n){const r=dn(e.related??[],"url"),s=dn(n.related??[],"url"),i=r.getKeys().filter(a=>!s.hasKey(a)&&!s.hasKey(encodeURI(a))),o=s.getKeys().filter(a=>!r.hasKey(a)&&!r.hasKey(encodeURI(a)));for(const a of i){const l=r.require(a),u=qE(l);n.addRelated(u),s.add(u)}for(const a of o){const l=s.require(a),u=BE(l);e.addRelated(u),r.add(u),this.syncedModelUrls.add(u.url)}for(const a of r.items()){const l=s.require(a.url);await kt.synchronize(a,l,{constructors:ya(a)}),await this.saveModelAndRelated(a)}}async rememberModelDocuments(e){if(this.syncedModelUrls.add(e.url),!xs(e)){const r=e.requireDocumentUrl(),s=this.documentsModifiedAt[r];s&&(await Vs.getDocumentsCache().remember(Tt(r),r,s),delete this.documentsModifiedAt[r]);return}const n=Ns(e.static()).map(r=>e.getRelationModels(r)??[]).flat();for(const r of n)await this.rememberModelDocuments(r)}async ignoringDocumentErrors(e){try{await e()}catch(n){this.handleDocumentError(n)}}handleDocumentError(e){if(Yt(e,uE)){console.warn(e.message),e.documentUrl&&this.documentsWithErrors.add(e.documentUrl);return}if(Yt(e,B1)){console.warn(e.message);const n=e.attributes[Xt(e.modelName).primaryKey],r=n&&wr($t(n));r&&this.documentsWithErrors.add(r);return}throw e}}const Pt={Disconnected:"disconnected",Offline:"offline",Online:"online",Syncing:"syncing",Migrating:"migrating"},XE={manualSetup:!1},PB=Wi({name:"cloud",persist:["localModelUpdates","migrationDismissed","migrationJob","modelCollections","rootModelCollections","pollingEnabled","pollingMinutes","ready","startupSync"],initialState:()=>({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},rootModelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,manualSetup:XE.manualSetup,registeredModels:[],schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Pt.Disconnected,syncError:null,syncJob:null}),serialize:t=>{var e;return av(t,{migrationJob:(e=t.migrationJob)==null?void 0:e.serialize()})},restore:t=>av(t,{migrationJob:t.migrationJob&&GE.restore(t.migrationJob)}),watch:{migrationJob(t){t==null||t.listeners.add({onUpdated:()=>this.updatePersistedState("migrationJob")})}},computed:{disconnected:({status:t})=>t===Pt.Disconnected,online:({status:t})=>t===Pt.Online,offline:({status:t})=>t===Pt.Offline,syncing:({status:t})=>t===Pt.Syncing,migrating:({status:t})=>t===Pt.Migrating,localChanges({localModelUpdates:t}){return Object.values(t).reduce((e,n)=>e+n,0)},dirty(){return this.localChanges>0},migrationStarted({migrationJob:t}){return!!t},migrationDisabledReason({status:t,ready:e}){return at.isLoggedIn()?e?t===Pt.Syncing||t===Pt.Migrating?Le("cloud.migrationNotSyncing","Wait for syncing to finish before starting the migration"):this.online?null:Le("cloud.migrationNotOnline","You need to be online in order to start the migration"):Le("cloud.migrationNotReady","You need to backup your data before starting the migration"):Le("cloud.migrationNotLoggedIn","You need to reconnect before starting the migration")}}});class $B extends PB{constructor(){super(...arguments),Jt(this,"asyncLock",new fc),Jt(this,"engine",null),Jt(this,"pollingInterval",null),Jt(this,"documentsCache",null)}async whenReady(e){return this.ready?e():new Promise(n=>{const r=()=>n(e());We.once("cloud:ready",r)})}async setup(e){this.setupOngoing=!0;try{await this.backup(e),await this.setReady(!0),await this.sync()}finally{this.setupOngoing=!1}}getEngine(){return this.engine}requireEngine(){return this.engine??Ge("Could not get required Engine")}dismissSetup(){this.setupDismissed=!0}dismissMigration(){this.migrationDismissed=!0}postponeMigration(){this.migrationPostponed=!0}async syncIfOnline(e={}){this.online&&await this.sync(e)}async sync(e={}){const n=n0(e)?{models:e}:e instanceof kt?{model:e}:e;!at.isLoggedIn()||!this.ready||!this.online||await this.asyncLock.run(async()=>{let r=n.model?[n.model]:n.models;const s=Date.now();this.syncError=null,this.status=Pt.Syncing,Ku.clear(r);try{await We.emit("cloud:sync-started",r),n.refreshUserProfile&&await at.refreshUserProfile();const i=n.syncDirty??!0;let o=0;do{if(this.syncJob=new kB(r),this.syncJob.listeners.add(n),await kd(this.syncJob),this.syncJob.cancelled)return;o++,r=this.getDirtyLocalModels().filter(a=>{var l;return!((l=this.syncJob)!=null&&l.documentsWithErrors.has(a.requireDocumentUrl()))})}while(i&&r.length>0&&o<3);Va("unit")||await Hn({milliseconds:Math.max(500,1e3-(Date.now()-s))}),this.syncJob=null}catch(i){if(Va())throw i;this.syncJob=null,this.syncError=i,await yi.report(i,Le("cloud.syncFailed","Sync failed"))}finally{this.status=Pt.Online,await We.emit("cloud:sync-completed",r)}})}shouldMigrate(){return this.schemaMigrations.size>0}async migrate(e){if(!this.online||!at.isLoggedIn()||!this.ready)throw new Error("Data cannot be migrated at the moment");this.shouldMigrate()&&await this.asyncLock.run(async()=>{var n;this.status=Pt.Migrating,this.migrationJob??(this.migrationJob=new GE);const r=Date.now(),s=[],i=(n=this.migrationJob).models??(n.models=ap());Ku.clear(i);try{if(e&&s.push(this.migrationJob.listeners.add(e)),await We.emit("cloud:migration-started",i),await kd(this.migrationJob),this.migrationJob.cancelled){await We.emit("cloud:migration-cancelled",i);return}this.migrationJob=null,this.migrationDismissed=!1,this.migrationPostponed=!1,await Hn({milliseconds:Math.max(0,1e3-(Date.now()-r))}),await We.emit("cloud:migration-completed",i)}catch(o){await yi.report(o,Le("cloud.migrationFailed","Migration failed"))}finally{this.status=Pt.Online,s.forEach(o=>o==null?void 0:o())}})}async register(e,n={}){if(this.registeredModels.find(s=>e===s.modelClass))return;const r=this.engine;r&&aw(e).forEach(s=>Ar(s).setEngine(r)),this.whenReady(async()=>{const s=this.rootModelCollections[e.modelName];e.useSoftDeletes(!0),await e.exclusive(async()=>e.collection=s??pu(e,n.path))}),await $q(e,{created:s=>this.ready&&lw(s),updated:s=>this.ready&&uw(s),deleted:s=>this.ready&&op(new Set([s.url??s.getDeletedPrimaryKey()]))}),Mo(e)&&Ns(e).forEach(s=>{const i=e.instance().requireRelation(s).relatedClass;i.on("created",o=>this.ready&&lw(o)),i.on("updated",o=>this.ready&&uw(o)),i.on("deleted",o=>this.ready&&op(new Set([o.url??o.getDeletedPrimaryKey()])))}),this.registeredModels.push({modelClass:e,path:n.path});for(const s of this.modelCollections[e.modelName]??[])await ci(e,s)}registerSchemaMigration(e,n){this.schemaMigrations.set(e,n)}requireRemoteCollection(e){for(const n of this.registeredModels)if(e===n.modelClass)return pu(n.modelClass,n.path);throw new Error(`Failed resolving remote collection for '${e.modelName}' model`)}getDocumentsCache(){return this.documentsCache||(this.documentsCache=new Iq(fm(),Mc())),this.documentsCache}async boot(){await at.booted,at.isLoggedIn()&&this.login(at.authenticator),We.on("auth:login",({authenticator:e})=>this.login(e)),We.on("auth:logout",()=>this.logout()),We.on("purge-storage",()=>this.getDocumentsCache().clear()),We.once("application-ready",()=>this.onApplicationReady()),We.once("application-mounted",()=>this.onApplicationMounted()),qt(()=>{if(this.pollingInterval&&clearInterval(this.pollingInterval),!this.pollingEnabled||this.migrationJob){this.pollingInterval=null;return}this.pollingInterval=setInterval(()=>this.sync(),this.pollingMinutes*60*1e3)}),this.watchNetworkStatus(),await this.bustDocumentsCache(),await this.registerModels()}getDirtyLocalModels(){const e=Object.keys(this.localModelUpdates),n=[];for(const{modelClass:r}of this.registeredModels)for(const s of Xm(r,{includeSoftDeleted:!0}))n.push(...this.getModelsIn(e,s));return n}getModelsIn(e,n){const r=[];return e.includes(n.url)&&r.push(n),xs(n)&&r.push(...NE(n).map(s=>this.getModelsIn(e,s)).flat()),r}async setReady(e){this.ready||!e||(await We.emit("cloud:ready"),this.ready=!0)}async backup(e){await We.emit("cloud:backup-started"),e??(e=new WeakMap);const n=new CB;for(const{modelClass:r,path:s}of this.registeredModels){for(const[a,l]of Object.entries(e.get(r)??{}))n.migrateUrl(r,a,l);const i=r.instance().getDefaultCollection(),o=pu(r,s);await r.exclusive(async()=>r.collection=o),n.migrateCollection(r,i,o)}await kd(n),await We.emit("cloud:backup-completed")}async onApplicationReady(){this.ready||!at.isLoggedIn()||await this.setReady(!ap().some(e=>e.url.startsWith("solid://")))}async onApplicationMounted(){if(at.isLoggedIn()&&!this.ready&&!this.manualSetup){await this.setup();return}this.syncOnStartup()&&await this.sync()}login(e){const n=[...this.registeredModels].map(({modelClass:r})=>aw(r)).flat().concat([Cs]);this.status=Pt.Online,this.engine=e.engine,Ar(Er).setEngine(this.engine);for(const r of n)Ar(r).setEngine(this.engine)}async logout(){this.setState({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},rootModelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Pt.Disconnected,syncError:null,syncJob:null}),await this.getDocumentsCache().clear()}watchNetworkStatus(){globalThis.addEventListener("online",()=>{this.status===Pt.Offline&&(this.status=Pt.Online)}),globalThis.addEventListener("offline",()=>{this.status===Pt.Online&&(this.status=Pt.Offline)})}syncOnStartup(){return fo("startupSync")?Iu(Ta("startupSync")):this.migrationJob?!1:this.startupSync}async bustDocumentsCache(){!fo("bustDocumentsCache")||!Iu(Ta("bustDocumentsCache"))||await this.getDocumentsCache().clear()}async registerModels(){const e=H1();for(const n of e.values())!kE(n)||!n.cloud||await this.register(n,typeof n.cloud=="boolean"?{}:n.cloud)}}const yr=Kr($B),LB={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function MB(t,e){return F(),be("svg",LB,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"m6 2l2-2h4l2 2h4v2H2V2zM3 6h14l-1 14H4zm5 2v10h1V8zm3 0v10h1V8z"},null,-1)]))}const NB=st({name:"zondicons-trash",render:MB}),YE=me({__name:"AccountLoginModal",setup(t){return(e,n)=>(F(),ce(A(Us),{title:e.$td("cloud.logIn.title","Connect account")},{default:se(()=>[oe(A(Lt),{"lang-key":"cloud.logIn.info","lang-default":"Log in to your [Solid account](https://solidproject.org) to keep data safe across devices."}),oe(A(Po),{class:"text-sm",onClick:n[0]||(n[0]=r=>e.$ui.alert(e.$td("cloud.logIn.learnMore","What is Solid?"),e.$td("cloud.logIn.learnMoreMessage",`Solid is a decentralized storage protocol built on top of web standards. If you want to use this app across devices, you can use Solid to keep changes in sync. Even if you use it in a single device, this will also keep your data secure in case your device is lost.

In any case, Focus works 100% offline and you can connect your Solid POD later on. If you've never heard of Solid and you're just trying things out, you can keep using it without an account.

[Learn more](https://solidproject.org)`)))},{default:se(()=>[rt(Te(e.$td("cloud.logIn.learnMore","What is Solid?")),1)]),_:1}),oe(A(lB),{"no-loading":"",class:"mt-4"})]),_:1},8,["title"]))}}),FB={key:0,class:"mt-4"},jB={class:"text-base font-semibold"},UB={class:"ml-1"},qB=me({__name:"PurgeData",setup(t){async function e(){await Ht.confirm(Le("settings.purgeConfirmTitle","Delete everything?"),Le("settings.purgeConfirmMessage","If you proceed, all your data will be deleted forever. If you want to save it before wiping this device, you can [connect to your Solid account](#action:connect) first."),{acceptVariant:"danger",acceptText:Le("settings.purgeConfirmAccept","Purge data"),actions:{connect:()=>Ht.modal(YE)}})&&(await Ht.closeAllModals(),await Oc.purge())}return(n,r)=>n.$solid.hasLoggedIn()?je("",!0):(F(),be("details",FB,[te("summary",null,[te("span",jB,Te(n.$td("settings.dangerZone","Danger zone")),1)]),oe(A(Ct),{variant:"danger",class:"mt-4",onClick:r[0]||(r[0]=s=>e())},{default:se(()=>[oe(A(NB),{class:"size-4"}),te("span",UB,Te(n.$td("settings.purge","Purge data")),1)]),_:1})]))}}),BB=[{priority:0,component:qB}],VB={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function zB(t,e){return F(),be("svg",VB,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07m12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32M6.7 9.29L9 11.6l4.3-4.3l1.4 1.42L9 14.4l-3.7-3.7l1.4-1.42z"},null,-1)]))}const HB=st({name:"zondicons-checkmark-outline",render:zB}),KB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function WB(t,e){return F(),be("svg",KB,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5c0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5l5 5z"},null,-1)]))}const GB=st({name:"ic-sharp-cloud-upload",render:WB}),JB={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function XB(t,e){return F(),be("svg",JB,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M3.94 6.5L2.22 3.64l1.42-1.42L6.5 3.94c.52-.3 1.1-.54 1.7-.7L9 0h2l.8 3.24c.6.16 1.18.4 1.7.7l2.86-1.72l1.42 1.42l-1.72 2.86c.3.52.54 1.1.7 1.7L20 9v2l-3.24.8c-.16.6-.4 1.18-.7 1.7l1.72 2.86l-1.42 1.42l-2.86-1.72c-.52.3-1.1.54-1.7.7L11 20H9l-.8-3.24c-.6-.16-1.18-.4-1.7-.7l-2.86 1.72l-1.42-1.42l1.72-2.86c-.3-.52-.54-1.1-.7-1.7L0 11V9l3.24-.8c.16-.6.4-1.18.7-1.7M10 13a3 3 0 1 0 0-6a3 3 0 0 0 0 6"},null,-1)]))}const QE=st({name:"zondicons-cog",render:XB}),YB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function QB(t,e){return F(),be("svg",YB,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h6q.425 0 .713.288T12 20t-.288.713T11 21zm12.175-8H10q-.425 0-.712-.288T9 12t.288-.712T10 11h7.175L15.3 9.125q-.275-.275-.275-.675t.275-.7t.7-.313t.725.288L20.3 11.3q.3.3.3.7t-.3.7l-3.575 3.575q-.3.3-.712.288t-.713-.313q-.275-.3-.262-.712t.287-.688z"},null,-1)]))}const ZB=st({name:"material-symbols-logout-rounded",render:QB}),e4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function t4(t,e){return F(),be("svg",e4,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M10 3v2a5 5 0 0 0-3.54 8.54l-1.41 1.41A7 7 0 0 1 10 3m4.95 2.05A7 7 0 0 1 10 17v-2a5 5 0 0 0 3.54-8.54zM10 20l-4-4l4-4zm0-12V0l4 4z"},null,-1)]))}const Kl=st({name:"zondicons-refresh",render:t4}),n4={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function r4(t,e){return F(),be("svg",n4,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1)]))}const s4=st({name:"ic-baseline-stop",render:r4}),i4={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function o4(t,e){return F(),be("svg",i4,e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M449.07 399.08L278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17m-198.6-1.83a20 20 0 1 1 20-20a20 20 0 0 1-20 20m21.72-201.15l-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7Z"},null,-1)]))}const Wl=st({name:"ion-warning",render:o4}),a4={class:"relative flex items-center rounded-md bg-gray-100 p-4 pr-12"},l4={class:"flex flex-col overflow-hidden"},u4={class:"font-semibold"},c4={class:"px-2"},d4={key:0,class:"mt-4 flex items-center gap-2"},f4={class:"flex w-full flex-col"},h4={key:1,class:"mt-4 flex items-center gap-2"},p4={key:2,class:"mt-4 flex items-center gap-2"},m4={key:3,class:"mt-4 flex items-center gap-2"},g4={key:4,class:"mt-4 flex items-center gap-2"},y4={key:5,class:"mt-4 flex items-center gap-2"},v4={key:6,class:"mt-4 flex items-center gap-2"},b4={class:"flex flex-col gap-2"},w4={class:"flex items-center"},_4={"aria-hidden":"true"},x4={key:0,"aria-hidden":"true"},E4={key:0,class:"mt-4 flex flex-row-reverse justify-start gap-2"},A4=me({__name:"AccountModal",setup(t){const{close:e}=Dc(),n=_e(!1),r=Le("cloud.advanced.polling","Synchronize every {minutes} minutes",{minutes:"%%separator%%"}).split("%%separator%%"),s=J(()=>at.error??yr.syncError),i=J(()=>{if(s.value)return typeof s.value=="string"?s.value:Le("cloud.info.error","There has been an error connecting.")}),o=J(()=>s.value&&typeof s.value!="string");async function a(){yr.syncJob&&(n.value=!0,await Promise.race([yr.syncJob.cancel(),yr.syncJob.completed]),n.value=!1)}return rL("auth:logout",e),(l,u)=>(F(),ce(A(Us),{"title-hidden":"","close-hidden":"",title:l.$td("account.title","Account")},{default:se(()=>{var c,d;return[te("div",a4,[oe(A(ME),{class:"mr-2 size-16 shrink-0"}),te("div",l4,[te("span",u4,Te(((c=l.$solid.user)==null?void 0:c.name)??l.$td("user.anonymous","Anonymous")),1),oe(A(Po),{href:(d=l.$solid.user)==null?void 0:d.webId,class:"mt-0.5 truncate text-sm font-light text-gray-500"},{default:se(()=>{var f;return[rt(Te((f=l.$solid.user)==null?void 0:f.webId),1)]}),_:1},8,["href"])]),oe(A(Ct),{size:"icon",variant:"ghost",class:"absolute top-1 right-1 hover:bg-gray-200","aria-label":l.$td("user.settings","Settings"),title:l.$td("user.settings","Settings"),onClick:u[0]||(u[0]=f=>l.$ui.modal(A(m1)))},{default:se(()=>[oe(A(QE),{class:"size-5"})]),_:1},8,["aria-label","title"])]),te("div",c4,[l.$cloud.syncing?(F(),be("div",d4,[oe(A(Kl),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),te("div",f4,[oe(A(Lt),{"lang-key":"cloud.info.syncing","lang-default":"Synchronizing..."}),l.$cloud.syncJob?(F(),ce(A(u1),{key:0,job:l.$cloud.syncJob,"filled-class":"bg-green-500"},null,8,["job"])):je("",!0)])])):l.$solid.loginOngoing?(F(),be("div",h4,[oe(A(Kl),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),oe(A(Lt),{"lang-key":"cloud.info.reconnecting","lang-default":"Reconnecting..."})])):s.value?(F(),be("div",p4,[oe(A(Wl),{class:"mt-0.5 size-6 shrink-0 self-start text-red-500"}),te("div",null,[oe(A(Lt),{text:i.value},null,8,["text"]),o.value?(F(),ce(A(Po),{key:0,class:"text-sm text-red-700 opacity-50 hover:opacity-75 focus-visible:opacity-75",onClick:u[1]||(u[1]=f=>l.$errors.inspect(s.value))},{default:se(()=>[rt(Te(l.$td("errors.viewDetails","View details")),1)]),_:1})):je("",!0)])])):l.$cloud.ready?l.$cloud.dirty?(F(),be("div",g4,[oe(A(Wl),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),oe(A(Lt),{"lang-key":"cloud.info.changes","lang-default":"Everything is up to date. | There is one local change. | There are {n} local changes.","lang-params":l.$cloud.localChanges},null,8,["lang-params"])])):l.$cloud.online||l.$cloud.offline?(F(),be("div",y4,[oe(A(HB),{class:Ve(["mt-0.5 size-6 shrink-0 self-start",{"text-green-500":l.$cloud.online,"text-gray-700":l.$cloud.offline}])},null,8,["class"]),l.$cloud.online?(F(),ce(A(Lt),{key:0,"lang-key":"cloud.info.changes","lang-default":"Everything is up to date.","lang-params":0})):(F(),ce(A(Lt),{key:1,"lang-key":"cloud.info.offline","lang-default":"Everything is up to date, but you're currently offline."}))])):(F(),be("div",v4,[oe(A(Wl),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),oe(A(Lt),{"lang-key":"cloud.info.disconnected","lang-default":"You are disconnected from your Solid account, all the changes you make will remain in your device."})])):(F(),be("div",m4,[oe(A(Wl),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),oe(A(Lt),{"lang-key":"cloud.info.setup","lang-default":"Your data is not backed up yet."})])),oe(A(WM),{class:"mt-2"},{default:se(()=>[te("ul",b4,[te("li",null,[oe(A(Dd),{modelValue:l.$solid.autoReconnect,"onUpdate:modelValue":u[2]||(u[2]=f=>l.$solid.autoReconnect=f),"label-class":"text-base",label:l.$td("cloud.advanced.reconnect","Reconnect on startup")},null,8,["modelValue","label"])]),te("li",null,[oe(A(Dd),{modelValue:l.$cloud.startupSync,"onUpdate:modelValue":u[3]||(u[3]=f=>l.$cloud.startupSync=f),"label-class":"text-base",label:l.$td("cloud.advanced.startupSync","Synchronize on startup")},null,8,["modelValue","label"])]),te("li",null,[oe(A(Dd),{modelValue:l.$cloud.pollingEnabled,"onUpdate:modelValue":u[5]||(u[5]=f=>l.$cloud.pollingEnabled=f),"label-class":"text-base"},{default:se(()=>[te("div",w4,[te("span",_4,Te(A(r)[0]),1),oe(A(eN),{type:"number",text:`${l.$cloud.pollingMinutes}`,"aria-label":l.$td("cloud.advanced.pollingMinutes","Synchronization interval (in minutes)"),class:"focus-within:border-primary-600 mx-1 -mb-px border-b",onUpdate:u[4]||(u[4]=f=>l.$cloud.pollingMinutes=f)},{default:se(()=>[rt(Te(l.$cloud.pollingMinutes),1)]),_:1},8,["text","aria-label"]),A(r).length>1?(F(),be("span",x4,Te(A(r)[1]),1)):je("",!0)])]),_:1},8,["modelValue"])])])]),_:1})]),l.$solid.loginOngoing?je("",!0):(F(),be("div",E4,[l.$cloud.syncing?(F(),ce(A(Ct),{key:0,variant:"secondary",disabled:n.value,onClick:u[6]||(u[6]=f=>a())},{default:se(()=>[oe(A(s4),{class:"size-5"}),te("span",null,Te(n.value?l.$td("cloud.stopping","Stopping..."):l.$td("cloud.stop","Stop synchronization")),1)]),_:1},8,["disabled"])):l.$solid.isLoggedIn()?l.$cloud.ready?(F(),ce(A(Ct),{key:2,disabled:l.$cloud.offline,onClick:u[8]||(u[8]=f=>l.$cloud.sync({refreshUserProfile:!0}))},{default:se(()=>[oe(A(Kl),{class:"size-5"}),te("span",null,Te(l.$td("cloud.sync","Synchronize")),1)]),_:1},8,["disabled"])):(F(),ce(A(Ct),{key:3,onClick:u[9]||(u[9]=f=>(l.$cloud.setupDismissed=!1,A(e)(),l.$cloud.manualSetup||l.$cloud.setup()))},{default:se(()=>[oe(A(GB),{class:"size-5"}),te("span",null,Te(l.$td("cloud.setup.submit","Back up now")),1)]),_:1})):(F(),ce(A(Ct),{key:1,onClick:u[7]||(u[7]=f=>l.$solid.reconnect({force:!0}))},{default:se(()=>[oe(A(Kl),{class:"size-5"}),te("span",null,Te(l.$td("cloud.reconnect","Reconnect")),1)]),_:1})),l.$cloud.syncing?je("",!0):(F(),ce(A(Ct),{key:4,variant:"secondary",onClick:u[10]||(u[10]=f=>l.$solid.logout())},{default:se(()=>[oe(A(ZB),{class:"size-5"}),te("span",null,Te(l.$cloud.ready?l.$td("cloud.logOut","Log out"):l.$td("cloud.disconnect","Disconnect")),1)]),_:1}))]))]}),_:1},8,["title"]))}}),S4={class:"relative size-12"},I4=["aria-label","title"],C4={key:0,class:"absolute -inset-1 animate-spin rounded-full border-2 border-[currentColor_transparent] text-green-500"},R4={class:"sr-only"},T4=me({__name:"AccountLoggedIn",setup(t){const e=J(()=>yr.syncing||at.loginOngoing?{loading:!0,classes:"bg-green-500 sr-only",message:n()??""}:at.error||yr.syncError?{classes:"bg-red-500",message:Le("account.error","There has been an error connecting with your account.")}:!at.isLoggedIn()||yr.dirty||!yr.ready?{classes:"bg-yellow-500",message:Le("account.dirty","There are local changes that haven't been synchronized yet.")}:{classes:yr.status===Pt.Online?"bg-green-500":"bg-gray-500",message:n()??""});function n(){switch(yr.status){case Pt.Syncing:return Le("cloud.status.syncing","Synchronization in progress");case Pt.Migrating:return Le("cloud.status.migrating","Migration in progress");case Pt.Online:return Le("cloud.status.online","Online");case Pt.Offline:return Le("cloud.status.offline","Offline");case Pt.Disconnected:return Le("cloud.status.disconnected","Disconnected")}}return(r,s)=>(F(),be("div",S4,[te("button",{class:"clickable focus-visible:outline-primary-600 flex size-full rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",type:"button","aria-label":r.$td("account.open","Open account"),title:r.$td("account.open","Open account"),onClick:s[0]||(s[0]=i=>r.$ui.modal(A4))},[oe(A(ME),{class:"size-full"}),e.value.loading?(F(),be("div",C4)):je("",!0)],8,I4),te("div",{class:Ve(["pointer-events-none absolute right-0 bottom-0 size-3 rounded-full border-2 border-white",e.value.classes])},[te("span",R4,Te(e.value.message),1)],2)]))}}),O4=me({__name:"AccountLoggedOut",setup(t){return(e,n)=>(F(),ce(A(YM),{align:"start",options:[{label:e.$td("user.logIn","Connect account"),click:()=>e.$ui.modal(YE)},{label:e.$td("user.settings","Settings"),click:()=>e.$ui.modal(A(m1))}]},{default:se(()=>[oe(A(Ct),{size:"icon",variant:"ghost","aria-label":e.$td("user.menu","Configuration"),title:e.$td("user.menu","Configuration")},{default:se(()=>[oe(A(QE),{class:"size-5"})]),_:1},8,["aria-label","title"])]),_:1},8,["options"]))}}),D4=me({__name:"Account",setup(t){return(e,n)=>e.$solid.hasLoggedIn()?(F(),ce(T4,{key:0})):(F(),ce(O4,{key:1}))}}),k4={$cloud:yr};function P4(t={}){return{name:"@aerogel/local-first",async install(e){BB.forEach(n=>lt.addSetting(n)),typeof t.manualSetup=="boolean"&&(XE.manualSetup=t.manualSetup,yr.manualSetup=t.manualSetup),await Gi(e,k4)}}}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const co=typeof document<"u";function ZE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function $4(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ZE(t.default)}const ct=Object.assign;function Ff(t,e){const n={};for(const r in e){const s=e[r];n[r]=Hr(s)?s.map(t):t(s)}return n}const La=()=>{},Hr=Array.isArray;function fw(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const eA=/#/g,L4=/&/g,M4=/\//g,N4=/=/g,F4=/\?/g,tA=/\+/g,j4=/%5B/g,U4=/%5D/g,nA=/%5E/g,q4=/%60/g,rA=/%7B/g,B4=/%7C/g,sA=/%7D/g,V4=/%20/g;function eg(t){return t==null?"":encodeURI(""+t).replace(B4,"|").replace(j4,"[").replace(U4,"]")}function z4(t){return eg(t).replace(rA,"{").replace(sA,"}").replace(nA,"^")}function lp(t){return eg(t).replace(tA,"%2B").replace(V4,"+").replace(eA,"%23").replace(L4,"%26").replace(q4,"`").replace(rA,"{").replace(sA,"}").replace(nA,"^")}function H4(t){return lp(t).replace(N4,"%3D")}function K4(t){return eg(t).replace(eA,"%23").replace(F4,"%3F")}function W4(t){return K4(t).replace(M4,"%2F")}function Ya(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const G4=/\/$/,J4=t=>t.replace(G4,"");function jf(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Z4(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Ya(o)}}function X4(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function hw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Y4(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&No(e.matched[r],n.matched[s])&&iA(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function No(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function iA(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!Q4(t[n],e[n]))return!1;return!0}function Q4(t,e){return Hr(t)?pw(t,e):Hr(e)?pw(e,t):(t==null?void 0:t.valueOf())===(e==null?void 0:e.valueOf())}function pw(t,e){return Hr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Z4(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const zs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let up=(function(t){return t.pop="pop",t.push="push",t})({}),Uf=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function e8(t){if(!t)if(co){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),J4(t)}const t8=/^[^#]+#/;function n8(t,e){return t.replace(t8,"#")+e}function r8(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const zc=()=>({left:window.scrollX,top:window.scrollY});function s8(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=r8(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function mw(t,e){return(history.state?history.state.position-e:-1)+t}const cp=new Map;function i8(t,e){cp.set(t,e)}function o8(t){const e=cp.get(t);return cp.delete(t),e}function a8(t){return typeof t=="string"||t&&typeof t=="object"}function oA(t){return typeof t=="string"||typeof t=="symbol"}let Bt=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const aA=Symbol("");Bt.MATCHER_NOT_FOUND+"",Bt.NAVIGATION_GUARD_REDIRECT+"",Bt.NAVIGATION_ABORTED+"",Bt.NAVIGATION_CANCELLED+"",Bt.NAVIGATION_DUPLICATED+"";function Fo(t,e){return ct(new Error,{type:t,[aA]:!0},e)}function vs(t,e){return t instanceof Error&&aA in t&&(e==null||!!(t.type&e))}const l8=["params","query","hash"];function u8(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of l8)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function c8(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(tA," "),i=s.indexOf("="),o=Ya(i<0?s:s.slice(0,i)),a=i<0?null:Ya(s.slice(i+1));if(o in e){let l=e[o];Hr(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function gw(t){let e="";for(let n in t){const r=t[n];if(n=H4(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Hr(r)?r.map(s=>s&&lp(s)):[r&&lp(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function d8(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Hr(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const f8=Symbol(""),yw=Symbol(""),Hc=Symbol(""),tg=Symbol(""),dp=Symbol("");function pa(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Xs(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=f=>{f===!1?l(Fo(Bt.NAVIGATION_ABORTED,{from:n,to:e})):f instanceof Error?l(f):a8(f)?l(Fo(Bt.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},c=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(c);t.length<3&&(d=d.then(u)),d.catch(f=>l(f))})}function qf(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(ZE(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Xs(u,n,r,o,a,s))}else{let u=l();i.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=$4(c)?c.default:c;o.mods[a]=c,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Xs(f,n,r,o,a,s)()}))}}return i}function h8(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>No(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>No(u,l))||s.push(l))}return[n,r,s]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let p8=()=>location.protocol+"//"+location.host;function lA(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),hw(a,"")}return hw(n,t)+r+s}function m8(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const h=lA(t,location),m=n.value,g=e.value;let x=0;if(f){if(n.value=h,e.value=f,o&&o===m){o=null;return}x=g?f.position-g.position:0}else r(h);s.forEach(b=>{b(n.value,m,{delta:x,type:up.pop,direction:x?x>0?Uf.forward:Uf.back:Uf.unknown})})};function l(){o=n.value}function u(f){s.push(f);const h=()=>{const m=s.indexOf(f);m>-1&&s.splice(m,1)};return i.push(h),h}function c(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(ct({},f.state,{scroll:zc()}),"")}}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:l,listen:u,destroy:d}}function vw(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?zc():null}}function g8(t){const{history:e,location:n}=window,r={value:lA(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:p8()+t+l;try{e[c?"replaceState":"pushState"](u,"",f),s.value=u}catch(h){console.error(h),n[c?"replace":"assign"](f)}}function o(l,u){i(l,ct({},e.state,vw(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function a(l,u){const c=ct({},s.value,e.state,{forward:l,scroll:zc()});i(c.current,c,!0),i(l,ct({},vw(r.value,l,null),{position:c.position+1},u),!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function y8(t){t=e8(t);const e=g8(t),n=m8(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=ct({location:"",base:t,go:r,createHref:n8.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Li=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var tn=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(tn||{});const v8={type:Li.Static,value:""},b8=/[a-zA-Z0-9_]/;function w8(t){if(!t)return[[]];if(t==="/")return[[v8]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=tn.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",c="";function d(){u&&(n===tn.Static?i.push({type:Li.Static,value:u}):n===tn.Param||n===tn.ParamRegExp||n===tn.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Li.Param,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==tn.ParamRegExp){r=n,n=tn.EscapeNext;continue}switch(n){case tn.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=tn.Param):f();break;case tn.EscapeNext:f(),n=r;break;case tn.Param:l==="("?n=tn.ParamRegExp:b8.test(l)?f():(d(),n=tn.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case tn.ParamRegExp:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=tn.ParamRegExpEnd:c+=l;break;case tn.ParamRegExpEnd:d(),n=tn.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===tn.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}const bw="[^/]+?",_8={sensitive:!1,strict:!1,start:!0,end:!0};var kn=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(kn||{});const x8=/[.+*?^${}()[\]/\\]/g;function E8(t,e){const n=ct({},_8,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const c=u.length?[]:[kn.Root];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const f=u[d];let h=kn.Segment+(n.sensitive?kn.BonusCaseSensitive:0);if(f.type===Li.Static)d||(s+="/"),s+=f.value.replace(x8,"\\$&"),h+=kn.Static;else if(f.type===Li.Param){const{value:m,repeatable:g,optional:x,regexp:b}=f;i.push({name:m,repeatable:g,optional:x});const E=b||bw;if(E!==bw){h+=kn.BonusCustomRegExp;try{`${E}`}catch(p){throw new Error(`Invalid custom RegExp for param "${m}" (${E}): `+p.message)}}let _=g?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;d||(_=x&&u.length<2?`(?:/${_})`:"/"+_),x&&(_+="?"),s+=_,h+=kn.Dynamic,x&&(h+=kn.BonusOptional),g&&(h+=kn.BonusRepeatable),E===".*"&&(h+=kn.BonusWildcard)}c.push(h)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=kn.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const c=u.match(o),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",m=i[f-1];d[m.name]=h&&m.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const f of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===Li.Static)c+=h.value;else if(h.type===Li.Param){const{value:m,repeatable:g,optional:x}=h,b=m in u?u[m]:"";if(Hr(b)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const E=Hr(b)?b.join("/"):b;if(!E)if(x)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);c+=E}}return c||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function A8(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===kn.Static+kn.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===kn.Static+kn.Segment?1:-1:0}function uA(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=A8(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(ww(r))return 1;if(ww(s))return-1}return s.length-r.length}function ww(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const S8={strict:!1,end:!0,sensitive:!1};function I8(t,e,n){const r=E8(w8(t.path),n),s=ct(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function C8(t,e){const n=[],r=new Map;e=fw(S8,e);function s(d){return r.get(d)}function i(d,f,h){const m=!h,g=xw(d);g.aliasOf=h&&h.record;const x=fw(e,d),b=[g];if("alias"in d){const p=typeof d.alias=="string"?[d.alias]:d.alias;for(const v of p)b.push(xw(ct({},g,{components:h?h.record.components:g.components,path:v,aliasOf:h?h.record:g})))}let E,_;for(const p of b){const{path:v}=p;if(f&&v[0]!=="/"){const S=f.record.path,C=S[S.length-1]==="/"?"":"/";p.path=f.record.path+(v&&C+v)}if(E=I8(p,f,x),h?h.alias.push(E):(_=_||E,_!==E&&_.alias.push(E),m&&d.name&&!Ew(E)&&o(d.name)),cA(E)&&l(E),g.children){const S=g.children;for(let C=0;C<S.length;C++)i(S[C],E,h&&h.children[C])}h=h||E}return _?()=>{o(_)}:La}function o(d){if(oA(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=O8(d,n);n.splice(f,0,d),d.record.name&&!Ew(d)&&r.set(d.record.name,d)}function u(d,f){let h,m={},g,x;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw Fo(Bt.MATCHER_NOT_FOUND,{location:d});x=h.record.name,m=ct(_w(f.params,h.keys.filter(_=>!_.optional).concat(h.parent?h.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),d.params&&_w(d.params,h.keys.map(_=>_.name))),g=h.stringify(m)}else if(d.path!=null)g=d.path,h=n.find(_=>_.re.test(g)),h&&(m=h.parse(g),x=h.record.name);else{if(h=f.name?r.get(f.name):n.find(_=>_.re.test(f.path)),!h)throw Fo(Bt.MATCHER_NOT_FOUND,{location:d,currentLocation:f});x=h.record.name,m=ct({},f.params,d.params),g=h.stringify(m)}const b=[];let E=h;for(;E;)b.unshift(E.record),E=E.parent;return{name:x,path:g,params:m,matched:b,meta:T8(b)}}t.forEach(d=>i(d));function c(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:s}}function _w(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function xw(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:R8(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function R8(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Ew(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function T8(t){return t.reduce((e,n)=>ct(e,n.meta),{})}function O8(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;uA(t,e[i])<0?r=i:n=i+1}const s=D8(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function D8(t){let e=t;for(;e=e.parent;)if(cA(e)&&uA(t,e)===0)return e}function cA({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Aw(t){const e=jt(Hc),n=jt(tg),r=J(()=>{const l=A(t.to);return e.resolve(l)}),s=J(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(No.bind(null,c));if(f>-1)return f;const h=Sw(l[u-2]);return u>1&&Sw(c)===h&&d[d.length-1].path!==h?d.findIndex(No.bind(null,l[u-2])):f}),i=J(()=>s.value>-1&&L8(n.params,r.value.params)),o=J(()=>s.value>-1&&s.value===n.matched.length-1&&iA(n.params,r.value.params));function a(l={}){if($8(l)){const u=e[A(t.replace)?"replace":"push"](A(t.to)).catch(La);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:J(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function k8(t){return t.length===1?t[0]:t}const P8=me({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Aw,setup(t,{slots:e}){const n=Gn(Aw(t)),{options:r}=jt(Hc),s=J(()=>({[Iw(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Iw(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&k8(e.default(n));return t.custom?i:nr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),dA=P8;function $8(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function L8(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Hr(s)||s.length!==r.length||r.some((i,o)=>i.valueOf()!==s[o].valueOf()))return!1}return!0}function Sw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Iw=(t,e,n)=>t??e??n,M8=me({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=jt(dp),s=J(()=>t.route||r.value),i=jt(yw,0),o=J(()=>{let u=A(i);const{matched:c}=s.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),a=J(()=>s.value.matched[o.value]);_r(yw,J(()=>o.value+1)),_r(f8,a),_r(dp,s);const l=_e();return et(()=>[l.value,a.value,t.name],([u,c,d],[f,h,m])=>{c&&(c.instances[d]=u,h&&h!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!No(c,h)||!f)&&(c.enterCallbacks[d]||[]).forEach(g=>g(u))},{flush:"post"}),()=>{const u=s.value,c=t.name,d=a.value,f=d&&d.components[c];if(!f)return Cw(n.default,{Component:f,route:u});const h=d.props[c],m=h?h===!0?u.params:typeof h=="function"?h(u):h:null,x=nr(f,ct({},m,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return Cw(n.default,{Component:x,route:u})||x}}});function Cw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const N8=M8;function F8(t){const e=C8(t.routes,t),n=t.parseQuery||c8,r=t.stringifyQuery||gw,s=t.history,i=pa(),o=pa(),a=pa(),l=sr(zs);let u=zs;co&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Ff.bind(null,$=>""+$),d=Ff.bind(null,W4),f=Ff.bind(null,Ya);function h($,Z){let ae,re;return oA($)?(ae=e.getRecordMatcher($),re=Z):re=$,e.addRoute(re,ae)}function m($){const Z=e.getRecordMatcher($);Z&&e.removeRoute(Z)}function g(){return e.getRoutes().map($=>$.record)}function x($){return!!e.getRecordMatcher($)}function b($,Z){if(Z=ct({},Z||l.value),typeof $=="string"){const K=jf(n,$,Z.path),he=e.resolve({path:K.path},Z),ve=s.createHref(K.fullPath);return ct(K,he,{params:f(he.params),hash:Ya(K.hash),redirectedFrom:void 0,href:ve})}let ae;if($.path!=null)ae=ct({},$,{path:jf(n,$.path,Z.path).path});else{const K=ct({},$.params);for(const he in K)K[he]==null&&delete K[he];ae=ct({},$,{params:d(K)}),Z.params=d(Z.params)}const re=e.resolve(ae,Z),Ee=$.hash||"";re.params=c(f(re.params));const L=X4(r,ct({},$,{hash:z4(Ee),path:re.path})),k=s.createHref(L);return ct({fullPath:L,hash:Ee,query:r===gw?d8($.query):$.query||{}},re,{redirectedFrom:void 0,href:k})}function E($){return typeof $=="string"?jf(n,$,l.value.path):ct({},$)}function _($,Z){if(u!==$)return Fo(Bt.NAVIGATION_CANCELLED,{from:Z,to:$})}function p($){return C($)}function v($){return p(ct(E($),{replace:!0}))}function S($,Z){const ae=$.matched[$.matched.length-1];if(ae&&ae.redirect){const{redirect:re}=ae;let Ee=typeof re=="function"?re($,Z):re;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=E(Ee):{path:Ee},Ee.params={}),ct({query:$.query,hash:$.hash,params:Ee.path!=null?{}:$.params},Ee)}}function C($,Z){const ae=u=b($),re=l.value,Ee=$.state,L=$.force,k=$.replace===!0,K=S(ae,re);if(K)return C(ct(E(K),{state:typeof K=="object"?ct({},Ee,K.state):Ee,force:L,replace:k}),Z||ae);const he=ae;he.redirectedFrom=Z;let ve;return!L&&Y4(r,re,ae)&&(ve=Fo(Bt.NAVIGATION_DUPLICATED,{to:he,from:re}),ue(re,re,!0,!1)),(ve?Promise.resolve(ve):D(he,re)).catch(ge=>vs(ge)?vs(ge,Bt.NAVIGATION_GUARD_REDIRECT)?ge:B(ge):q(ge,he,re)).then(ge=>{if(ge){if(vs(ge,Bt.NAVIGATION_GUARD_REDIRECT))return C(ct({replace:k},E(ge.to),{state:typeof ge.to=="object"?ct({},Ee,ge.to.state):Ee,force:L}),Z||he)}else ge=z(he,re,!0,k,Ee);return U(he,re,ge),ge})}function R($,Z){const ae=_($,Z);return ae?Promise.reject(ae):Promise.resolve()}function T($){const Z=Se.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext($):$()}function D($,Z){let ae;const[re,Ee,L]=h8($,Z);ae=qf(re.reverse(),"beforeRouteLeave",$,Z);for(const K of re)K.leaveGuards.forEach(he=>{ae.push(Xs(he,$,Z))});const k=R.bind(null,$,Z);return ae.push(k),W(ae).then(()=>{ae=[];for(const K of i.list())ae.push(Xs(K,$,Z));return ae.push(k),W(ae)}).then(()=>{ae=qf(Ee,"beforeRouteUpdate",$,Z);for(const K of Ee)K.updateGuards.forEach(he=>{ae.push(Xs(he,$,Z))});return ae.push(k),W(ae)}).then(()=>{ae=[];for(const K of L)if(K.beforeEnter)if(Hr(K.beforeEnter))for(const he of K.beforeEnter)ae.push(Xs(he,$,Z));else ae.push(Xs(K.beforeEnter,$,Z));return ae.push(k),W(ae)}).then(()=>($.matched.forEach(K=>K.enterCallbacks={}),ae=qf(L,"beforeRouteEnter",$,Z,T),ae.push(k),W(ae))).then(()=>{ae=[];for(const K of o.list())ae.push(Xs(K,$,Z));return ae.push(k),W(ae)}).catch(K=>vs(K,Bt.NAVIGATION_CANCELLED)?K:Promise.reject(K))}function U($,Z,ae){a.list().forEach(re=>T(()=>re($,Z,ae)))}function z($,Z,ae,re,Ee){const L=_($,Z);if(L)return L;const k=Z===zs,K=co?history.state:{};ae&&(re||k?s.replace($.fullPath,ct({scroll:k&&K&&K.scroll},Ee)):s.push($.fullPath,Ee)),l.value=$,ue($,Z,ae,k),B()}let V;function P(){V||(V=s.listen(($,Z,ae)=>{if(!G.listening)return;const re=b($),Ee=S(re,G.currentRoute.value);if(Ee){C(ct(Ee,{replace:!0,force:!0}),re).catch(La);return}u=re;const L=l.value;co&&i8(mw(L.fullPath,ae.delta),zc()),D(re,L).catch(k=>vs(k,Bt.NAVIGATION_ABORTED|Bt.NAVIGATION_CANCELLED)?k:vs(k,Bt.NAVIGATION_GUARD_REDIRECT)?(C(ct(E(k.to),{force:!0}),re).then(K=>{vs(K,Bt.NAVIGATION_ABORTED|Bt.NAVIGATION_DUPLICATED)&&!ae.delta&&ae.type===up.pop&&s.go(-1,!1)}).catch(La),Promise.reject()):(ae.delta&&s.go(-ae.delta,!1),q(k,re,L))).then(k=>{k=k||z(re,L,!1),k&&(ae.delta&&!vs(k,Bt.NAVIGATION_CANCELLED)?s.go(-ae.delta,!1):ae.type===up.pop&&vs(k,Bt.NAVIGATION_ABORTED|Bt.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),U(re,L,k)}).catch(La)}))}let X=pa(),O=pa(),H;function q($,Z,ae){B($);const re=O.list();return re.length?re.forEach(Ee=>Ee($,Z,ae)):console.error($),Promise.reject($)}function ie(){return H&&l.value!==zs?Promise.resolve():new Promise(($,Z)=>{X.add([$,Z])})}function B($){return H||(H=!$,P(),X.list().forEach(([Z,ae])=>$?ae($):Z()),X.reset()),$}function ue($,Z,ae,re){const{scrollBehavior:Ee}=t;if(!co||!Ee)return Promise.resolve();const L=!ae&&o8(mw($.fullPath,0))||(re||!ae)&&history.state&&history.state.scroll||null;return Ft().then(()=>Ee($,Z,L)).then(k=>k&&s8(k)).catch(k=>q(k,$,Z))}const de=$=>s.go($);let ye;const Se=new Set,G={currentRoute:l,listening:!0,addRoute:h,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:g,resolve:b,options:t,push:p,replace:v,go:de,back:()=>de(-1),forward:()=>de(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:O.add,isReady:ie,install($){$.component("RouterLink",dA),$.component("RouterView",N8),$.config.globalProperties.$router=G,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>A(l)}),co&&!ye&&l.value===zs&&(ye=!0,p(s.location).catch(re=>{}));const Z={};for(const re in zs)Object.defineProperty(Z,re,{get:()=>l.value[re],enumerable:!0});$.provide(Hc,G),$.provide(tg,i_(Z)),$.provide(dp,l);const ae=$.unmount;Se.add($),$.unmount=function(){Se.delete($),Se.size<1&&(u=zs,V&&V(),V=null,l.value=zs,ye=!1,H=!1),ae()}}};function W($){return $.reduce((Z,ae)=>Z.then(()=>T(ae)),Promise.resolve())}return G}function fA(){return jt(Hc)}function yl(t){return jt(tg)}var j8=Object.defineProperty,U8=(t,e,n)=>e in t?j8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,so=(t,e,n)=>U8(t,typeof e!="symbol"?e+"":e,n);function q8(t,e){return ic((n,r)=>{let s=di(So.routesParams.value[t]??{},e);return et(So.routesParams,()=>{const i=di(So.routesParams.value[t]??{},e);for(const[o,a]of Object.entries(i))if(a===s[o]){s=i,r();return}}),{get:()=>Ne(s,()=>n()),set:()=>console.warn("Computed models ref was not set (it is immutable).")}})}const B8=Wi({name:"router",initialState:{flashRoute:null},persist:["flashRoute"]});class V8 extends B8{constructor(){super(),so(this,"currentRoute"),so(this,"routesParams"),so(this,"router"),so(this,"bindings"),so(this,"history"),so(this,"routesStopWatchers"),this.router=sr(null),this.bindings={},this.history=[],this.routesStopWatchers={},this.routesParams=sr({}),this.currentRoute=J(()=>{const e=this.router.value,n=this.routesParams.value;if(!e)return null;const r=A(e.currentRoute);return{...r,params:n==null?void 0:n[r.path],rawParams:r.params}})}use(e,n={}){this.router.value=e,this.bindings=n.bindings??{},e.beforeEach(DC(()=>this.handleStatic404Redirect())),e.beforeEach(r=>this.onEnterRoute(r.path,r.params))}async boot(){We.on("auth:before-login",()=>this.storeFlashRoute()),We.on("auth:login",()=>this.restoreFlashRoute()),We.on("purge-storage",()=>this.push({name:"home"}))}__get(e){return this.router.value?super.__get(e)??Reflect.get(this.router.value,e):super.__get(e)}async onEnterRoute(e,n){var r;if(e in this.routesParams.value)return;const s={...n};for(const[o,a]of Object.entries(n)){const l=await this.resolveBinding(e,o,a);et(l,u=>{this.routesParams.value={...this.routesParams.value,[e]:{...this.routesParams.value[e],[o]:u}}}),s[o]=l.value}this.history=this.history.slice(0,3),this.history.unshift(e);const i={...this.routesParams.value,[e]:{...s,...this.routesParams.value[e]??{}}};for(const o in i)this.history.includes(o)||(r=this.routesStopWatchers[o])==null||r.forEach(a=>a());this.routesParams.value=Zs(i,this.history),this.routesStopWatchers=Zs(this.routesStopWatchers,this.history)}handleStatic404Redirect(){const e=mr.pull("static-404-redirect");e&&this.replace(e)}storeFlashRoute(){this.flashRoute=Zs(this.currentRoute.value,["path","query","hash"])}async restoreFlashRoute(){if(!this.flashRoute)return;const e=this.flashRoute;lt.whenReady(()=>this.replace(e)),this.flashRoute=null}async resolveBinding(e,n,r){const s=this.bindings[n];if(Array.isArray(r)||!s)return _e(r);await lt.ready;const i=q8(e,n),o=Kx(()=>Promise.resolve(s(r,i.value)));return kq(()=>o.value)}}const So=Kr(V8);class z8{constructor(e){this.value=e}}const H8=me({__name:"Page",props:{class:{}},setup(t){const e=J(()=>wt("mx-auto flex w-full max-w-screen-content grow flex-col px-edge py-8",t.class));return(n,r)=>(F(),be("main",{class:Ve(e.value)},[Ae(n.$slots,"default")],2))}}),K8={class:"text-2xl font-bold"},hA=me({__name:"NotFound",setup(t){return(e,n)=>(F(),ce(H8,{class:"items-center justify-center"},{default:se(()=>[te("h2",K8,Te(e.$td("notFound.title","404: Not Found")),1),oe(A(Po),{route:"home"},{default:se(()=>[rt(Te(e.$td("notFound.home","Go home")),1)]),_:1})]),_:1}))}});function W8(t,e){const n=yl(),r=J(()=>{var i;return(i=So.routesParams)==null?void 0:i.value[n.path]}),s=J(()=>!(e!=null&&e.title)||!r.value?null:typeof e.title=="string"?e.title:e.title(r.value));return qt(()=>X8(s.value)),()=>Object.values(r.value??{}).some(i=>i instanceof z8)?nr(hA):nr(t,r.value)}function Rw(t,e){return me({setup:()=>W8(t,e)})}function G8(t){if(t.component){if(typeof t.component=="function"){const e=t.component;t.component=async()=>{const{default:n}=await e();return Rw(n,t)};return}t.component=Rw(t.component,t)}}function Tw(t){return async function(...e){return await lt.ready,t.call(this,...e)}}function J8(t){if(t.beforeEnter){if(Array.isArray(t.beforeEnter)){t.beforeEnter=t.beforeEnter.map(Tw);return}t.beforeEnter=Tw(t.beforeEnter)}}function X8(t){if(globalThis.document){if(!t){globalThis.document.title=lt.name;return}globalThis.document.title=`${t} | ${lt.name}`}}function Ow(t){return G8(t),J8(t),t}function Y8(t){const e=t.map(Ow);return e.some(n=>n.name==="not-found"||n.name==="404")||e.push(Ow({name:"not-found",path:"/:path(.*)*",component:hA})),e}const Q8={$router:So};function Z8(t){return{async install(e){const n=F8({routes:t.routes,history:y8(t.basePath??Pr.basePath)});Ht.registerComponent("router-link",dA),So.use(n,t),e.use(n),mL({resolve:r=>n.resolve({name:r}).href,visit:async r=>void await n.push({name:r})}),await Gi(e,Q8)}}}const e5=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},t5={},n5={class:"max-w-screen-content px-edge mx-auto flex w-full items-center justify-between gap-2 pt-8"};function r5(t,e){const n=Po,r=cN,s=D4;return F(),be("header",n5,[te("h1",null,[oe(n,{route:"home",class:"text-2xl font-semibold tracking-tight"},{default:se(()=>[rt(Te(t.$t("app.title")),1)]),_:1})]),e[0]||(e[0]=te("div",{class:"grow"},null,-1)),oe(r),oe(s)])}const s5=e5(t5,[["render",r5]]),i5={key:0,class:"h-full w-full"},o5=me({__name:"App",setup(t){const e=yl();return(n,r)=>{const s=sl("router-view"),i=s5,o=zM;return A(e).name==="reader"?(F(),be("div",i5,[oe(s)])):(F(),ce(o,{key:1},{default:se(()=>[oe(i),oe(s)]),_:1}))}}}),a5={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function l5(t,e){return F(),be("svg",a5,[...e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6z"},null,-1)])])}const ng=st({name:"mdi-delete",render:l5}),u5="manga-reader-db",Wo=Eu(u5,2,{upgrade(t,e){e<1&&t.createObjectStore("images"),e<2&&t.createObjectStore("mangas",{keyPath:"id"})}}),c5=async t=>{const e=Math.random().toString(36).substr(2,9)+Date.now().toString(36);return await(await Wo).put("images",t,e),e},Dw=async t=>await Promise.all(t.map(c5)),d5=async t=>(await Wo).get("images",t),f5=async t=>{await(await Wo).delete("images",t)},Bf=async t=>{await Promise.all(t.map(f5))},h5=async()=>(await Wo).getAll("mangas"),Gl=async t=>{await(await Wo).put("mangas",t)},p5=async t=>{await(await Wo).delete("mangas",t)},kw=()=>Math.random().toString(36).substr(2,9),pr=Gn({mangas:[]}),Pw=t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>{e({width:r.width,height:r.height}),URL.revokeObjectURL(r.src)},r.onerror=n,r.src=URL.createObjectURL(t)}),m5=async t=>{for(const e of t.chapters)for(const n of Object.values(e.pages))for(const r of n)if(r.imageId)try{const s=await d5(r.imageId);s&&(r.url=URL.createObjectURL(s))}catch(s){console.error(`Failed to load image ${r.imageId}`,s),alert(`Failed to load image ${r.imageId} (look at the console for more details)`)}},g5=async()=>{try{const t=await h5();for(const r of t)await m5(r);const e=new Set(pr.mangas.map(r=>r.id)),n=[...pr.mangas];for(const r of t)e.has(r.id)||n.push(r);pr.mangas=n}catch(t){console.error("Failed to initialize manga store",t),alert("Failed to initialize manga store (look at the console for more details)")}};g5();const Kc=()=>{const t=async o=>{const a={...o,id:kw(),chapters:[]};pr.mangas.push(a),await Gl(a)},e=async o=>{const a=pr.mangas.find(l=>l.id===o);if(a){for(const l of a.chapters)for(const u of Object.values(l.pages)){const c=u.map(d=>d.imageId).filter(d=>!!d);c.length>0&&await Bf(c)}pr.mangas=pr.mangas.filter(l=>l.id!==o),await p5(o)}},n=async(o,a)=>{const l=pr.mangas.find(u=>u.id===o);if(l){const u=[...a.files].sort((m,g)=>m.name.localeCompare(g.name,void 0,{numeric:!0,sensitivity:"base"})),c=await Promise.all(u.map(Pw)),d=await Dw(u),f=u.map((m,g)=>{const{width:x,height:b}=c[g],E=x>b;return{pageNumber:g+1,url:URL.createObjectURL(m),imageId:d[g],fileName:m.name,isDoublePage:E}}),h=l.chapters.find(m=>m.number===a.number);if(h)h.pages[a.language]=f;else{const m={id:kw(),number:a.number,pages:{[a.language]:f}};l.chapters.push(m),l.chapters.sort((g,x)=>g.number-x.number)}await Gl(Ye(l))}},r=async(o,a,l,u)=>{const c=pr.mangas.find(b=>b.id===o);if(!c)return;const d=c.chapters.find(b=>b.id===a);if(!d)return;const f=d.pages[l]||[],h=new Set(f.map(b=>b.imageId).filter(b=>!!b)),m=new Set(u.map(b=>b.imageId).filter(b=>!!b)),g=[];for(const b of h)m.has(b)||typeof b=="string"&&g.push(b);g.length>0&&await Bf(g);const x=[];for(let b=0;b<u.length;b++){const E=u[b];if(E.file){const[_]=await Dw([E.file]),{width:p,height:v}=await Pw(E.file),S=p>v;x.push({pageNumber:b+1,url:URL.createObjectURL(E.file),imageId:_,fileName:E.file.name,isDoublePage:S})}else{const _=f.find(p=>p.imageId===E.imageId);x.push({pageNumber:b+1,url:E.url,imageId:E.imageId,fileName:E.fileName,isDoublePage:_==null?void 0:_.isDoublePage})}}d.pages[l]=x,await Gl(Ye(c))},s=async(o,a)=>{const l=pr.mangas.find(u=>u.id===o);if(l){const u=l.chapters.find(c=>c.id===a);if(u){const d=Object.values(u.pages).flat().map(f=>f.imageId).filter(f=>!!f);await Bf(d),l.chapters=l.chapters.filter(f=>f.id!==a),await Gl(Ye(l))}}},i=o=>pr.mangas.find(a=>a.id===o);return{mangas:J(()=>pr.mangas),addManga:t,deleteManga:e,addChapter:n,updateChapter:r,deleteChapter:s,getManga:i}},y5={class:"px-4 py-6 md:px-8"},v5={class:"mb-8 rounded-lg bg-gray-800 p-6 shadow-md"},b5={key:0,class:"flex h-32 items-center justify-center rounded-lg bg-gray-800 text-gray-400"},w5={key:1,class:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"},_5={class:"aspect-[2/3] w-full overflow-hidden"},x5=["src","alt"],E5={class:"p-3"},A5=["title"],S5=["onClick"],I5=me({__name:"Home",setup(t){const{mangas:e,addManga:n,deleteManga:r}=Kc(),s=Gn({title:"",coverUrl:"",description:""}),i=()=>{n({title:s.title,coverUrl:s.coverUrl||`https://placehold.co/400x600/333333/ffffff?text=${encodeURIComponent(s.title)}`,description:s.description}),s.title="",s.coverUrl="",s.description=""};return(o,a)=>{const l=sl("router-link"),u=ng;return F(),be("div",y5,[te("div",v5,[a[4]||(a[4]=te("h2",{class:"mb-4 text-xl font-bold text-gray-100"}," Add New Manga ",-1)),te("form",{class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",onSubmit:Mn(i,["prevent"])},[Ts(te("input",{"onUpdate:modelValue":a[0]||(a[0]=c=>s.title=c),type:"text",placeholder:"Manga Title",required:"",class:"focus:ring-primary-500 rounded bg-gray-700 p-2 text-white outline-none focus:ring-2"},null,512),[[Ia,s.title]]),Ts(te("input",{"onUpdate:modelValue":a[1]||(a[1]=c=>s.coverUrl=c),type:"url",placeholder:"Cover URL (optional)",class:"focus:ring-primary-500 rounded bg-gray-700 p-2 text-white outline-none focus:ring-2"},null,512),[[Ia,s.coverUrl]]),Ts(te("textarea",{"onUpdate:modelValue":a[2]||(a[2]=c=>s.description=c),placeholder:"Description",class:"focus:ring-primary-500 col-span-full rounded bg-gray-700 p-2 text-white outline-none focus:ring-2 lg:col-span-1"},null,512),[[Ia,s.description]]),a[3]||(a[3]=te("button",{type:"submit",class:"bg-primary-600 hover:bg-primary-700 col-span-full rounded px-4 py-2 font-bold text-white transition-colors"}," Add Manga ",-1))],32)]),a[5]||(a[5]=te("h2",{class:"mb-6 text-xl font-bold text-gray-100"}," Library ",-1)),A(e).length===0?(F(),be("div",b5," Your library is empty. Add a manga to get started! ")):(F(),be("div",w5,[(F(!0),be(Ze,null,ln(A(e),c=>(F(),be("div",{key:c.id,class:"group relative flex flex-col overflow-hidden rounded-lg bg-gray-800 shadow-md transition-transform hover:scale-105"},[oe(l,{to:{name:"manga-details",params:{id:c.id}},class:"grow"},{default:se(()=>[te("div",_5,[te("img",{src:c.coverUrl||"https://placehold.co/400x600?text=No+Cover",alt:c.title,class:"h-full w-full object-cover transition-opacity group-hover:opacity-90",loading:"lazy"},null,8,x5)]),te("div",E5,[te("h3",{class:"truncate text-sm font-semibold text-white",title:c.title},Te(c.title),9,A5)])]),_:2},1032,["to"]),te("button",{class:"absolute top-2 right-2 rounded-full bg-red-600 p-1.5 text-white opacity-100 transition-opacity hover:bg-red-700 md:opacity-0 md:group-hover:opacity-100",title:"Delete Manga",onClick:d=>A(r)(c.id)},[oe(u,{class:"h-4 w-4"})],8,S5)]))),128))]))])}}}),C5={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function R5(t,e){return F(),be("svg",C5,[...e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"},null,-1)])])}const T5=st({name:"mdi-pencil",render:R5}),O5={key:0,class:"mx-auto max-w-5xl px-4 py-8 md:px-8"},D5={class:"flex flex-col gap-8 md:flex-row"},k5={class:"mx-auto w-48 flex-shrink-0 md:mx-0 md:w-64"},P5=["src","alt"],$5={class:"flex-grow"},L5={class:"mb-4 text-3xl font-bold text-white"},M5={class:"mb-8"},N5={class:"leading-relaxed text-gray-300"},F5={class:"mb-8 rounded-lg bg-gray-800 p-6 shadow-md"},j5={class:"relative lg:col-span-1"},U5=["disabled"],q5={class:"flex flex-col gap-2"},B5={class:"min-w-[150px] font-medium text-white"},V5={class:"flex flex-wrap items-center gap-2"},z5={class:"ml-auto flex items-center gap-4"},H5=["onClick"],K5={key:1,class:"flex h-64 items-center justify-center text-gray-400"},W5=me({__name:"MangaDetails",setup(t){var d;const n=yl().params.id,{mangas:r,addChapter:s,deleteChapter:i}=Kc(),o=J(()=>r.value.find(f=>f.id===n)),a=_e(!1),l=Gn({number:(((d=o.value)==null?void 0:d.chapters.length)??0)+1,language:"en",files:[]}),u=f=>{const h=f.target;h.files&&(l.files=Array.from(h.files))},c=async()=>{if(!(!o.value||l.files.length===0)){a.value=!0;try{await s(o.value.id,{number:l.number,language:l.language,files:l.files}),l.number=(o.value.chapters.length??0)+1,l.files=[];const f=document.querySelector('input[type="file"]');f&&(f.value="")}finally{a.value=!1}}};return(f,h)=>{const m=sl("router-link"),g=T5,x=ng;return o.value?(F(),be("div",O5,[te("div",D5,[te("div",k5,[te("img",{src:o.value.coverUrl,alt:o.value.title,class:"h-auto w-full rounded-lg shadow-lg"},null,8,P5)]),te("div",$5,[te("h1",L5,Te(o.value.title),1),te("div",M5,[h[2]||(h[2]=te("h3",{class:"mb-2 text-lg font-semibold text-gray-200"}," Synopsis ",-1)),te("p",N5,Te(o.value.description),1)]),te("div",F5,[h[4]||(h[4]=te("h3",{class:"mb-4 text-lg font-bold text-gray-100"}," Add New Chapter ",-1)),te("form",{class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",onSubmit:Mn(c,["prevent"])},[Ts(te("input",{"onUpdate:modelValue":h[0]||(h[0]=b=>l.number=b),type:"number",placeholder:"Ch #",required:"",class:"focus:ring-primary-500 rounded bg-gray-700 p-2 text-white outline-none focus:ring-2"},null,512),[[Ia,l.number,void 0,{number:!0}]]),Ts(te("select",{"onUpdate:modelValue":h[1]||(h[1]=b=>l.language=b),class:"focus:ring-primary-500 rounded bg-gray-700 p-2 text-white outline-none focus:ring-2"},[...h[3]||(h[3]=[lI('<option value="en"> English </option><option value="es"> Spanish </option><option value="fr"> French </option><option value="jp"> Japanese </option><option value="de"> German </option><option value="it"> Italian </option><option value="pt"> Portuguese </option><option value="ru"> Russian </option>',8)])],512),[[FI,l.language]]),te("div",j5,[te("input",{type:"file",accept:"image/*",multiple:"",required:"",class:"w-full text-sm text-gray-400 file:mr-4 file:rounded file:border-0 file:bg-gray-700 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-gray-600",onChange:u},null,32)]),te("button",{type:"submit",disabled:a.value,class:"bg-primary-600 hover:bg-primary-700 col-span-full rounded px-4 py-2 font-bold text-white transition-colors disabled:cursor-not-allowed disabled:opacity-50"},Te(a.value?"Uploading...":"Add Chapter / Version"),9,U5)],32)]),te("div",null,[h[5]||(h[5]=te("h3",{class:"mb-4 text-xl font-bold text-gray-200"}," Chapters ",-1)),te("div",q5,[(F(!0),be(Ze,null,ln(o.value.chapters,b=>(F(),be("div",{key:b.id,class:"group flex flex-wrap items-center justify-between gap-4 rounded bg-gray-800 p-4 transition-colors hover:bg-gray-700"},[te("div",B5," Chapter "+Te(b.number),1),te("div",V5,[(F(!0),be(Ze,null,ln(b.pages,(E,_)=>(F(),ce(m,{key:_,to:{name:"reader",params:{chapterId:b.id},query:{lang:_}},class:"hover:bg-primary-600 rounded bg-gray-600 px-2 py-1 text-xs font-bold text-white uppercase",title:`Read in ${_}`},{default:se(()=>[rt(Te(_),1)]),_:2},1032,["to","title"]))),128))]),te("div",z5,[oe(m,{to:{name:"edit-chapter",params:{mangaId:o.value.id,chapterId:b.id}},class:"rounded-full p-1.5 text-gray-400 opacity-100 transition-opacity hover:bg-gray-600 hover:text-white md:opacity-0 md:group-hover:opacity-100",title:"Edit Chapter"},{default:se(()=>[oe(g,{class:"h-4 w-4"})]),_:1},8,["to"]),te("button",{class:"rounded-full bg-red-600 p-1.5 text-white opacity-100 transition-opacity hover:bg-red-700 md:opacity-0 md:group-hover:opacity-100",title:"Delete Chapter",onClick:E=>A(i)(o.value.id,b.id)},[oe(x,{class:"h-4 w-4"})],8,H5)])]))),128))])])])])])):(F(),be("div",K5," Manga not found. "))}}}),G5={key:0,class:"relative flex min-h-screen flex-col bg-black text-white"},J5={key:0,class:"flex items-center gap-2"},X5={class:"text-sm text-gray-400"},Y5={class:"uppercase"},Q5={class:"flex h-full w-full items-center justify-center"},Z5={class:"flex h-full w-full items-center justify-center gap-1"},e6=["src"],t6=["src"],n6={key:0,class:"fixed right-0 bottom-0 left-0 z-50 flex items-center justify-between bg-black/80 p-4 backdrop-blur-sm md:hidden"},r6=["disabled"],s6={class:"text-xs"},i6=["disabled"],o6={key:1,class:"flex h-screen items-center justify-center text-white"},a6=me({__name:"Reader",setup(t){const e=yl(),n=fA(),r=e.params.chapterId,{mangas:s}=Kc(),i=J(()=>s.value.find(U=>U.chapters.some(z=>z.id===r))),o=J(()=>{var U;return(U=i.value)==null?void 0:U.chapters.find(z=>z.id===r)}),a=_e(0),l=_e(!1),u=J(()=>o.value?Object.keys(o.value.pages):[]),c=_e(e.query.lang||u.value[0]||"en");et(()=>e.query.lang,U=>{U&&typeof U=="string"&&(c.value=U)}),et(c,U=>{U!==e.query.lang&&n.replace({...e,query:{...e.query,lang:U}})});const d=J(()=>{if(!o.value)return[];const U=[],z=u.value,V={};for(z.forEach(P=>V[P]=0);z.some(P=>o.value&&V[P]<o.value.pages[P].length);){const P={pages:{}};let X=!1;for(const O of z){const H=V[O],q=o.value.pages[O];if(H<q.length&&q[H].isDoublePage){X=!0;break}}for(const O of z){const H=V[O],q=o.value.pages[O],ie=q.length-H;if(ie<=0){P.pages[O]=[];continue}const B=q[H];if(X)if(B.isDoublePage)P.pages[O]=[B],V[O]++;else if(ie>=2){const ue=q[H+1];ue.isDoublePage?(P.pages[O]=[B],V[O]++):(P.pages[O]=[B,ue],V[O]+=2)}else P.pages[O]=[B],V[O]++;else P.pages[O]=[B],V[O]++}U.push(P)}return U}),f=J(()=>{if(d.value.length===0)return[];const U=d.value[a.value];return U?U.pages[c.value]||U.pages[u.value[0]]||[]:[]}),h=()=>{l.value=!l.value},m=()=>{a.value<d.value.length-1&&(a.value++,window.scrollTo(0,0))},g=()=>{a.value>0&&(a.value--,window.scrollTo(0,0))},x=U=>{U.key==="ArrowRight"&&g(),U.key==="ArrowLeft"&&m(),U.key==="Escape"&&(l.value=!1)},b=_e(0),E=_e(0),_=_e(0),p=_e(0),v=_e(!1),S=J(()=>v.value?{transform:`translateX(${E.value-b.value}px)`}:{}),C=U=>{b.value=U.touches[0].screenX,E.value=b.value,_.value=Date.now(),v.value=!0},R=U=>{v.value&&(E.value=U.touches[0].screenX)},T=U=>{v.value=!1;const z=U.changedTouches[0].screenX,V=b.value-z;if(Math.abs(V)>50){V<0?m():g();return}const P=Date.now(),X=P-p.value;X<300&&X>0&&Math.abs(V)<10&&(D(),U.stopPropagation()),p.value=P},D=()=>{const U=u.value;if(U.length<=1)return;const V=(U.indexOf(c.value)+1)%U.length;c.value=U[V]};return Wt(()=>{window.addEventListener("keydown",x)}),ar(()=>{window.removeEventListener("keydown",x)}),(U,z)=>{const V=sl("router-link");return o.value&&i.value?(F(),be("div",G5,[te("div",{class:Ve(["fixed top-0 right-0 left-0 z-50 flex items-center justify-between bg-black/80 p-4 backdrop-blur-sm transition-opacity duration-300",{"opacity-0 hover:opacity-100":l.value}])},[oe(V,{to:{name:"manga-details",params:{id:i.value.id}},class:"hover:text-primary-400 flex items-center gap-2 text-sm font-medium"},{default:se(()=>[rt("  Back to "+Te(i.value.title),1)]),_:1},8,["to"]),u.value.length>1?(F(),be("div",J5,[te("button",{class:"rounded border border-gray-600 bg-gray-800 px-2 py-1 text-xs text-white hover:bg-gray-700",title:"Switch Language",onClick:Mn(D,["stop"])},Te(c.value.toUpperCase()),1)])):je("",!0),te("div",X5,[rt(" Chapter "+Te(o.value.number)+" ",1),te("span",Y5,"["+Te(c.value)+"]",1),rt(": Slide "+Te(a.value+1)+" / "+Te(d.value.length),1)])],2),te("div",{class:"flex grow items-center justify-center overflow-hidden py-0 pb-12 md:py-12",onClick:h,onTouchstart:C,onTouchmove:R,onTouchend:T},[te("div",{class:"relative flex h-full w-full max-w-5xl items-center justify-center transition-transform duration-200 ease-out",style:jr(S.value)},[te("div",{class:"absolute inset-y-0 left-0 z-10 w-1/3 cursor-w-resize",title:"Next Page",onClick:Mn(m,["stop"])}),te("div",{class:"absolute inset-y-0 right-0 z-10 w-1/3 cursor-e-resize",title:"Previous Page",onClick:Mn(g,["stop"])}),te("div",Q5,[te("div",Z5,[f.value[1]?(F(),be("img",{key:0,src:f.value[1].url,alt:"Manga Page Left",class:"h-auto max-h-full w-auto max-w-[50%] object-contain select-none"},null,8,e6)):je("",!0),f.value[0]?(F(),be("img",{key:1,src:f.value[0].url,alt:"Manga Page Right",class:Ve(["h-auto max-h-full w-auto object-contain select-none",{"max-w-[50%]":f.value.length>1,"max-w-full":f.value.length===1}])},null,10,t6)):je("",!0)])])],4)],32),l.value?je("",!0):(F(),be("div",n6,[te("button",{class:"p-2 text-white disabled:opacity-50",disabled:a.value===0,onClick:g}," Prev ",8,r6),te("span",s6,Te(a.value+1)+" / "+Te(d.value.length),1),te("button",{class:"p-2 text-white disabled:opacity-50",disabled:a.value>=d.value.length-1,onClick:m}," Next ",8,i6)]))])):(F(),be("div",o6," Chapter not found. "))}}}),l6={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function u6(t,e){return F(),be("svg",l6,[...e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"},null,-1)])])}const c6=st({name:"mdi-close",render:u6}),d6={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function f6(t,e){return F(),be("svg",d6,[...e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M11 4h2v12l5.5-5.5l1.42 1.42L12 19.84l-7.92-7.92L5.5 10.5L11 16z"},null,-1)])])}const h6=st({name:"mdi-arrow-down",render:f6}),p6={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function m6(t,e){return F(),be("svg",p6,[...e[0]||(e[0]=[te("path",{fill:"currentColor",d:"M13 20h-2V8l-5.5 5.5l-1.42-1.42L12 4.16l7.92 7.92l-1.42 1.42L13 8z"},null,-1)])])}const g6=st({name:"mdi-arrow-up",render:m6}),y6={key:0,class:"mx-auto max-w-5xl px-4 py-8 md:px-8"},v6={class:"mb-6 flex items-center justify-between"},b6={class:"text-2xl font-bold text-white"},w6={class:"text-gray-400"},_6={class:"flex gap-2"},x6=["disabled"],E6={class:"mb-6 border-b border-gray-700"},A6={class:"-mb-px flex space-x-4 overflow-x-auto","aria-label":"Tabs"},S6=["onClick"],I6={class:"mb-4 flex flex-wrap items-center gap-4 rounded bg-gray-800 p-4"},C6={class:"relative"},R6=["disabled"],T6={class:"overflow-x-auto rounded-lg bg-gray-800 shadow"},O6={class:"w-full text-left text-sm text-gray-400"},D6={class:"bg-gray-700 text-xs text-gray-100 uppercase"},k6={scope:"col",class:"px-6 py-3"},P6=["checked"],$6={class:"px-6 py-4"},L6=["onUpdate:modelValue"],M6={class:"px-6 py-4 font-medium text-white"},N6={class:"px-6 py-4"},F6={class:"h-20 w-16 overflow-hidden rounded bg-gray-900"},j6=["src","onClick"],U6={class:"px-6 py-4 font-mono text-xs text-gray-300"},q6={class:"px-6 py-4"},B6={key:0,class:"rounded bg-green-900 px-2 py-1 text-xs text-green-100"},V6={key:1,class:"text-xs text-gray-500"},z6={class:"px-6 py-4 text-right"},H6={class:"flex justify-end gap-2"},K6=["disabled","onClick"],W6=["disabled","onClick"],G6=["onClick"],J6={key:0},X6={class:"relative max-h-full max-w-full"},Y6=["src"],Q6={key:1,class:"flex h-64 items-center justify-center text-gray-400"},Z6=me({__name:"EditChapter",setup(t){const e=yl(),n=fA(),{getManga:r,updateChapter:s}=Kc(),i=e.params.mangaId,o=e.params.chapterId,a=J(()=>r(i)),l=J(()=>{var P;return(P=a.value)==null?void 0:P.chapters.find(X=>X.id===o)}),u=_e([]),c=_e(!1),d=_e("en"),f=J(()=>l.value?Object.keys(l.value.pages):[]),h=_e(null),m=()=>{if(!l.value)return;!l.value.pages[d.value]&&f.value.length>0&&(d.value=f.value[0]);const P=l.value.pages[d.value]||[];u.value=P.map(X=>({tempId:Math.random().toString(36),url:X.url,imageId:X.imageId,fileName:X.fileName,selected:!1}))};Wt(()=>{l.value?m():n.push("/")});const x=P=>{d.value===P||u.value.some(O=>!!O.file)&&!confirm("You have unsaved uploads. Switching languages will discard them. Continue?")||(d.value=P,m())},b=J(()=>u.value.filter(P=>P.selected).length),E=J(()=>u.value.length>0&&u.value.every(P=>P.selected)),_=()=>{const P=!E.value;u.value.forEach(X=>X.selected=P)},p=P=>{const X=P.target;X.files&&(Array.from(X.files).sort((H,q)=>H.name.localeCompare(q.name,void 0,{numeric:!0,sensitivity:"base"})).forEach(H=>{u.value.push({tempId:Math.random().toString(36),url:URL.createObjectURL(H),file:H,fileName:H.name,selected:!1})}),X.value="")},v=()=>{u.value.length>0&&!confirm("This will reorder all pages based on their filenames. Continue?")||u.value.sort((P,X)=>{const O=P.fileName||"",H=X.fileName||"";return O.localeCompare(H,void 0,{numeric:!0,sensitivity:"base"})})},S=()=>{confirm(`Are you sure you want to delete ${b.value} pages?`)&&(u.value=u.value.filter(P=>!P.selected))},C=P=>{u.value.splice(P,1)},R=P=>{if(P>0){const X=u.value[P];u.value[P]=u.value[P-1],u.value[P-1]=X}},T=P=>{if(P<u.value.length-1){const X=u.value[P];u.value[P]=u.value[P+1],u.value[P+1]=X}},D=async()=>{c.value=!0;try{await s(i,o,d.value,u.value),m(),alert("Changes saved successfully!")}catch(P){console.error(P),alert("Failed to save changes (look at the console for more details)")}finally{c.value=!1}},U=()=>{confirm("Discard unsaved changes?")&&n.back()},z=P=>{h.value=P},V=()=>{h.value=null};return(P,X)=>{const O=g6,H=h6,q=ng,ie=c6;return a.value&&l.value?(F(),be("div",y6,[te("div",v6,[te("div",null,[te("h1",b6," Edit Chapter "+Te(l.value.number),1),te("p",w6,Te(a.value.title),1)]),te("div",_6,[te("button",{class:"rounded bg-gray-700 px-4 py-2 font-medium text-white transition-colors hover:bg-gray-600",onClick:U}," Cancel "),te("button",{disabled:c.value,class:"bg-primary-600 hover:bg-primary-700 rounded px-4 py-2 font-bold text-white transition-colors disabled:opacity-50",onClick:D},Te(c.value?"Saving...":"Save Changes"),9,x6)])]),te("div",E6,[te("nav",A6,[(F(!0),be(Ze,null,ln(f.value,B=>(F(),be("button",{key:B,class:Ve([d.value===B?"border-primary-500 text-primary-500":"border-transparent text-gray-400 hover:border-gray-300 hover:text-gray-300","border-b-2 px-1 py-4 text-sm font-medium whitespace-nowrap uppercase"]),onClick:ue=>x(B)},Te(B),11,S6))),128))])]),te("div",I6,[te("div",C6,[te("input",{id:"add-pages-input",type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:p},null,32),X[0]||(X[0]=te("label",{for:"add-pages-input",class:"cursor-pointer rounded bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700"}," Add Pages ",-1))]),te("button",{class:"rounded bg-gray-600 px-4 py-2 text-sm font-medium text-white hover:bg-gray-700",onClick:v}," Sort by Filename "),te("button",{disabled:b.value===0,class:"rounded bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 disabled:opacity-50",onClick:S}," Delete Selected ("+Te(b.value)+") ",9,R6)]),te("div",T6,[te("table",O6,[te("thead",D6,[te("tr",null,[te("th",k6,[te("input",{type:"checkbox",checked:E.value,class:"text-primary-600 focus:ring-primary-500 rounded border-gray-600 bg-gray-700",onChange:_},null,40,P6)]),X[1]||(X[1]=te("th",{scope:"col",class:"px-6 py-3"}," # ",-1)),X[2]||(X[2]=te("th",{scope:"col",class:"px-6 py-3"}," Preview ",-1)),X[3]||(X[3]=te("th",{scope:"col",class:"px-6 py-3"}," Filename ",-1)),X[4]||(X[4]=te("th",{scope:"col",class:"px-6 py-3"}," Source ",-1)),X[5]||(X[5]=te("th",{scope:"col",class:"px-6 py-3 text-right"}," Actions ",-1))])]),te("tbody",null,[(F(!0),be(Ze,null,ln(u.value,(B,ue)=>(F(),be("tr",{key:B.tempId,class:"hover:bg-gray-750 border-b border-gray-700"},[te("td",$6,[Ts(te("input",{"onUpdate:modelValue":de=>B.selected=de,type:"checkbox",class:"text-primary-600 focus:ring-primary-500 rounded border-gray-600 bg-gray-700"},null,8,L6),[[J_,B.selected]])]),te("td",M6,Te(ue+1),1),te("td",N6,[te("div",F6,[te("img",{src:B.url,alt:"Page Preview",class:"h-full w-full cursor-pointer object-cover",onClick:de=>z(B.url)},null,8,j6)])]),te("td",U6,Te(B.fileName||"-"),1),te("td",q6,[B.file?(F(),be("span",B6," New Upload ")):(F(),be("span",V6,"Existing"))]),te("td",z6,[te("div",H6,[te("button",{disabled:ue===0,class:"rounded p-1 hover:bg-gray-600 disabled:opacity-30",title:"Move Up",onClick:de=>R(ue)},[oe(O,{class:"h-5 w-5"})],8,K6),te("button",{disabled:ue===u.value.length-1,class:"rounded p-1 hover:bg-gray-600 disabled:opacity-30",title:"Move Down",onClick:de=>T(ue)},[oe(H,{class:"h-5 w-5"})],8,W6),te("button",{class:"rounded p-1 text-red-500 hover:bg-gray-600",title:"Delete",onClick:de=>C(ue)},[oe(q,{class:"h-5 w-5"})],8,G6)])])]))),128)),u.value.length===0?(F(),be("tr",J6,[...X[6]||(X[6]=[te("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-500"}," No pages in this version. Add some! ",-1)])])):je("",!0)])])]),h.value?(F(),be("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4",onClick:V},[te("div",X6,[te("img",{src:h.value,alt:"Full Preview",class:"max-h-[90vh] max-w-full rounded shadow-lg"},null,8,Y6),te("button",{class:"absolute -top-4 -right-4 rounded-full bg-white p-1 text-black shadow hover:bg-gray-200",onClick:V},[oe(ie,{class:"h-6 w-6"})])])])):je("",!0)])):(F(),be("div",Q6," Loading... "))}}}),eV=Y8([{name:"home",path:"/",component:I5},{name:"manga-details",path:"/manga/:id",component:W5},{name:"edit-chapter",path:"/manga/:mangaId/chapter/:chapterId/edit",component:Z6},{name:"reader",path:"/read/:chapterId",component:a6}]);UM(o5,{plugins:[yj({messages:Object.assign({"/src/lang/en.yaml":()=>Mi(()=>import("./en-BxrmxaJp.js"),[])})}),Z8({routes:eV}),Mq({models:Object.assign({})}),cB(),P4()]});export{Yv as c,ty as d,$j as g,Eu as o};
//# sourceMappingURL=index-BR7NvfTL.js.map
